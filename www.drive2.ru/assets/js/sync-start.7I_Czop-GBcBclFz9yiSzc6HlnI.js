/*! For licenses information, see /assets/js/LICENSES.txt */
"use strict";(()=>{Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,enumerable:!1,value(r){let i={};for(let o of r){if(Object(o)!==o)throw new TypeError("iterable for fromEntries should yield objects");let{"0":s,"1":l}=o;Object.defineProperty(i,s,{configurable:!0,enumerable:!0,writable:!0,value:l})}return i}});(function(){"use strict";if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function r(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch{return null}}var i=function(t){for(var e=t,n=r(e);n;)e=n.ownerDocument,n=r(e);return e}(window.document),o=[],s=null,l=null;function d(t){this.time=t.time,this.target=t.target,this.rootBounds=E(t.rootBounds),this.boundingClientRect=E(t.boundingClientRect),this.intersectionRect=E(t.intersectionRect||m()),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,a=this.intersectionRect,c=a.width*a.height;n?this.intersectionRatio=Number((c/n).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function u(t,e){var n=e||{};if(typeof t!="function")throw new Error("callback must be a function");if(n.root&&n.root.nodeType!=1&&n.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=w(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(a){return a.value+a.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}u.prototype.THROTTLE_TIMEOUT=100,u.prototype.POLL_INTERVAL=null,u.prototype.USE_MUTATION_OBSERVER=!0,u._setupCrossOriginUpdater=function(){return s||(s=function(t,e){!t||!e?l=m():l=S(t,e),o.forEach(function(n){n._checkForIntersections()})}),s},u._resetCrossOriginUpdater=function(){s=null,l=null},u.prototype.observe=function(t){var e=this._observationTargets.some(function(n){return n.element==t});if(!e){if(!(t&&t.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},u.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._unmonitorIntersections(t.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},u.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},u.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},u.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(n,a,c){if(typeof n!="number"||isNaN(n)||n<0||n>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return n!==c[a-1]})},u.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map(function(a){var c=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!c)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(c[1]),unit:c[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},u.prototype._monitorIntersections=function(t){var e=t.defaultView;if(e&&this._monitoringDocuments.indexOf(t)==-1){var n=this._checkForIntersections,a=null,c=null;this.POLL_INTERVAL?a=e.setInterval(n,this.POLL_INTERVAL):(h(e,"resize",n,!0),h(t,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(c=new e.MutationObserver(n),c.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push(function(){var v=t.defaultView;v&&(a&&v.clearInterval(a),g(v,"resize",n,!0)),g(t,"scroll",n,!0),c&&c.disconnect()});var p=this.root&&(this.root.ownerDocument||this.root)||i;if(t!=p){var f=r(t);f&&this._monitorIntersections(f.ownerDocument)}}},u.prototype._unmonitorIntersections=function(t){var e=this._monitoringDocuments.indexOf(t);if(e!=-1){var n=this.root&&(this.root.ownerDocument||this.root)||i,a=this._observationTargets.some(function(f){var v=f.element.ownerDocument;if(v==t)return!0;for(;v&&v!=n;){var _=r(v);if(v=_&&_.ownerDocument,v==t)return!0}return!1});if(!a){var c=this._monitoringUnsubscribes[e];if(this._monitoringDocuments.splice(e,1),this._monitoringUnsubscribes.splice(e,1),c(),t!=n){var p=r(t);p&&this._unmonitorIntersections(p.ownerDocument)}}}},u.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},u.prototype._checkForIntersections=function(){if(!(!this.root&&s&&!l)){var t=this._rootIsInDom(),e=t?this._getRootRect():m();this._observationTargets.forEach(function(n){var a=n.element,c=b(a),p=this._rootContainsTarget(a),f=n.entry,v=t&&p&&this._computeTargetAndRootIntersection(a,c,e),_=null;this._rootContainsTarget(a)?(!s||this.root)&&(_=e):_=m();var L=n.entry=new d({time:T(),target:a,boundingClientRect:c,rootBounds:_,intersectionRect:v});f?t&&p?this._hasCrossedThreshold(f,L)&&this._queuedEntries.push(L):f&&f.isIntersecting&&this._queuedEntries.push(L):this._queuedEntries.push(L)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},u.prototype._computeTargetAndRootIntersection=function(t,e,n){if(window.getComputedStyle(t).display!="none"){for(var a=e,c=R(t),p=!1;!p&&c;){var f=null,v=c.nodeType==1?window.getComputedStyle(c):{};if(v.display=="none")return null;if(c==this.root||c.nodeType==9)if(p=!0,c==this.root||c==i)s&&!this.root?!l||l.width==0&&l.height==0?(c=null,f=null,a=null):f=l:f=n;else{var _=R(c),L=_&&b(_),F=_&&this._computeTargetAndRootIntersection(_,L,n);L&&F?(c=_,f=S(L,F)):(c=null,a=null)}else{var W=c.ownerDocument;c!=W.body&&c!=W.documentElement&&v.overflow!="visible"&&(f=b(c))}if(f&&(a=y(f,a)),!a)break;c=c&&R(c)}return a}},u.prototype._getRootRect=function(){var t;if(this.root&&!q(this.root))t=b(this.root);else{var e=q(this.root)?this.root:i,n=e.documentElement,a=e.body;t={top:0,left:0,right:n.clientWidth||a.clientWidth,width:n.clientWidth||a.clientWidth,bottom:n.clientHeight||a.clientHeight,height:n.clientHeight||a.clientHeight}}return this._expandRectByRootMargin(t)},u.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(a,c){return a.unit=="px"?a.value:a.value*(c%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},u.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,a=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==a)for(var c=0;c<this.thresholds.length;c++){var p=this.thresholds[c];if(p==n||p==a||p<n!=p<a)return!0}},u.prototype._rootIsInDom=function(){return!this.root||P(i,this.root)},u.prototype._rootContainsTarget=function(t){var e=this.root&&(this.root.ownerDocument||this.root)||i;return P(e,t)&&(!this.root||e==t.ownerDocument)},u.prototype._registerInstance=function(){o.indexOf(this)<0&&o.push(this)},u.prototype._unregisterInstance=function(){var t=o.indexOf(this);t!=-1&&o.splice(t,1)};function T(){return window.performance&&performance.now&&performance.now()}function w(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function h(t,e,n,a){typeof t.addEventListener=="function"?t.addEventListener(e,n,a||!1):typeof t.attachEvent=="function"&&t.attachEvent("on"+e,n)}function g(t,e,n,a){typeof t.removeEventListener=="function"?t.removeEventListener(e,n,a||!1):typeof t.detachEvent=="function"&&t.detachEvent("on"+e,n)}function y(t,e){var n=Math.max(t.top,e.top),a=Math.min(t.bottom,e.bottom),c=Math.max(t.left,e.left),p=Math.min(t.right,e.right),f=p-c,v=a-n;return f>=0&&v>=0&&{top:n,bottom:a,left:c,right:p,width:f,height:v}||null}function b(t){var e;try{e=t.getBoundingClientRect()}catch{}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):m()}function m(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function E(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function S(t,e){var n=e.top-t.top,a=e.left-t.left;return{top:n,left:a,height:e.height,width:e.width,bottom:n+e.height,right:a+e.width}}function P(t,e){for(var n=e;n;){if(n==t)return!0;n=R(n)}return!1}function R(t){var e=t.parentNode;return t.nodeType==9&&t!=i?r(t):(e&&e.assignedSlot&&(e=e.assignedSlot.parentNode),e&&e.nodeType==11&&e.host?e.host:e)}function q(t){return t&&t.nodeType===9}window.IntersectionObserver=u,window.IntersectionObserverEntry=d})();var A={};try{A.EventTarget=new EventTarget().constructor}catch{(function(i,o){var s=i.create,l=i.defineProperty,d=u.prototype;T(d,"addEventListener",function(h,g,y){for(var b=o.get(this),m=b[h]||(b[h]=[]),E=0,S=m.length;E<S;E++)if(m[E].listener===g)return;m.push({target:this,listener:g,options:y})}),T(d,"dispatchEvent",function(h){var g=o.get(this),y=g[h.type];return y&&(T(h,"target",this),T(h,"currentTarget",this),y.slice(0).some(w,h),delete h.currentTarget,delete h.target),!0}),T(d,"removeEventListener",function(h,g){for(var y=o.get(this),b=y[h]||(y[h]=[]),m=0,E=b.length;m<E;m++)if(b[m].listener===g){b.splice(m,1);return}}),A.EventTarget=u;function u(){"use strict";o.set(this,s(null))}function T(h,g,y){l(h,g,{configurable:!0,writable:!0,value:y})}function w(h){var g=h.options;return g&&g.once&&h.target.removeEventListener(this.type,h.listener),typeof h.listener=="function"?h.listener.call(h.target,this):h.listener.handleEvent(this),this._stopImmediatePropagationFlag}})(Object,new WeakMap)}var z=A.EventTarget;window.EventTarget=z;window.globalThis=window.globalThis||window;try{window.queueMicrotask=queueMicrotask}catch{let r=Promise.resolve();window.queueMicrotask=r.then.bind(r)}var U=(r,i)=>{let o=r.length,s,l=1;for(;!s;)if(o%l===1)l++;else{s=!0;for(let d=0,u=0;d*l<o;d++)if(u+=Math.max(...r.slice(d*l,(d+1)*l)),u>i){s=!1,l++;break}}return l};var x=new WeakMap,C=[],V=r=>{do if(r.nextSibling)return!0;while(r=r.parentNode);return!1},Z=()=>{C.splice(0).forEach(r=>{x.get(r)!==!0&&(x.set(r,!0),r.parsedCallback())})},B=(r,i,o,s)=>{i.disconnect(),o.removeEventListener("DOMContentLoaded",s),$(r)},$=r=>{C.length||requestAnimationFrame(Z),C.push(r)},I=class extends HTMLElement{connectedCallback(){if(this.parsedCallback&&!x.has(this)){let i=this,{ownerDocument:o}=i;if(x.set(i,!1),o.readyState==="complete"||V(i))$(i);else{let s=()=>B(i,l,o,s);o.addEventListener("DOMContentLoaded",s);let l=new MutationObserver(()=>{V(i)&&B(i,l,o,s)});l.observe(i.parentNode,{childList:!0,subtree:!0})}}}get parsed(){return x.get(this)===!0}};var j=r=>{let i=!1,o;return()=>(i||(o=r(),i=!0),o)};var tt=(r,i)=>getComputedStyle(r).getPropertyValue(i),X=(r,i)=>parseFloat(tt(r,i))||0;var ut=j(()=>{let i=document.createElement("a").style;return i.cssText="position:-webkit-sticky;position:sticky;",i.position.includes("sticky")});var M=class extends I{parsedCallback(){this.fontSize=X(this,"font-size"),this.fit()}static get observedAttributes(){return["behavior"]}get behavior(){return this.getAttribute("behavior")||""}set behavior(i){this.setAttribute("behavior",i||"")}attributeChangedCallback(){this.fit()}fit(){if(!this.fontSize)return;let{clientWidth:i}=this,o=this.behavior==="grow"?this.fontSize:9,s=this.behavior==="shrink"?this.fontSize:100;for(s++;s-o>1;){let l=Math.floor((o+s)/2);this.style.fontSize=`${l}px`,this.scrollWidth>i?s=l:o=l}this.style.fontSize=`${o}px`}};var H=r=>{if(!d2Env.isApp)return r;let i=r.indexOf("base64");return i===-1?r:r.slice(i+7)};window.xImgLoaded=window.xImgLoaded||new Set;var D,et=r=>{D||(D=new IntersectionObserver(i=>{for(let o of i)if(o.isIntersecting){let s=o.target;D.unobserve(s),s.load()}},{rootMargin:"200px 0px"})),D.observe(r)},k=class extends HTMLElement{connectedCallback(){if(this.img=this.querySelector("img"),this.img)this.init();else{let i=new MutationObserver(()=>{this.img=this.querySelector("img"),this.img&&(i.disconnect(),this.init())});i.observe(this,{childList:!0})}}static get observedAttributes(){return["src"]}get color(){return this.style.getPropertyValue("--color").trim()}get preview(){return this.getAttribute("preview")||this.src||""}get data(){let i=this.preview;return{element:this.img,url:H(this.src||this.img.src),width:Number(this.getAttribute("width")),height:Number(this.getAttribute("height")),...i&&(!d2Env.isApp||i.startsWith("data:image/png"))&&{inline:H(i)},color:this.color}}get src(){return this.getAttribute("src")||""}set src(i){this.setAttribute("src",i)}attributeChangedCallback(i,o,s){this.hasAttribute("defined")&&i==="src"&&s&&this.img&&(this.img.src=s)}load(){this.img.offsetWidth,this.img.style.transition="opacity 0.3s ease-in",this.img.addEventListener("load",this,{once:!0,passive:!0}),this.img.addEventListener("error",this,{once:!0,passive:!0}),this.img.addEventListener("abort",this,{once:!0,passive:!0}),this.img.src=this.src}handleEvent(i){i.type==="transitionend"?this.cleanup():(xImgLoaded.add(this.img.src),i.type!=="error"&&i.type!=="abort"&&(this.img.addEventListener("transitionend",this,{once:!0}),this.img.style.opacity="1",this.classList.add("in-transition")))}init(){if(this.hasAttribute("defined")&&this.cleanup(),!this.src)this.src=this.img.src;else if(this.src!==this.img.src){this.setAttribute("preview",this.img.src);let i=this.querySelector("div");i||(i=document.createElement("div"),this.prepend(i)),i.style.backgroundImage=`url(${this.img.src})`,this.img.style.opacity="0",et(this)}this.setAttribute("defined","")}cleanup(){this.img.removeAttribute("style"),this.classList.remove("in-transition");let i=this.querySelector("div");i&&i.remove()}};var K=/android/i.test(navigator.userAgent);var N=r=>document.documentElement.classList.add(r),Q=()=>{let r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=r?parseInt(r[1],10):0;i&&i<=12&&N("ios12-"),d2Env.isApp&&(window.screen.width/window.screen.height).toPrecision(3)==="0.462"&&N("bottom-inset"),K&&N("android")};var Y=(r,i)=>{let o=`${r}=`,s=(document.cookie||"").split(";");for(let l of s){let d=l.trim();if(d.lastIndexOf(o,0)===0)return d.slice(o.length);if(d===r)return""}return i};var O=[],G=r=>{let i=r;do if(i.nextSibling)return!0;while(i=i.parentNode);return!1},J=new MutationObserver(r=>{for(let{addedNodes:i}of r)for(let o of i)if(o.nodeType===1){for(let s of O)if(o.matches(s[0]))if(!s[2]||G(o))s[1](o);else{let l=new MutationObserver(()=>{G(o)&&(l.disconnect(),s[1](o))});l.observe(o.parentNode,{childList:!0,subtree:!0})}o.tagName==="FOOTER"&&J.disconnect()}});J.observe(document.documentElement,{childList:!0,subtree:!0});window.__run=r=>typeof r=="function"?__run.q.push(r):(...i)=>{__run.q.push([r,i])};window.__run.q=[];window.d2=window.d2||{};window.d2.brandingRender=r=>__run("d2.brandingInternal")(r);if(d2Env.isDesktop){let r=Y("user_preferences_mainnav");if(r){let i=r.split(",");O.push(['ul[data-id^="section-"]',o=>{let s=o.closest('[data-slot~="nav.section"]');if(s){let l=i.includes(o.dataset.id.replace("section-",""));s.classList.toggle("is-active",l),o.style.display=l?"":"none"}},!1])}}O.push(['[data-role~="makeslist"]',r=>{if(r.classList.contains("is-parked")){let i=[...r.children],o=r.classList.contains("is-open");r.classList.add("is-open");let s=r.offsetWidth,l=i[0].offsetHeight,d=i.map(h=>h.offsetWidth),u=i.map(h=>o||h.classList.contains("is-important")),T=d.filter((h,g)=>u[g]),w=U(T,s);r.style.maxHeight=`${w*l}px`,r.classList.toggle("is-open",o),r.classList.remove("is-parked")}},!0]);customElements.define("x-img",k);customElements.define("x-fit-text",M);Q();O.push(['[data-role~="dv"]',r=>{let i=()=>{r.getBoundingClientRect().height>0&&(o.disconnect(),r.classList.remove("is-off"))},o=window.ResizeObserver?new ResizeObserver(i):new MutationObserver(i);o.observe(r,window.ResizeObserver?{}:{childList:!0,subtree:!0,attributes:!0}),i()},!1]);if(d2Env.themes){let r="theme",i=window.matchMedia("(prefers-color-scheme:dark)"),o,s,l=()=>{d2Env.isApp||(s==="system"?localStorage.removeItem(r):localStorage.setItem(r,s))},d=()=>{o&&(o.classList.toggle("dark",s==="dark"),o.classList.toggle("light",s==="light"),o.classList.toggle("system",s==="system"));let w=s==="system"?i.matches?"dark":"light":s;document.documentElement.classList.toggle("dark",w==="dark"),document.documentElement.classList.toggle("light",w==="light")},u=()=>{var w;s=d2Env.isApp?"system":(w=localStorage.getItem(r))!=null?w:"system",l(),d()},T=w=>{var y;if(o)return;let h=((y=document.documentElement.getAttribute("lang"))!=null?y:"ru").startsWith("ru"),g=[["light","Светлая тема","Light theme"],["dark","Тёмная тема","Dark theme"],["system","Как в системе","System theme"]];o=document.createElement("details"),d2Env.userId||(o.open=!0),o.className="c-theme-switch",o.innerHTML=`<summary class="${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"}">${w.textContent}</summary>`;for(let b of g){let m=document.createElement("button");Object.assign(m,{type:"button",className:`r-button-unstyled ${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"} c-theme-switch__item`,value:b[0],textContent:h?b[1]:b[2]}),o.append(m)}w.replaceWith(o),o.addEventListener("click",b=>{let m=b.target;if(m.value){s=m.value,l(),d();let E=document.querySelector('[data-slot~="top-menu.button"]')||document.querySelector('[data-role~="top-menu"]');E&&E.click(),d2Env.userId&&(o.open=!1)}}),d()};u(),i.addEventListener?i.addEventListener("change",u):i.addListener(u),d2Env.isApp||(window.addEventListener("storage",w=>{w.key===r&&u()}),O.push(['a[href="drive://themes/"]',T,!1]))}})();
