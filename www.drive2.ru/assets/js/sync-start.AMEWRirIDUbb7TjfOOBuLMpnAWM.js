/*! For licenses information, see /assets/js/LICENSES.txt */
"use strict";(()=>{var b=(e,t)=>{let s=e.length,i,n=1;for(;!i;)if(s%n===1)n++;else{i=!0;for(let r=0,o=0;r*n<s;r++)if(o+=Math.max(...e.slice(r*n,(r+1)*n)),o>t){i=!1,n++;break}}return n};var c=class extends HTMLElement{constructor(){super(),this.wrapper=document.createElement("div"),this.wrapper.append(document.createElement("slot")),this.attachShadow({mode:"open"}),this.shadowRoot.append(this.wrapper),this.observer=new MutationObserver(()=>this.throttledFit())}connectedCallback(){this.observer.observe(this,{subtree:!0,characterData:!0}),this.throttledFit()}get behavior(){return this.getAttribute("behavior")??""}set behavior(t){this.setAttribute("behavior",t??"")}attributeChangedCallback(){this.throttledFit()}throttledFit(){requestAnimationFrame(()=>this.fit())}fit(){let t=Number.parseFloat(getComputedStyle(this).fontSize);if(Number.isNaN(t))return;let{clientWidth:s}=this,i=this.behavior==="grow"?t:9,n=this.behavior==="shrink"?t:100;for(n++;n-i>1;){let r=Math.floor((i+n)/2);this.wrapper.style.fontSize=`${r}px`,this.scrollWidth>s?n=r:i=r}this.wrapper.style.fontSize=`${i}px`}};c.observedAttributes=["behavior"];var M="loading"in HTMLImageElement.prototype,v=new Set,h,S=e=>{h||(h=new IntersectionObserver(t=>{for(let s of t)if(s.isIntersecting){let i=s.target;h.unobserve(i),i.load()}},{rootMargin:"200px 0px"})),h.observe(e)},d=class extends HTMLElement{connectedCallback(){if(this.img=this.querySelector("img"),this.img)this.init();else{let t=new MutationObserver(()=>{this.img=this.querySelector("img"),this.img&&(t.disconnect(),this.init())});t.observe(this,{childList:!0})}}get color(){return this.style.getPropertyValue("--color").trim()}get preview(){return this.src??""}get data(){return{element:this.img,url:this.src||this.img.src,width:Number(this.getAttribute("width")),height:Number(this.getAttribute("height")),color:this.color}}get src(){return this.getAttribute("src")??""}set src(t){this.setAttribute("src",t)}attributeChangedCallback(t,s,i){this.hasAttribute("defined")&&t==="src"&&i&&this.img&&(this.img.src=i)}load(){this.img.offsetWidth,this.img.style.transition="opacity 0.3s ease-in",this.img.addEventListener("load",this,{once:!0,passive:!0}),this.img.addEventListener("error",this,{once:!0,passive:!0}),this.img.addEventListener("abort",this,{once:!0,passive:!0}),this.img.src=this.src}handleEvent(t){t.type==="transitionend"?this.cleanup():(v.add(this.img.src),t.type!=="error"&&t.type!=="abort"&&(this.img.addEventListener("transitionend",this,{once:!0}),this.img.style.opacity="1",setTimeout(()=>this.cleanup(),340)))}init(){this.cleanup(),this.src||(this.src=this.img.src),(d2Env.isMobile||this.src!==this.img.src)&&(this.img.style.opacity=v.has(this.src)?"1":"0",M?this.load():S(this)),this.setAttribute("defined","")}cleanup(){this.img.removeAttribute("style")}};d.observedAttributes=["src"];var E=()=>{d2Env.isApp&&(window.screen.width/window.screen.height).toPrecision(3)==="0.462"&&document.documentElement.classList.add("bottom-inset")};var f=(e,t)=>{for(let s of e?.querySelectorAll("button")??[])s.classList.toggle("is-active",s.value===t)},w=(e,t,s,i)=>{let n=(document.documentElement.getAttribute("lang")??"ru").startsWith("ru"),r=document.createElement("details");r.className="c-nav-switch",r.innerHTML=`<summary class="${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"}">${t}</summary>`;for(let o of e){let l=document.createElement("button");Object.assign(l,{type:"button",className:`r-button-unstyled ${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"} ${s===o[0]?"is-active ":""}c-nav-switch__item`,value:o[0],textContent:n?o[1]:o[2]}),l.addEventListener("click",()=>{let a=document.querySelector('[data-slot~="top-menu.button"]')??document.querySelector('[data-role~="top-menu"]');a&&a.click(),r.open=!1,f(r,l.value),i(o[0])}),r.append(l)}return r};var m=[],y=e=>{let t=e;do if(t.nextSibling)return!0;while(t=t.parentNode);return!1},L=new MutationObserver(e=>{for(let{addedNodes:t}of e)for(let s of t)for(let i of m)if(s.nodeType===Node.ELEMENT_NODE&&s.matches(i[0]))if(!i[2]||y(s))i[1](s);else{let n=new MutationObserver(()=>{y(s)&&(n.disconnect(),i[1](s))});n.observe(s.parentNode,{childList:!0,subtree:!0})}});L.observe(document.documentElement,{childList:!0,subtree:!0});document.addEventListener("DOMContentLoaded",()=>L.disconnect(),{once:!0});window.__run=(e=>typeof e=="function"?__run.q.push(e):(...t)=>{__run.q.push([e,t])});window.__run.q=[];window.d2??(window.d2={});window.d2.brandingRender=e=>__run("d2.brandingInternal")(e);if(d2Env.isDesktop){let e=localStorage.getItem("mainNavPreferences");if(e){let t=e.split(",");m.push(['.c-nav-list[data-id^="section-"]',s=>{let i=s.closest('[data-slot~="nav.section"]');if(i){let n=t.includes(s.dataset.id.replace("section-",""));i.classList.toggle("is-active",n),s.style.display=n?"":"none"}},!1])}}m.push(['[data-role~="makeslist"]',e=>{if(e.classList.contains("is-parked")){let t=[...e.children],s=e.classList.contains("is-open");e.classList.add("is-open");let i=e.offsetWidth,n=t[0].offsetHeight,r=t.map(u=>u.offsetWidth),o=t.map(u=>s||u.classList.contains("is-important")),l=r.filter((u,p)=>o[p]),a=b(l,i);e.style.maxHeight=`${a*n}px`,e.classList.toggle("is-open",s),e.classList.remove("is-parked")}},!0]);customElements.define("x-img",d);customElements.define("fit-text",c);m.push(['[data-role~="social-buttons"]',e=>{if(window.verificationInProgress){let t=e.querySelectorAll("button");for(let s of t)s.disabled=!0;document.addEventListener("verification-complete",()=>{for(let s of t)s.disabled=!1})}},!0]);E();if(d2Env.themes){let e="theme",t=window.matchMedia("(prefers-color-scheme:dark)"),s,i,n=()=>{d2Env.isApp||(i==="system"?localStorage.removeItem(e):localStorage.setItem(e,i))},r=()=>{let a=i==="system"?t.matches?"dark":"light":i;document.documentElement.classList.toggle("dark",a==="dark"),document.documentElement.classList.toggle("light",a==="light")},o=()=>{i=d2Env.isApp?"system":localStorage.getItem(e)??"system",n(),r(),f(s,i)},l=a=>{if(s)return;s=w([["light","Светлая тема","Light theme"],["dark","Тёмная тема","Dark theme"],["system","Как в системе","System theme"]],a.textContent,i,p=>{i=p,n(),r()}),a.replaceWith(s)};o(),t.addEventListener("change",o),d2Env.isApp||(window.addEventListener("storage",a=>{a.key===e&&o()}),m.push(['a[href="drive://themes/"]',l,!1]))}if(d2Env.isMobile){let e=window.location.hash;e.startsWith("#a")&&m.push([e,()=>{setTimeout(()=>{document.querySelector(e)?.scrollIntoView({behavior:"smooth",block:"start"})},50)},!1])}var g,T=()=>(g||(g=new IntersectionObserver(e=>{for(let t of e)if(t.isIntersecting&&(g.unobserve(t.target),"YaHeaderBiddingSettings"in window)){let s=t.target.nextElementSibling;s?.removeAttribute("type"),s?.replaceWith(s)}},{rootMargin:"800px 0px"})),g),k=new MutationObserver(()=>{let e=document.documentElement.querySelectorAll('[data-role="dv-extra"]');for(let t of e)delete t.dataset.role,T().observe(t)});k.observe(document.documentElement,{childList:!0,subtree:!0});})();
