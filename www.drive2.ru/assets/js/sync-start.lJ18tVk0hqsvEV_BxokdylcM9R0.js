/*! For licenses information, see /assets/js/LICENSES.txt */
"use strict";(()=>{var y={};try{y.EventTarget=new EventTarget().constructor}catch{(function(t,e){var i=t.create,n=t.defineProperty,o=d.prototype;m(o,"addEventListener",function(r,a,h){for(var u=e.get(this),c=u[r]||(u[r]=[]),g=0,b=c.length;g<b;g++)if(c[g].listener===a)return;c.push({target:this,listener:a,options:h})}),m(o,"dispatchEvent",function(r){var a=e.get(this),h=a[r.type];return h&&(m(r,"target",this),m(r,"currentTarget",this),h.slice(0).some(l,r),delete r.currentTarget,delete r.target),!0}),m(o,"removeEventListener",function(r,a){for(var h=e.get(this),u=h[r]||(h[r]=[]),c=0,g=u.length;c<g;c++)if(u[c].listener===a){u.splice(c,1);return}}),y.EventTarget=d;function d(){"use strict";e.set(this,i(null))}function m(r,a,h){n(r,a,{configurable:!0,writable:!0,value:h})}function l(r){var a=r.options;return a&&a.once&&r.target.removeEventListener(this.type,r.listener),typeof r.listener=="function"?r.listener.call(r.target,this):r.listener.handleEvent(this),this._stopImmediatePropagationFlag}})(Object,new WeakMap)}var L=y.EventTarget;window.EventTarget=L;window.globalThis=window.globalThis||window;var M=(s,t)=>{let e=s.length,i,n=1;for(;!i;)if(e%n===1)n++;else{i=!0;for(let o=0,d=0;o*n<e;o++)if(d+=Math.max(...s.slice(o*n,(o+1)*n)),d>t){i=!1,n++;break}}return n};var f=class extends HTMLElement{constructor(){super(),this.wrapper=document.createElement("div"),this.wrapper.append(document.createElement("slot")),this.attachShadow({mode:"open"}),this.shadowRoot.append(this.wrapper),this.observer=new MutationObserver(()=>this.throttledFit())}connectedCallback(){this.observer.observe(this,{subtree:!0,characterData:!0}),this.throttledFit()}static get observedAttributes(){return["behavior"]}get behavior(){var t;return(t=this.getAttribute("behavior"))!=null?t:""}set behavior(t){this.setAttribute("behavior",t!=null?t:"")}attributeChangedCallback(){this.throttledFit()}throttledFit(){requestAnimationFrame(()=>this.fit())}fit(){let t=Number.parseFloat(getComputedStyle(this).getPropertyValue("font-size"));if(Number.isNaN(t))return;let{clientWidth:e}=this,i=this.behavior==="grow"?t:9,n=this.behavior==="shrink"?t:100;for(n++;n-i>1;){let o=Math.floor((i+n)/2);this.wrapper.style.fontSize=`${o}px`,this.scrollWidth>e?n=o:i=o}this.wrapper.style.fontSize=`${i}px`}};var S="loading"in HTMLImageElement.prototype,T=new Set,E,_=s=>{E||(E=new IntersectionObserver(t=>{for(let e of t)if(e.isIntersecting){let i=e.target;E.unobserve(i),i.load()}},{rootMargin:"200px 0px"})),E.observe(s)},v=class extends HTMLElement{connectedCallback(){if(this.img=this.querySelector("img"),this.img)this.init();else{let t=new MutationObserver(()=>{this.img=this.querySelector("img"),this.img&&(t.disconnect(),this.init())});t.observe(this,{childList:!0})}}static get observedAttributes(){return["src"]}get color(){return this.style.getPropertyValue("--color").trim()}get preview(){var t;return(t=this.src)!=null?t:""}get data(){return{element:this.img,url:this.src||this.img.src,width:Number(this.getAttribute("width")),height:Number(this.getAttribute("height")),color:this.color}}get src(){var t;return(t=this.getAttribute("src"))!=null?t:""}set src(t){this.setAttribute("src",t)}attributeChangedCallback(t,e,i){this.hasAttribute("defined")&&t==="src"&&i&&this.img&&(this.img.src=i)}load(){this.img.offsetWidth,this.img.style.transition="opacity 0.3s ease-in",this.img.addEventListener("load",this,{once:!0,passive:!0}),this.img.addEventListener("error",this,{once:!0,passive:!0}),this.img.addEventListener("abort",this,{once:!0,passive:!0}),this.img.src=this.src}handleEvent(t){t.type==="transitionend"?this.cleanup():(T.add(this.img.src),t.type!=="error"&&t.type!=="abort"&&(this.img.addEventListener("transitionend",this,{once:!0}),this.img.style.opacity="1",setTimeout(()=>this.cleanup(),340)))}init(){this.cleanup(),this.src||(this.src=this.img.src),(d2Env.isMobile||this.src!==this.img.src)&&(this.img.style.opacity=T.has(this.src)?"1":"0",S?this.load():_(this)),this.setAttribute("defined","")}cleanup(){this.img.removeAttribute("style")}};var k=s=>document.documentElement.classList.add(s),H=()=>{let s=/OS (\d+)_(\d+)_?(\d+)?/.exec(navigator.appVersion),t=s?Number.parseInt(s[1],10):0;t&&t<=12&&k("ios12-"),d2Env.isApp&&(window.screen.width/window.screen.height).toPrecision(3)==="0.462"&&k("bottom-inset")};var p=[],I=s=>{let t=s;do if(t.nextSibling)return!0;while(t=t.parentNode);return!1},x=new MutationObserver(s=>{for(let{addedNodes:t}of s)for(let e of t)if(e.nodeType===1){for(let i of p)if(e.matches(i[0]))if(!i[2]||I(e))i[1](e);else{let n=new MutationObserver(()=>{I(e)&&(n.disconnect(),i[1](e))});n.observe(e.parentNode,{childList:!0,subtree:!0})}e.tagName==="FOOTER"&&x.disconnect()}});x.observe(document.documentElement,{childList:!0,subtree:!0});window.__run=s=>typeof s=="function"?__run.q.push(s):(...t)=>{__run.q.push([s,t])};window.__run.q=[];window.d2=window.d2||{};window.d2.brandingRender=s=>__run("d2.brandingInternal")(s);if(d2Env.isDesktop){let s=localStorage.getItem("mainNavPreferences");if(s){let t=s.split(",");p.push(['.c-nav-list[data-id^="section-"]',e=>{let i=e.closest('[data-slot~="nav.section"]');if(i){let n=t.includes(e.dataset.id.replace("section-",""));i.classList.toggle("is-active",n),e.style.display=n?"":"none"}},!1])}}p.push(['[data-role~="makeslist"]',s=>{if(s.classList.contains("is-parked")){let t=[...s.children],e=s.classList.contains("is-open");s.classList.add("is-open");let i=s.offsetWidth,n=t[0].offsetHeight,o=t.map(r=>r.offsetWidth),d=t.map(r=>e||r.classList.contains("is-important")),m=o.filter((r,a)=>d[a]),l=M(m,i);s.style.maxHeight=`${l*n}px`,s.classList.toggle("is-open",e),s.classList.remove("is-parked")}},!0]);customElements.define("x-img",v);customElements.define("fit-text",f);p.push(['[data-role~="social-buttons"]',s=>{if(window.verificationInProgress){let t=s.querySelectorAll("button");for(let e of t)e.disabled=!0;document.addEventListener("verification-complete",()=>{for(let e of t)e.disabled=!1})}},!0]);H();p.push(['[data-role~="dv"]',s=>{let t=()=>{s.getBoundingClientRect().height>0&&(e.disconnect(),s.classList.remove("is-off"))},e=window.ResizeObserver?new ResizeObserver(t):new MutationObserver(t);e.observe(s,window.ResizeObserver?{}:{childList:!0,subtree:!0,attributes:!0}),t()},!1]);if(d2Env.themes){let s="theme",t=window.matchMedia("(prefers-color-scheme:dark)"),e,i,n=()=>{d2Env.isApp||(i==="system"?localStorage.removeItem(s):localStorage.setItem(s,i))},o=()=>{e&&(e.classList.toggle("dark",i==="dark"),e.classList.toggle("light",i==="light"),e.classList.toggle("system",i==="system"));let l=i==="system"?t.matches?"dark":"light":i;document.documentElement.classList.toggle("dark",l==="dark"),document.documentElement.classList.toggle("light",l==="light")},d=()=>{var l;i=d2Env.isApp?"system":(l=localStorage.getItem(s))!=null?l:"system",n(),o()},m=l=>{var h;if(e)return;let r=((h=document.documentElement.getAttribute("lang"))!=null?h:"ru").startsWith("ru"),a=[["light","Светлая тема","Light theme"],["dark","Тёмная тема","Dark theme"],["system","Как в системе","System theme"]];e=document.createElement("details"),d2Env.userId||(e.open=!0),e.className="c-theme-switch",e.innerHTML=`<summary class="${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"}">${l.textContent}</summary>`;for(let u of a){let c=document.createElement("button");Object.assign(c,{type:"button",className:`r-button-unstyled ${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"} c-theme-switch__item`,value:u[0],textContent:r?u[1]:u[2]}),e.append(c)}l.replaceWith(e),e.addEventListener("click",u=>{var g;let c=u.target;if(c.value){i=c.value,n(),o();let b=(g=document.querySelector('[data-slot~="top-menu.button"]'))!=null?g:document.querySelector('[data-role~="top-menu"]');b&&b.click(),d2Env.userId&&(e.open=!1)}}),o()};d(),t.addEventListener?t.addEventListener("change",d):t.addListener(d),d2Env.isApp||(window.addEventListener("storage",l=>{l.key===s&&d()}),p.push(['a[href="drive://themes/"]',m,!1]))}if(d2Env.isMobile){let s=window.location.hash;s.startsWith("#a")&&p.push([s,()=>{setTimeout(()=>{var t;(t=document.querySelector(s))==null||t.scrollIntoView({behavior:"smooth",block:"start"})},50)},!1])}var w,A=()=>(w||(w=new IntersectionObserver(s=>{for(let t of s)if(t.isIntersecting&&(w.unobserve(t.target),delete t.target.dataset.role,"YaHeaderBiddingSettings"in window)){let e=t.target.nextElementSibling;e.removeAttribute("type"),e.replaceWith(e)}},{rootMargin:"800px 0px"})),w);p.push(['[data-role="dv-extra"]',s=>{A().observe(s)},!1]);})();
