/*! For licenses information, see /assets/js/LICENSES.txt */
"use strict";(()=>{var E=(s,t)=>{let e=s.length,i,n=1;for(;!i;)if(e%n===1)n++;else{i=!0;for(let r=0,o=0;r*n<e;r++)if(o+=Math.max(...s.slice(r*n,(r+1)*n)),o>t){i=!1,n++;break}}return n};var h=class extends HTMLElement{constructor(){super(),this.wrapper=document.createElement("div"),this.wrapper.append(document.createElement("slot")),this.attachShadow({mode:"open"}),this.shadowRoot.append(this.wrapper),this.observer=new MutationObserver(()=>this.throttledFit())}connectedCallback(){this.observer.observe(this,{subtree:!0,characterData:!0}),this.throttledFit()}static get observedAttributes(){return["behavior"]}get behavior(){return this.getAttribute("behavior")??""}set behavior(t){this.setAttribute("behavior",t??"")}attributeChangedCallback(){this.throttledFit()}throttledFit(){requestAnimationFrame(()=>this.fit())}fit(){let t=Number.parseFloat(getComputedStyle(this).getPropertyValue("font-size"));if(Number.isNaN(t))return;let{clientWidth:e}=this,i=this.behavior==="grow"?t:9,n=this.behavior==="shrink"?t:100;for(n++;n-i>1;){let r=Math.floor((i+n)/2);this.wrapper.style.fontSize=`${r}px`,this.scrollWidth>e?n=r:i=r}this.wrapper.style.fontSize=`${i}px`}};var k="loading"in HTMLImageElement.prototype,w=new Set,g,H=s=>{g||(g=new IntersectionObserver(t=>{for(let e of t)if(e.isIntersecting){let i=e.target;g.unobserve(i),i.load()}},{rootMargin:"200px 0px"})),g.observe(s)},u=class extends HTMLElement{connectedCallback(){if(this.img=this.querySelector("img"),this.img)this.init();else{let t=new MutationObserver(()=>{this.img=this.querySelector("img"),this.img&&(t.disconnect(),this.init())});t.observe(this,{childList:!0})}}static get observedAttributes(){return["src"]}get color(){return this.style.getPropertyValue("--color").trim()}get preview(){return this.src??""}get data(){return{element:this.img,url:this.src||this.img.src,width:Number(this.getAttribute("width")),height:Number(this.getAttribute("height")),color:this.color}}get src(){return this.getAttribute("src")??""}set src(t){this.setAttribute("src",t)}attributeChangedCallback(t,e,i){this.hasAttribute("defined")&&t==="src"&&i&&this.img&&(this.img.src=i)}load(){this.img.offsetWidth,this.img.style.transition="opacity 0.3s ease-in",this.img.addEventListener("load",this,{once:!0,passive:!0}),this.img.addEventListener("error",this,{once:!0,passive:!0}),this.img.addEventListener("abort",this,{once:!0,passive:!0}),this.img.src=this.src}handleEvent(t){t.type==="transitionend"?this.cleanup():(w.add(this.img.src),t.type!=="error"&&t.type!=="abort"&&(this.img.addEventListener("transitionend",this,{once:!0}),this.img.style.opacity="1",setTimeout(()=>this.cleanup(),340)))}init(){this.cleanup(),this.src||(this.src=this.img.src),(d2Env.isMobile||this.src!==this.img.src)&&(this.img.style.opacity=w.has(this.src)?"1":"0",k?this.load():H(this)),this.setAttribute("defined","")}cleanup(){this.img.removeAttribute("style")}};var y=()=>{d2Env.isApp&&(window.screen.width/window.screen.height).toPrecision(3)==="0.462"&&document.documentElement.classList.add("bottom-inset")};var l=[],L=s=>{let t=s;do if(t.nextSibling)return!0;while(t=t.parentNode);return!1},M=new MutationObserver(s=>{for(let{addedNodes:t}of s)for(let e of t)if(e.nodeType===1){for(let i of l)if(e.matches(i[0]))if(!i[2]||L(e))i[1](e);else{let n=new MutationObserver(()=>{L(e)&&(n.disconnect(),i[1](e))});n.observe(e.parentNode,{childList:!0,subtree:!0})}e.tagName==="FOOTER"&&M.disconnect()}});M.observe(document.documentElement,{childList:!0,subtree:!0});window.__run=s=>typeof s=="function"?__run.q.push(s):(...t)=>{__run.q.push([s,t])};window.__run.q=[];window.d2=window.d2||{};window.d2.brandingRender=s=>__run("d2.brandingInternal")(s);if(d2Env.isDesktop){let s=localStorage.getItem("mainNavPreferences");if(s){let t=s.split(",");l.push(['.c-nav-list[data-id^="section-"]',e=>{let i=e.closest('[data-slot~="nav.section"]');if(i){let n=t.includes(e.dataset.id.replace("section-",""));i.classList.toggle("is-active",n),e.style.display=n?"":"none"}},!1])}}l.push(['[data-role~="makeslist"]',s=>{if(s.classList.contains("is-parked")){let t=[...s.children],e=s.classList.contains("is-open");s.classList.add("is-open");let i=s.offsetWidth,n=t[0].offsetHeight,r=t.map(c=>c.offsetWidth),o=t.map(c=>e||c.classList.contains("is-important")),f=r.filter((c,b)=>o[b]),a=E(f,i);s.style.maxHeight=`${a*n}px`,s.classList.toggle("is-open",e),s.classList.remove("is-parked")}},!0]);customElements.define("x-img",u);customElements.define("fit-text",h);l.push(['[data-role~="social-buttons"]',s=>{if(window.verificationInProgress){let t=s.querySelectorAll("button");for(let e of t)e.disabled=!0;document.addEventListener("verification-complete",()=>{for(let e of t)e.disabled=!1})}},!0]);y();if(d2Env.themes){let s="theme",t=window.matchMedia("(prefers-color-scheme:dark)"),e,i,n=()=>{d2Env.isApp||(i==="system"?localStorage.removeItem(s):localStorage.setItem(s,i))},r=()=>{e&&(e.classList.toggle("dark",i==="dark"),e.classList.toggle("light",i==="light"),e.classList.toggle("system",i==="system"));let a=i==="system"?t.matches?"dark":"light":i;document.documentElement.classList.toggle("dark",a==="dark"),document.documentElement.classList.toggle("light",a==="light")},o=()=>{i=d2Env.isApp?"system":localStorage.getItem(s)??"system",n(),r()},f=a=>{if(e)return;let c=(document.documentElement.getAttribute("lang")??"ru").startsWith("ru"),b=[["light","Светлая тема","Light theme"],["dark","Тёмная тема","Dark theme"],["system","Как в системе","System theme"]];e=document.createElement("details"),d2Env.userId||(e.open=!0),e.className="c-theme-switch",e.innerHTML=`<summary class="${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"}">${a.textContent}</summary>`;for(let d of b){let m=document.createElement("button");Object.assign(m,{type:"button",className:`r-button-unstyled ${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"} c-theme-switch__item`,value:d[0],textContent:c?d[1]:d[2]}),e.append(m)}a.replaceWith(e),e.addEventListener("click",d=>{let m=d.target;if(m.value){i=m.value,n(),r();let v=document.querySelector('[data-slot~="top-menu.button"]')??document.querySelector('[data-role~="top-menu"]');v&&v.click(),d2Env.userId&&(e.open=!1)}}),r()};o(),t.addEventListener?t.addEventListener("change",o):t.addListener(o),d2Env.isApp||(window.addEventListener("storage",a=>{a.key===s&&o()}),l.push(['a[href="drive://themes/"]',f,!1]))}if(d2Env.isMobile){let s=window.location.hash;s.startsWith("#a")&&l.push([s,()=>{setTimeout(()=>{document.querySelector(s)?.scrollIntoView({behavior:"smooth",block:"start"})},50)},!1])}var p,T=()=>(p||(p=new IntersectionObserver(s=>{for(let t of s)if(t.isIntersecting&&(p.unobserve(t.target),delete t.target.dataset.role,"YaHeaderBiddingSettings"in window)){let e=t.target.nextElementSibling;e.removeAttribute("type"),e.replaceWith(e)}},{rootMargin:"800px 0px"})),p);l.push(['[data-role="dv-extra"]',s=>{T().observe(s)},!1]);})();
