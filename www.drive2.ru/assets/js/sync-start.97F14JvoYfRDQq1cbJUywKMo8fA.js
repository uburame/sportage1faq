/*! For licenses information, see /assets/js/LICENSES.txt */
"use strict";(()=>{Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,enumerable:!1,value(r){let i={};for(let o of r){if(Object(o)!==o)throw new TypeError("iterable for fromEntries should yield objects");let{"0":s,"1":u}=o;Object.defineProperty(i,s,{configurable:!0,enumerable:!0,writable:!0,value:u})}return i}});(function(){"use strict";if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function r(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch{return null}}var i=function(t){for(var e=t,n=r(e);n;)e=n.ownerDocument,n=r(e);return e}(window.document),o=[],s=null,u=null;function d(t){this.time=t.time,this.target=t.target,this.rootBounds=T(t.rootBounds),this.boundingClientRect=T(t.boundingClientRect),this.intersectionRect=T(t.intersectionRect||w()),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,a=this.intersectionRect,c=a.width*a.height;n?this.intersectionRatio=Number((c/n).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function l(t,e){var n=e||{};if(typeof t!="function")throw new Error("callback must be a function");if(n.root&&n.root.nodeType!=1&&n.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=E(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(a){return a.value+a.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}l.prototype.THROTTLE_TIMEOUT=100,l.prototype.POLL_INTERVAL=null,l.prototype.USE_MUTATION_OBSERVER=!0,l._setupCrossOriginUpdater=function(){return s||(s=function(t,e){!t||!e?u=w():u=S(t,e),o.forEach(function(n){n._checkForIntersections()})}),s},l._resetCrossOriginUpdater=function(){s=null,u=null},l.prototype.observe=function(t){var e=this._observationTargets.some(function(n){return n.element==t});if(!e){if(!(t&&t.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},l.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._unmonitorIntersections(t.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},l.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},l.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},l.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(n,a,c){if(typeof n!="number"||isNaN(n)||n<0||n>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return n!==c[a-1]})},l.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map(function(a){var c=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!c)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(c[1]),unit:c[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},l.prototype._monitorIntersections=function(t){var e=t.defaultView;if(e&&this._monitoringDocuments.indexOf(t)==-1){var n=this._checkForIntersections,a=null,c=null;this.POLL_INTERVAL?a=e.setInterval(n,this.POLL_INTERVAL):(h(e,"resize",n,!0),h(t,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(c=new e.MutationObserver(n),c.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push(function(){var p=t.defaultView;p&&(a&&p.clearInterval(a),f(p,"resize",n,!0)),f(t,"scroll",n,!0),c&&c.disconnect()});var g=this.root&&(this.root.ownerDocument||this.root)||i;if(t!=g){var m=r(t);m&&this._monitorIntersections(m.ownerDocument)}}},l.prototype._unmonitorIntersections=function(t){var e=this._monitoringDocuments.indexOf(t);if(e!=-1){var n=this.root&&(this.root.ownerDocument||this.root)||i,a=this._observationTargets.some(function(m){var p=m.element.ownerDocument;if(p==t)return!0;for(;p&&p!=n;){var y=r(p);if(p=y&&y.ownerDocument,p==t)return!0}return!1});if(!a){var c=this._monitoringUnsubscribes[e];if(this._monitoringDocuments.splice(e,1),this._monitoringUnsubscribes.splice(e,1),c(),t!=n){var g=r(t);g&&this._unmonitorIntersections(g.ownerDocument)}}}},l.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},l.prototype._checkForIntersections=function(){if(!(!this.root&&s&&!u)){var t=this._rootIsInDom(),e=t?this._getRootRect():w();this._observationTargets.forEach(function(n){var a=n.element,c=b(a),g=this._rootContainsTarget(a),m=n.entry,p=t&&g&&this._computeTargetAndRootIntersection(a,c,e),y=null;this._rootContainsTarget(a)?(!s||this.root)&&(y=e):y=w();var L=n.entry=new d({time:_(),target:a,boundingClientRect:c,rootBounds:y,intersectionRect:p});m?t&&g?this._hasCrossedThreshold(m,L)&&this._queuedEntries.push(L):m&&m.isIntersecting&&this._queuedEntries.push(L):this._queuedEntries.push(L)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},l.prototype._computeTargetAndRootIntersection=function(t,e,n){if(window.getComputedStyle(t).display!="none"){for(var a=e,c=R(t),g=!1;!g&&c;){var m=null,p=c.nodeType==1?window.getComputedStyle(c):{};if(p.display=="none")return null;if(c==this.root||c.nodeType==9)if(g=!0,c==this.root||c==i)s&&!this.root?!u||u.width==0&&u.height==0?(c=null,m=null,a=null):m=u:m=n;else{var y=R(c),L=y&&b(y),F=y&&this._computeTargetAndRootIntersection(y,L,n);L&&F?(c=y,m=S(L,F)):(c=null,a=null)}else{var W=c.ownerDocument;c!=W.body&&c!=W.documentElement&&p.overflow!="visible"&&(m=b(c))}if(m&&(a=v(m,a)),!a)break;c=c&&R(c)}return a}},l.prototype._getRootRect=function(){var t;if(this.root&&!q(this.root))t=b(this.root);else{var e=q(this.root)?this.root:i,n=e.documentElement,a=e.body;t={top:0,left:0,right:n.clientWidth||a.clientWidth,width:n.clientWidth||a.clientWidth,bottom:n.clientHeight||a.clientHeight,height:n.clientHeight||a.clientHeight}}return this._expandRectByRootMargin(t)},l.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(a,c){return a.unit=="px"?a.value:a.value*(c%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},l.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,a=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==a)for(var c=0;c<this.thresholds.length;c++){var g=this.thresholds[c];if(g==n||g==a||g<n!=g<a)return!0}},l.prototype._rootIsInDom=function(){return!this.root||N(i,this.root)},l.prototype._rootContainsTarget=function(t){var e=this.root&&(this.root.ownerDocument||this.root)||i;return N(e,t)&&(!this.root||e==t.ownerDocument)},l.prototype._registerInstance=function(){o.indexOf(this)<0&&o.push(this)},l.prototype._unregisterInstance=function(){var t=o.indexOf(this);t!=-1&&o.splice(t,1)};function _(){return window.performance&&performance.now&&performance.now()}function E(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function h(t,e,n,a){typeof t.addEventListener=="function"?t.addEventListener(e,n,a||!1):typeof t.attachEvent=="function"&&t.attachEvent("on"+e,n)}function f(t,e,n,a){typeof t.removeEventListener=="function"?t.removeEventListener(e,n,a||!1):typeof t.detachEvent=="function"&&t.detachEvent("on"+e,n)}function v(t,e){var n=Math.max(t.top,e.top),a=Math.min(t.bottom,e.bottom),c=Math.max(t.left,e.left),g=Math.min(t.right,e.right),m=g-c,p=a-n;return m>=0&&p>=0&&{top:n,bottom:a,left:c,right:g,width:m,height:p}||null}function b(t){var e;try{e=t.getBoundingClientRect()}catch{}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):w()}function w(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function T(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function S(t,e){var n=e.top-t.top,a=e.left-t.left;return{top:n,left:a,height:e.height,width:e.width,bottom:n+e.height,right:a+e.width}}function N(t,e){for(var n=e;n;){if(n==t)return!0;n=R(n)}return!1}function R(t){var e=t.parentNode;return t.nodeType==9&&t!=i?r(t):(e&&e.assignedSlot&&(e=e.assignedSlot.parentNode),e&&e.nodeType==11&&e.host?e.host:e)}function q(t){return t&&t.nodeType===9}window.IntersectionObserver=l,window.IntersectionObserverEntry=d})();var C={};try{C.EventTarget=new EventTarget().constructor}catch{(function(i,o){var s=i.create,u=i.defineProperty,d=l.prototype;_(d,"addEventListener",function(h,f,v){for(var b=o.get(this),w=b[h]||(b[h]=[]),T=0,S=w.length;T<S;T++)if(w[T].listener===f)return;w.push({target:this,listener:f,options:v})}),_(d,"dispatchEvent",function(h){var f=o.get(this),v=f[h.type];return v&&(_(h,"target",this),_(h,"currentTarget",this),v.slice(0).some(E,h),delete h.currentTarget,delete h.target),!0}),_(d,"removeEventListener",function(h,f){for(var v=o.get(this),b=v[h]||(v[h]=[]),w=0,T=b.length;w<T;w++)if(b[w].listener===f){b.splice(w,1);return}}),C.EventTarget=l;function l(){"use strict";o.set(this,s(null))}function _(h,f,v){u(h,f,{configurable:!0,writable:!0,value:v})}function E(h){var f=h.options;return f&&f.once&&h.target.removeEventListener(this.type,h.listener),typeof h.listener=="function"?h.listener.call(h.target,this):h.listener.handleEvent(this),this._stopImmediatePropagationFlag}})(Object,new WeakMap)}var z=C.EventTarget;window.EventTarget=z;window.globalThis=window.globalThis||window;try{window.queueMicrotask=queueMicrotask}catch{let r=Promise.resolve();window.queueMicrotask=r.then.bind(r)}var U=(r,i)=>{let o=r.length,s,u=1;for(;!s;)if(o%u===1)u++;else{s=!0;for(let d=0,l=0;d*u<o;d++)if(l+=Math.max(...r.slice(d*u,(d+1)*u)),l>i){s=!1,u++;break}}return u};var x=new WeakMap,H=[],V=r=>{do if(r.nextSibling)return!0;while(r=r.parentNode);return!1},tt=()=>{H.splice(0).forEach(r=>{x.get(r)!==!0&&(x.set(r,!0),r.parsedCallback())})},B=(r,i,o,s)=>{i.disconnect(),o.removeEventListener("DOMContentLoaded",s),$(r)},$=r=>{H.length||requestAnimationFrame(tt),H.push(r)},I=class extends HTMLElement{connectedCallback(){if(this.parsedCallback&&!x.has(this)){let i=this,{ownerDocument:o}=i;if(x.set(i,!1),o.readyState==="complete"||V(i))$(i);else{let s=()=>B(i,u,o,s);o.addEventListener("DOMContentLoaded",s);let u=new MutationObserver(()=>{V(i)&&B(i,u,o,s)});u.observe(i.parentNode,{childList:!0,subtree:!0})}}}get parsed(){return x.get(this)===!0}};var j=r=>{let i=!1,o;return()=>(i||(o=r(),i=!0),o)};var et=(r,i)=>getComputedStyle(r).getPropertyValue(i),X=(r,i)=>parseFloat(et(r,i))||0;var dt=j(()=>{let i=document.createElement("a").style;return i.cssText="position:-webkit-sticky;position:sticky;",i.position.includes("sticky")});var M=class extends I{parsedCallback(){this.fontSize=X(this,"font-size"),this.fit()}static get observedAttributes(){return["behavior"]}get behavior(){return this.getAttribute("behavior")||""}set behavior(i){this.setAttribute("behavior",i||"")}attributeChangedCallback(){this.fit()}fit(){if(!this.fontSize)return;let{clientWidth:i}=this,o=this.behavior==="grow"?this.fontSize:9,s=this.behavior==="shrink"?this.fontSize:100;for(s++;s-o>1;){let u=Math.floor((o+s)/2);this.style.fontSize=`${u}px`,this.scrollWidth>i?s=u:o=u}this.style.fontSize=`${o}px`}};var P=r=>{if(!d2Env.isApp)return r;let i=r.indexOf("base64");return i!==-1?r.substring(i+7):r};window.xImgLoaded=window.xImgLoaded||new Set;var D,it=r=>{D||(D=new IntersectionObserver(i=>{i.forEach(o=>{if(o.isIntersecting){let s=o.target;D.unobserve(s),s.load()}})},{rootMargin:"200px 0px"})),D.observe(r)},k=class extends HTMLElement{connectedCallback(){if(this.img=this.querySelector("img"),this.img)this.init();else{let i=new MutationObserver(()=>{this.img=this.querySelector("img"),this.img&&(i.disconnect(),this.init())});i.observe(this,{childList:!0})}}static get observedAttributes(){return["src"]}get color(){return this.style.getPropertyValue("--color").trim()}get preview(){return this.getAttribute("preview")||this.src||""}get data(){let i=this.preview;return{element:this.img,url:P(this.src||this.img.src),width:Number(this.getAttribute("width")),height:Number(this.getAttribute("height")),...i&&(!d2Env.isApp||i.startsWith("data:image/png"))&&{inline:P(i)},color:this.color}}get src(){return this.getAttribute("src")||""}set src(i){this.setAttribute("src",i)}attributeChangedCallback(i,o,s){this.hasAttribute("defined")&&i==="src"&&s&&this.img&&(this.img.src=s)}load(){this.img.offsetWidth,this.img.style.transition="opacity 0.3s ease-in",this.img.addEventListener("load",this,{once:!0,passive:!0}),this.img.addEventListener("error",this,{once:!0,passive:!0}),this.img.addEventListener("abort",this,{once:!0,passive:!0}),this.img.src=this.src}handleEvent(i){i.type==="transitionend"?this.cleanup():(xImgLoaded.add(this.img.src),i.type!=="error"&&i.type!=="abort"&&(this.img.addEventListener("transitionend",this,{once:!0}),this.img.style.opacity="1",this.classList.add("in-transition")))}init(){if(this.hasAttribute("defined")&&this.cleanup(),!this.src)this.src=this.img.src;else if(this.src!==this.img.src){this.setAttribute("preview",this.img.src);let i=this.querySelector("div");i||(i=document.createElement("div"),this.prepend(i)),i.style.backgroundImage=`url(${this.img.src})`,this.img.style.opacity="0",it(this)}this.setAttribute("defined","")}cleanup(){this.img.removeAttribute("style"),this.classList.remove("in-transition");let i=this.querySelector("div");i&&i.remove()}};var nt=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,K=!!navigator.userAgent.match(/android/i),Q=nt();var A=r=>document.documentElement.classList.add(r),Y=()=>{if(Q){let r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=r?parseInt(r[1],10):0;i&&i<=12&&A("ios12-"),d2Env.isApp&&(window.screen.width/window.screen.height).toPrecision(3)==="0.462"&&A("bottom-inset")}K&&A("android"),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&A("safari")};var G=(r,i)=>{let o=`${r}=`,s=(document.cookie||"").split(";");for(let u of s){let d=u.trim();if(d.lastIndexOf(o,0)===0)return d.substring(o.length);if(d===r)return""}return i};var O=[],J=r=>{let i=r;do if(i.nextSibling)return!0;while(i=i.parentNode);return!1},Z=new MutationObserver(r=>{r.forEach(i=>{i.addedNodes.forEach(o=>{o.nodeType===1&&(O.forEach(s=>{if(o.matches(s[0]))if(!s[2]||J(o))s[1](o);else{let u=new MutationObserver(()=>{J(o)&&(u.disconnect(),s[1](o))});u.observe(o.parentNode,{childList:!0,subtree:!0})}}),o.tagName==="FOOTER"&&Z.disconnect())})})});Z.observe(document.documentElement,{childList:!0,subtree:!0});window.__run=r=>typeof r=="function"?__run.q.push(r):(...i)=>{__run.q.push([r,i])};window.__run.q=[];window.d2=window.d2||{};window.d2.brandingRender=r=>__run("d2.brandingInternal")(r);if(d2Env.isDesktop){let r=G("user_preferences_mainnav");if(r){let i=r.split(",");O.push(['ul[data-id^="section-"]',o=>{let s=o.closest('[data-slot~="nav.section"]');if(s){let u=i.includes(o.dataset.id.replace("section-",""));s.classList.toggle("is-active",u),o.style.display=u?"":"none"}},!1])}}O.push(['[data-role~="makeslist"]',r=>{if(r.classList.contains("is-parked")){let i=Array.from(r.children),o=r.classList.contains("is-open");r.classList.add("is-open");let s=r.offsetWidth,u=i[0].offsetHeight,d=i.map(h=>h.offsetWidth),l=i.map(h=>o||h.classList.contains("is-important")),_=d.filter((h,f)=>l[f]),E=U(_,s);r.style.maxHeight=`${E*u}px`,r.classList.toggle("is-open",o),r.classList.remove("is-parked")}},!0]);customElements.define("x-img",k);customElements.define("x-fit-text",M);Y();O.push(['[data-role~="dv"]',r=>{let i=()=>{r.getBoundingClientRect().height>0&&(o.disconnect(),r.classList.remove("is-off"))},o=window.ResizeObserver?new ResizeObserver(i):new MutationObserver(i);o.observe(r,window.ResizeObserver?{}:{childList:!0,subtree:!0,attributes:!0}),i()},!1]);if(d2Env.themes){let r="theme",i=window.matchMedia("(prefers-color-scheme:dark)"),o,s,u=()=>{d2Env.isApp||(s==="system"?localStorage.removeItem(r):localStorage.setItem(r,s))},d=()=>{o&&(o.classList.toggle("dark",s==="dark"),o.classList.toggle("light",s==="light"),o.classList.toggle("system",s==="system"));let E=s==="system"?i.matches?"dark":"light":s;document.documentElement.classList.toggle("dark",E==="dark"),document.documentElement.classList.toggle("light",E==="light")},l=()=>{let E=localStorage.getItem(r);s=d2Env.isApp||E===null?"system":E,u(),d()},_=E=>{if(o)return;let h=(document.documentElement.getAttribute("lang")||"ru").startsWith("ru"),f=[["light","Светлая тема","Light theme"],["dark","Тёмная тема","Dark theme"],["system","Как в системе","System theme"]];o=document.createElement("details"),d2Env.userId||(o.open=!0),o.className="c-theme-switch",o.innerHTML=`<summary class="${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"}">${E.textContent}</summary>`;for(let v of f){let b=document.createElement("button");Object.assign(b,{type:"button",className:`r-button-unstyled ${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"} c-theme-switch__item`,value:v[0],textContent:h?v[1]:v[2]}),o.appendChild(b)}E.replaceWith(o),o.addEventListener("click",v=>{let b=v.target;if(b.value){s=b.value,u(),d();let w=document.querySelector('[data-slot~="top-menu.button"]')||document.querySelector('[data-role~="top-menu"]');w&&w.click(),d2Env.userId&&(o.open=!1)}}),d()};l(),i.addEventListener?i.addEventListener("change",l):i.addListener(l),d2Env.isApp||(window.addEventListener("storage",E=>{E.key===r&&l()}),O.push(['a[href="drive://themes/"]',_,!1]))}})();
