"use strict";(()=>{var PO=Object.create;var Xa=Object.defineProperty,$O=Object.defineProperties,FO=Object.getOwnPropertyDescriptor,BO=Object.getOwnPropertyDescriptors,UO=Object.getOwnPropertyNames,Za=Object.getOwnPropertySymbols,jO=Object.getPrototypeOf,lm=Object.prototype.hasOwnProperty,Vf=Object.prototype.propertyIsEnumerable;var wo=Math.pow,qf=(i,t,e)=>t in i?Xa(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,O=(i,t)=>{for(var e in t||(t={}))lm.call(t,e)&&qf(i,e,t[e]);if(Za)for(var e of Za(t))Vf.call(t,e)&&qf(i,e,t[e]);return i},rt=(i,t)=>$O(i,BO(t));var cm=(i,t)=>{var e={};for(var n in i)lm.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&Za)for(var n of Za(i))t.indexOf(n)<0&&Vf.call(i,n)&&(e[n]=i[n]);return e};var b=(i,t)=>()=>(i&&(t=i(i=0)),t);var Hn=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),at=(i,t)=>{for(var e in t)Xa(i,e,{get:t[e],enumerable:!0})},zO=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of UO(t))!lm.call(i,s)&&s!==e&&Xa(i,s,{get:()=>t[s],enumerable:!(n=FO(t,s))||n.enumerable});return i};var kn=(i,t,e)=>(e=i!=null?PO(jO(i)):{},zO(t||!i||!i.__esModule?Xa(e,"default",{value:i,enumerable:!0}):e,i));var _=(i,t,e)=>new Promise((n,s)=>{var o=l=>{try{a(e.next(l))}catch(c){s(c)}},r=l=>{try{a(e.throw(l))}catch(c){s(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,r);a((e=e.apply(i,t)).next())});var Gf,Jf=b(()=>{"use strict";Gf=i=>{let t=(n,s,o,r,a)=>{for(let l=0,{length:c}=n;l<c;l++){let d=n[l];d instanceof HTMLElement&&(r?s.has(d)||(s.add(d),o.delete(d),i(d,r)):o.has(d)||(o.add(d),s.delete(d),i(d,r)),a||t(d.querySelectorAll("*"),s,o,r,!0))}},e=new MutationObserver(n=>{for(let s=new Set,o=new Set,r=0,{length:a}=n;r<a;r++){let{addedNodes:l,removedNodes:c}=n[r];t(c,s,o,!1,!1),t(l,s,o,!0,!1)}});return e.observe(document.documentElement,{subtree:!0,childList:!0}),e}});var Yf,Kf=b(()=>{"use strict";Jf();Yf=(i,t)=>{let e=new WeakMap,n=(l,c)=>{let d;if(c)for(let h,p=0;p<i.length;p++)l.matches(h=i[p])&&(e.has(l)||e.set(l,new Set),d=e.get(l),d.has(h)||(d.add(h),t(l,c,h)));else e.has(l)&&(d=e.get(l),e.delete(l),d.forEach(h=>{t(l,c,h)}))},s=l=>{for(let c=0;c<l.length;c++){let d=l[c];d instanceof HTMLElement&&e.delete(d)}},o=(l,c=!0)=>{for(let d=0;d<l.length;d++){let h=l[d];h instanceof HTMLElement&&n(h,c)}},r=Gf(n),a=()=>{let l=r.takeRecords();for(let c=0;c<l.length;c++)o(l[c].removedNodes,!1),o(l[c].addedNodes,!0)};return i.length&&o(document.documentElement.querySelectorAll(i.toString())),{drop:s,flush:a,observer:r,parse:o}}});var Zf,Qa,Dn,xo,je,Co,ys,C,vt,ut,Xf,tl,Qf,X=b(()=>{"use strict";Zf="role",Qa="slot",Dn=i=>`[data-${Zf}~="${i}"]`,xo=i=>`[data-${Qa}~="${i}"]`,je=(i,t)=>(t||document).querySelector(Dn(i))||void 0,Co=(i,t)=>Array.from((t||document).querySelectorAll(Dn(i))),ys=(i,t)=>i.closest(Dn(t))||void 0,C=(i,t,e)=>(e||document).querySelector(xo(`${i}.${t}`))||void 0,vt=(i,t,e)=>i.closest(xo(`${t}.${e}`))||void 0,ut=(i,t,e)=>Array.from((e||document).querySelectorAll(xo(`${i}.${t}`))),Xf=(i,t)=>{i.dataset[Zf]=t},tl=(i,t,e)=>{i.dataset[Qa]=`${t}.${e}`},Qf=i=>{i.dataset[Qa]!==void 0&&delete i.dataset[Qa]}});var H,nl,dm,mm,ig,_s,Nn,ng,el,il,tg,qO,sg,eg,VO,GO,JO,YO,og,sl,U,se,kt,Ts,G=b(()=>{"use strict";Kf();X();H=class{constructor(t,e){this.element=t;this.role=e}root(t,e){return ys(t,e||this.role)}slot(t,e){return C(this.role,t,e||this.element)}slots(t,e){return ut(this.role,t,e||this.element)}closestSlot(t,e){return vt(t,this.role,e)}},nl=new WeakMap,dm=new WeakSet,mm=[],ig=new WeakMap,_s=new Set,Nn=[],ng={},el={},il=new WeakMap,tg=i=>{let t=i;do if(t.nextSibling)return!0;while(t=t.parentNode);return!1},qO=()=>{mm.splice(0).forEach(i=>{nl.get(i)!==!0&&(nl.set(i,!0),i.parsedInit&&!dm.has(i)&&(dm.add(i),i.parsedInit()),i.parsed&&i.element.ownerDocument.contains(i.element)&&i.parsed())})},sg=i=>{mm.length||requestAnimationFrame(qO),mm.push(i)},eg=(i,t,e,n)=>{t.disconnect(),e.removeEventListener("DOMContentLoaded",n),sg(i)},VO=(i,t)=>{for(let e=ig.get(t),n=0;n<i.length;n++){let{target:s,attributeName:o,oldValue:r}=i[n],a=s.getAttribute(o);e.attributeChanged(o,r,a)}},GO=(i,t,e,n)=>{let s=new n(i,t);if(il.has(i)?il.get(i)[t]=s:il.set(i,{[t]:s}),e.set(i,s),s.init&&s.init(),s.observedAttributes&&s.attributeChanged){let o=new MutationObserver(VO);o.observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:s.observedAttributes.map(r=>(i.hasAttribute(r)&&s.attributeChanged(r,null,i.getAttribute(r)),r))}),ig.set(o,s)}return s},{flush:JO,parse:YO,drop:og}=Yf(Nn,(i,t,e)=>{let{r:n,m:s,o}=ng[e],r;if(o.prototype instanceof H)if(r=s.get(i)||GO(i,n,s,o),t){if(r.parsed||r.parsedInit&&!dm.has(r)){let{ownerDocument:a}=i;if(nl.set(r,!1),a.readyState==="complete"||tg(i))sg(r);else{let l=()=>eg(r,c,a,l);a.addEventListener("DOMContentLoaded",l);let c=new MutationObserver(()=>{tg(i)&&eg(r,c,a,l)});c.observe(i.parentNode,{childList:!0,subtree:!0})}}r.connected&&r.connected()}else!t&&r.disconnected&&(!r.parsed&&!r.parsedInit||nl.get(r))&&r.disconnected();else s.has(i)||(s.set(i,o),o(i,n))}),sl=(i,t)=>{let e=t?i:Dn(i);if(!(e in el)){let n=()=>{},s=new Promise(o=>{n=o});el[e]={_:n,$:s}}return el[e].$},U=(i,t,e)=>{let n=e?i:Dn(i);if(Nn.includes(n))throw new Error(`Duplicated selector: ${n}`);JO(),Nn.push(n),ng[n]={r:i,m:new WeakMap,o:t},YO(document.querySelectorAll(n)),sl(i,e),el[n]._()},se=(i,t,e)=>{let n=e?i:Dn(i);_s.add(n),U(n,()=>{_s.has(n)&&(_s.delete(n),t().then(({default:s})=>{Nn.splice(Nn.indexOf(n),1),og(document.querySelectorAll(n)),U(i,s,e)}))},!0)},kt=(i,t,e)=>{let n=e?`meta[name="module"][content~="${i}"]`:i;_s.add(n),U(n,()=>{_s.has(n)&&(_s.delete(n),t().then(({default:s})=>{Nn.splice(Nn.indexOf(n),1),og(document.querySelectorAll(n)),s()}))},!0)},Ts=(i,t)=>{let e=il.get(i);if(e)return t?e[t]:e[Object.keys(e)[0]]}});var Ao,ol,KO,ZO,XO,ke,nn=b(()=>{"use strict";Ao=new Map,ol=[],KO=(i,t)=>{Ao.has(t)&&Ao.get(t).unobserve(i)},ZO=(i,t)=>{let{target:e,isIntersecting:n}=i;for(let s=ol.length-1,o;o=ol[s];s--)if(o.targetEl===e&&o.rootMargin===t){let r=o.onEnter&&n;r&&o.onEnter(e);let a=o.onExit&&!n;a&&o.onExit(e),o.callOnce&&(r||a)&&(KO(e,o.rootMargin),ol.splice(s,1))}},XO=i=>{if(Ao.has(i))return Ao.get(i);let t=new IntersectionObserver(e=>{e.forEach(n=>ZO(n,i))},{rootMargin:`${i}px 0px`});return Ao.set(i,t),t},ke=(i,t)=>{let e=t.rootMargin||0,n={targetEl:i,rootMargin:e,onEnter:t.onEnter,onExit:t.onExit,callOnce:!t.permanent};ol.push(n),XO(e).observe(i)}});var Ls,rl=b(()=>{"use strict";Ls=i=>{let t=!1,e;return()=>(t||(e=i(),t=!0),e)}});var ki,ws,So,al,A,ll,Di,rg,Z=b(()=>{"use strict";rl();ki=(i,t)=>getComputedStyle(i).getPropertyValue(t),ws=(i,t)=>parseFloat(ki(i,t))||0,So=i=>{document.body.classList.toggle("docbusy",i)},al=Ls(()=>{let t=document.createElement("a").style;return t.cssText="position:-webkit-sticky;position:sticky;",t.position.includes("sticky")}),A=(i,t)=>{i.style.display=t?"":"none"},ll=i=>i.style.display!=="none",Di=i=>{let t=i.getBoundingClientRect();return t.x+=window.scrollX,t.y+=window.scrollY,t},rg=()=>{let i=document.createElement("div");i.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";let t=document.createElement("div");t.style.width="200px",t.style.height="200px",i.appendChild(t),document.body.appendChild(i);let e=i.offsetWidth-i.clientWidth;return i.remove(),e}});var ag,cl,lg=b(()=>{"use strict";ag=["click","dblclick","mousedown","mousemove","mouseup","touchend","touchmove","touchstart","keydown","keyup"],cl=class extends EventTarget{constructor(){super();this.lastEventTime=Date.now();this.minEventTime=0;ag.forEach(e=>{document.addEventListener(e,this)})}handleEvent(e){(e.type!=="mousemove"||e.movementX!==0||e.movementY!==0)&&(this.lastEventTime=Date.now(),this.lastEventTime>this.minEventTime&&(this.dispatchEvent(new CustomEvent("activity")),this.minEventTime=this.lastEventTime+3e3))}getLastEventTime(){return this.lastEventTime}dispose(){ag.forEach(e=>{document.removeEventListener(e,this)})}}});var dl,cg=b(()=>{"use strict";lg();dl=class extends EventTarget{constructor(e){super();this.idleThreshold=e;this.isIdle=!1;this.activityMonitor=new cl;this.hasActivityListener=!1;this.maybeStillActive()}maybeStillActive(){let e=this.idleThreshold+1-(Date.now()-this.activityMonitor.getLastEventTime());e>0?this.onActivityTimerId=setTimeout(this.maybeStillActive.bind(this),e):this.becomeIdle()}becomeIdle(){this.isIdle=!0,this.activityMonitor.addEventListener("activity",this),this.hasActivityListener=!0,this.dispatchEvent(new CustomEvent("idle"))}handleEvent(){this.isIdle=!1,this.removeActivityListener(),this.dispatchEvent(new CustomEvent("active")),this.maybeStillActive()}removeActivityListener(){this.hasActivityListener&&(this.activityMonitor.removeEventListener("activity",this),this.hasActivityListener=!1)}dispose(){this.removeActivityListener(),clearTimeout(this.onActivityTimerId),this.activityMonitor.dispose()}}});var QO,vi,Ro=b(()=>{"use strict";cg();QO=2e4,vi=new dl(QO)});var lt,j,Q,Ft,It,xs,sn,Ei,P,hg,B=b(()=>{"use strict";lt=(i,t)=>(t||document).querySelector(i),j=(i,t)=>lt(`.${i}`,t),Q=(i,t)=>Array.from((t||document).querySelectorAll(i)),Ft=(i,t)=>Q(`.${i}`,t),It=(i,t)=>i.closest(`.${t}`),xs=i=>{let t=lt('[type="submit"]',i);t&&t.click()},sn=i=>{let t=0;if(i&&i instanceof HTMLElement&&i.shadowRoot&&(t=sn(i.shadowRoot)),!i||i.childElementCount===0)return t;for(let e of i.children){let n=getComputedStyle(e),s=n.getPropertyValue("position")==="static"||n.getPropertyValue("z-index")==="auto"?sn(e):Number(n.getPropertyValue("z-index"))||0;s>t&&(t=s)}return t},Ei=i=>{let t=document.createElement("div");if(t.innerHTML=i.trim(),t.childNodes.length===1)return t.removeChild(t.firstChild);let e=document.createDocumentFragment();for(;t.firstChild;)e.appendChild(t.firstChild);return e},P=(i,t,...e)=>{typeof t=="string"&&(t={className:t});let n=document.createElement(i);return Object.entries(t||{}).forEach(([s,o])=>{s==="style"?n.style.cssText=o:s==="class"?n.className=o:s.startsWith("aria-")||s.startsWith("data-")?n.setAttribute(s,o):n[s]=o}),n.append(...e.filter(Boolean)),n},hg=i=>{i.replaceWith(...i.children)}});var on,Ze,Ct,Gt=b(()=>{"use strict";on=(i,t)=>{let e=i.elements[t];if(e){if(e.type)return e.value;for(let n=0;n<e.length;n++){let s=e[n].type==="checkbox"||e[n].type==="radio"?e[n].checked&&e[n].value:e[n].value;if(s)return s}}},Ze=i=>{let t=new URLSearchParams;if(i){let e=new FormData(i);for(let[n,s]of e)s instanceof File||t.append(n,s)}return t},Ct=i=>{i.dispatchEvent(new Event("change",{bubbles:!0}))}});var Lt,ge=b(()=>{"use strict";Lt=(i,t)=>{i&&(i.classList.add("scroll-anchor"),i.scrollIntoView(t),queueMicrotask(()=>{i.classList.remove("scroll-anchor")}))}});function hl(i,t,e){return Ni(i,rn(t,e))}function Cs(i,t){return typeof i=="function"?i(t):i}function an(i){return i.split("-")[0]}function As(i){return i.split("-")[1]}function hm(i){return i==="x"?"y":"x"}function ul(i){return i==="y"?"height":"width"}function ko(i){return["top","bottom"].includes(an(i))?"y":"x"}function pl(i){return hm(ko(i))}function ug(i,t,e){e===void 0&&(e=!1);let n=As(i),s=pl(i),o=ul(s),r=s==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=Io(r)),[r,Io(r)]}function pg(i){let t=Io(i);return[ml(i),t,ml(t)]}function ml(i){return i.replace(/start|end/g,t=>oH[t])}function rH(i,t,e){let n=["left","right"],s=["right","left"],o=["top","bottom"],r=["bottom","top"];switch(i){case"top":case"bottom":return e?t?s:n:t?n:s;case"left":case"right":return t?o:r;default:return[]}}function fg(i,t,e,n){let s=As(i),o=rH(an(i),e==="start",n);return s&&(o=o.map(r=>r+"-"+s),t&&(o=o.concat(o.map(ml)))),o}function Io(i){return i.replace(/left|right|bottom|top/g,t=>sH[t])}function aH(i){return O({top:0,right:0,bottom:0,left:0},i)}function um(i){return typeof i!="number"?aH(i):{top:i,right:i,bottom:i,left:i}}function Pn(i){return rt(O({},i),{top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height})}var rn,Ni,Oo,Ho,Pi,sH,oH,fl=b(()=>{rn=Math.min,Ni=Math.max,Oo=Math.round,Ho=Math.floor,Pi=i=>({x:i,y:i}),sH={left:"right",right:"left",bottom:"top",top:"bottom"},oH={start:"end",end:"start"}});function gg(i,t,e){let{reference:n,floating:s}=i,o=ko(t),r=pl(t),a=ul(r),l=an(t),c=o==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,p=n[a]/2-s[a]/2,m;switch(l){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(As(t)){case"start":m[r]-=p*(e&&c?-1:1);break;case"end":m[r]+=p*(e&&c?-1:1);break}return m}function pm(i,t){return _(this,null,function*(){var e;t===void 0&&(t={});let{x:n,y:s,platform:o,rects:r,elements:a,strategy:l}=i,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Cs(t,i),u=um(m),f=a[p?h==="floating"?"reference":"floating":h],v=Pn(yield o.getClippingRect({element:(e=yield o.isElement==null?void 0:o.isElement(f))==null||e?f:f.contextElement||(yield o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),E=h==="floating"?rt(O({},r.floating),{x:n,y:s}):r.reference,T=yield o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating),M=(yield o.isElement==null?void 0:o.isElement(T))?(yield o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},x=Pn(o.convertOffsetParentRelativeRectToViewportRelativeRect?yield o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:E,offsetParent:T,strategy:l}):E);return{top:(v.top-x.top+u.top)/M.y,bottom:(x.bottom-v.bottom+u.bottom)/M.y,left:(v.left-x.left+u.left)/M.x,right:(x.right-v.right+u.right)/M.x}})}function lH(i,t){return _(this,null,function*(){let{placement:e,platform:n,elements:s}=i,o=yield n.isRTL==null?void 0:n.isRTL(s.floating),r=an(e),a=As(e),l=ko(e)==="y",c=["left","top"].includes(r)?-1:1,d=o&&l?-1:1,h=Cs(t,i),{mainAxis:p,crossAxis:m,alignmentAxis:u}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:O({mainAxis:0,crossAxis:0,alignmentAxis:null},h);return a&&typeof u=="number"&&(m=a==="end"?u*-1:u),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}})}var vg,Eg,bg,$n,yg,fm=b(()=>{fl();fl();vg=(i,t,e)=>_(void 0,null,function*(){let{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:r}=e,a=o.filter(Boolean),l=yield r.isRTL==null?void 0:r.isRTL(t),c=yield r.getElementRects({reference:i,floating:t,strategy:s}),{x:d,y:h}=gg(c,n,l),p=n,m={},u=0;for(let g=0;g<a.length;g++){let{name:f,fn:v}=a[g],{x:E,y:T,data:M,reset:x}=yield v({x:d,y:h,initialPlacement:n,placement:p,strategy:s,middlewareData:m,rects:c,platform:r,elements:{reference:i,floating:t}});if(d=E!=null?E:d,h=T!=null?T:h,m=rt(O({},m),{[f]:O(O({},m[f]),M)}),x&&u<=50){u++,typeof x=="object"&&(x.placement&&(p=x.placement),x.rects&&(c=x.rects===!0?yield r.getElementRects({reference:i,floating:t,strategy:s}):x.rects),{x:d,y:h}=gg(c,p,l)),g=-1;continue}}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}});Eg=i=>({name:"arrow",options:i,fn(e){return _(this,null,function*(){let{x:n,y:s,placement:o,rects:r,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=Cs(i,e)||{};if(d==null)return{};let p=um(h),m={x:n,y:s},u=pl(o),g=ul(u),f=yield a.getDimensions(d),v=u==="y",E=v?"top":"left",T=v?"bottom":"right",M=v?"clientHeight":"clientWidth",x=r.reference[g]+r.reference[u]-m[u]-r.floating[g],y=m[u]-r.reference[u],S=yield a.getOffsetParent==null?void 0:a.getOffsetParent(d),k=S?S[M]:0;(!k||!(yield a.isElement==null?void 0:a.isElement(S)))&&(k=l.floating[M]||r.floating[g]);let N=x/2-y/2,J=k/2-f[g]/2-1,K=rn(p[E],J),V=rn(p[T],J),I=K,Y=k-f[g]-V,et=k/2-f[g]/2+N,Tt=hl(I,et,Y),nt=!c.arrow&&As(o)!=null&&et!=Tt&&r.reference[g]/2-(et<I?K:V)-f[g]/2<0,xt=nt?et<I?et-I:et-Y:0;return{[u]:m[u]+xt,data:O({[u]:Tt,centerOffset:et-Tt-xt},nt&&{alignmentOffset:xt}),reset:nt}})}}),bg=function(i){return i===void 0&&(i={}),{name:"flip",options:i,fn(e){return _(this,null,function*(){var n,s;let{placement:o,middlewareData:r,rects:a,initialPlacement:l,platform:c,elements:d}=e,I=Cs(i,e),{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:f=!0}=I,v=cm(I,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((n=r.arrow)!=null&&n.alignmentOffset)return{};let E=an(o),T=an(l)===l,M=yield c.isRTL==null?void 0:c.isRTL(d.floating),x=m||(T||!f?[Io(l)]:pg(l));!m&&g!=="none"&&x.push(...fg(l,f,g,M));let y=[l,...x],S=yield pm(e,v),k=[],N=((s=r.flip)==null?void 0:s.overflows)||[];if(h&&k.push(S[E]),p){let Y=ug(o,a,M);k.push(S[Y[0]],S[Y[1]])}if(N=[...N,{placement:o,overflows:k}],!k.every(Y=>Y<=0)){var J,K;let Y=(((J=r.flip)==null?void 0:J.index)||0)+1,et=y[Y];if(et)return{data:{index:Y,overflows:N},reset:{placement:et}};let Tt=(K=N.filter(nt=>nt.overflows[0]<=0).sort((nt,xt)=>nt.overflows[1]-xt.overflows[1])[0])==null?void 0:K.placement;if(!Tt)switch(u){case"bestFit":{var V;let nt=(V=N.map(xt=>[xt.placement,xt.overflows.filter(Vt=>Vt>0).reduce((Vt,He)=>Vt+He,0)]).sort((xt,Vt)=>xt[1]-Vt[1])[0])==null?void 0:V[0];nt&&(Tt=nt);break}case"initialPlacement":Tt=l;break}if(o!==Tt)return{reset:{placement:Tt}}}return{}})}}};$n=function(i){return i===void 0&&(i=0),{name:"offset",options:i,fn(e){return _(this,null,function*(){var n,s;let{x:o,y:r,placement:a,middlewareData:l}=e,c=yield lH(e,i);return a===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:o+c.x,y:r+c.y,data:rt(O({},c),{placement:a})}})}}},yg=function(i){return i===void 0&&(i={}),{name:"shift",options:i,fn(e){return _(this,null,function*(){let{x:n,y:s,placement:o}=e,v=Cs(i,e),{mainAxis:r=!0,crossAxis:a=!1,limiter:l={fn:E=>{let{x:T,y:M}=E;return{x:T,y:M}}}}=v,c=cm(v,["mainAxis","crossAxis","limiter"]),d={x:n,y:s},h=yield pm(e,c),p=ko(an(o)),m=hm(p),u=d[m],g=d[p];if(r){let E=m==="y"?"top":"left",T=m==="y"?"bottom":"right",M=u+h[E],x=u-h[T];u=hl(M,u,x)}if(a){let E=p==="y"?"top":"left",T=p==="y"?"bottom":"right",M=g+h[E],x=g-h[T];g=hl(M,g,x)}let f=l.fn(rt(O({},e),{[m]:u,[p]:g}));return rt(O({},f),{data:{x:f.x-n,y:f.y-s}})})}}}});function $i(i){return Tg(i)?(i.nodeName||"").toLowerCase():"#document"}function De(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function bi(i){var t;return(t=(Tg(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function Tg(i){return i instanceof Node||i instanceof De(i).Node}function yi(i){return i instanceof Element||i instanceof De(i).Element}function ai(i){return i instanceof HTMLElement||i instanceof De(i).HTMLElement}function _g(i){return typeof ShadowRoot=="undefined"?!1:i instanceof ShadowRoot||i instanceof De(i).ShadowRoot}function Ms(i){let{overflow:t,overflowX:e,overflowY:n,display:s}=ze(i);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!["inline","contents"].includes(s)}function Lg(i){return["table","td","th"].includes($i(i))}function gl(i){let t=vl(),e=ze(i);return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(e.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(e.contain||"").includes(n))}function wg(i){let t=Fn(i);for(;ai(t)&&!Do(t);){if(gl(t))return t;t=Fn(t)}return null}function vl(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Do(i){return["html","body","#document"].includes($i(i))}function ze(i){return De(i).getComputedStyle(i)}function No(i){return yi(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function Fn(i){if($i(i)==="html")return i;let t=i.assignedSlot||i.parentNode||_g(i)&&i.host||bi(i);return _g(t)?t.host:t}function xg(i){let t=Fn(i);return Do(t)?i.ownerDocument?i.ownerDocument.body:i.body:ai(t)&&Ms(t)?t:xg(t)}function Ss(i,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);let s=xg(i),o=s===((n=i.ownerDocument)==null?void 0:n.body),r=De(s);return o?t.concat(r,r.visualViewport||[],Ms(s)?s:[],r.frameElement&&e?Ss(r.frameElement):[]):t.concat(s,Ss(s,[],e))}var Cg=b(()=>{});function Mg(i){let t=ze(i),e=parseFloat(t.width)||0,n=parseFloat(t.height)||0,s=ai(i),o=s?i.offsetWidth:e,r=s?i.offsetHeight:n,a=Oo(e)!==o||Oo(n)!==r;return a&&(e=o,n=r),{width:e,height:n,$:a}}function gm(i){return yi(i)?i:i.contextElement}function Rs(i){let t=gm(i);if(!ai(t))return Pi(1);let e=t.getBoundingClientRect(),{width:n,height:s,$:o}=Mg(t),r=(o?Oo(e.width):e.width)/n,a=(o?Oo(e.height):e.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}function Rg(i){let t=De(i);return!vl()||!t.visualViewport?cH:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dH(i,t,e){return t===void 0&&(t=!1),!e||t&&e!==De(i)?!1:t}function Bn(i,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);let s=i.getBoundingClientRect(),o=gm(i),r=Pi(1);t&&(n?yi(n)&&(r=Rs(n)):r=Rs(i));let a=dH(o,e,n)?Rg(o):Pi(0),l=(s.left+a.x)/r.x,c=(s.top+a.y)/r.y,d=s.width/r.x,h=s.height/r.y;if(o){let p=De(o),m=n&&yi(n)?De(n):n,u=p,g=u.frameElement;for(;g&&n&&m!==u;){let f=Rs(g),v=g.getBoundingClientRect(),E=ze(g),T=v.left+(g.clientLeft+parseFloat(E.paddingLeft))*f.x,M=v.top+(g.clientTop+parseFloat(E.paddingTop))*f.y;l*=f.x,c*=f.y,d*=f.x,h*=f.y,l+=T,c+=M,u=De(g),g=u.frameElement}}return Pn({width:d,height:h,x:l,y:c})}function Ig(i){return mH.some(t=>{try{return i.matches(t)}catch(e){return!1}})}function hH(i){let{elements:t,rect:e,offsetParent:n,strategy:s}=i,o=s==="fixed",r=bi(n),a=t?Ig(t.floating):!1;if(n===r||a&&o)return e;let l={scrollLeft:0,scrollTop:0},c=Pi(1),d=Pi(0),h=ai(n);if((h||!h&&!o)&&(($i(n)!=="body"||Ms(r))&&(l=No(n)),ai(n))){let p=Bn(n);c=Rs(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-l.scrollLeft*c.x+d.x,y:e.y*c.y-l.scrollTop*c.y+d.y}}function uH(i){return Array.from(i.getClientRects())}function Og(i){return Bn(bi(i)).left+No(i).scrollLeft}function pH(i){let t=bi(i),e=No(i),n=i.ownerDocument.body,s=Ni(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Ni(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),r=-e.scrollLeft+Og(i),a=-e.scrollTop;return ze(n).direction==="rtl"&&(r+=Ni(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:r,y:a}}function fH(i,t){let e=De(i),n=bi(i),s=e.visualViewport,o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;let c=vl();(!c||c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a,y:l}}function gH(i,t){let e=Bn(i,!0,t==="fixed"),n=e.top+i.clientTop,s=e.left+i.clientLeft,o=ai(i)?Rs(i):Pi(1),r=i.clientWidth*o.x,a=i.clientHeight*o.y,l=s*o.x,c=n*o.y;return{width:r,height:a,x:l,y:c}}function Ag(i,t,e){let n;if(t==="viewport")n=fH(i,e);else if(t==="document")n=pH(bi(i));else if(yi(t))n=gH(t,e);else{let s=Rg(i);n=rt(O({},t),{x:t.x-s.x,y:t.y-s.y})}return Pn(n)}function Hg(i,t){let e=Fn(i);return e===t||!yi(e)||Do(e)?!1:ze(e).position==="fixed"||Hg(e,t)}function vH(i,t){let e=t.get(i);if(e)return e;let n=Ss(i,[],!1).filter(a=>yi(a)&&$i(a)!=="body"),s=null,o=ze(i).position==="fixed",r=o?Fn(i):i;for(;yi(r)&&!Do(r);){let a=ze(r),l=gl(r);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ms(r)&&!l&&Hg(i,r))?n=n.filter(d=>d!==r):s=a,r=Fn(r)}return t.set(i,n),n}function EH(i){let{element:t,boundary:e,rootBoundary:n,strategy:s}=i,r=[...e==="clippingAncestors"?vH(t,this._c):[].concat(e),n],a=r[0],l=r.reduce((c,d)=>{let h=Ag(t,d,s);return c.top=Ni(h.top,c.top),c.right=rn(h.right,c.right),c.bottom=rn(h.bottom,c.bottom),c.left=Ni(h.left,c.left),c},Ag(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function bH(i){let{width:t,height:e}=Mg(i);return{width:t,height:e}}function yH(i,t,e){let n=ai(t),s=bi(t),o=e==="fixed",r=Bn(i,!0,o,t),a={scrollLeft:0,scrollTop:0},l=Pi(0);if(n||!n&&!o)if(($i(t)!=="body"||Ms(s))&&(a=No(t)),n){let h=Bn(t,!0,o,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else s&&(l.x=Og(s));let c=r.left+a.scrollLeft-l.x,d=r.top+a.scrollTop-l.y;return{x:c,y:d,width:r.width,height:r.height}}function Sg(i,t){return!ai(i)||ze(i).position==="fixed"?null:t?t(i):i.offsetParent}function kg(i,t){let e=De(i);if(!ai(i)||Ig(i))return e;let n=Sg(i,t);for(;n&&Lg(n)&&ze(n).position==="static";)n=Sg(n,t);return n&&($i(n)==="html"||$i(n)==="body"&&ze(n).position==="static"&&!gl(n))?e:n||wg(i)||e}function TH(i){return ze(i).direction==="rtl"}function wH(i,t){let e=null,n,s=bi(i);function o(){var a;clearTimeout(n),(a=e)==null||a.disconnect(),e=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();let{left:c,top:d,width:h,height:p}=i.getBoundingClientRect();if(a||t(),!h||!p)return;let m=Ho(d),u=Ho(s.clientWidth-(c+h)),g=Ho(s.clientHeight-(d+p)),f=Ho(c),E={rootMargin:-m+"px "+-u+"px "+-g+"px "+-f+"px",threshold:Ni(0,rn(1,l))||1},T=!0;function M(x){let y=x[0].intersectionRatio;if(y!==l){if(!T)return r();y?r(!1,y):n=setTimeout(()=>{r(!1,1e-7)},100)}T=!1}try{e=new IntersectionObserver(M,rt(O({},E),{root:s.ownerDocument}))}catch(x){e=new IntersectionObserver(M,E)}e.observe(i)}return r(!0),o}function ln(i,t,e,n){n===void 0&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=gm(i),d=s||o?[...c?Ss(c):[],...Ss(t)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",e,{passive:!0}),o&&v.addEventListener("resize",e)});let h=c&&a?wH(c,e):null,p=-1,m=null;r&&(m=new ResizeObserver(v=>{let[E]=v;E&&E.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(t)})),e()}),c&&!l&&m.observe(c),m.observe(t));let u,g=l?Bn(i):null;l&&f();function f(){let v=Bn(i);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&e(),g=v,u=requestAnimationFrame(f)}return e(),()=>{var v;d.forEach(E=>{s&&E.removeEventListener("scroll",e),o&&E.removeEventListener("resize",e)}),h==null||h(),(v=m)==null||v.disconnect(),m=null,l&&cancelAnimationFrame(u)}}var cH,mH,_H,LH,Dg,El,Ng,cn,Po=b(()=>{fm();fm();fl();Cg();cH=Pi(0);mH=[":popover-open",":modal"];_H=function(i){return _(this,null,function*(){let t=this.getOffsetParent||kg,e=this.getDimensions;return{reference:yH(i.reference,yield t(i.floating),i.strategy),floating:O({x:0,y:0},yield e(i.floating))}})};LH={convertOffsetParentRelativeRectToViewportRelativeRect:hH,getDocumentElement:bi,getClippingRect:EH,getOffsetParent:kg,getElementRects:_H,getClientRects:uH,getDimensions:bH,getScale:Rs,isElement:yi,isRTL:TH};Dg=yg,El=bg,Ng=Eg,cn=(i,t,e)=>{let n=new Map,s=O({platform:LH},e),o=rt(O({},s.platform),{_c:n});return vg(i,t,rt(O({},s),{platform:o}))}});var xH,Is,kW,bl=b(()=>{"use strict";xH=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Is=!!navigator.userAgent.match(/android/i),kW=xH()});var CH,Un,vm=b(()=>{"use strict";Po();bl();B();CH=200,Un=class extends EventTarget{constructor(t,e,n={}){super(),this.element=n.element,this.anchor=e,this.message=t,this.config=n}render(){let t=this.anchor&&document.body.contains(this.anchor),e=P("div",`c-bubble__body${this.config.isDark?" ctx-dark":""}`,this.close=P("div","c-bubble__close m-icon i-close-l"),this.contentElement=typeof this.message=="string"?P("div",{className:"c-bubble__content",innerHTML:this.message}):P("div","c-bubble__content",this.message),t&&P("div","c-bubble__arrow"));this.element?this.element.classList.add("c-bubble"):this.element=P("div","c-bubble"),this.config.classNames&&this.element.classList.add(...this.config.classNames),this.element.style.zIndex=String(sn(document.body)+1),this.element.appendChild(e),document.body.contains(this.element)||document.body.appendChild(this.element)}show(){this.computePosition().then(()=>this.onCreate()),this.floatingCleanup=ln(this.anchor||document.body,this.element,()=>this.computePosition()),this.anchor&&this.anchor.parentElement&&(this.anchorObserver=new MutationObserver(()=>{(!this.anchor||!document.body.contains(this.anchor))&&(this.anchorObserver.disconnect(),this.attachEventListeners(!1),this.onHide())}),this.anchorObserver.observe(this.anchor.parentElement,{childList:!0}))}computePosition(){return _(this,null,function*(){let t=!!(this.anchor&&document.body.contains(this.anchor)),{x:e,y:n}=yield cn(this.anchor||document.body,this.element,{placement:t&&this.config.placement||"top",middleware:[$n(this.config.offset||9),t&&!this.config.noFlip?El({padding:{top:d2Env.isApp?Is?56:0:50,bottom:d2Env.isApp?56:0}}):!1,Dg({padding:t?5:20,crossAxis:!t})]});Object.assign(this.element.style,{left:`${e}px`,top:`${n}px`})})}attachEventListeners(t){t?(this.close.addEventListener("click",this),document.addEventListener("click",this,!0),document.addEventListener("keydown",this)):(this.close.removeEventListener("click",this),document.removeEventListener("click",this,!0),document.removeEventListener("keydown",this))}handleEvent(t){switch(t.type){case"click":(!this.element.contains(t.target)||t.target===this.close)&&this.hide();break;case"keydown":t.keyCode===27&&this.hide()}}setTransition(t){return this.element.animate({opacity:t?[0,1]:[1,0]},{duration:CH,easing:`cubic-bezier(${t?".61,1,.88,1":".12,0,.39,0"})`,fill:"forwards"})}onCreate(){if(this.config.isDropdown||this.config.noAnimation)this.onShow();else{let t=this.setTransition(!0);t.onfinish=()=>this.onShow()}this.attachEventListeners(!0)}hide(){if(this.dispatchEvent(new CustomEvent("beforehide",{cancelable:!0})))if(this.attachEventListeners(!1),this.anchorObserver&&this.anchorObserver.disconnect(),this.config.noAnimation)this.onHide();else{let t=this.setTransition(!1);t.onfinish=()=>this.onHide()}}onShow(){this.dispatchEvent(new CustomEvent("show"))}onHide(){this.floatingCleanup&&(this.floatingCleanup(),delete this.floatingCleanup),this.element&&(this.element.remove(),delete this.element),this.dispatchEvent(new CustomEvent("hide"))}}});var yl,_l,Em=b(()=>{"use strict";yl="Подтвердить",_l="Отменить"});var Tl,$g=b(()=>{"use strict";Em();B();vm();Tl=class extends Un{constructor(t,e,n,s,o){super(`<h3 class="x-header x-header--xs">${t}</h3>${e?`<div class="x-text">${e}</div>`:""}`,n,{classNames:["c-bubble--confirm"]}),this.confirmButton=s,this.cancelButton=o,this.resolve=()=>{},this.promise=new Promise(r=>{this.resolve=r}),this.isConfirm=!1}render(){super.render(),this.contentElement.appendChild(P("div","o-t-l",this.confirm=P("button","c-button c-button--block c-button--l c-button--primary",this.confirmButton||yl),this.cancel=P("button","c-button c-button--block c-button--l o-t-s",this.cancelButton||_l)))}onCreate(){super.onCreate(),this.confirm.focus(),this.confirm.addEventListener("click",()=>{this.isConfirm=!0,this.hide()}),this.cancel.addEventListener("click",()=>this.hide())}onHide(){super.onHide(),this.resolve(this.isConfirm)}}});var Fg,Bg,bm=b(()=>{"use strict";Fg="Закрыть (Esc)",Bg="Выберите действие"});var $o,_m=b(()=>{"use strict";F();$o=(i,t)=>{if(!d2Env.isApp)return;let e=t?t.toString():"";ym(!0),window.location.href=`drive2://${i}${e?`/?${e}`:""}`,ym(!1)}});var Tm,Lm,Ug,jg,Ae,Ll,Fi=b(()=>{"use strict";Ug=i=>{Tm=i},jg=i=>{Lm=i},Ae=()=>{Tm&&Tm.hide()},Ll=()=>{Lm&&Lm.hide()}});var Bi,wl=b(()=>{"use strict";B();Z();Fi();Bi=class extends EventTarget{constructor(e={}){super();this.needTransition=!1;this.canHazOverlay=()=>!1;this.visible=!1;this.backwardTabWrapInProgress=!1;let{anchor:n,title:s,html:o}=e;this.anchor=n,this.title=s||"",this.html=o||"",this.config=O({className:"c-modal__content--basic"},e)}createDom(){this.element=P("div","c-modal",this.containerEl=P("div",{className:"c-modal__container",tabIndex:"0"},this.headerGroup=P("div","c-modal__header-group",this.header=P("div",{className:"c-modal__header",innerHTML:this.title}),this.close=P("div","c-modal__close m-icon i-close-l",P("div"))),this.contentElement=P("div",{className:`c-modal__content${this.config.className?` ${this.config.className}`:""}`,innerHTML:this.html}))),A(this.element,!1),this.tabCatcherEl=P("div",{tabIndex:"0",style:"position:fixed"}),A(this.tabCatcherEl,!1),this.element.style.zIndex=String(sn(document.body)+1),document.body.append(this.element,this.tabCatcherEl)}render(){this.createDom()}decorate(e){this.createDom(),this.contentElement.replaceWith(e),this.contentElement=e,this.contentElement.classList.add("c-modal__content"),this.config.className&&this.contentElement.classList.add(this.config.className),A(this.contentElement,!0)}show(){this.visible||!this.dispatchEvent(new CustomEvent("beforeshow",{cancelable:!0}))||(this.visible=!0,this.onBeforeShow(),Ae(),Ll(),this.attachEventListeners(!0),this.showElements(!0),this.needTransition?this.playTransition(!0):this.onShow())}hide(){!this.visible||!this.dispatchEvent(new CustomEvent("beforehide",{cancelable:!0}))||(this.visible=!1,this.onBeforeHide(),this.attachEventListeners(!1),this.needTransition?this.playTransition(!1):this.onHide())}focus(){this.focusElement()}setupBackwardTabWrap(){this.backwardTabWrapInProgress=!0;try{this.tabCatcherEl.focus()}catch(e){}setTimeout(()=>this.resetBackwardTabWrap())}resetBackwardTabWrap(){this.backwardTabWrapInProgress=!1}showElements(e){A(this.tabCatcherEl,e),A(this.element,e)}attachEventListeners(e){e?(document.documentElement.addEventListener("focus",this,!0),this.close.addEventListener("click",this),document.addEventListener("keydown",this)):(document.documentElement.removeEventListener("focus",this,!0),this.close.removeEventListener("click",this),document.removeEventListener("keydown",this))}playTransition(e){e?this.onShow():this.onHide()}handleEvent(e){switch(e.type){case"focus":this.onFocus(e);break;case"click":this.onClick(e);break;case"keydown":this.onKey(e)}}onClick(e){e.preventDefault(),e.stopPropagation(),this.hide()}onFocus(e){this.backwardTabWrapInProgress?this.resetBackwardTabWrap():e.target===this.tabCatcherEl&&setTimeout(()=>this.focusElement())}onKey(e){let n=e.target,s=!1;e.keyCode===27?n.tagName==="SELECT"&&!n.disabled||(s=!0):e.keyCode===9&&e.shiftKey&&n===this.containerEl&&this.setupBackwardTabWrap(),s&&(e.stopPropagation(),e.preventDefault(),this.hide())}onBeforeShow(){}onShow(){this.focus();let e=lt("[data-autofocus],[autofocus]",this.contentElement);e&&setTimeout(()=>{e.focus(),e.value&&(e.selectionStart=e.selectionEnd=e.value.length)}),this.dispatchEvent(new CustomEvent("show"))}onBeforeHide(){}onHide(){this.element.remove(),this.tabCatcherEl.remove(),this.dispatchEvent(new CustomEvent("hide"))}focusElement(){try{let{scrollTop:e}=this.element;this.containerEl.focus(),this.element.scrollTo({top:e,behavior:"instant"})}catch(e){}}}});var Ui,xl=b(()=>{"use strict";bm();B();_m();wl();Ui=class extends Bi{constructor(e={}){super(O({title:Bg},e));this.scrollY=0}createDomInternal(){this.element.classList.add("c-modal--pop-screen"),this.closeClone=this.close.cloneNode(!1),this.closeClone.className="c-modal__close-box",this.wrapper.prepend(this.closeClone)}createDom(){super.createDom(),this.wrapper=P("div","c-modal__wrapper"),this.wrapper.appendChild(this.containerEl),this.element.appendChild(this.wrapper),this.createDomInternal()}attachEventListeners(e){super.attachEventListeners(e),e?this.closeClone.addEventListener("click",this):this.closeClone.removeEventListener("click",this)}setDocumentHidden(e){e&&(this.scrollY=document.scrollingElement.scrollTop),document.documentElement.classList.toggle("g-dialog-active",e),document.scrollingElement.scrollTo({top:e?0:this.scrollY,behavior:"instant"})}onBeforeShow(){super.onBeforeShow(),this.canHazOverlay(!0)&&(this.setDocumentHidden(!0),d2Env.isApp&&setTimeout(()=>{let e=new URLSearchParams({header:this.title,headerColor:"111111",statusBarStyle:"light"});$o("modal",e)}))}onHide(){super.onHide(),this.canHazOverlay(!1)&&(this.setDocumentHidden(!1),d2Env.isApp&&$o("modal-close"))}focusElement(){try{this.containerEl.focus(),this.wrapper.scrollTo({top:0,behavior:"instant"}),setTimeout(()=>{this.wrapper.scrollTo({top:0,behavior:"instant"})})}catch(e){}}}});var Cl,zg=b(()=>{"use strict";Em();B();xl();Cl=class extends Ui{constructor(e,n,s,o,r){super({anchor:s,title:e});this.resolve=()=>{};this.promise=new Promise(e=>{this.resolve=e});this.isConfirm=!1;this.html=n?`<div class="x-box x-box--ghost">${n}</div>`:"",this.confirmButton=o,this.cancelButton=r}render(){super.render(),this.contentElement.appendChild(P("div","x-box x-box--ghost o-t-l",this.confirm=P("button","c-button c-button--block c-button--l c-button--primary",this.confirmButton||yl),this.cancel=P("button","c-button c-button--block c-button--l o-t-s",this.cancelButton||_l)))}attachEventListeners(e){super.attachEventListeners(e),e&&(this.confirm.addEventListener("click",()=>{this.isConfirm=!0,this.hide()}),this.cancel.addEventListener("click",()=>{this.hide()}))}onShow(){super.onShow(),this.confirm.focus()}onHide(){super.onHide(),setTimeout(()=>{this.resolve(this.isConfirm)},1e3)}}});var Bt,jn=b(()=>{"use strict";Bt=class i{constructor(t,e){this.width=t;this.height=e}clone(){return new i(this.width,this.height)}getLongest(){return Math.max(this.width,this.height)}getShortest(){return Math.min(this.width,this.height)}area(){return this.width*this.height}aspectRatio(){return this.width/this.height}ceil(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this}fitsInside(t){return this.width<=t.width&&this.height<=t.height}floor(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this}round(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this}scale(t,e){return this.width*=t,this.height*=typeof e=="number"?e:t,this}scaleToCover(t){let e=this.aspectRatio()<=t.aspectRatio()?t.width/this.width:t.height/this.height;return this.scale(e)}scaleToFit(t){let e=this.aspectRatio()>t.aspectRatio()?t.width/this.width:t.height/this.height;return this.scale(e)}static equals(t,e){return t===e?!0:!t||!e?!1:t.width===e.width&&t.height===e.height}}});var wm,Wg=b(()=>{"use strict";Z();wm=i=>{document.body.style.marginRight=i?`${rg()}px`:"",document.documentElement.style.overflow=i?"hidden":""}});var SH,Al,qg=b(()=>{"use strict";bm();B();jn();Z();Wg();wl();SH="cubic-bezier(.39,.575,.565,1)",Al=class extends Bi{constructor(e){super(e);this.transitionDuration=300;this.needTransition=!0,this.onDocumentClick=this.onDocumentClick.bind(this)}createDom(){this.bgEl=P("div","c-modal__bg"),A(this.bgEl,!1),document.body.appendChild(this.bgEl),super.createDom(),this.close.title=Fg}showElements(e){A(this.bgEl,e),super.showElements(e)}getPreviewSize(e,n){return e.clone().scaleToFit(n)}playTransition(e){if(!this.anchor){this.onTransitionEnd();return}this.anchorBox=this.anchorBox&&!document.documentElement.contains(this.anchor)?this.anchorBox:Di(this.anchor);let n=Di(this.containerEl),s=new Bt(n.width,n.height),o=this.getPreviewSize(s,new Bt(this.anchorBox.width,this.anchorBox.height)),r=o.width/s.width,a=this.anchorBox.left-n.left-Math.round((o.width-this.anchorBox.width)/2),l=this.anchorBox.top-n.top-Math.round((o.height-this.anchorBox.height)/2);if(this.transition){this.bgTransition.reverse(),this.transition.reverse();return}let c={duration:this.transitionDuration,easing:SH,direction:e?"normal":"reverse",fill:"forwards"};this.bgTransition=this.bgEl.animate({opacity:[0,1]},c),this.transition=this.containerEl.animate({transform:[`translate(${a}px,${l}px) scale(${r})`,"none"],opacity:[0,1]},c),this.transition.onfinish=()=>this.onTransitionEnd()}onTransitionEnd(){this.containerEl&&(this.containerEl.style.transform=""),this.visible?this.onShow():this.onHide()}attachEventListeners(e){super.attachEventListeners(e),this.config.closeOnClick&&(e?document.addEventListener("click",this.onDocumentClick,!0):document.removeEventListener("click",this.onDocumentClick,!0))}onDocumentClick(e){this.containerEl.contains(e.target)||(e.preventDefault(),e.stopPropagation(),this.hide())}onBeforeShow(){super.onBeforeShow(),this.canHazOverlay(!0)&&wm(!0)}onShow(){super.onShow(),this.transition=void 0,this.bgTransition=void 0}onHide(){this.transition=void 0,this.bgTransition=void 0,this.bgEl.remove(),super.onHide(),this.canHazOverlay(!1)&&wm(!1)}}});var Sl,Vg=b(()=>{"use strict";B();xl();Sl=class extends Ui{createDomInternal(){this.sentinel=P("div","c-modal__sentinel"),this.wrapper.prepend(this.sentinel),this.headerTop=P("div","c-modal__header-top"),this.closeClone=this.close.cloneNode(!1),this.headerTop.append(this.header.cloneNode(!0),this.closeClone),this.containerEl.prepend(this.headerGroup),this.element.appendChild(this.headerTop),this.observer=new IntersectionObserver(t=>{this.element.classList.toggle("is-stuck",!t[0].isIntersecting)},{threshold:0})}onShow(){super.onShow(),this.observer.observe(this.sentinel)}onHide(){super.onHide(),this.observer.unobserve(this.sentinel)}}});var oe,xm,Gg,Rt,Ut,Am,Sm,Mm,Cm,Ml,Jg,li,Xe,jt,Yg,ot,pt=b(()=>{"use strict";vm();$g();zg();wl();qg();Vg();xl();oe=[],xm=!1,Gg=i=>i&&!xm||!i&&xm&&oe.length===0?(xm=i,!0):!1,Rt=()=>{let i=oe.pop();i&&i.hide()},Ut=()=>{if(oe.length){let i=oe[oe.length-1];(i instanceof Un||i instanceof Ui)&&Rt()}},Am=i=>{i||Rt()},Sm=i=>{oe.length>1&&oe[oe.length-1]!==i.target&&i.preventDefault()},Mm=i=>{let t=oe.indexOf(i.target);t!==-1&&oe.splice(t)},Cm=(i,t={},e)=>{Am(e);let n=new i(t);return n.addEventListener("beforehide",Sm),n.addEventListener("hide",Mm),oe.push(n),n.canHazOverlay=Gg,n},Ml=i=>Cm(Ui,i,!0),Jg=i=>{let t=Ml(i);return t.render(),t.show(),t},li=(i,t,e)=>d2Env.isMobile?e?Ml(i):Cm(Sl,i,t):Cm(Al,i,t),Xe=(i,t)=>{let e=li(i,t);return e.render(),e.show(),e},jt=(i,t,e={},n)=>{oe.length!==0&&!(oe[oe.length-1]instanceof Bi)&&Am(n);let s=new Un(i,t,e);return s.addEventListener("beforehide",Sm),s.addEventListener("hide",Mm),oe.push(s),s.render(),s.show(),s},Yg=(i,t,e={})=>(e.classNames=e.classNames||[],e.classNames.push("c-bubble--error"),jt(i,t,rt(O({},e),{isDark:!0}))),ot=(i,t,e,n,s,o)=>{oe.length!==0&&!(oe[oe.length-1]instanceof Bi)&&Am(o||d2Env.isMobile);let r=d2Env.isMobile?new Cl(i,t,e,n,s):new Tl(i,t,e,n,s);return r.addEventListener("beforehide",Sm),r.addEventListener("hide",Mm),oe.push(r),d2Env.isMobile&&(r.canHazOverlay=Gg),r.render(),r.show(),r.promise}});var MH,RH,Kg,Zg,Rl,IH,_i,Xg,OH,Fo,Rm,Qg,Qe,Ne=b(()=>{"use strict";B();Gt();Z();ge();pt();MH=/^[a-zA-Z0-9\-_.+]+@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]+$/,RH=/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i,Kg="is-invalid",Zg="field-validation-error",Rl=new WeakMap,IH=(i,t)=>i.getAttribute(t)||i.dataset[t]||void 0,_i=(i,...t)=>{let e=typeof i=="string"?document.getElementById(i):i;e&&(Rl.has(e)?Rl.get(e).push(...t):Rl.set(e,t))},Xg=i=>{let t=typeof i=="string"?document.getElementById(i):i;return Rl.get(t)||[]},OH=(i,t)=>{try{return typeof i=="string"?t[i].value:i.value}catch(e){return}},Fo=(i,t)=>{let e=t.closest(".x-form__item, .y-form-item");if(e){e.classList.contains("y-form-item")?t.classList.add(Kg):e.classList.add(Kg);let n=j(Zg,e);if(!n){n=document.createElement("span"),n.classList.add(Zg);let s=j("y-form-notes",e);s?s.before(n):e.appendChild(n)}if(A(n,!0),n.innerHTML=i,e.offsetHeight===0&&e.closest("details")){let o=e.querySelector("summary");o&&(o.open=!0)}}else t.offsetParent!==null&&jt(i,t,{placement:"bottom-start"})},Rm=(i,t)=>{let[e,n,s,o]=t,r=typeof e=="string"?i[e]||document.getElementById(e):e;if(o)return!Array.from(r).map(h=>[h,n,s]).some(h=>!Rm(i,h));let a="";if(r)try{a=r.value||on(i,e)}catch(h){}else if(s!=="imagereq")return!0;let l=typeof s=="function"||s==="imagereq"||r.length?void 0:IH(r,s==="minlengthorempty"?"minlength":s),c=Number(l),d=typeof s=="function"?s.call({getValue:OH},i,r,a):s==="required"?!!a:s==="max"?a&&Number(a)<=c:s==="min"?a&&Number(a)>=c:s==="maxlength"?a&&a.length<=c||a==="":s==="minlength"?a&&a.length>=c:s==="minlengthorempty"?a&&a.length>=c||a==="":s==="pattern"?a&&l&&new RegExp(l).test(a):s==="email"?a&&MH.test(a):s==="imagereq"?!!i[`${e}-1`]:s==="url"?a&&RH.test(a):!0;if(!d){r&&r.length&&r[0].type&&(r=r[0]),r=i.querySelector(`[data-field-name="${e}"]`)||r,a=Array.isArray(a)?a[0]:a;let h=n.replace("{value}",a);h&&Fo(h,r);try{Lt(r,{behavior:"smooth",block:"nearest"}),r.focus()}catch(p){}}return!!d},Qg=i=>i&&Xg(i).find(t=>!Rm(i,t)),Qe=i=>i?!Xg(i).some(n=>!Rm(i,n)):!0});var Os,Hs,Bo,Uo=b(()=>{"use strict";Os="data-action",Hs=".",Bo=":"});var jo,Im=b(()=>{"use strict";Uo();jo=class{constructor(t){this.flowType_=t.action,this.node_=t.actionElement||t.targetElement,this.event_=t.event,this.eventType_=t.eventType,this.target_=t.targetElement||(t.event&&t.event.target&&t.event.target.nodeType===1?t.event.target:void 0)}flowType(){return this.flowType_}actionNamespace(){let t=this.flowType_;return t.substr(0,t.indexOf(Hs))}actionName(){let t=this.flowType_;return t.substring(t.indexOf(Hs)+1)}node(){return this.node_}event(){return this.event_}eventType(){return this.eventType_}target(){return this.target_}}});var HH,Il,tv=b(()=>{"use strict";Im();Uo();HH=i=>new jo(i),Il=class i{constructor(t,e){this.actions_={};this.namespaceActions_={};this.loaders_={};this.defaultLoaderNamespaces_={};this.queue_=[];this.globalHandlers_={};let n=t||HH;this.flowFactory_=s=>n(s),this.getHandler_=e}dispatch(t,e){if(Array.isArray(t)){this.queue_=[...t],this.replayQueuedEvents_();return}if(e){let{event:a,eventType:l}=t,c=this.globalHandlers_[l];if(c)for(let d=0,h;h=c[d];d++)h(a)===!1&&a.preventDefault();return}let{action:n}=t,s=i.getNamespace(n),o=this.namespaceActions_[s],r;if(this.getHandler_?r=this.getHandler_(t):o?o.accept(t)&&(r=o.handle):r=this.actions_[n],r){let a=this.flowFactory_(t);r(a);return}this.queue_.push(t),o||this.maybeInvokeLoader_(s,t)}registerLoader(t,e){this.loaders_[t]={loader:e,called:!1}}registerDefaultLoader(t){this.defaultLoader_=t}registerNamespaceHandler(t,e,n=()=>!0){this.namespaceActions_[t]={accept:n,handle:e}}maybeInvokeLoader_(t,e){let n=this.loaders_[t];n?n.called||(n.loader(this,t,e),n.called=!0):this.defaultLoader_&&!(t in this.defaultLoaderNamespaces_)&&(this.defaultLoaderNamespaces_[t]=!0,this.defaultLoader_(this,t,e))}static getNamespace(t){return t.split(".")[0]}registerHandlers(t,e,n){for(let s in e)this.actions_[t+Hs+s]=n?e[s].bind(n):e[s];this.replayQueuedEvents_()}unregisterHandler(t,e){delete this.actions_[t+Hs+e]}registerGlobalHandler(t,e){this.globalHandlers_[t]=this.globalHandlers_[t]||[],this.globalHandlers_[t].push(e)}unregisterGlobalHandler(t,e){if(this.globalHandlers_[t]){let n=this.globalHandlers_[t].indexOf(e);n!==-1&&this.globalHandlers_[t].splice(n,1)}}canDispatch(t){let{action:e}=t;if(this.actions_.hasOwnProperty(e))return!0;let n=i.getNamespace(e);return this.namespaceActions_.hasOwnProperty(n)?this.namespaceActions_[n].accept(t):!1}replay(){this.replayQueuedEvents_()}replayNow(){!this.eventReplayer_||this.queue_.length===0||this.eventReplayer_(this.queue_,this)}replayQueuedEvents_(){!this.eventReplayer_||this.queue_.length===0||queueMicrotask(()=>{this.eventReplayer_(this.queue_,this)})}setEventReplayer(t){this.eventReplayer_=t,this.replayQueuedEvents_()}}});var ev,Om,zo,Hm,Ol,iv,nv,km=b(()=>{"use strict";ev=new Map,Om=new WeakMap,zo=i=>Om.get(i),Hm=(i,t)=>{Om.set(i,t)},Ol=i=>ev.get(i),iv=(i,t)=>{ev.set(i,t)},nv=i=>{Om.delete(i)}});var ov,rv,av,lv=b(()=>{"use strict";ov=(i,t,e)=>{let n=t==="focus"||t==="blur"||t==="error"||t==="load";return i.addEventListener(t,e,n),{eventType:t,handler:e,capture:n}},rv=(i,t)=>{i.removeEventListener(t.eventType,t.handler,t.capture)},av=i=>i.ctrlKey||i.shiftKey||i.metaKey||i.button===1});var Dm,kH,Wo,Pe,ks,Nm=b(()=>{"use strict";km();lv();Uo();Dm=!1,kH={},Wo=class{constructor(t){this.div=t;this.handlers=[]}containsNode(t){return this.div.contains(t)}static isNested(t,e){for(let n=0;n<e.length;++n)if(e[n].div!==t.div&&e[n].containsNode(t.div))return!0;return!1}installHandler(t){this.handlers.push(t.call(null,this.div))}cleanUp(){for(let t=0;t<this.handlers.length;++t){let e=this.handlers[t];rv(this.div,e)}this.handlers.length=0}},Pe=class Pe{constructor(){this.installers=[];this.containers=[];this.nestedContainers=[];this.events={};this.queue=[]}static getDefaultEventType(){return Pe.defaultEventType}static setDefaultEventType(t){Pe.defaultEventType=t}static eventHandler(t,e){return function n(s){let o=this,r=Pe.createEventInfo(e,s,o);if(t.dispatcher&&(r.eventType==="clickonly"&&(r.eventType="click"),t.dispatcher(r,!0)),!Pe.canSkipDispatch(r))if(Dm&&s.stopPropagation(),t.dispatcher){Pe.shouldPreventDefaultBeforeDispatching(r)&&s.preventDefault();let a=t.dispatcher(r);a&&n.call(this,a)}else Pe.queueEvent(t,r,s)}}static shouldPreventDefaultBeforeDispatching(t){return!!t.actionElement&&t.actionElement.tagName==="A"&&t.actionElement.getAttribute("data-npd")===null&&(t.eventType==="click"||t.eventType==="clickmod")}static queueEvent(t,e,n){e.event=n,t.queue.push(e)}static createEventInfo(t,e,n){t==="click"&&av(e)&&(t="clickmod");let s=e.target,o={eventType:t,event:e,targetElement:s,action:"",actionElement:void 0,timeStamp:Date.now()};for(let r=s;r&&r!==n;r=r.parentElement){let a=Pe.getAction(r,t);if(a.action)return rt(O(O({},o),a),{actionElement:r,event:a.event||o.event})}return o}static canSkipDispatch(t){return!t.actionElement}static parseActions(t){let e=zo(t);if(!e){let n=t.getAttribute(Os);if(!n)e=kH,Hm(t,e);else{if(e=Ol(n),!e){e={};let s=n.split(/\s*;\s*/),o=s?s.length:0;for(let r=0;r<o;r++){let a=s[r];if(!a)continue;let l=a.indexOf(Bo),c=l!==-1,d=c?a.substr(0,l).trim():Pe.defaultEventType;e[d]=c?a.substr(l+1).trim():a}iv(n,e)}Hm(t,e)}}return e}static getAction(t,e){let s=Pe.parseActions(t)[e]||"";return{eventType:e,action:s,event:void 0}}static containerHandlerInstaller(t,e){return n=>ov(n,t,e)}addEvent(t,e){if(this.events.hasOwnProperty(t))return;let n=Pe.eventHandler(this,t),s=Pe.containerHandlerInstaller(e||t,n);this.events[t]=n,this.installers.push(s);for(let o=0;o<this.containers.length;++o)this.containers[o].installHandler(s)}handler(t){return this.events[t]}addContainer(t){let e=new Wo(t);if(Dm)this.setUpContainer_(e),this.containers.push(e);else{if(this.hasContainerFor_(t))return this.nestedContainers.push(e),e;this.setUpContainer_(e),this.containers.push(e),this.updateNestedContainers_()}return e}updateNestedContainers_(){let t=this.nestedContainers.concat(this.containers),e=[],n=[];for(let s=0;s<this.containers.length;++s){let o=this.containers[s];Wo.isNested(o,t)?(e.push(o),o.cleanUp()):n.push(o)}for(let s=0;s<this.nestedContainers.length;++s){let o=this.nestedContainers[s];Wo.isNested(o,t)?e.push(o):(n.push(o),this.setUpContainer_(o))}this.containers=n,this.nestedContainers=e}setUpContainer_(t){typeof navigator!="undefined"&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&(t.div.style.cursor="pointer");for(let e=0;e<this.installers.length;++e)t.installHandler(this.installers[e])}hasContainerFor_(t){for(let e=0;e<this.containers.length;e++)if(this.containers[e].containsNode(t))return!0;return!1}removeContainer(t){t.cleanUp();let e=!1;for(let n=0;n<this.containers.length;++n)if(this.containers[n]===t){this.containers.splice(n,1),e=!0;break}if(!e){for(let n=0;n<this.nestedContainers.length;++n)if(this.nestedContainers[n]===t){this.nestedContainers.splice(n,1);break}}Dm||this.updateNestedContainers_()}dispatchTo(t){this.dispatcher=t,this.queue&&(this.queue.length>0&&t(this.queue),this.queue.length=0)}};Pe.defaultEventType="click";ks=Pe});var Pm,$m,Fm,cv,ym,DH,NH,PH,$H,FH,ti,w,F=b(()=>{"use strict";Ne();tv();Nm();B();Gt();Pm="__unloadw",cv=!1,ym=i=>{cv=i},DH=(i,t)=>{let e=i[i.length-1];t.canDispatch(e)&&(t.dispatch(e),i.length=0)},NH=i=>{if($m){let t=Ze($m);!cv&&t.toString()!==Fm.toString()&&(i.preventDefault(),i.returnValue="")}},PH=i=>{let t=i.target,e=Qe(t);return e&&t[Pm]&&(delete t[Pm],window.onbeforeunload=null),e},$H=i=>{let t=i.target,e=t&&t.closest("form"),n=e&&"keysubmit"in e.dataset;e&&n&&(i.ctrlKey||i.metaKey)&&i.keyCode===13&&xs(e)},FH=i=>{let t=i.target,e=t&&t.closest("form"),n=e&&"leavewarning"in e.dataset;e&&n&&typeof window.onbeforeunload!="function"&&(Fm||($m=e,Fm=Ze(e)),e[Pm]=!0,window.onbeforeunload=NH)},ti=new ks;ti.addContainer(document.documentElement);document.documentElement.style.cursor="";ti.addEvent("click");ti.addEvent("focus");ti.addEvent("blur");ti.addEvent("submit");ti.addEvent("keyup");ti.addEvent("touchstart");ti.addEvent("input");ti.addEvent("change");ti.addEvent("mouseover");ti.addEvent("mouseout");w=new Il;ti.dispatchTo(w.dispatch.bind(w));w.registerGlobalHandler("submit",PH);w.registerGlobalHandler("keyup",$H);w.registerGlobalHandler("focus",FH);w.setEventReplayer(DH)});var qo,dv,Ds,mv,hv,uv,pv,Vo=b(()=>{"use strict";qo="Внести в Чёрный список?",dv="Внести в Чёрный список",Ds="Убрать из Чёрного списка",mv="Разблокировать пользователя?",hv="Он сможет писать вам сообщения, комментарии и появится в списке контактов",uv="Разблокировать",pv="Внести"});var Ns,fv,kl,Bm=b(()=>{"use strict";Ns="Ошибка исполнения запроса",fv="Слишком много запросов, попробуйте позже",kl="Ошибочный ответ сервера"});var Dl,Um=b(()=>{"use strict";Dl=()=>{let i="0123456789abcdef",t="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx",e="",n=0,s=Math.random()*4294967295|0;for(;n++<32;){let o=t[n-1],r=s&15,a=o=="x"?r:r&3|8;e+=o=="-"||o=="4"?o:i[a],s=n%8==0?Math.random()*4294967295|0:s>>4}return e}});var zm,BH,jm,$e,dn=b(()=>{"use strict";Z();zm=300,BH="is-active",jm=new WeakMap,$e=class{constructor(t){this.target=t;this.target.classList.add("c-spin","m-icon-before","c-icon-before","c-icon--s"),jm.has(this.target)&&jm.get(this.target).stop(),jm.set(this.target,this)}start(t){clearTimeout(this.tm),this.tm=setTimeout(()=>{this.setActive(!0)},t||zm)}stop(){clearTimeout(this.tm),this.setActive(!1)}setActive(t){So(t),this.target.classList.toggle(BH,t)}}});function Ev(i){clearTimeout(vv),i?vv=setTimeout(()=>{So(i)},zm):So(i)}var vv,bv=b(()=>{"use strict";dn();Z()});var ji,We,Wm=b(()=>{"use strict";pt();Bm();Um();bv();ji=class ji extends EventTarget{constructor(t,e,n){super();let s=ji.normalizeParams(t,e);this.url=s.url,this.config=s.config,this.isDummy=n,this.request=new XMLHttpRequest,this.completed=!1}abort(t,e){let n=ji.normalizeParams(t,e),s=this.url!==n.url||(this.config.body||"").toString()!==(n.config.body||"").toString();return s&&this.request.abort(),s}dispose(){this.completed||this.request.abort()}send(){return new Promise((t,e)=>{if(this.isDummy)return;let{request:n}=this,{delay:s,method:o,body:r,headers:a,throwError:l,acceptOnlyHttp200:c}=this.config,d=h=>{l&&e(h)};n.open(o,this.url,!0),n.onload=()=>{if(c?n.status!==200:(n.status/100|0)!==2){let h={};try{h=JSON.parse(n.responseText)}catch(m){}if(!(!!h.error&&(typeof h.error=="string"||Array.isArray(h.error)))){let{status:m,statusText:u}=n,g=m===429?fv:u!==""?u:Ns;this.showError(ji.formatError(g,n),!0),d({request:n});return}}if(this.config.returnType===3)try{let h=JSON.parse(n.responseText),{error:p,notification:m}=h,g=(!!m?m:p)||[];g=Array.isArray(g)?g:[g];let f=`<p>${g.join("</p><p>")}</p>`;g.length?(this.showError(f,!1),d({request:n,messages:g,formattedMessage:f,json:h})):t(h)}catch(h){this.showError(ji.formatError(kl,n),!1),d({request:n})}else this.config.returnType===2?t(n.responseText):t(n)},n.onerror=()=>{this.showError(ji.formatError(Ns),!0),d({request:n})},n.onreadystatechange=()=>{n.readyState===4&&(this.completed=!0,this.enableSpinner(!1),this.dispatchEvent(new Event("complete")))},Object.entries(a).forEach(([h,p])=>n.setRequestHeader(h,p)),d2Env.isApp&&s?setTimeout(()=>{this.enableSpinner(!0),n.send(r&&r.toString())},120):(this.enableSpinner(!0),n.send(r&&r.toString()))})}enableSpinner(t){let{silent:e,spinner:n}=this.config;n?t?n.start():n.stop():e||Ev(t)}showError(t,e){let{anchorEl:n,silent:s}=this.config;if(!s){let o={classNames:["c-bubble--xhr","c-link-decorated"]};e?Yg(t,n,o):jt(t,n,o)}}static normalizeParams(t,e){let n=t,s=O({method:"GET"},e);s.headers=O(O({},ji.defaultHeaders),s.headers||{});let o=s.body instanceof URLSearchParams?s.body:new URLSearchParams(typeof s.body=="string"?s.body:void 0);if(s.body instanceof FormData)for(let[r,a]of s.body)a instanceof File||o.append(r,a);else if(typeof s.body!="string"&&!(s.body instanceof URLSearchParams))for(let r in s.body){let a=s.body[r];(Array.isArray(a)?a:[a]).forEach(l=>o.append(r,String(l)))}if(s.method==="GET"||s.method==="HEAD"){let r=new URL(n,window.location.href);for(let[a,l]of o)r.searchParams.append(a,l);n=r.href,s.body=""}else Object.entries(d2Env.formContext).forEach(([r,a])=>o.append(r,a)),s.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",s.body=o;return{url:n,config:s}}static formatError(t,e,n){let s=e?e.getResponseHeader("X-Request-ID")||e.status:n||"";return t+(s?` (${s}).`:".")}};ji.defaultHeaders={"X-Requested-With":"XMLHttpRequest","X-Origin-Request-ID":d2Env.requestId,"X-Client-Request-ID":Dl()};We=ji});var qm,Vm,yv,R,Dt,W=b(()=>{"use strict";Wm();qm=new Map,Vm=(i,t,e={})=>{let n=qm.get(t);if(n&&!n.completed&&!n.abort(i,e))return new We(i,e,!0);let s=new We(i,e);return s.addEventListener("complete",()=>qm.delete(t),{once:!0}),qm.set(t,s),s},yv=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=1,new We(i,t).send()):(e.returnType=1,Vm(i,t,e).send()),R=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=3,new We(i,t).send()):(e.returnType=3,Vm(i,t,e).send()),Dt=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=2,new We(i,t).send()):(e.returnType=2,Vm(i,t,e).send())});var UH,jH,Fe,mn=b(()=>{"use strict";UH=i=>[void 0,i],jH=i=>[i,void 0],Fe=i=>Promise.resolve().then(i).then(UH).catch(jH)});var At,zi,Zt=b(()=>{"use strict";km();Nm();Uo();At=i=>{let t=i.event();t&&t.preventDefault()},zi=(i,t)=>{let e=ks.getDefaultEventType(),n=zo(i)&&O({},zo(i));if(!n){let o=i.getAttribute(Os);if(!o)n={};else if(n=Ol(o),!n){n={};let r=o.split(/\s*;\s*/);for(let a=0,l=r?r.length:0;a<l;a++){let c=r[a];if(c){let d=c.indexOf(Bo),h=d!==-1,p=h?c.substr(0,d).trim():e;n[p]=h?c.substr(d+1).trim():c}}}}delete n[t||e];let s=Object.keys(n).map(o=>(o===e?"":o+Bo)+n[o]).join(";");nv(i),s?i.setAttribute(Os,s):i.removeAttribute(Os)}});var Se,JH,Uv,Wi=b(()=>{"use strict";F();X();pt();Se=i=>{let t=C("signuptt","content");return t&&jt(t.content.cloneNode(!0),i),!!t},JH=i=>{let t=i.node(),e=t&&t.href;!Se(t)&&e&&(window.location.href=e)},Uv=()=>{w.registerHandlers("signuptt",{show:JH})}});function Qv(i,t){if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return jv!==void 0?jv.createHTML(t):t}function Vn(i,t,e=i,n){var r,a,l;if(t===ce)return t;let s=n!==void 0?(r=e._$Co)==null?void 0:r[n]:e._$Cl,o=Zo(t)?void 0:t._$litDirective$;return(s==null?void 0:s.constructor)!==o&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),o===void 0?s=void 0:(s=new o(i),s._$AT(i,e,n)),n!==void 0?((l=e._$Co)!=null?l:e._$Co=[])[n]=s:e._$Cl=s),s!==void 0&&(t=Vn(i,s._$AS(i,t.values),s,n)),t}var Yo,$l,jv,Km,qi,Zm,YH,qn,Ko,Zo,Yv,Kv,Jm,Jo,zv,Wv,zn,qv,Vv,Zv,Xv,L,kV,ce,$,Gv,Wn,tE,Xo,Fl,$s,Gn,Bl,Ul,jl,zl,eE,Ym,Jv,q,dt=b(()=>{Yo=globalThis,$l=Yo.trustedTypes,jv=$l?$l.createPolicy("lit-html",{createHTML:i=>i}):void 0,Km="$lit$",qi=`lit$${(Math.random()+"").slice(9)}$`,Zm="?"+qi,YH=`<${Zm}>`,qn=document,Ko=()=>qn.createComment(""),Zo=i=>i===null||typeof i!="object"&&typeof i!="function",Yv=Array.isArray,Kv=i=>Yv(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Jm=`[ 	
\f\r]`,Jo=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,zv=/-->/g,Wv=/>/g,zn=RegExp(`>|${Jm}(?:([^\\s"'>=/]+)(${Jm}*=${Jm}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),qv=/'/g,Vv=/"/g,Zv=/^(?:script|style|textarea|title)$/i,Xv=i=>(t,...e)=>({_$litType$:i,strings:t,values:e}),L=Xv(1),kV=Xv(2),ce=Symbol.for("lit-noChange"),$=Symbol.for("lit-nothing"),Gv=new WeakMap,Wn=qn.createTreeWalker(qn,129);tE=(i,t)=>{let e=i.length-1,n=[],s,o=t===2?"<svg>":"",r=Jo;for(let a=0;a<e;a++){let l=i[a],c,d,h=-1,p=0;for(;p<l.length&&(r.lastIndex=p,d=r.exec(l),d!==null);)p=r.lastIndex,r===Jo?d[1]==="!--"?r=zv:d[1]!==void 0?r=Wv:d[2]!==void 0?(Zv.test(d[2])&&(s=RegExp("</"+d[2],"g")),r=zn):d[3]!==void 0&&(r=zn):r===zn?d[0]===">"?(r=s!=null?s:Jo,h=-1):d[1]===void 0?h=-2:(h=r.lastIndex-d[2].length,c=d[1],r=d[3]===void 0?zn:d[3]==='"'?Vv:qv):r===Vv||r===qv?r=zn:r===zv||r===Wv?r=Jo:(r=zn,s=void 0);let m=r===zn&&i[a+1].startsWith("/>")?" ":"";o+=r===Jo?l+YH:h>=0?(n.push(c),l.slice(0,h)+Km+l.slice(h)+qi+m):l+qi+(h===-2?a:m)}return[Qv(i,o+(i[e]||"<?>")+(t===2?"</svg>":"")),n]},Xo=class i{constructor({strings:t,_$litType$:e},n){let s;this.parts=[];let o=0,r=0,a=t.length-1,l=this.parts,[c,d]=tE(t,e);if(this.el=i.createElement(c,n),Wn.currentNode=this.el.content,e===2){let h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=Wn.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(let h of s.getAttributeNames())if(h.endsWith(Km)){let p=d[r++],m=s.getAttribute(h).split(qi),u=/([.?@])?(.*)/.exec(p);l.push({type:1,index:o,name:u[2],strings:m,ctor:u[1]==="."?Bl:u[1]==="?"?Ul:u[1]==="@"?jl:Gn}),s.removeAttribute(h)}else h.startsWith(qi)&&(l.push({type:6,index:o}),s.removeAttribute(h));if(Zv.test(s.tagName)){let h=s.textContent.split(qi),p=h.length-1;if(p>0){s.textContent=$l?$l.emptyScript:"";for(let m=0;m<p;m++)s.append(h[m],Ko()),Wn.nextNode(),l.push({type:2,index:++o});s.append(h[p],Ko())}}}else if(s.nodeType===8)if(s.data===Zm)l.push({type:2,index:o});else{let h=-1;for(;(h=s.data.indexOf(qi,h+1))!==-1;)l.push({type:7,index:o}),h+=qi.length-1}o++}}static createElement(t,e){let n=qn.createElement("template");return n.innerHTML=t,n}};Fl=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var c;let{el:{content:e},parts:n}=this._$AD,s=((c=t==null?void 0:t.creationScope)!=null?c:qn).importNode(e,!0);Wn.currentNode=s;let o=Wn.nextNode(),r=0,a=0,l=n[0];for(;l!==void 0;){if(r===l.index){let d;l.type===2?d=new $s(o,o.nextSibling,this,t):l.type===1?d=new l.ctor(o,l.name,l.strings,this,t):l.type===6&&(d=new zl(o,this,t)),this._$AV.push(d),l=n[++a]}r!==(l==null?void 0:l.index)&&(o=Wn.nextNode(),r++)}return Wn.currentNode=qn,s}p(t){let e=0;for(let n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}},$s=class i{get _$AU(){var t,e;return(e=(t=this._$AM)==null?void 0:t._$AU)!=null?e:this._$Cv}constructor(t,e,n,s){var o;this.type=2,this._$AH=$,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=s,this._$Cv=(o=s==null?void 0:s.isConnected)!=null?o:!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Vn(this,t,e),Zo(t)?t===$||t==null||t===""?(this._$AH!==$&&this._$AR(),this._$AH=$):t!==this._$AH&&t!==ce&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):Kv(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==$&&Zo(this._$AH)?this._$AA.nextSibling.data=t:this.T(qn.createTextNode(t)),this._$AH=t}$(t){var o;let{values:e,_$litType$:n}=t,s=typeof n=="number"?this._$AC(t):(n.el===void 0&&(n.el=Xo.createElement(Qv(n.h,n.h[0]),this.options)),n);if(((o=this._$AH)==null?void 0:o._$AD)===s)this._$AH.p(e);else{let r=new Fl(s,this),a=r.u(this.options);r.p(e),this.T(a),this._$AH=r}}_$AC(t){let e=Gv.get(t.strings);return e===void 0&&Gv.set(t.strings,e=new Xo(t)),e}k(t){Yv(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,n,s=0;for(let o of t)s===e.length?e.push(n=new i(this.S(Ko()),this.S(Ko()),this,this.options)):n=e[s],n._$AI(o),s++;s<e.length&&(this._$AR(n&&n._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,e);t&&t!==this._$AB;){let s=t.nextSibling;t.remove(),t=s}}setConnected(t){var e;this._$AM===void 0&&(this._$Cv=t,(e=this._$AP)==null||e.call(this,t))}},Gn=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,s,o){this.type=1,this._$AH=$,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=$}_$AI(t,e=this,n,s){let o=this.strings,r=!1;if(o===void 0)t=Vn(this,t,e,0),r=!Zo(t)||t!==this._$AH&&t!==ce,r&&(this._$AH=t);else{let a=t,l,c;for(t=o[0],l=0;l<o.length-1;l++)c=Vn(this,a[n+l],e,l),c===ce&&(c=this._$AH[l]),r||(r=!Zo(c)||c!==this._$AH[l]),c===$?t=$:t!==$&&(t+=(c!=null?c:"")+o[l+1]),this._$AH[l]=c}r&&!s&&this.j(t)}j(t){t===$?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}},Bl=class extends Gn{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===$?void 0:t}},Ul=class extends Gn{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==$)}},jl=class extends Gn{constructor(t,e,n,s,o){super(t,e,n,s,o),this.type=5}_$AI(t,e=this){var r;if((t=(r=Vn(this,t,e,0))!=null?r:$)===ce)return;let n=this._$AH,s=t===$&&n!==$||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,o=t!==$&&(n===$||s);s&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;typeof this._$AH=="function"?this._$AH.call((n=(e=this.options)==null?void 0:e.host)!=null?n:this.element,t):this._$AH.handleEvent(t)}},zl=class{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Vn(this,t)}},eE={P:Km,A:qi,C:Zm,M:1,L:tE,R:Fl,D:Kv,V:Vn,I:$s,H:Gn,N:Ul,U:jl,B:Bl,F:zl},Ym=Yo.litHtmlPolyfillSupport;Ym==null||Ym(Xo,$s),((Jv=Yo.litHtmlVersions)!=null?Jv:Yo.litHtmlVersions=[]).push("3.1.2");q=(i,t,e)=>{var o,r;let n=(o=e==null?void 0:e.renderBefore)!=null?o:t,s=n._$litPart$;if(s===void 0){let a=(r=e==null?void 0:e.renderBefore)!=null?r:null;n._$litPart$=s=new $s(t.insertBefore(Ko(),a),a,void 0,e!=null?e:{})}return s._$AI(i),s}});var Me,Ti,ei,Fs=b(()=>{Me={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ti=i=>(...t)=>({_$litDirective$:i,values:t}),ei=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}});var Nt,ii=b(()=>{dt();Fs();Nt=Ti(class extends ei{constructor(i){var t;if(super(i),i.type!==Me.ATTRIBUTE||i.name!=="class"||((t=i.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(i){return" "+Object.keys(i).filter(t=>i[t]).join(" ")+" "}update(i,[t]){var n,s;if(this.st===void 0){this.st=new Set,i.strings!==void 0&&(this.nt=new Set(i.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(let o in t)t[o]&&!((n=this.nt)!=null&&n.has(o))&&this.st.add(o);return this.render(t)}let e=i.element.classList;for(let o of this.st)o in t||(e.remove(o),this.st.delete(o));for(let o in t){let r=!!t[o];r===this.st.has(o)||(s=this.nt)!=null&&s.has(o)||(r?(e.add(o),this.st.add(o)):(e.remove(o),this.st.delete(o)))}return ce}})});var KH,nE,iE,Bs,hn,ZH,Wl,sE,ql,Xm=b(()=>{dt();({I:KH}=eE),nE=i=>i.strings===void 0,iE=()=>document.createComment(""),Bs=(i,t,e)=>{var o;let n=i._$AA.parentNode,s=t===void 0?i._$AB:t._$AA;if(e===void 0){let r=n.insertBefore(iE(),s),a=n.insertBefore(iE(),s);e=new KH(r,a,i,i.options)}else{let r=e._$AB.nextSibling,a=e._$AM,l=a!==i;if(l){let c;(o=e._$AQ)==null||o.call(e,i),e._$AM=i,e._$AP!==void 0&&(c=i._$AU)!==a._$AU&&e._$AP(c)}if(r!==s||l){let c=e._$AA;for(;c!==r;){let d=c.nextSibling;n.insertBefore(c,s),c=d}}}return e},hn=(i,t,e=i)=>(i._$AI(t,e),i),ZH={},Wl=(i,t=ZH)=>i._$AH=t,sE=i=>i._$AH,ql=i=>{var n;(n=i._$AP)==null||n.call(i,!1,!0);let t=i._$AA,e=i._$AB.nextSibling;for(;t!==e;){let s=t.nextSibling;t.remove(),t=s}}});var oE,ct,Wt=b(()=>{dt();Fs();Xm();oE=(i,t,e)=>{let n=new Map;for(let s=t;s<=e;s++)n.set(i[s],s);return n},ct=Ti(class extends ei{constructor(i){if(super(i),i.type!==Me.CHILD)throw Error("repeat() can only be used in text expressions")}dt(i,t,e){let n;e===void 0?e=t:t!==void 0&&(n=t);let s=[],o=[],r=0;for(let a of i)s[r]=n?n(a,r):r,o[r]=e(a,r),r++;return{values:o,keys:s}}render(i,t,e){return this.dt(i,t,e).values}update(i,[t,e,n]){var g;let s=sE(i),{values:o,keys:r}=this.dt(t,e,n);if(!Array.isArray(s))return this.ut=r,o;let a=(g=this.ut)!=null?g:this.ut=[],l=[],c,d,h=0,p=s.length-1,m=0,u=o.length-1;for(;h<=p&&m<=u;)if(s[h]===null)h++;else if(s[p]===null)p--;else if(a[h]===r[m])l[m]=hn(s[h],o[m]),h++,m++;else if(a[p]===r[u])l[u]=hn(s[p],o[u]),p--,u--;else if(a[h]===r[u])l[u]=hn(s[h],o[u]),Bs(i,l[u+1],s[h]),h++,u--;else if(a[p]===r[m])l[m]=hn(s[p],o[m]),Bs(i,s[h],s[p]),p--,m++;else if(c===void 0&&(c=oE(r,m,u),d=oE(a,h,p)),c.has(a[h]))if(c.has(a[p])){let f=d.get(r[m]),v=f!==void 0?s[f]:null;if(v===null){let E=Bs(i,s[h]);hn(E,o[m]),l[m]=E}else l[m]=hn(v,o[m]),Bs(i,s[h],v),s[f]=null;m++}else ql(s[p]),p--;else ql(s[h]),h++;for(;m<=u;){let f=Bs(i,l[u+1]);hn(f,o[m]),l[m++]=f}for(;h<=p;){let f=s[h++];f!==null&&ql(f)}return this.ut=r,Wl(i,l),ce}})});var rE,Vl,$t,Us,aE,lE,cE,dE,js,ve,zs,mE,hE,uE,Kt=b(()=>{"use strict";rE="Вы уверены?",Vl="Подтвердить покупку?",$t="Удалить",Us="Скрыть",aE="Да, я уверен{Gender, select, XX {а} other {}}",lE="Нет, я передумал{Gender, select, XX {а} other {}}",cE="Закрыть окно?",dE="Внесённые изменения не сохранятся",js="Закрыть",ve="Сохранить",zs="Отменить",mE="{Amount, plural, one {# кредит} many {# кредитов} other {# кредита}}",hE="Выделить все",uE="Отменить все"});var ci,Qo=b(()=>{dt();ci=i=>i!=null?i:$});var Ws,pE=b(()=>{dt();Fs();Xm();Ws=Ti(class extends ei{constructor(i){if(super(i),i.type!==Me.PROPERTY&&i.type!==Me.ATTRIBUTE&&i.type!==Me.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!nE(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[t]){if(t===ce||t===$)return t;let e=i.element,n=i.name;if(i.type===Me.PROPERTY){if(t===e[n])return ce}else if(i.type===Me.BOOLEAN_ATTRIBUTE){if(!!t===e.hasAttribute(n))return ce}else if(i.type===Me.ATTRIBUTE&&e.getAttribute(n)===t+"")return ce;return Wl(i),t}})});var fE,XH,Le,tr=b(()=>{dt();Fs();fE="important",XH=" !"+fE,Le=Ti(class extends ei{constructor(i){var t;if(super(i),i.type!==Me.ATTRIBUTE||i.name!=="style"||((t=i.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((t,e)=>{let n=i[e];return n==null?t:t+`${e=e.includes("-")?e:e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`},"")}update(i,[t]){let{style:e}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(let n of this.ft)t[n]==null&&(this.ft.delete(n),n.includes("-")?e.removeProperty(n):e[n]=null);for(let n in t){let s=t[n];if(s!=null){this.ft.add(n);let o=typeof s=="string"&&s.endsWith(XH);n.includes("-")||o?e.setProperty(n,o?s.slice(0,-11):s,o?fE:""):e[n]=s}}return ce}})});var Jn,Gl=b(()=>{"use strict";Jn="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="});var QH,gE,Yn,Vi,de,Be=b(()=>{"use strict";dt();ii();Qo();pE();tr();Gl();QH=i=>xImgLoaded.has(i),gE=(i,t=960)=>{let e=t*t;return i.images.reduce((n,s)=>Math.abs(e-n.width*n.height)<Math.abs(e-s.width*s.width)?n:s)},Yn=(i,t=0,e={},n=960)=>{let s=gE(i,n),o=t===1?'fit="contain"':t===2?'fit="cover"':"",r=e.isTransparent?"is-transparent":"",a=e.size||s,l=`${a.width}/${a.height}`,c=i.color?`;--color:${i.color}`:"";return`<x-img class="${r} ${e.className||""}" ${d2Env.isMobile?`src="${s.url}"`:""} style="--ar:${l}${c}" ${o} width="${s.width}" height="${s.height}">
    <img src="${d2Env.isMobile?i.inline||Jn:s.url}" ${d2Env.isMobile?"":'loading="lazy"'}>
  </x-img>`},Vi=(i,t=0,e={},n=960)=>{let s=document.createElement("div");return s.innerHTML=Yn(i,t,e,n),s.firstElementChild},de=(i,t=0,e={},n=960)=>{let s=gE(i,n),{url:o}=s,r=d2Env.isMobile&&!QH(o),a=e.size||{width:s.width,height:s.height},l=t===1?"contain":t===2?"cover":void 0,c={"--ar":`${a.width}/${a.height}`,"--color":i.color},d={"is-transparent":!!e.isTransparent};e.className&&e.className.split(/\s+/).forEach(p=>{d[p]=!0});let h=r?i.inline||Jn:o;return L`<x-img class=${Ws(Nt(d))} src=${ci(r?Ws(o):void 0)} style=${Le(c)} fit=${ci(l)} width=${Ws(s.width)} height=${Ws(s.height)}>
    <img src=${Ws(h)} loading=${ci(d2Env.isMobile?void 0:"lazy")}>
  </x-img>`}});var we,Kn=b(()=>{"use strict";we=i=>new Promise(t=>{setTimeout(t,i)})});var er,Qm,vE,EE,bE,Jl,th,eh=b(()=>{"use strict";Ne();er=new WeakMap,Qm=i=>{i.preventDefault();let t=i.currentTarget;Qe(t)&&er.has(t)&&er.get(t)()},vE=i=>{(i.ctrlKey||i.metaKey)&&i.keyCode===13&&Qm(i)},EE=i=>{i.currentTarget.addEventListener("keyup",vE)},bE=i=>{i.currentTarget.removeEventListener("keyup",vE)},Jl=(i,t)=>{er.has(i)||er.set(i,t),i.addEventListener("submit",Qm),i.addEventListener("focusin",EE),i.addEventListener("focusout",bE)},th=i=>{i.removeEventListener("submit",Qm),i.removeEventListener("focusin",EE),i.removeEventListener("focusout",bE),er.delete(i)}});var tk,re,Li=b(()=>{"use strict";tk=0,re=()=>{let i=tk++,t="";for(;i>=0;)t=String.fromCharCode(i%26+97)+t,i=Math.floor(i/26)-1;return t}});var _t,me=b(()=>{"use strict";dt();Kt();B();Gt();W();Kn();eh();Li();dn();pt();_t=class extends EventTarget{constructor(e,n,s){super();this.config=e;this.isNested=n;this.isPopscreen=s;this.element=document.createElement("div");this.formData="";this.showCloseConfirm=!1;this.closeWithoutConfirm=!this.showCloseConfirm;this.requestId=re();this.submitHandler=this.defaultSubmitHandler;this.formDataTransformer=e=>new FormData(e)}setSubmitHandler(e){this.submitHandler=e}setFormDataTransformer(e){this.formDataTransformer=e}initCloseConfirm(e){this.showCloseConfirm=!0,this.closeWithoutConfirm=!this.showCloseConfirm,e&&(this.isDataChanged=e),this.form&&(this.formData=Ze(this.form).toString()),this.config&&delete this.config.closeOnClick}isDataChanged(){return!!(this.form&&this.formData!==Ze(this.form).toString())}show(e){return _(this,null,function*(){var n;if(this.closeWithoutConfirm=!this.showCloseConfirm,this.dialog=li(this.config,this.isNested,this.isPopscreen),e&&!d2Env.isApp&&q(e,this.element),this.dialog.decorate(this.element),this.dialog.addEventListener("beforehide",s=>_(this,null,function*(){let o=this.isDataChanged();!this.closeWithoutConfirm&&o&&(s.preventDefault(),(yield ot(cE,dE,void 0,js))&&this.close())})),this.dialog.addEventListener("hide",()=>this.close(),{once:!0}),this.dialog.show(),e&&d2Env.isApp&&(yield we(50),q(e,this.element)),this.form=(n=this.dialog.contentElement)==null?void 0:n.querySelector("form"),this.form){let s=j("js-spinner",this.form);s&&(this.spinner=new $e(s)),Jl(this.form,()=>this.submit())}})}close(){this.closeWithoutConfirm=!0,this.stopSpinner(),this.form&&th(this.form),this.dialog&&this.dialog.hide(),Ut()}submit(){!this.submitHandler||!this.form||(this.spinner&&this.spinner.start(),this.submitHandler(this.form,this.form.querySelector('button[type="submit"]')).then(e=>{this.form&&th(this.form),this.dispatchEvent(new CustomEvent("submit",{detail:e,cancelable:!0}))&&this.close()}).catch(()=>{}).finally(()=>{this.stopSpinner()}))}stopSpinner(){this.spinner&&this.spinner.stop()}defaultSubmitHandler(e,n){return R(e.action,this.requestId,{method:e.getAttribute("method")||"POST",anchorEl:n,body:this.formDataTransformer(e),throwError:!0})}}});var he,xi=b(()=>{"use strict";he=(i,t)=>{let e,n=0,s,o=a=>{i(...a)},r=()=>{e=void 0;let a=t-(Date.now()-n);a>0?e=setTimeout(r,a):o(s)};return(...a)=>{n=Date.now(),s=a,e||(e=setTimeout(r,t))}}});var un,sr=b(()=>{"use strict";un=(i,t)=>{let e=0,n=!1,s,o=()=>{e=0,n&&(n=!1,r())},r=()=>{e=setTimeout(o,t);let a=s;s=[],i(...a)};return(...a)=>{s=a,e?n=!0:r()}}});var or,Qt,pn=b(()=>{dt();Fs();or=class extends ei{constructor(t){if(super(t),this.it=$,t.type!==Me.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===$||t==null)return this._t=void 0,this.it=t;if(t===ce)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;let e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}};or.directiveName="unsafeHTML",or.resultType=1;Qt=Ti(or)});var nk,ae,Gi=b(()=>{"use strict";dt();ii();Wt();pn();B();pt();nk=(i,t)=>L`
<div class=${Nt({"x-menu":!0,"x-menu--mod":!!i.isMod,"x-menu--delete":!!i.delete})}
  @click=${t}>${i.text}
</div>`,ae=class extends EventTarget{constructor(t,e,n){super();let s=P("div","c-dropdown-menu");if(q(ct(e,o=>o.action||o.html,o=>o.html?Qt(o.html):nk(o,r=>this.click(r.target,o))),s),d2Env.isMobile){let o=Ml({anchor:t,title:n});o.decorate(s),o.show()}else jt(s,t,{classNames:["c-bubble--dropdown"],placement:"bottom",isDropdown:!0})}click(t,e){e.inactive||(e.confirmTitle?ot(e.confirmTitle,e.confirmMessage,t,e.confirm,e.cancel,!0).then(n=>{n&&this.dispatchEvent(new CustomEvent("select",{detail:e.action}))}):this.dispatchEvent(new CustomEvent("select",{detail:e.action})))}}});var NE=Hn((k3,DE)=>{var Zn="long",fn="short",ah="narrow",Ot="numeric",gn="2-digit";DE.exports={number:{decimal:{style:"decimal"},integer:{style:"decimal",maximumFractionDigits:0},currency:{style:"currency",currency:"USD"},percent:{style:"percent"},default:{style:"decimal"}},date:{short:{month:Ot,day:Ot,year:gn},medium:{month:fn,day:Ot,year:Ot},long:{month:Zn,day:Ot,year:Ot},full:{month:Zn,day:Ot,year:Ot,weekday:Zn},default:{month:fn,day:Ot,year:Ot}},time:{short:{hour:Ot,minute:Ot},medium:{hour:Ot,minute:Ot,second:Ot},long:{hour:Ot,minute:Ot,second:Ot,timeZoneName:fn},full:{hour:Ot,minute:Ot,second:Ot,timeZoneName:fn},default:{hour:Ot,minute:Ot,second:Ot}},duration:{default:{hours:{minimumIntegerDigits:1,maximumFractionDigits:0},minutes:{minimumIntegerDigits:2,maximumFractionDigits:0},seconds:{minimumIntegerDigits:2,maximumFractionDigits:3}}},parseNumberPattern:function(i){if(i){var t={},e=i.match(/\b[A-Z]{3}\b/i),n=i.replace(/[^¤]/g,"").length;if(!n&&e&&(n=1),n?(t.style="currency",t.currencyDisplay=n===1?"symbol":n===2?"code":"name",t.currency=e?e[0].toUpperCase():"USD"):i.indexOf("%")>=0&&(t.style="percent"),!/[@#0]/.test(i))return t.style?t:void 0;if(t.useGrouping=i.indexOf(",")>=0,/E\+?[@#0]+/i.test(i)||i.indexOf("@")>=0){var s=i.replace(/E\+?[@#0]+|[^@#0]/gi,"");t.minimumSignificantDigits=Math.min(Math.max(s.replace(/[^@0]/g,"").length,1),21),t.maximumSignificantDigits=Math.min(Math.max(s.length,1),21)}else{for(var o=i.replace(/[^#0.]/g,"").split("."),r=o[0],a=r.length-1;r[a]==="0";)--a;t.minimumIntegerDigits=Math.min(Math.max(r.length-1-a,1),21);var l=o[1]||"";for(a=0;l[a]==="0";)++a;for(t.minimumFractionDigits=Math.min(Math.max(a,0),20);l[a]==="#";)++a;t.maximumFractionDigits=Math.min(Math.max(a,0),20)}return t}},parseDatePattern:function(i){if(i){for(var t={},e=0;e<i.length;){for(var n=i[e],s=1;i[++e]===n;)++s;switch(n){case"G":t.era=s===5?ah:s===4?Zn:fn;break;case"y":case"Y":t.year=s===2?gn:Ot;break;case"M":case"L":s=Math.min(Math.max(s-1,0),4),t.month=[Ot,gn,fn,Zn,ah][s];break;case"E":case"e":case"c":t.weekday=s===5?ah:s===4?Zn:fn;break;case"d":case"D":t.day=s===2?gn:Ot;break;case"h":case"K":t.hour12=!0,t.hour=s===2?gn:Ot;break;case"H":case"k":t.hour12=!1,t.hour=s===2?gn:Ot;break;case"m":t.minute=s===2?gn:Ot;break;case"s":case"S":t.second=s===2?gn:Ot;break;case"z":case"Z":case"v":case"V":t.timeZoneName=s===1?fn:Zn;break}}return Object.keys(t).length?t:void 0}}}});var $E=Hn((D3,PE)=>{PE.exports=function(t,e){if(typeof t=="string"&&e[t])return t;for(var n=[].concat(t||[]),s=0,o=n.length;s<o;++s)for(var r=n[s].split("-");r.length;){var a=r.join("-");if(e[a])return a;r.pop()}}});var UE=Hn((N3,BE)=>{"use strict";var lh="one",fk="two",FE="few",gk="many",ch="other";function vk(i){var t=Math.floor(Math.abs(+i)),e=(i+".").split(".")[1].length;return t===1&&e===0?lh:ch}function Ek(i){var t=Math.floor(Math.abs(+i)),e=(i+".").split(".")[1].length;return e===0&&t%10===1&&t%100!==11?lh:e===0&&2<=t%10&&t%10<=4&&(t%100<12||14<t%100)?FE:e===0&&t%10===0||e===0&&5<=t%10&&t%10<=9||e===0&&11<=t%100&&t%100<=14?gk:ch}function bk(i){var t=+i;return t%10===1&&t%100!==11?lh:t%10===2&&t%100!==12?fk:t%10===3&&t%100!==13?FE:ch}BE.exports={en:{cardinal:vk,ordinal:bk},ru:{cardinal:Ek}}});var VE=Hn((tc,qE)=>{"use strict";var vn=NE(),yk=$E(),jE=UE();tc=qE.exports=function(t,e,n){return Ql(t,null,e||"en",n||{},!0)};tc.toParts=function(t,e,n){return Ql(t,null,e||"en",n||{},!1)};function Ql(i,t,e,n,s){var o=i.map(function(r){return _k(r,t,e,n,s)});return s?o.length===1?o[0]:function(a){for(var l="",c=0;c<o.length;++c)l+=o[c](a);return l}:function(a){return o.reduce(function(l,c){return l.concat(c(a))},[])}}function _k(i,t,e,n,s){if(typeof i=="string"){var o=i;return function(){return o}}var r=i[0],a=i[1];if(t&&i[0]==="#"){r=t[0];var l=t[2],c=(n.number||mh.number)([r,"number"],e);return function(u){return c(Xl(r,u)-l,u)}}var d;a==="plural"||a==="selectordinal"?(d={},Object.keys(i[3]).forEach(function(m){d[m]=Ql(i[3][m],i,e,n,s)}),i=[i[0],i[1],i[2],d]):i[2]&&typeof i[2]=="object"&&(d={},Object.keys(i[2]).forEach(function(m){d[m]=Ql(i[2][m],i,e,n,s)}),i=[i[0],i[1],d]);var h=a&&(n[a]||mh[a]);if(h){var p=h(i,e);return function(u){return p(Xl(r,u),u)}}return s?function(u){return String(Xl(r,u))}:function(u){return Xl(r,u)}}function Xl(i,t){if(t&&i in t)return t[i];for(var e=i.split("."),n=t,s=0,o=e.length;n&&s<o;++s)n=n[e[s]];return n}function dh(i,t){var e=i[2],n=vn.number[e]||vn.parseNumberPattern(e)||vn.number.default;return new Intl.NumberFormat(t,n).format}function Tk(i,t){var e=i[2],n=vn.duration[e]||vn.duration.default,s=new Intl.NumberFormat(t,n.seconds).format,o=new Intl.NumberFormat(t,n.minutes).format,r=new Intl.NumberFormat(t,n.hours).format,a=/^fi$|^fi-|^da/.test(String(t))?".":":";return function(l,c){if(l=+l,!isFinite(l))return s(l);var d=~~(l/60/60),h=~~(l/60%60),p=(d?r(Math.abs(d))+a:"")+o(Math.abs(h))+a+s(Math.abs(l%60));return l<0?r(-1).replace(r(1),p):p}}function zE(i,t){var e=i[1],n=i[2],s=vn[e][n]||vn.parseDatePattern(n)||vn[e].default;return new Intl.DateTimeFormat(t,s).format}function WE(i,t){var e=i[1],n=e==="selectordinal"?"ordinal":"cardinal",s=i[2],o=i[3],r;if(Intl.PluralRules&&Intl.PluralRules.supportedLocalesOf(t).length>0)r=new Intl.PluralRules(t,{type:n});else{var a=yk(t,jE),l=a&&jE[a][n]||Lk;r={select:l}}return function(c,d){var h=o["="+ +c]||o[r.select(c-s)]||o.other;return h(d)}}function Lk(){return"other"}function wk(i,t){var e=i[2];return function(n,s){var o=e[n]||e.other;return o(s)}}var mh={number:dh,ordinal:dh,spellout:dh,duration:Tk,date:zE,time:zE,plural:WE,selectordinal:WE,select:wk};tc.types=mh});var YE=Hn((Eh,JE)=>{"use strict";var Ai="{",Ee="}",Xn=",",qs="#",ar="<",Ci=">",mi="</",ec="/>",En="'",hh="offset:",xk=["number","date","time","ordinal","duration","spellout"],Ck=["plural","select","selectordinal"];Eh=JE.exports=function(t,e){return fh({pattern:String(t),index:0,tagsType:e&&e.tagsType||null,tokens:e&&e.tokens||null},"")};function fh(i,t){var e=i.pattern,n=e.length,s=[],o=i.index,r=ph(i,t);for(r&&s.push(r),r&&i.tokens&&i.tokens.push(["text",e.slice(o,i.index)]);i.index<n;){if(e[i.index]===Ee){if(!t)throw te(i);break}if(t&&i.tagsType&&e.slice(i.index,i.index+mi.length)===mi)break;s.push(Ak(i)),o=i.index,r=ph(i,t),r&&s.push(r),r&&i.tokens&&i.tokens.push(["text",e.slice(o,i.index)])}return s}function ph(i,t){for(var e=i.pattern,n=e.length,s=t==="plural"||t==="selectordinal",o=!!i.tagsType,r=t==="{style}",a="";i.index<n;){var l=e[i.index];if(l===Ai||l===Ee||s&&l===qs||o&&l===ar||r&&gh(l.charCodeAt(0)))break;if(l===En)if(l=e[++i.index],l===En)a+=l,++i.index;else if(l===Ai||l===Ee||s&&l===qs||o&&l===ar||r)for(a+=l;++i.index<n;)if(l=e[i.index],l===En&&e[i.index+1]===En)a+=En,++i.index;else if(l===En){++i.index;break}else a+=l;else a+=En;else a+=l,++i.index}return a}function gh(i){return i>=9&&i<=13||i===32||i===133||i===160||i===6158||i>=8192&&i<=8205||i===8232||i===8233||i===8239||i===8287||i===8288||i===12288||i===65279}function qe(i){for(var t=i.pattern,e=t.length,n=i.index;i.index<e&&gh(t.charCodeAt(i.index));)++i.index;n<i.index&&i.tokens&&i.tokens.push(["space",i.pattern.slice(n,i.index)])}function Ak(i){var t=i.pattern;if(t[i.index]===qs)return i.tokens&&i.tokens.push(["syntax",qs]),++i.index,[qs];var e=Sk(i);if(e)return e;if(t[i.index]!==Ai)throw te(i,Ai);i.tokens&&i.tokens.push(["syntax",Ai]),++i.index,qe(i);var n=Vs(i);if(!n)throw te(i,"placeholder id");i.tokens&&i.tokens.push(["id",n]),qe(i);var s=t[i.index];if(s===Ee)return i.tokens&&i.tokens.push(["syntax",Ee]),++i.index,[n];if(s!==Xn)throw te(i,Xn+" or "+Ee);i.tokens&&i.tokens.push(["syntax",Xn]),++i.index,qe(i);var o=Vs(i);if(!o)throw te(i,"placeholder type");if(i.tokens&&i.tokens.push(["type",o]),qe(i),s=t[i.index],s===Ee){if(i.tokens&&i.tokens.push(["syntax",Ee]),o==="plural"||o==="selectordinal"||o==="select")throw te(i,o+" sub-messages");return++i.index,[n,o]}if(s!==Xn)throw te(i,Xn+" or "+Ee);i.tokens&&i.tokens.push(["syntax",Xn]),++i.index,qe(i);var r;if(o==="plural"||o==="selectordinal"){var a=Mk(i);qe(i),r=[n,o,a,uh(i,o)]}else if(o==="select")r=[n,o,uh(i,o)];else if(xk.indexOf(o)>=0)r=[n,o,GE(i)];else{var l=i.index,c=GE(i);qe(i),t[i.index]===Ai&&(i.index=l,c=uh(i,o)),r=[n,o,c]}if(qe(i),t[i.index]!==Ee)throw te(i,Ee);return i.tokens&&i.tokens.push(["syntax",Ee]),++i.index,r}function Sk(i){var t=i.tagsType;if(!(!t||i.pattern[i.index]!==ar)){if(i.pattern.slice(i.index,i.index+mi.length)===mi)throw te(i,null,"closing tag without matching opening tag");i.tokens&&i.tokens.push(["syntax",ar]),++i.index;var e=Vs(i,!0);if(!e)throw te(i,"placeholder id");if(i.tokens&&i.tokens.push(["id",e]),qe(i),i.pattern.slice(i.index,i.index+ec.length)===ec)return i.tokens&&i.tokens.push(["syntax",ec]),i.index+=ec.length,[e,t];if(i.pattern[i.index]!==Ci)throw te(i,Ci);i.tokens&&i.tokens.push(["syntax",Ci]),++i.index;var n=fh(i,t),s=i.index;if(i.pattern.slice(i.index,i.index+mi.length)!==mi)throw te(i,mi+e+Ci);i.tokens&&i.tokens.push(["syntax",mi]),i.index+=mi.length;var o=Vs(i,!0);if(o&&i.tokens&&i.tokens.push(["id",o]),e!==o)throw i.index=s,te(i,mi+e+Ci,mi+o+Ci);if(qe(i),i.pattern[i.index]!==Ci)throw te(i,Ci);return i.tokens&&i.tokens.push(["syntax",Ci]),++i.index,[e,t,{children:n}]}}function Vs(i,t){for(var e=i.pattern,n=e.length,s="";i.index<n;){var o=e[i.index];if(o===Ai||o===Ee||o===Xn||o===qs||o===En||gh(o.charCodeAt(0))||t&&(o===ar||o===Ci||o==="/"))break;s+=o,++i.index}return s}function GE(i){var t=i.index,e=ph(i,"{style}");if(!e)throw te(i,"placeholder style name");return i.tokens&&i.tokens.push(["style",i.pattern.slice(t,i.index)]),e}function Mk(i){var t=i.pattern,e=t.length,n=0;if(t.slice(i.index,i.index+hh.length)===hh){i.tokens&&i.tokens.push(["offset","offset"],["syntax",":"]),i.index+=hh.length,qe(i);for(var s=i.index;i.index<e&&Rk(t.charCodeAt(i.index));)++i.index;if(s===i.index)throw te(i,"offset number");i.tokens&&i.tokens.push(["number",t.slice(s,i.index)]),n=+t.slice(s,i.index)}return n}function Rk(i){return i>=48&&i<=57}function uh(i,t){for(var e=i.pattern,n=e.length,s={};i.index<n&&e[i.index]!==Ee;){var o=Vs(i);if(!o)throw te(i,"sub-message selector");i.tokens&&i.tokens.push(["selector",o]),qe(i),s[o]=Ik(i,t),qe(i)}if(!s.other&&Ck.indexOf(t)>=0)throw te(i,null,null,'"other" sub-message must be specified in '+t);return s}function Ik(i,t){if(i.pattern[i.index]!==Ai)throw te(i,Ai+" to start sub-message");i.tokens&&i.tokens.push(["syntax",Ai]),++i.index;var e=fh(i,t);if(i.pattern[i.index]!==Ee)throw te(i,Ee+" to end sub-message");return i.tokens&&i.tokens.push(["syntax",Ee]),++i.index,e}function te(i,t,e,n){var s=i.pattern,o=s.slice(0,i.index).split(/\r?\n/),r=i.index,a=o.length,l=o.slice(-1)[0].length;return e=e||(i.index>=s.length?"end of message pattern":Vs(i)||s[i.index]),n||(n=Ok(t,e)),n+=" in "+s.replace(/\r?\n/g,`
`),new vh(n,t,e,r,a,l)}function Ok(i,t){return i?"Expected "+i+" but found "+t:"Unexpected "+t+" found"}function vh(i,t,e,n,s,o){Error.call(this,i),this.name="SyntaxError",this.message=i,this.expected=t,this.found=e,this.offset=n,this.line=s,this.column=o}vh.prototype=Object.create(Error.prototype);Eh.SyntaxError=vh});var KE,ZE,tt,be=b(()=>{"use strict";KE=kn(VE(),1),ZE=kn(YE(),1),tt=(i,t)=>(0,KE.default)((0,ZE.default)(i),"ru")(t)});var ic,kk,yh,wt,ni=b(()=>{"use strict";Z();ic=new WeakMap,kk=i=>{let t=document.createElement("div");return t.style.overflowY="hidden",t.style.overflowX="visible",i.parentElement.replaceChild(t,i),t.appendChild(i),t},yh=class extends EventTarget{constructor(e,n){super();this.element=e;this.duration=500;this.enableInterruption=!0;this.height=0;this.inProgress=!1;n!==void 0&&(e.style.display=n?"":"none"),this.expanded=n||ki(e,"display")!=="none"}toggle(e){this.expand(!this.expanded,e)}hideAndRemove(e){this.addEventListener("end",()=>{this.element.remove()},{once:!0}),this.expand(!1,e)}expand(e,n){!n&&!this.enableInterruption&&this.inProgress||e!==this.expanded&&(this.expanded=e,this.dispatchEvent(new CustomEvent("start")),n?this.finish():this.animate())}finish(){this.element.style.transition="",this.element.style.display=this.expanded?"":"none",this.wrapperEl&&(this.wrapperEl.parentNode.replaceChild(this.element,this.wrapperEl),this.wrapperEl=void 0),this.dispatchEvent(new CustomEvent("end")),this.dispatchEvent(new CustomEvent(this.expanded?"show":"hide"))}animationFinish(){this.element.style.marginTop=this.marginTop||"",this.marginTop=void 0,this.finish()}animate(){let e=()=>{clearTimeout(this.backupTimeout),this.animationFinish()};clearTimeout(this.backupTimeout),this.inProgress=!0,setTimeout(()=>{this.inProgress=!1},this.duration+100);let n=this.wrapperEl!==void 0;this.element.removeEventListener("transitionend",e),this.marginTop===void 0&&(this.marginTop=this.element.style.marginTop||""),this.createWrapper(),this.element.addEventListener("transitionend",e,{once:!0}),setTimeout(()=>{if(!this.wrapperEl)return;n||(this.element.style.transition=`margin-top ${this.duration}ms cubic-bezier(0.445, 0.05, 0.55, 0.95)`);let s=this.expanded?0:-this.height;this.element.style.marginTop=`${s}px`,this.backupTimeout=setTimeout(()=>{this.animationFinish()},this.duration+100)})}createWrapper(){if(this.wrapperEl)return;let{element:e}=this,n=e.parentElement;e.style.display="";let s=e.offsetTop;this.wrapperEl=kk(e);let o=n.offsetHeight;this.height=this.wrapperEl.offsetHeight,e.style.marginTop="0";let r=e.offsetTop-s;r!==0&&(this.wrapperEl.style.marginTop=`${-r}px`);let a=n.offsetHeight-o;a!==0&&(this.wrapperEl.style.marginBottom=`${-a}px`);let l=this.expanded?-this.height:0;e.style.marginTop=`${l}px`}},wt=(i,t)=>(ic.has(i)?t!==void 0&&ic.get(i).expand(t):ic.set(i,new yh(i,t)),ic.get(i))});var tb,Th,_h,Lh,eb=b(()=>{"use strict";Kn();W();tb=340,Th=class{constructor(t,e){this.urlPattern=t;this.isPost=e;this.cache=new Map;this.lastRequest=Date.now()}get(t,e){return _(this,null,function*(){if(this.cache.has(t))return this.cache.get(t);let n=Date.now(),s=n-this.lastRequest;if(s<tb)return yield we(tb-s),this.get(t,e);this.lastRequest=n;let o=yield R(this.urlPattern.replace("{key}",t),{method:this.isPost?"POST":"GET",anchorEl:e});return this.cache.set(t,o),o})}},_h=new Map,Lh=(i,t)=>(_h.has(i)||_h.set(i,new Th(i,t)),_h.get(i))});var Qn,ib,cr=b(()=>{"use strict";eb();Qn=Lh("/ajax/brand.models.cshtml?brand={key}"),ib=Lh("/ajax/geo.cshtml?_=p&c={key}")});var ue,Ji=b(()=>{"use strict";ue=i=>{if(i._$litPart$===void 0){let t=i.firstChild;for(;t;){let e=t.nextSibling;t.remove(),t=e}}}});var sc,wh=b(()=>{"use strict";sc=i=>{let t=i.text||i.textContent||i.innerHTML||"",e=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.type="text/javascript",i.src?n.src=i.src:n.appendChild(document.createTextNode(t)),e.insertBefore(n,e.firstChild),e.removeChild(n),i.parentNode&&i.parentNode.removeChild(i)}});var ur=Hn(xh=>{"use strict";xh.__esModule=!0;var Fk=function(i){var t=function(){i.cancelToken=!1},e=function(n,s){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];i.callbackThis=n,i.args=o,!i.cancelToken&&("requestAnimationFrame"in window?i.cancelToken=window.requestAnimationFrame(function(){s.apply(i.callbackThis,i.args),t()}):(s.apply(i.callbackThis,i.args),i.cancelToken=window.setTimeout(t,16.666666666666668)))};return e.cancel=function(){"requestAnimationFrame"in window&&window.cancelAnimationFrame(i.cancelToken),window.clearTimeout(i.cancelToken),t()},e},bb=function(i,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var s=Fk({}),o=arguments.length,r=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];s.apply(void 0,[o>1?t:this,i].concat(e,a))};return r.cancel=function(){return s.cancel()},r};xh.throttle=function(i){var t=bb(i);return t.bind=bb.bind(null,i),t}});var Lb,Bk,yb,_b,Tb,Ah,Ch,ye,ts=b(()=>{"use strict";Lb=kn(ur(),1),Bk=1e3,yb=0,Ah=class extends EventTarget{constructor(){super(),window.addEventListener("scroll",(0,Lb.throttle)(this.handleScroll).bind(this),{passive:!0})}handleScroll(){let{clientHeight:t,scrollHeight:e}=document.documentElement,{scrollTop:n}=document.scrollingElement;if(Tb!==e&&e-n-t<=1600){Tb=e;let s=Math.max(0,Bk-(Date.now()-yb));clearTimeout(_b),_b=setTimeout(()=>{yb=Date.now(),this.dispatchEvent(new Event("scroll"))},s)}}},ye=()=>(Ch||(Ch=new Ah),Ch)});var Cy,Ay,bt,Mh,Sy,zk,pe=b(()=>{"use strict";Cy=[],Ay=[],bt=(i,t)=>{if(!d2Env.isApp)if(window.ym)try{window.ym(33911514,"reachGoal",i,t)}catch(e){}else Cy.push([i,t])},Mh=i=>{if(!d2Env.isApp)if(window.ym)try{window.ym(33911514,"params",i)}catch(t){}else Ay.push(i)},Sy=()=>{document.removeEventListener("yacounter33911514inited",Sy),Cy.forEach(i=>{bt(i[0],i[1])}),Ay.forEach(Mh)},zk=i=>{let e=i.target.closest("[data-ym-target]");if(!e)return;e.dataset.ymTarget.split(/\s+/).forEach((o,r)=>{let a,l=e.dataset[r===0?"ymParams":`ymParams${r+1}`];if(l)try{a=JSON.parse(l)}catch(c){}bt(o,a)})};d2Env.isApp||(document.addEventListener("yacounter33911514inited",Sy),document.documentElement.addEventListener("click",zk))});var dc,Er,Ph=b(()=>{"use strict";dc="Ой!",Er="Хорошо, я понял"});var Tn,hc=b(()=>{"use strict";nn();Tn=class extends EventTarget{constructor(e,n,s){super();this.element=e;this.height=0;this.element.rows=1,n&&(this.element.style.minHeight=`${n}px`),s&&(this.element.style.maxHeight=`${s}px`),this.handleEvent(),this.element.addEventListener("focus",this),this.element.addEventListener("input",this),this.element.addEventListener("blur",this),ke(this.element,{onEnter:()=>this.handleEvent()})}handleEvent(e){let n=0;e&&(n=document.scrollingElement.scrollTop);let{element:s}=this;s.style.height="auto";let{scrollHeight:o}=s;s.style.height=`${o}px`;let r=o>s.offsetHeight?"auto":"hidden";r!==s.style.overflowY&&(s.style.overflowY=r),e&&document.scrollingElement.scrollTo({top:n,behavior:"instant"}),o!==this.height&&(this.height=o,this.dispatchEvent(new CustomEvent("resize")))}setContent(e){this.element.value=e,this.handleEvent()}setEnabled(e){this.element.disabled=!e,this.handleEvent()}dispose(){this.element.removeEventListener("focus",this),this.element.removeEventListener("input",this),this.element.removeEventListener("blur",this)}}});var Wy,qy,$h,Vy=b(()=>{"use strict";Wy="Слишком большой файл {SIZE}. Максимально допустимый размер {MAX_SIZE}.",qy="Неизвестный формат изображения. Поддерживаемые форматы: JPEG, PNG.",$h="Загрузить фотографи{NUM_FILES, plural, one {ю} other {и}}"});var _r,Fh=b(()=>{"use strict";_r=(i=!0,t)=>new Promise(e=>{let n=document.createElement("input");n.setAttribute("type","file"),i&&n.setAttribute("multiple",""),t&&n.setAttribute("accept",t),n.style.display="none",document.body.appendChild(n),n.addEventListener("change",()=>{e(Array.from(n.files||[])),n.remove()},{once:!0}),n.click()})});var Gy,Jy=b(()=>{"use strict";Gy=["Б","кБ","МБ","ГБ","ТБ"]});var Yy,Pt,Tr,_e,Ln,Bh,uc,le=b(()=>{"use strict";Jy();Yy=i=>i.replace(/[\s]+/g," ").trim(),Pt=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\x00/g,"&#0;"),Tr=i=>String(i).replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),_e=i=>{let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},e=document.createElement("div");return i.replace(/&([^;\s<&]+);?/g,(n,s)=>{let o=t[n];if(o)return o;if(s.charAt(0)==="#"){let r=+("0"+s.substr(1));Number.isNaN(r)||(o=String.fromCharCode(r))}return o||(e.innerHTML=n+" ",o=e.firstChild.nodeValue.slice(0,-1)),t[n]=o,o})},Ln=(i,t=" ")=>{i=String(i);let e=i.length,n=e>3?e%3:0;return(n?i.substring(0,n)+t:"")+i.substring(n).replace(/(\d{3})(?=\d)/g,`$1${t}`)},Bh=(i,t=1)=>{let e=i===0?0:Math.min(Math.floor(Math.log(i)/Math.log(1024)),4);return`${new Intl.NumberFormat("ru",{maximumFractionDigits:t}).format(i/wo(1024,e))} ${Gy[e]}`},uc=(i,t)=>new Intl.DateTimeFormat("ru",O({year:"numeric",month:"long",day:"numeric"},t&&{hour:"numeric",minute:"numeric"})).formatToParts(new Date(i)).map(({type:e,value:n})=>e==="literal"?n.replace(/\sг\./," "):n).join("")});var es,Uh=b(()=>{"use strict";Bm();le();Um();Wm();es=class extends EventTarget{constructor(t){super(),this.uuid=Dl(),this.file=t}start(t,e="upload"){return new Promise(n=>{let s=O({_:e,type:t,file:this.file},d2Env.formContext),o=new FormData;Object.entries(s).forEach(([a,l])=>o.append(a,l));let r=new XMLHttpRequest;r.open("POST",d2Env.uploadUrl,!0),r.setRequestHeader("X-Origin-Request-ID",d2Env.requestId),r.setRequestHeader("X-Client-Request-ID",this.uuid),r.onload=()=>{if(r.status!==200){n([We.formatError(Ns,r),void 0]);return}try{let a=JSON.parse(r.responseText);if(a.error||a.notification){let l=(this.file.name?`<strong>${Pt(this.file.name)}</strong>: `:"")+(a.error||a.notification);n([l,void 0])}else n([void 0,a])}catch(a){n([We.formatError(kl,r,this.uuid),void 0])}},r.onerror=()=>{n([We.formatError(Ns,r,this.uuid),void 0])},r.upload.onprogress=a=>{this.dispatchEvent(new ProgressEvent(a.type,a))},r.send(o)})}}});var pc,jh=b(()=>{"use strict";pc=i=>{let t=[],e=0;function n(){e<i&&t.length&&(e++,t.shift()())}return s=>new Promise((o,r)=>{t.push(()=>{s().then(a=>{o(a),e--,n()},a=>{r(a),e--,n()})}),n()})}});var AD,Ky,Zy,SD,hi,Lr=b(()=>{"use strict";Vy();B();Fh();be();Uh();jh();le();Z();pt();AD=2,Ky=23*1024*1024,Zy=["image/jpeg","image/png"],SD=i=>!i.failed,hi=class extends EventTarget{constructor(e,n){super();this.entityType=e;this.buttonClass=n;this.maxFiles=1;this.isVisible=!1;this.items=[],this.uploadPool=pc(AD),this.action="upload",this.buttonCaption=$h}getElement(){return this.element}getAction(){return this.action}setAction(e){this.action=e}setMaxFiles(e){this.maxFiles=e,this.buttonEl&&(this.buttonEl.innerHTML=tt($h,{NUM_FILES:e}))}getButton(){return this.buttonEl}getMaxFiles(){return this.maxFiles}setButtonCaption(e){this.buttonCaption=e}getButtonCaption(){return this.buttonCaption}createDom(){this.element=P("div","c-uploader",this.buttonEl=P("button",{className:this.buttonClass||"",type:"button",innerHTML:tt(this.buttonCaption,{NUM_FILES:this.maxFiles})}),this.progressEl=P("progress","c-upload-progress"),this.progressNumEl=P("div")),this.setProgress(0,0,0),this.enableProgress(!1),this.setVisible(this.isVisible)}render(e){if(this.inDocument)throw new Error("Component already rendered");this.element||this.createDom(),e?e.insertBefore(this.element,null):document.body.appendChild(this.element),this.enterDocument()}enterDocument(){this.inDocument=!0,this.buttonEl.addEventListener("click",this)}dispose(){this.items=[],this.inDocument=!1,this.element&&this.element.remove()}setVisible(e){this.isVisible=e,this.element&&A(this.element,e)}handleEvent(){return _(this,null,function*(){if(this.items.length>0)return;let e=yield _r(this.maxFiles!==1,Zy.join(","));this.addFiles(e.slice(0,this.maxFiles))})}enableProgress(e){A(this.buttonEl,!e),A(this.progressEl,e),A(this.progressNumEl,this.items.length>1&&e)}setProgress(e,n,s){this.progressEl.value=e,this.progressNumEl.textContent=`${n}/${s}`}showErrors(e){e.length&&this.isVisible&&jt(`<ul><li>${e.join("<li>")}</ul>`,this.element,{classNames:["c-bubble--xhr"]})}addFiles(e){this.items=e.map(()=>({finished:!1,progress:0,failed:!0,error:""})),this.enableProgress(!0),this.setProgress(0,0,e.length),this.dispatchEvent(new Event("started")),e.forEach((n,s)=>{let o=Zy.includes(n.type)?n.size>Ky?tt(Wy,{SIZE:Bh(n.size),MAX_SIZE:Bh(Ky)}):void 0:qy,r=o?()=>Promise.resolve({result:[o,void 0],index:s}):()=>this.upload(n,s);this.uploadPool(r).then(a=>this.processUpload(a))})}upload(e,n){return _(this,null,function*(){let s=new es(e);return s.addEventListener("progress",o=>{this.items[n].progress=o.lengthComputable?o.loaded/o.total:0,this.updateProgress()}),s.start(this.entityType,this.action).then(o=>({result:o,index:n}))})}processUpload(s){return _(this,arguments,function*({result:e,index:n}){let[o,r]=e;this.items[n]=o?{finished:!0,progress:1,failed:!0,error:o}:{finished:!0,progress:1,failed:!1,data:r},this.updateProgress(),this.items.every(a=>a.finished)&&this.finish()})}updateProgress(){let e=this.items.length,n=this.items.reduce((o,r)=>r.progress+o,0)/e,s=this.items.filter(o=>o.progress===1).length;this.setProgress(n,s,e)}finish(){this.enableProgress(!1);let e=this.items.filter(SD).map(s=>s.data);e.length!==0&&this.dispatchEvent(new CustomEvent("ready",{detail:e}));let n=this.items.filter(s=>s.failed).map(s=>s.error);this.showErrors(n),this.items=[]}}});var si,Mr=b(()=>{"use strict";si=(i,t,e)=>Math.min(Math.max(i,t),e)});var Kh,x_,Zh=b(()=>{"use strict";Kh=class extends Error{};Kh.prototype.name="AssertionError";x_=(i,t)=>(i!=null,i)});var bc,C_=b(()=>{"use strict";Zh();bc=class extends EventTarget{constructor(e,n,s){super();this.token_=null;this.rows_=[];this.hiliteId_=-1;this.firstRowId_=0;this.inputToAnchorMap_=new WeakMap;this.maxMatches_=10;this.autoHilite_=!0;this.allowFreeSelect_=!1;this.wrap_=!1;this.triggerSuggestionsOnUpdate_=!1;this.matcher_=e,this.selectionHandler_=s,this.renderer_=n,n.addEventListener("hilite",this),n.addEventListener("select",this),n.addEventListener("dismiss",this)}getMatcher(){return this.matcher_,void 0}setMatcher(e){this.matcher_=e}getSelectionHandler(){return this.selectionHandler_,void 0}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}getToken(){return this.token_}getSuggestion(e){return this.rows_[e]}getAllSuggestions(){return this.rows_,void 0}getSuggestionCount(){return this.rows_.length}getHighlightedId(){return this.hiliteId_}handleEvent(e){let n=this.matcher_;if(e.target===this.renderer_)switch(e.type){case"hilite":this.hiliteId(e.detail.row);break;case"select":let s=!1;if(typeof e.detail.row=="number"){let o=e.detail.row,r=this.getIndexOfId(o),a=this.rows_[r];s=!!a&&n.isRowDisabled&&n.isRowDisabled(a),a&&!s&&this.hiliteId_!==o&&this.hiliteId(o)}s||this.selectHilited();break;case"dismiss":this.dismissOnDelay()}}setMaxMatches(e){this.maxMatches_=e}setAutoHilite(e){this.autoHilite_=e}setAllowFreeSelect(e){this.allowFreeSelect_=e}setWrap(e){this.wrap_=e}setTriggerSuggestionsOnUpdate(e){this.triggerSuggestionsOnUpdate_=e}setToken(e){this.token_!=e&&(this.token_=e,this.matcher_.requestMatchingRows(this.token_,this.maxMatches_,this.matchListener_.bind(this)),this.cancelDelayedDismiss())}getTarget(){return this.target_}setTarget(e){this.target_=e}isOpen(){return this.renderer_.isVisible()}getRowCount(){return this.getSuggestionCount()}hiliteNext(){let e=this.firstRowId_+this.rows_.length-1,n=this.hiliteId_;for(let s=0;s<this.rows_.length;s++){if(n>=this.firstRowId_&&n<e)n++;else if(n===-1)n=this.firstRowId_;else{if(this.allowFreeSelect_&&n===e)return this.hiliteId(-1),!1;if(this.wrap_&&n===e)n=this.firstRowId_;else return!1}if(this.hiliteId(n))return!0}return!1}hilitePrev(){let e=this.firstRowId_+this.rows_.length-1,n=this.hiliteId_;for(let s=0;s<this.rows_.length;s++){if(n>this.firstRowId_)n--;else{if(this.allowFreeSelect_&&n==this.firstRowId_)return this.hiliteId(-1),!1;if(this.wrap_&&(n==-1||n==this.firstRowId_))n=e;else return!1}if(this.hiliteId(n))return!0}return!1}hiliteId(e){let n=this.getIndexOfId(e),s=this.rows_[n];return!!s&&this.matcher_.isRowDisabled&&this.matcher_.isRowDisabled(s)?!1:(this.hiliteId_=e,this.renderer_.hiliteId(e),n!==-1)}hiliteIndex(e){return this.hiliteId(this.getIdOfIndex_(e))}selectHilited(){let e=this.getIndexOfId(this.hiliteId_);if(e!==-1){let n=this.rows_[e],s=this.selectionHandler_.selectRow(n);return this.triggerSuggestionsOnUpdate_?(this.token_=null,this.dismissOnDelay()):this.dismiss(),s||(this.dispatchEvent(new CustomEvent("update",{detail:{row:n,index:e}})),this.triggerSuggestionsOnUpdate_&&this.selectionHandler_.update(!0)),!0}return this.dismiss(),this.dispatchEvent(new CustomEvent("update",{detail:{row:null,index:null}})),!1}hasHighlight(){return this.isOpen()&&this.getIndexOfId(this.hiliteId_)!=-1}dismiss(){this.hiliteId_=-1,this.token_=null,this.firstRowId_+=this.rows_.length,this.rows_=[],clearTimeout(this.dismissTimer_),this.dismissTimer_=void 0,this.renderer_.dismiss(),this.dispatchEvent(new Event("suggestionsupdate")),this.dispatchEvent(new Event("dismiss"))}dismissOnDelay(){this.dismissTimer_||(this.dismissTimer_=setTimeout(()=>this.dismiss(),100))}immediatelyCancelDelayedDismiss_(){return this.dismissTimer_?(window.clearTimeout(this.dismissTimer_),this.dismissTimer_=void 0,!0):!1}cancelDelayedDismiss(){this.immediatelyCancelDelayedDismiss_()||window.setTimeout(this.immediatelyCancelDelayedDismiss_.bind(this),10)}dispose(){this.renderer_.dispose(),this.selectionHandler_.dispose()}matchListener_(e,n,s){this.token_===e&&this.renderRows(n,s)}renderRows(e,n){let s=typeof n=="object"&&n,r=(s?s.getPreserveHilited():n)?this.getIndexOfId(this.hiliteId_):-1;this.firstRowId_+=this.rows_.length,this.rows_=e;let a=[];for(let d=0;d<e.length;++d)a.push({id:this.getIdOfIndex_(d),data:e[d]});let l;this.target_&&(l=this.inputToAnchorMap_.get(this.target_)||this.target_),this.renderer_.setAnchorElement(l),this.renderer_.renderRows(a,this.token_||"",this.target_);let c=this.autoHilite_;s&&s.getAutoHilite()!==void 0&&(c=s.getAutoHilite()),this.hiliteId_=-1,(c||r>=0)&&a.length!==0&&this.token_&&(r>=0?this.hiliteId(this.getIdOfIndex_(r)):this.hiliteNext()),this.dispatchEvent(new Event("suggestionsupdate"))}getIndexOfId(e){let n=e-this.firstRowId_;return n<0||n>=this.rows_.length?-1:n}getIdOfIndex_(e){return this.firstRowId_+e}attachInputs(...e){this.selectionHandler_.attachInputs(...e)}detachInputs(...e){this.selectionHandler_.detachInputs(...e),e.forEach(s=>{this.inputToAnchorMap_.delete(s)})}attachInputWithAnchor(e,n){this.inputToAnchorMap_.set(e,n),this.attachInputs(e)}update(e){this.selectionHandler_.update(e)}}});var dN,yc,A_=b(()=>{"use strict";Po();le();Z();ge();Zh();Li();dN=300,yc=class extends EventTarget{constructor(e,n,s,o){super();this.element_=null;this.token_="";this.rows_=[];this.rowDivs_=[];this.hilitedRow_=-1;this.startRenderingRows_=-1;this.visible_=!1;this.className="ac-renderer";this.rowClassName="ac-row";this.activeClassName="ac-active";this.highlightedClassName="ac-highlighted";this.matchWordBoundary_=!0;this.highlightAllTokens_=!1;this.showScrollbarsIfTooLarge_=!1;this.borderWidth_=0;this.parent_=e||document.body,this.doc_=this.parent_.ownerDocument,this.reposition_=!e,this.customRenderer_=n||null,this.useStandardHighlighting_=o!=null?o:!0,this.rightAlign_=!!s,this.showScrollbarsIfTooLarge_=!1,this.handleClick_=this.handleClick_.bind(this),this.handleMouseDown_=this.handleMouseDown_.bind(this),this.handleMouseOver_=this.handleMouseOver_.bind(this)}getElement(){return this.element_}setWidthProvider(e,n,s){this.widthProvider_=e,n&&(this.borderWidth_=n),s&&(this.maxWidthProvider_=s)}setRightAlign(e){this.rightAlign_=e}getRightAlign(){return this.rightAlign_}setShowScrollbarsIfTooLarge(e){this.showScrollbarsIfTooLarge_=e}setUseStandardHighlighting(e){this.useStandardHighlighting_=e}setMatchWordBoundary(e){this.matchWordBoundary_=e}setHighlightAllTokens(e){this.highlightAllTokens_=e}setAnchorElement(e){this.anchorElement_=e}getAnchorElement(){return this.anchorElement_}renderRows(e,n,s){this.token_=n,this.rows_=e,this.hilitedRow_=-1,this.startRenderingRows_=Date.now(),this.target_=s,this.rowDivs_=[],this.redraw()}dismiss(){this.visible_&&(this.visible_=!1,this.toggleAriaMarkup_(!1),A(this.element_,!1))}show(){this.visible_||(this.visible_=!0,this.toggleAriaMarkup_(!0),A(this.element_,!0))}toggleAriaMarkup_(e){this.target_&&(this.target_.setAttribute("aria-haspopup",String(e)),this.element_.setAttribute("aria-expanded",String(e)),this.target_.setAttribute("aria-expanded",String(e)),e?this.target_.setAttribute("aria-owns",this.element_.id):(this.target_.removeAttribute("aria-owns"),this.target_.setAttribute("aria-activedescendant","")))}isVisible(){return this.visible_}hiliteRow(e){let n=e>=0&&e<this.rows_.length?this.rows_[e]:void 0,s=e>=0&&e<this.rowDivs_.length?this.rowDivs_[e]:void 0,o=new CustomEvent("rowhilite",{detail:{rowNode:s,row:n?n.data:null},cancelable:!0});this.dispatchEvent(o)&&(this.hiliteNone(),this.hilitedRow_=e,s&&(s.classList.add(this.activeClassName),this.target_&&this.target_.setAttribute("aria-activedescendant",s.id),clearTimeout(this.tm),this.tm=setTimeout(()=>{Lt(this.element_,{behavior:"instant",block:"nearest"})},50)))}hiliteNone(){this.hilitedRow_>=0&&x_(this.rowDivs_[this.hilitedRow_]).classList.remove(this.activeClassName)}hiliteId(e){if(e==-1)this.hiliteRow(-1);else for(let n=0;n<this.rows_.length;n++)if(this.rows_[n].id==e){this.hiliteRow(n);return}}setMenuClasses_(e){e.classList.add(...this.className.split(" "))}maybeCreateElement_(){if(!this.element_){let e=this.doc_.createElement("div");e.style.display="none",this.showScrollbarsIfTooLarge_&&(e.style.overflowY="auto"),this.element_=e,this.setMenuClasses_(e),e.setAttribute("role","listbox"),e.id=re(),this.parent_.appendChild(e),e.addEventListener("click",this.handleClick_),e.addEventListener("mousedown",this.handleMouseDown_),e.addEventListener("mouseover",this.handleMouseOver_)}}redraw(){if(this.maybeCreateElement_(),this.widthProvider_&&(this.element_.style.minWidth=`${this.widthProvider_.clientWidth-this.borderWidth_}px`),this.maxWidthProvider_&&(this.element_.style.maxWidth=`${this.maxWidthProvider_.clientWidth-this.borderWidth_}px`),this.target_&&this.reposition_){let e=this.anchorElement_||this.target_;e&&(this.floatingCleanup&&(this.floatingCleanup(),delete this.floatingCleanup),this.floatingCleanup=ln(e,this.element_,()=>{cn(e,this.element_,{placement:this.rightAlign_?"bottom-end":"bottom-start"}).then(({x:n,y:s})=>{Object.assign(this.element_.style,{left:`${n}px`,top:`${s}px`})})}))}if(this.rowDivs_.length=0,this.element_.innerHTML="",this.customRenderer_&&this.customRenderer_.render?this.customRenderer_.render(this,this.element_,this.rows_,this.token_):this.rows_.forEach(e=>{this.element_.appendChild(this.renderRowHtml(e,this.token_))}),this.rows_.length===0){this.dismiss();return}this.show()}setAutoPosition(e){this.reposition_=e}getAutoPosition(){return this.reposition_}getTarget(){return this.target_||null}dispose(){this.floatingCleanup&&(this.floatingCleanup(),delete this.floatingCleanup),this.element_&&(this.element_.removeEventListener("click",this.handleClick_),this.element_.removeEventListener("mousedown",this.handleMouseDown_),this.element_.removeEventListener("mouseover",this.handleMouseOver_),this.element_.remove(),this.element_=null,this.visible_=!1)}renderRowContents_(e,n,s){s.textContent=e.data.toString()}startHiliteMatchingText_(e,n){this.wasHighlightedAtLeastOnce_=!1,this.hiliteMatchingText_(e,n)}hiliteMatchingText_(e,n){if(!(!this.highlightAllTokens_&&this.wasHighlightedAtLeastOnce_))if(e.nodeType===3){let s=null;Array.isArray(n)&&n.length>1&&!this.highlightAllTokens_&&(s=n.slice(1));let o=this.getTokenRegExp_(n);if(o.length===0)return;let r=e.nodeValue,a=this.matchWordBoundary_?new RegExp(`\\b(?:${o})`,"gi"):new RegExp(o,"gi"),l=[],c=0,d=a.exec(r),h=0;for(;d;)h++,l.push(r.substring(c,d.index)),l.push(r.substring(d.index,a.lastIndex)),c=a.lastIndex,d=a.exec(r);if(l.push(r.substring(c)),l.length>1){let p=this.highlightAllTokens_?h:1;for(let u=0;u<p;u++){let g=2*u;e.nodeValue=l[g];let f=this.doc_.createElement("b");f.className=this.highlightedClassName,f.appendChild(this.doc_.createTextNode(l[g+1])),f=e.parentNode.insertBefore(f,e.nextSibling),e.parentNode.insertBefore(this.doc_.createTextNode(""),f.nextSibling),e=f.nextSibling}let m=l.slice(p*2);e.nodeValue=m.join(""),this.wasHighlightedAtLeastOnce_=!0}else s&&this.hiliteMatchingText_(e,s)}else{let s=e.firstChild;for(;s;){let o=s.nextSibling;this.hiliteMatchingText_(s,n),s=o}}}getTokenRegExp_(e){let n="";return e&&(Array.isArray(e)&&(e=e.filter(s=>!!(s||"").trim())),this.highlightAllTokens_?Array.isArray(e)?n=e.map(Tr).join("|"):(n=Yy(e),n=Tr(n),n=n.replace(/ /g,"|")):Array.isArray(e)?n=e.length>0?Tr(e[0]):"":/^\W/.test(e)||(n=Tr(e))),n}renderRowHtml(e,n){let s=this.doc_.createElement("div");return s.className=this.rowClassName,s.id=re(),s.setAttribute("role","option"),this.customRenderer_&&this.customRenderer_.renderRow?this.customRenderer_.renderRow(e,n,s):this.renderRowContents_(e,n,s),n&&this.useStandardHighlighting_&&this.startHiliteMatchingText_(s,n),s.classList.add(this.rowClassName),this.rowDivs_.push(s),s}getRowFromEventTarget_(e){for(;e&&e!==this.element_&&!e.classList.contains(this.rowClassName);)e=e.parentNode;return e?this.rowDivs_.indexOf(e):-1}handleClick_(e){let n=this.getRowFromEventTarget_(e.target);n>=0&&this.dispatchEvent(new CustomEvent("select",{detail:{row:this.rows_[n].id}})),e.stopPropagation()}handleMouseDown_(e){e.stopPropagation(),e.preventDefault()}handleMouseOver_(e){let n=this.getRowFromEventTarget_(e.target);if(n>=0){if(Date.now()-this.startRenderingRows_<dN)return;this.dispatchEvent(new CustomEvent("hilite",{detail:{row:this.rows_[n].id}}))}}}});var Or,S_=b(()=>{"use strict";Or=class extends EventTarget{constructor(e=1){super();this.interval_=e;this.tick_=this.tick_.bind(this),this.last_=Date.now(),this.enabled=!1}getInterval(){return this.interval_}setInterval(e){this.interval_=e,this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()}tick_(){if(this.enabled){let e=Date.now()-this.last_;if(e>0&&e<this.interval_*.8){this.timer_=setTimeout(this.tick_,this.interval_-e);return}this.timer_&&(clearTimeout(this.timer_),this.timer_=void 0),this.dispatchTick(),this.enabled&&(this.stop(),this.start())}}dispatchTick(){this.dispatchEvent(new Event("tick"))}start(){this.enabled=!0,this.timer_||(this.timer_=setTimeout(this.tick_,this.interval_),this.last_=Date.now())}stop(){this.enabled=!1,this.timer_&&(clearTimeout(this.timer_),this.timer_=void 0)}dispose(){this.stop()}}});var mN,_c,M_=b(()=>{"use strict";S_();mN=",;",_c=class{constructor(t=mN,e="",n=!0,s=150){this.preventSelectionOnTab_=!1;this.lastKeyCode_=-1;this.whitespaceWrapEntries_=!0;this.generateNewTokenOnLiteral_=!0;this.upsideDown_=!1;this.separatorUpdates_=!0;this.separatorSelects_=!0;this.lastValue_="";this.waitingForIme_=!1;this.rowJustSelected_=!1;this.updateDuringTyping_=!0;this.attachedInputs_=[];this.multi_=n,this.setSeparators(t),this.literals_=e,this.preventDefaultOnTab_=n,this.timer_=s>0?new Or(s):void 0,this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.onKey_=this.onKey_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onKeyPress_=this.onKeyPress_.bind(this),this.onTick_=this.onTick_.bind(this),this.onKeyDownOnInactiveElement_=this.onKeyDownOnInactiveElement_.bind(this)}attachAutoComplete(t){this.ac_=t}getAutoComplete(){return this.ac_}getActiveElement(){return this.activeElement_}getValue(){return this.activeElement_.value}setValue(t){this.activeElement_.value=t}getCursorPosition(){return this.activeElement_.selectionStart}setCursorPosition(t){this.activeElement_.selectionStart=t,this.activeElement_.selectionEnd=t}attachInput(t){if(this.attachedInputs_.push(t),t&&t.nodeType===1){let e=t;e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list")}t.addEventListener("focus",this.handleFocus),t.addEventListener("blur",this.handleBlur),this.activeElement_||(t.addEventListener("keydown",this.onKeyDownOnInactiveElement_),t&&t.nodeType===1&&t.ownerDocument.activeElement===t&&this.processFocus(t))}detachInput(t){let e=this.attachedInputs_.indexOf(t);e!==-1&&this.attachedInputs_.splice(e,1),this.attachedInputs_.push(t),t&&t.nodeType===1&&(t.removeAttribute("role"),t.removeAttribute("aria-autocomplete")),t==this.activeElement_&&this.handleBlur(),t.removeEventListener("focus",this.handleFocus),t.removeEventListener("blur",this.handleBlur),this.activeElement_||t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_)}attachInputs(...t){t.forEach(e=>this.attachInput(e))}detachInputs(...t){t.forEach(e=>this.detachInput(e))}selectRow(t,e){return this.activeElement_&&this.setTokenText(t.toString(),e),!1}setTokenText(t,e){if(e!==void 0?e:this.multi_){let n=this.getTokenIndex_(this.getValue(),this.getCursorPosition()),s=this.splitInput_(this.getValue()),o=t;if(this.separatorCheck_&&!this.separatorCheck_.test(o)&&(o=o.trimRight()+this.defaultSeparator_),this.whitespaceWrapEntries_&&(n!==0&&s[n-1].trim()!==""&&(o=" "+o),n===s.length-1&&(o+=" ")),o!==s[n]){s[n]=o;let r=this.activeElement_;r.value=s.join("");let a=0;for(let l=0;l<=n;l++)a+=s[l].length;r.focus(),this.setCursorPosition(a)}}else this.setValue(t);this.rowJustSelected_=!0}dispose(){this.activeTimeoutId_!=null&&clearTimeout(this.activeTimeoutId_),this.attachedInputs_.forEach(t=>{t.removeEventListener("focus",this.handleFocus),t.removeEventListener("blur",this.handleBlur),t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_)}),this.removeEventHandlers_(),this.timer_&&this.timer_.dispose()}setSeparators(t,e){this.separators_=t,this.defaultSeparator_=e!=null?e:this.separators_.substring(0,1);let n=this.multi_?`[\\s${this.separators_}]+`:"[\\s]+";this.trimmer_=new RegExp(`^${n}|${n}$`,"g"),this.separatorCheck_=new RegExp(`\\s*[${this.separators_}]$`)}setUpsideDown(t){this.upsideDown_=t}setWhitespaceWrapEntries(t){this.whitespaceWrapEntries_=t}setGenerateNewTokenOnLiteral(t){this.generateNewTokenOnLiteral_=t}setTrimmingRegExp(t){this.trimmer_=t}setEndsWithSeparatorRegExp(t){this.separatorCheck_=t}setPreventDefaultOnTab(t){this.preventDefaultOnTab_=t}setPreventSelectionOnTab(t){this.preventSelectionOnTab_=t}setSeparatorCompletes(t){this.separatorUpdates_=t,this.separatorSelects_=t}setSeparatorSelects(t){this.separatorSelects_=t}getThrottleTime(){return this.timer_?this.timer_.getInterval():-1}setRowJustSelected(t){this.rowJustSelected_=t}setThrottleTime(t){if(t<0){this.timer_.dispose(),this.timer_=void 0;return}this.timer_?this.timer_.setInterval(t):this.timer_=new Or(t)}getUpdateDuringTyping(){return this.updateDuringTyping_}setUpdateDuringTyping(t){this.updateDuringTyping_=t}handleKeyEvent(t){switch(t.keyCode){case 40:if(this.ac_.isOpen())return this.moveDown_(),t.preventDefault(),!0;if(!this.multi_)return this.update(!0),t.preventDefault(),!0;break;case 38:if(this.ac_.isOpen())return this.moveUp_(),t.preventDefault(),!0;break;case 9:if(this.ac_.isOpen()&&!t.shiftKey&&!this.preventSelectionOnTab_){if(this.update(),this.ac_.selectHilited()&&this.preventDefaultOnTab_)return t.preventDefault(),!0}else this.ac_.dismiss();break;case 13:if(this.ac_.isOpen()){if(this.update(),this.ac_.selectHilited())return t.preventDefault(),t.stopPropagation(),!0}else this.ac_.dismiss();break;case 27:if(this.ac_.isOpen())return this.ac_.dismiss(),t.preventDefault(),t.stopPropagation(),!0;break;case 229:if(!this.waitingForIme_)return this.startWaitingForIme_(),!0;break;default:this.timer_&&!this.updateDuringTyping_&&(this.timer_.stop(),this.timer_.start())}return this.handleSeparator_(t)}handleSeparator_(t){let e=this.multi_&&t.charCode&&this.separators_.includes(String.fromCharCode(t.charCode));return this.separatorUpdates_&&e&&this.update(),this.separatorSelects_&&e&&this.ac_.selectHilited()?(t.preventDefault(),!0):!1}addEventHandlers_(){this.activeElement_.addEventListener("keydown",this.onKey_)}removeEventHandlers_(){this.activeElement_&&this.activeElement_.removeEventListener("keydown",this.onKey_),this.waitingForIme_&&this.stopWaitingForIme_()}handleFocus(t){this.processFocus(t.target)}processFocus(t){this.activeElement_||t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_),this.ac_&&this.ac_.cancelDelayedDismiss(),t!=this.activeElement_&&(this.activeElement_=t,this.timer_&&(this.timer_.start(),this.timer_.addEventListener("tick",this.onTick_)),this.lastValue_=this.getValue(),this.addEventHandlers_())}handleBlur(){this.processBlur()}processBlur(){this.activeElement_&&(this.removeEventHandlers_(),this.activeElement_=void 0,this.timer_&&(this.timer_.stop(),this.timer_.removeEventListener("tick",this.onTick_)),this.ac_&&this.ac_.dismissOnDelay())}onTick_(){this.update()}onKeyDownOnInactiveElement_(t){this.handleFocus(t)}onKey_(t){this.lastKeyCode_=t.keyCode,this.ac_&&this.handleKeyEvent(t)}onKeyPress_(){this.waitingForIme_&&this.lastKeyCode_!=229&&this.stopWaitingForIme_()}onKeyUp_(t){this.waitingForIme_&&(t.keyCode==13||t.keyCode==77&&t.ctrlKey)&&this.stopWaitingForIme_()}startWaitingForIme_(){this.waitingForIme_||(this.activeElement_.addEventListener("keyup",this.onKeyUp_),this.activeElement_.addEventListener("keypress",this.onKeyPress_),this.waitingForIme_=!0)}stopWaitingForIme_(){this.waitingForIme_&&(this.waitingForIme_=!1,this.activeElement_.removeEventListener("keyup",this.onKeyUp_),this.activeElement_.removeEventListener("keypress",this.onKeyPress_))}update(t){if(this.activeElement_&&(t||this.getValue()!=this.lastValue_)){if(t||!this.rowJustSelected_){let e=this.parseToken();this.ac_&&(this.ac_.setTarget(this.activeElement_),this.ac_.setToken(e))}this.lastValue_=this.getValue()}this.rowJustSelected_=!1}parseToken(){return this.parseToken_()}moveUp_(){return this.upsideDown_?this.ac_.hiliteNext():this.ac_.hilitePrev()}moveDown_(){return this.upsideDown_?this.ac_.hilitePrev():this.ac_.hiliteNext()}parseToken_(){let t=this.getCursorPosition(),e=this.getValue();return this.trim_(this.splitInput_(e)[this.getTokenIndex_(e,t)])}trim_(t){return this.trimmer_?String(t).replace(this.trimmer_,""):t}getTokenIndex_(t,e){let n=this.splitInput_(t);if(e==t.length)return n.length-1;let s=0;for(let o=0,r=0;o<n.length&&r<=e;o++)r+=n[o].length,s=o;return s}splitInput_(t){if(!this.multi_)return[t];let e=String(t).split(""),n=[],s=[];for(let o=0,r=!1;o<e.length;o++)this.literals_&&this.literals_.includes(e[o])?(this.generateNewTokenOnLiteral_&&!r&&(n.push(s.join("")),s.length=0),s.push(e[o]),r=!r):!r&&this.separators_.includes(e[o])?(s.push(e[o]),n.push(s.join("")),s.length=0):s.push(e[o]);return n.push(s.join("")),n}}});var Tc,R_=b(()=>{"use strict";M_();Tc=class extends _c{selectRow(t){let e=super.selectRow.call(this,t);return t.select(this.ac_.getTarget()),e}}});var Lc,I_=b(()=>{"use strict";Lc=class i{constructor(t,e){this.xhr_=new XMLHttpRequest;this.method_="GET";this.eventAttached_=!1;this.url_=t,this.useSimilar_=!e}setMethod(t){this.method_=t}setContent(t){this.content_=t}setHeaders(t){this.headers_=t}getXhr(){return this.xhr_}static buildUrl(t,e,n,s){let o=new URL(t,window.location.href),{searchParams:r}=o;return r.append("token",e),r.append("max_matches",String(n)),r.append("use_similar",String(Number(s))),o.href}parseResponseText(t){let e=[];if(t)try{e=JSON.parse(t)}catch(n){}return e}xhrCallback(t,e){let n=this.xhr_.responseText;e(t,this.parseResponseText(n))}requestMatchingRows(t,e,n){let s=i.buildUrl(this.url_,t,e,this.useSimilar_);if(!s)return;let o=()=>this.xhrCallback(t,n);this.xhr_.abort(),this.eventAttached_&&this.xhr_.removeEventListener("load",o),this.eventAttached_=!0,this.xhr_.open(this.method_,s,!0),this.xhr_.addEventListener("load",o,{once:!0}),Object.entries(this.headers_||{}).forEach(([r,a])=>this.xhr_.setRequestHeader(r,a)),this.xhr_.send(this.content_)}}});var wc,O_=b(()=>{"use strict";I_();wc=class extends Lc{setRowFilter(t){this.rowFilter_=t}setRowBuilder(t){this.rowBuilder_=t}requestMatchingRows(t,e,n){let s=(o,r)=>{try{let a=[];for(let l=0;l<r.length;l++)for(let c=1;c<r[l].length;c++){let d=this.rowBuilder_(r[l][0],r[l][c]);a.push(d),typeof d.render=="undefined"&&(d.render=h=>{h.textContent=d.toString()}),typeof d.select=="undefined"&&(d.select=h=>{h.value=d.toString()})}this.rowFilter_&&(a=this.rowFilter_(a)),n(o,a)}catch(a){n(o,[])}};super.requestMatchingRows(t,e,s)}}});var Re,ss=b(()=>{"use strict";C_();A_();R_();O_();Re=class extends bc{constructor(t,e,n,s,o){let r={renderRow:(d,h,p)=>d.data.render(p,h)},a=new yc(o,r),l=new wc(t,!s),c=new Tc(void 0,void 0,!!n,300);o&&d2Env.isApp&&(c.processBlur=()=>{}),super(l,a,c),c.attachAutoComplete(this),c.attachInputs(e)}getXhr(){return this.matcher_.getXhr()}setRowFilter(t){this.matcher_.setRowFilter(t)}setRowBuilder(t){this.matcher_.setRowBuilder(t)}setUseStandardHighlighting(t){this.renderer_.setUseStandardHighlighting(t)}getInputHandler(){return this.selectionHandler_}setMethodn(t){this.matcher_.setMethod(t)}setContent(t){this.matcher_.setContent(t)}setHeaders(t){this.matcher_.setHeaders(t)}}});var Ys,xc=b(()=>{"use strict";B();Ys=(i,t)=>rt(O({},t),{render(e){let n=P("span",t.kind==="country"?"ac-imp":void 0,t.caption);if(e.appendChild(n),t.extra){let s=P("span","ac-desc",t.extra);e.appendChild(s)}},select(e){e.value=t.caption}})});var vT,ET=b(()=>{"use strict";vT=i=>{if(!d2Env.isApp)return i;let t=i.indexOf("base64");return t!==-1?i.substring(t+7):i}});var xN,bT,yT,rs,_T,TT,LT,eu=b(()=>{"use strict";B();ET();xN="js-gallery",bT="js-gallery-thumb",yT="c-lightbox-anchor",rs=i=>lt("x-img",i),_T=i=>{let t=It(i,xN);if(t){let n=Q(`.${bT} > x-img`,t);return n.length>0?n:Q(`.${yT} > x-img`,t)}let e=rs(i);return e?[e]:[]},TT=i=>{let{color:t,inline:e,width:n,height:s}=i.data,o=i.closest(`.${yT},.${bT}`),r=o?(o.dataset.size||"").split(/\s*,\s*/).map(d=>Number(d)||0):[0,0],[a,l]=r,c={url:vT(o&&o.href||""),width:a||n||0,height:l||s||0};return O(O({images:[c]},t&&{color:t}),e&&{inline:e})},LT=i=>rt(O({},i),{images:i.images.map(t=>({url:t.url,w:t.width,h:t.height}))})});function Ve(i,t,e){let n=document.createElement(t);return i&&(n.className=i),e&&e.appendChild(n),n}function ee(i,t){return i.x=t.x,i.y=t.y,t.id!==void 0&&(i.id=t.id),i}function IT(i){i.x=Math.round(i.x),i.y=Math.round(i.y)}function iu(i,t){let e=Math.abs(i.x-t.x),n=Math.abs(i.y-t.y);return Math.sqrt(e*e+n*n)}function Wr(i,t){return i.x===t.x&&i.y===t.y}function Vr(i,t,e){return Math.min(Math.max(i,t),e)}function qr(i,t,e){let n=`translate3d(${i}px,${t||0}px,0)`;return e!==void 0&&(n+=` scale3d(${e},${e},1)`),n}function ls(i,t,e,n){i.style.transform=qr(t,e,n)}function OT(i,t,e,n){i.style.transition=t?`${t} ${e}ms ${n||CN}`:"none"}function nu(i,t,e){i.style.width=typeof t=="number"?`${t}px`:t,i.style.height=typeof e=="number"?`${e}px`:e}function AN(i){OT(i)}function SN(i){return"decode"in i?i.decode().catch(()=>{}):i.complete?Promise.resolve(i):new Promise((t,e)=>{i.onload=()=>t(i),i.onerror=e})}function MN(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function RN(i,t,e=document){let n=[];if(i instanceof Element)n=[i];else if(i instanceof NodeList||Array.isArray(i))n=Array.from(i);else{let s=typeof i=="string"?i:t;s&&(n=Array.from(e.querySelectorAll(s)))}return n}function wT(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}function kT(i,t){if(i.getViewportSizeFn){let e=i.getViewportSizeFn(i,t);if(e)return e}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function zr(i,t,e,n,s){let o=0;if(t.paddingFn)o=t.paddingFn(e,n,s)[i];else if(t.padding)o=t.padding[i];else{let r="padding"+i[0].toUpperCase()+i.slice(1);t[r]&&(o=t[r])}return Number(o)||0}function DT(i,t,e,n){return{x:t.x-zr("left",i,t,e,n)-zr("right",i,t,e,n),y:t.y-zr("top",i,t,e,n)-zr("bottom",i,t,e,n)}}function HN(i,t){return i*t/(1-t)}function ST(i,t,e){return i.x=(t.x+e.x)/2,i.y=(t.y+e.y)/2,i}function MT(i){return!!i.target.closest(".pswp__container")}function WN(i){if(typeof i=="string")return i;if(!i||!i.isCustomSVG)return"";let t=i,e='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">';return e=e.split("%d").join(t.size||32),t.outlineID&&(e+='<use class="pswp__icn-shadow" xlink:href="#'+t.outlineID+'"/>'),e+=t.inner,e+="</svg>",e}function NT(i,t,e){i.classList.add("pswp__button--arrow"),i.setAttribute("aria-controls","pswp__items"),t.on("change",()=>{t.options.loop||(e?i.disabled=!(t.currIndex<t.getNumItems()-1):i.disabled=!(t.currIndex>0))})}function RT(i,t){i.classList.toggle("pswp--zoomed-in",t)}function ZN(i){let t=i.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width}}function XN(i,t,e){let n=i.getBoundingClientRect(),s=n.width/t,o=n.height/e,r=s>o?s:o,a=(n.width-t*r)/2,l=(n.height-e*r)/2,c={x:n.left+a,y:n.top+l,w:t*r};return c.innerRect={w:n.width,h:n.height,x:a,y:l},c}function QN(i,t,e){let n=e.dispatch("thumbBounds",{index:i,itemData:t,instance:e});if(n.thumbBounds)return n.thumbBounds;let{element:s}=t,o,r;if(s&&e.options.thumbSelector!==!1){let a=e.options.thumbSelector||"img";r=s.matches(a)?s:s.querySelector(a)}return r=e.applyFilters("thumbEl",r,t,i),r&&(t.thumbCropped?o=XN(r,t.width||t.w||0,t.height||t.h||0):o=ZN(r)),e.applyFilters("thumbBounds",o,t,i)}function PT(i,t,e){let n=t.createContentFromData(i,e),s,{options:o}=t;if(o){s=new Ac(o,i,-1);let r;t.pswp?r=t.pswp.viewportSize:r=kT(o,t);let a=DT(o,r,i,e);s.update(n.width,n.height,a)}return n.lazyLoad(),s&&n.setDisplayedSize(Math.ceil(n.width*s.initial),Math.ceil(n.height*s.initial)),n}function eP(i,t){let e=t.getItemData(i);if(!t.dispatch("lazyLoadSlide",{index:i,itemData:e}).defaultPrevented)return PT(e,t,i)}var CN,oi,HT,su,ou,xT,Ac,ru,IN,ON,CT,AT,au,kN,DN,lu,cu,NN,PN,$N,du,FN,mu,BN,as,hu,UN,uu,jN,zN,pu,fu,gu,vu,Eu,qN,VN,GN,JN,YN,KN,bu,yu,_u,Tu,Lu,tP,wu,xu,jr,Cu,iP,Sc,$T=b(()=>{CN="cubic-bezier(.4,0,.22,1)";oi={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};HT=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{HT=!0}}))}catch(i){}su=class{constructor(){this._pool=[]}add(t,e,n,s){this._toggleListener(t,e,n,s)}remove(t,e,n,s){this._toggleListener(t,e,n,s,!0)}removeAll(){this._pool.forEach(t=>{this._toggleListener(t.target,t.type,t.listener,t.passive,!0,!0)}),this._pool=[]}_toggleListener(t,e,n,s,o,r){if(!t)return;let a=o?"removeEventListener":"addEventListener";e.split(" ").forEach(c=>{if(c){r||(o?this._pool=this._pool.filter(h=>h.type!==c||h.listener!==n||h.target!==t):this._pool.push({target:t,type:c,listener:n,passive:s}));let d=HT?{passive:s||!1}:!1;t[a](c,n,d)}})}};ou=class{constructor(t){this.slide=t,this.currZoomLevel=1,this.center={x:0,y:0},this.max={x:0,y:0},this.min={x:0,y:0}}update(t){this.currZoomLevel=t,this.slide.width?(this._updateAxis("x"),this._updateAxis("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}_updateAxis(t){let{pswp:e}=this.slide,n=this.slide[t==="x"?"width":"height"]*this.currZoomLevel,o=zr(t==="x"?"left":"top",e.options,e.viewportSize,this.slide.data,this.slide.index),r=this.slide.panAreaSize[t];this.center[t]=Math.round((r-n)/2)+o,this.max[t]=n>r?Math.round(r-n)+o:this.center[t],this.min[t]=n>r?o:this.center[t]}reset(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}correctPan(t,e){return Vr(e,this.max[t],this.min[t])}},xT=4e3,Ac=class{constructor(t,e,n,s){this.pswp=s,this.options=t,this.itemData=e,this.index=n,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(t,e,n){let s={x:t,y:e};this.elementSize=s,this.panAreaSize=n;let o=n.x/s.x,r=n.y/s.y;this.fit=Math.min(1,o<r?o:r),this.fill=Math.min(1,o>r?o:r),this.vFill=Math.min(1,r),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(t){let e=t+"ZoomLevel",n=this.options[e];if(n)return typeof n=="function"?n(this):n==="fill"?this.fill:n==="fit"?this.fit:Number(n)}_getSecondary(){let t=this._parseZoomLevelOption("secondary");return t||(t=Math.min(1,this.fit*3),this.elementSize&&t*this.elementSize.x>xT&&(t=xT/this.elementSize.x),t)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}},ru=class{constructor(t,e,n){this.data=t,this.index=e,this.pswp=n,this.isActive=e===n.currIndex,this.currentResolution=0,this.panAreaSize={x:0,y:0},this.pan={x:0,y:0},this.isFirstSlide=this.isActive&&!n.opener.isOpen,this.zoomLevels=new Ac(n.options,t,e,n),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:e}),this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=Ve("pswp__zoom-wrap","div"),this.holderElement=null,this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.heavyAppended=!1,this.bounds=new ou(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})}setIsActive(t){t&&!this.isActive?this.activate():!t&&this.isActive&&this.deactivate()}append(t){this.holderElement=t,this.container.style.transformOrigin="0 0",this.data&&(this.calculateSize(),this.load(),this.updateContentSize(),this.appendHeavy(),this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive&&this.activate())}load(){this.content.load(!1),this.pswp.dispatch("slideLoad",{slide:this})}appendHeavy(){let{pswp:t}=this;this.heavyAppended||!t.opener.isOpen||t.mainScroll.isShifted()||!this.isActive&&!!0||this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this}))}activate(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}deactivate(){this.isActive=!1,this.content.deactivate(),this.currZoomLevel!==this.zoomLevels.initial&&this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}destroy(){this.content.hasSlide=!1,this.content.remove(),this.container.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}resize(){this.currZoomLevel===this.zoomLevels.initial||!this.isActive?(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize()):(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y))}updateContentSize(t){let e=this.currentResolution||this.zoomLevels.initial;if(!e)return;let n=Math.round(this.width*e)||this.pswp.viewportSize.x,s=Math.round(this.height*e)||this.pswp.viewportSize.y;!this.sizeChanged(n,s)&&!t||this.content.setDisplayedSize(n,s)}sizeChanged(t,e){return t!==this.prevDisplayedWidth||e!==this.prevDisplayedHeight?(this.prevDisplayedWidth=t,this.prevDisplayedHeight=e,!0):!1}getPlaceholderElement(){var t;return(t=this.content.placeholder)===null||t===void 0?void 0:t.element}zoomTo(t,e,n,s){let{pswp:o}=this;if(!this.isZoomable()||o.mainScroll.isShifted())return;o.dispatch("beforeZoomTo",{destZoomLevel:t,centerPoint:e,transitionDuration:n}),o.animations.stopAllPan();let r=this.currZoomLevel;s||(t=Vr(t,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(t),this.pan.x=this.calculateZoomToPanOffset("x",e,r),this.pan.y=this.calculateZoomToPanOffset("y",e,r),IT(this.pan);let a=()=>{this._setResolution(t),this.applyCurrentZoomPan()};n?o.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:a,duration:n,easing:o.options.easing}):a()}toggleZoom(t){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,t,this.pswp.options.zoomAnimationDuration)}setZoomLevel(t){this.currZoomLevel=t,this.bounds.update(this.currZoomLevel)}calculateZoomToPanOffset(t,e,n){if(this.bounds.max[t]-this.bounds.min[t]===0)return this.bounds.center[t];e||(e=this.pswp.getViewportCenterPoint()),n||(n=this.zoomLevels.initial);let o=this.currZoomLevel/n;return this.bounds.correctPan(t,(this.pan[t]-e[t])*o+e[t])}panTo(t,e){this.pan.x=this.bounds.correctPan("x",t),this.pan.y=this.bounds.correctPan("y",e),this.applyCurrentZoomPan()}isPannable(){return!!this.width&&this.currZoomLevel>this.zoomLevels.fit}isZoomable(){return!!this.width&&this.content.isZoomable()}applyCurrentZoomPan(){this._applyZoomTransform(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}zoomAndPanToInitial(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),ee(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}_applyZoomTransform(t,e,n){n/=this.currentResolution||this.zoomLevels.initial,ls(this.container,t,e,n)}calculateSize(){let{pswp:t}=this;ee(this.panAreaSize,DT(t.options,t.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),t.dispatch("calcSlideSize",{slide:this})}getCurrentTransform(){let t=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return qr(this.pan.x,this.pan.y,t)}_setResolution(t){t!==this.currentResolution&&(this.currentResolution=t,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}},IN=.35,ON=.6,CT=.4,AT=.5;au=class{constructor(t){this.gestures=t,this.pswp=t.pswp,this.startPan={x:0,y:0}}start(){this.pswp.currSlide&&ee(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}change(){let{p1:t,prevP1:e,dragAxis:n}=this.gestures,{currSlide:s}=this.pswp;if(n==="y"&&this.pswp.options.closeOnVerticalDrag&&s&&s.currZoomLevel<=s.zoomLevels.fit&&!this.gestures.isMultitouch){let o=s.pan.y+(t.y-e.y);if(!this.pswp.dispatch("verticalDrag",{panY:o}).defaultPrevented){this._setPanWithFriction("y",o,ON);let r=1-Math.abs(this._getVerticalDragRatio(s.pan.y));this.pswp.applyBgOpacity(r),s.applyCurrentZoomPan()}}else this._panOrMoveMainScroll("x")||(this._panOrMoveMainScroll("y"),s&&(IT(s.pan),s.applyCurrentZoomPan()))}end(){let{velocity:t}=this.gestures,{mainScroll:e,currSlide:n}=this.pswp,s=0;if(this.pswp.animations.stopAll(),e.isShifted()){let r=(e.x-e.getCurrSlideX())/this.pswp.viewportSize.x;t.x<-AT&&r<0||t.x<.1&&r<-.5?(s=1,t.x=Math.min(t.x,0)):(t.x>AT&&r>0||t.x>-.1&&r>.5)&&(s=-1,t.x=Math.max(t.x,0)),e.moveIndexBy(s,!0,t.x)}n&&n.currZoomLevel>n.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this._finishPanGestureForAxis("x"),this._finishPanGestureForAxis("y"))}_finishPanGestureForAxis(t){let{velocity:e}=this.gestures,{currSlide:n}=this.pswp;if(!n)return;let{pan:s,bounds:o}=n,r=s[t],a=this.pswp.bgOpacity<1&&t==="y",c=r+HN(e[t],.995);if(a){let u=this._getVerticalDragRatio(r),g=this._getVerticalDragRatio(c);if(u<0&&g<-CT||u>0&&g>CT){this.pswp.close();return}}let d=o.correctPan(t,c);if(r===d)return;let h=d===c?1:.82,p=this.pswp.bgOpacity,m=d-r;this.pswp.animations.startSpring({name:"panGesture"+t,isPan:!0,start:r,end:d,velocity:e[t],dampingRatio:h,onUpdate:u=>{if(a&&this.pswp.bgOpacity<1){let g=1-(d-u)/m;this.pswp.applyBgOpacity(Vr(p+(1-p)*g,0,1))}s[t]=Math.floor(u),n.applyCurrentZoomPan()}})}_panOrMoveMainScroll(t){let{p1:e,dragAxis:n,prevP1:s,isMultitouch:o}=this.gestures,{currSlide:r,mainScroll:a}=this.pswp,l=e[t]-s[t],c=a.x+l;if(!l||!r)return!1;if(t==="x"&&!r.isPannable()&&!o)return a.moveTo(c,!0),!0;let{bounds:d}=r,h=r.pan[t]+l;if(this.pswp.options.allowPanToNext&&n==="x"&&t==="x"&&!o){let p=a.getCurrSlideX(),m=a.x-p,u=l>0,g=!u;if(h>d.min[t]&&u){if(d.min[t]<=this.startPan[t])return a.moveTo(c,!0),!0;this._setPanWithFriction(t,h)}else if(h<d.max[t]&&g){if(this.startPan[t]<=d.max[t])return a.moveTo(c,!0),!0;this._setPanWithFriction(t,h)}else if(m!==0){if(m>0)return a.moveTo(Math.max(c,p),!0),!0;if(m<0)return a.moveTo(Math.min(c,p),!0),!0}else this._setPanWithFriction(t,h)}else t==="y"?!a.isShifted()&&d.min.y!==d.max.y&&this._setPanWithFriction(t,h):this._setPanWithFriction(t,h);return!1}_getVerticalDragRatio(t){var e,n;return(t-((e=(n=this.pswp.currSlide)===null||n===void 0?void 0:n.bounds.center.y)!==null&&e!==void 0?e:0))/(this.pswp.viewportSize.y/3)}_setPanWithFriction(t,e,n){let{currSlide:s}=this.pswp;if(!s)return;let{pan:o,bounds:r}=s;if(r.correctPan(t,e)!==e||n){let l=Math.round(e-o[t]);o[t]+=l*(n||IN)}else o[t]=e}},kN=.05,DN=.15;lu=class{constructor(t){this.gestures=t,this._startPan={x:0,y:0},this._startZoomPoint={x:0,y:0},this._zoomPoint={x:0,y:0},this._wasOverFitZoomLevel=!1,this._startZoomLevel=1}start(){let{currSlide:t}=this.gestures.pswp;t&&(this._startZoomLevel=t.currZoomLevel,ee(this._startPan,t.pan)),this.gestures.pswp.animations.stopAllPan(),this._wasOverFitZoomLevel=!1}change(){let{p1:t,startP1:e,p2:n,startP2:s,pswp:o}=this.gestures,{currSlide:r}=o;if(!r)return;let a=r.zoomLevels.min,l=r.zoomLevels.max;if(!r.isZoomable()||o.mainScroll.isShifted())return;ST(this._startZoomPoint,e,s),ST(this._zoomPoint,t,n);let c=1/iu(e,s)*iu(t,n)*this._startZoomLevel;if(c>r.zoomLevels.initial+r.zoomLevels.initial/15&&(this._wasOverFitZoomLevel=!0),c<a)if(o.options.pinchToClose&&!this._wasOverFitZoomLevel&&this._startZoomLevel<=r.zoomLevels.initial){let d=1-(a-c)/(a/1.2);o.dispatch("pinchClose",{bgOpacity:d}).defaultPrevented||o.applyBgOpacity(d)}else c=a-(a-c)*DN;else c>l&&(c=l+(c-l)*kN);r.pan.x=this._calculatePanForZoomLevel("x",c),r.pan.y=this._calculatePanForZoomLevel("y",c),r.setZoomLevel(c),r.applyCurrentZoomPan()}end(){let{pswp:t}=this.gestures,{currSlide:e}=t;(!e||e.currZoomLevel<e.zoomLevels.initial)&&!this._wasOverFitZoomLevel&&t.options.pinchToClose?t.close():this.correctZoomPan()}_calculatePanForZoomLevel(t,e){let n=e/this._startZoomLevel;return this._zoomPoint[t]-(this._startZoomPoint[t]-this._startPan[t])*n}correctZoomPan(t){let{pswp:e}=this.gestures,{currSlide:n}=e;if(!(n!=null&&n.isZoomable()))return;this._zoomPoint.x===0&&(t=!0);let s=n.currZoomLevel,o,r=!0;s<n.zoomLevels.initial?o=n.zoomLevels.initial:s>n.zoomLevels.max?o=n.zoomLevels.max:(r=!1,o=s);let a=e.bgOpacity,l=e.bgOpacity<1,c=ee({x:0,y:0},n.pan),d=ee({x:0,y:0},c);t&&(this._zoomPoint.x=0,this._zoomPoint.y=0,this._startZoomPoint.x=0,this._startZoomPoint.y=0,this._startZoomLevel=s,ee(this._startPan,c)),r&&(d={x:this._calculatePanForZoomLevel("x",o),y:this._calculatePanForZoomLevel("y",o)}),n.setZoomLevel(o),d={x:n.bounds.correctPan("x",d.x),y:n.bounds.correctPan("y",d.y)},n.setZoomLevel(s);let h=!Wr(d,c);if(!h&&!r&&!l){n._setResolution(o),n.applyCurrentZoomPan();return}e.animations.stopAllPan(),e.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate:p=>{if(p/=1e3,h||r){if(h&&(n.pan.x=c.x+(d.x-c.x)*p,n.pan.y=c.y+(d.y-c.y)*p),r){let m=s+(o-s)*p;n.setZoomLevel(m)}n.applyCurrentZoomPan()}l&&e.bgOpacity<1&&e.applyBgOpacity(Vr(a+(1-a)*p,0,1))},onComplete:()=>{n._setResolution(o),n.applyCurrentZoomPan()}})}};cu=class{constructor(t){this.gestures=t}click(t,e){let n=e.target.classList,s=n.contains("pswp__img"),o=n.contains("pswp__item")||n.contains("pswp__zoom-wrap");s?this._doClickOrTapAction("imageClick",t,e):o&&this._doClickOrTapAction("bgClick",t,e)}tap(t,e){MT(e)&&this._doClickOrTapAction("tap",t,e)}doubleTap(t,e){MT(e)&&this._doClickOrTapAction("doubleTap",t,e)}_doClickOrTapAction(t,e,n){var s;let{pswp:o}=this.gestures,{currSlide:r}=o,a=t+"Action",l=o.options[a];if(!o.dispatch(a,{point:e,originalEvent:n}).defaultPrevented){if(typeof l=="function"){l.call(o,e,n);return}switch(l){case"close":case"next":o[l]();break;case"zoom":r==null||r.toggleZoom(e);break;case"zoom-or-close":r!=null&&r.isZoomable()&&r.zoomLevels.secondary!==r.zoomLevels.initial?r.toggleZoom(e):o.options.clickToCloseNonZoomable&&o.close();break;case"toggle-controls":(s=this.gestures.pswp.element)===null||s===void 0||s.classList.toggle("pswp--ui-visible");break}}}},NN=10,PN=300,$N=25,du=class{constructor(t){this.pswp=t,this.dragAxis=null,this.p1={x:0,y:0},this.p2={x:0,y:0},this.prevP1={x:0,y:0},this.prevP2={x:0,y:0},this.startP1={x:0,y:0},this.startP2={x:0,y:0},this.velocity={x:0,y:0},this._lastStartP1={x:0,y:0},this._intervalP1={x:0,y:0},this._numActivePoints=0,this._ongoingPointers=[],this._touchEventEnabled="ontouchstart"in window,this._pointerEventEnabled=!!window.PointerEvent,this.supportsTouch=this._touchEventEnabled||this._pointerEventEnabled&&navigator.maxTouchPoints>1,this._numActivePoints=0,this._intervalTime=0,this._velocityCalculated=!1,this.isMultitouch=!1,this.isDragging=!1,this.isZooming=!1,this.raf=null,this._tapTimer=null,this.supportsTouch||(t.options.allowPanToNext=!1),this.drag=new au(this),this.zoomLevels=new lu(this),this.tapHandler=new cu(this),t.on("bindEvents",()=>{t.events.add(t.scrollWrap,"click",this._onClick.bind(this)),this._pointerEventEnabled?this._bindEvents("pointer","down","up","cancel"):this._touchEventEnabled?(this._bindEvents("touch","start","end","cancel"),t.scrollWrap&&(t.scrollWrap.ontouchmove=()=>{},t.scrollWrap.ontouchend=()=>{})):this._bindEvents("mouse","down","up")})}_bindEvents(t,e,n,s){let{pswp:o}=this,{events:r}=o,a=s?t+s:"";r.add(o.scrollWrap,t+e,this.onPointerDown.bind(this)),r.add(window,t+"move",this.onPointerMove.bind(this)),r.add(window,t+n,this.onPointerUp.bind(this)),a&&r.add(o.scrollWrap,a,this.onPointerUp.bind(this))}onPointerDown(t){let e=t.type==="mousedown"||t.pointerType==="mouse";if(e&&t.button>0)return;let{pswp:n}=this;if(!n.opener.isOpen){t.preventDefault();return}n.dispatch("pointerDown",{originalEvent:t}).defaultPrevented||(e&&(n.mouseDetected(),this._preventPointerEventBehaviour(t,"down")),n.animations.stopAll(),this._updatePoints(t,"down"),this._numActivePoints===1&&(this.dragAxis=null,ee(this.startP1,this.p1)),this._numActivePoints>1?(this._clearTapTimer(),this.isMultitouch=!0):this.isMultitouch=!1)}onPointerMove(t){this._preventPointerEventBehaviour(t,"move"),this._numActivePoints&&(this._updatePoints(t,"move"),!this.pswp.dispatch("pointerMove",{originalEvent:t}).defaultPrevented&&(this._numActivePoints===1&&!this.isDragging?(this.dragAxis||this._calculateDragDirection(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this._clearTapTimer(),this._updateStartPoints(),this._intervalTime=Date.now(),this._velocityCalculated=!1,ee(this._intervalP1,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this._rafStopLoop(),this._rafRenderLoop())):this._numActivePoints>1&&!this.isZooming&&(this._finishDrag(),this.isZooming=!0,this._updateStartPoints(),this.zoomLevels.start(),this._rafStopLoop(),this._rafRenderLoop())))}_finishDrag(){this.isDragging&&(this.isDragging=!1,this._velocityCalculated||this._updateVelocity(!0),this.drag.end(),this.dragAxis=null)}onPointerUp(t){this._numActivePoints&&(this._updatePoints(t,"up"),!this.pswp.dispatch("pointerUp",{originalEvent:t}).defaultPrevented&&(this._numActivePoints===0&&(this._rafStopLoop(),this.isDragging?this._finishDrag():!this.isZooming&&!this.isMultitouch&&this._finishTap(t)),this._numActivePoints<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),this._numActivePoints===1&&(this.dragAxis=null,this._updateStartPoints()))))}_rafRenderLoop(){(this.isDragging||this.isZooming)&&(this._updateVelocity(),this.isDragging?Wr(this.p1,this.prevP1)||this.drag.change():(!Wr(this.p1,this.prevP1)||!Wr(this.p2,this.prevP2))&&this.zoomLevels.change(),this._updatePrevPoints(),this.raf=requestAnimationFrame(this._rafRenderLoop.bind(this)))}_updateVelocity(t){let e=Date.now(),n=e-this._intervalTime;n<50&&!t||(this.velocity.x=this._getVelocity("x",n),this.velocity.y=this._getVelocity("y",n),this._intervalTime=e,ee(this._intervalP1,this.p1),this._velocityCalculated=!0)}_finishTap(t){let{mainScroll:e}=this.pswp;if(e.isShifted()){e.moveIndexBy(0,!0);return}if(t.type.indexOf("cancel")>0)return;if(t.type==="mouseup"||t.pointerType==="mouse"){this.tapHandler.click(this.startP1,t);return}let n=this.pswp.options.doubleTapAction?PN:0;this._tapTimer?(this._clearTapTimer(),iu(this._lastStartP1,this.startP1)<$N&&this.tapHandler.doubleTap(this.startP1,t)):(ee(this._lastStartP1,this.startP1),this._tapTimer=setTimeout(()=>{this.tapHandler.tap(this.startP1,t),this._clearTapTimer()},n))}_clearTapTimer(){this._tapTimer&&(clearTimeout(this._tapTimer),this._tapTimer=null)}_getVelocity(t,e){let n=this.p1[t]-this._intervalP1[t];return Math.abs(n)>1&&e>5?n/e:0}_rafStopLoop(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}_preventPointerEventBehaviour(t,e){this.pswp.applyFilters("preventPointerEvent",!0,t,e)&&t.preventDefault()}_updatePoints(t,e){if(this._pointerEventEnabled){let n=t,s=this._ongoingPointers.findIndex(o=>o.id===n.pointerId);e==="up"&&s>-1?this._ongoingPointers.splice(s,1):e==="down"&&s===-1?this._ongoingPointers.push(this._convertEventPosToPoint(n,{x:0,y:0})):s>-1&&this._convertEventPosToPoint(n,this._ongoingPointers[s]),this._numActivePoints=this._ongoingPointers.length,this._numActivePoints>0&&ee(this.p1,this._ongoingPointers[0]),this._numActivePoints>1&&ee(this.p2,this._ongoingPointers[1])}else{let n=t;this._numActivePoints=0,n.type.indexOf("touch")>-1?n.touches&&n.touches.length>0&&(this._convertEventPosToPoint(n.touches[0],this.p1),this._numActivePoints++,n.touches.length>1&&(this._convertEventPosToPoint(n.touches[1],this.p2),this._numActivePoints++)):(this._convertEventPosToPoint(t,this.p1),e==="up"?this._numActivePoints=0:this._numActivePoints++)}}_updatePrevPoints(){ee(this.prevP1,this.p1),ee(this.prevP2,this.p2)}_updateStartPoints(){ee(this.startP1,this.p1),ee(this.startP2,this.p2),this._updatePrevPoints()}_calculateDragDirection(){if(this.pswp.mainScroll.isShifted())this.dragAxis="x";else{let t=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y);if(t!==0){let e=t>0?"x":"y";Math.abs(this.p1[e]-this.startP1[e])>=NN&&(this.dragAxis=e)}}}_convertEventPosToPoint(t,e){return e.x=t.pageX-this.pswp.offset.x,e.y=t.pageY-this.pswp.offset.y,"pointerId"in t?e.id=t.pointerId:t.identifier!==void 0&&(e.id=t.identifier),e}_onClick(t){this.pswp.mainScroll.isShifted()&&(t.preventDefault(),t.stopPropagation())}},FN=.35,mu=class{constructor(t){this.pswp=t,this.x=0,this.slideWidth=0,this._currPositionIndex=0,this._prevPositionIndex=0,this._containerShiftIndex=-1,this.itemHolders=[]}resize(t){let{pswp:e}=this,n=Math.round(e.viewportSize.x+e.viewportSize.x*e.options.spacing),s=n!==this.slideWidth;s&&(this.slideWidth=n,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach((o,r)=>{s&&ls(o.el,(r+this._containerShiftIndex)*this.slideWidth),t&&o.slide&&o.slide.resize()})}resetPosition(){this._currPositionIndex=0,this._prevPositionIndex=0,this.slideWidth=0,this._containerShiftIndex=-1}appendHolders(){this.itemHolders=[];for(let t=0;t<3;t++){let e=Ve("pswp__item","div",this.pswp.container);e.setAttribute("role","group"),e.setAttribute("aria-roledescription","slide"),e.setAttribute("aria-hidden","true"),e.style.display=t===1?"block":"none",this.itemHolders.push({el:e})}}canBeSwiped(){return this.pswp.getNumItems()>1}moveIndexBy(t,e,n){let{pswp:s}=this,o=s.potentialIndex+t,r=s.getNumItems();if(s.canLoop()){o=s.getLoopedIndex(o);let l=(t+r)%r;l<=r/2?t=l:t=l-r}else o<0?o=0:o>=r&&(o=r-1),t=o-s.potentialIndex;s.potentialIndex=o,this._currPositionIndex-=t,s.animations.stopMainScroll();let a=this.getCurrSlideX();if(!e)this.moveTo(a),this.updateCurrItem();else{s.animations.startSpring({isMainScroll:!0,start:this.x,end:a,velocity:n||0,naturalFrequency:30,dampingRatio:1,onUpdate:c=>{this.moveTo(c)},onComplete:()=>{this.updateCurrItem(),s.appendHeavy()}});let l=s.potentialIndex-s.currIndex;if(s.canLoop()){let c=(l+r)%r;c<=r/2?l=c:l=c-r}Math.abs(l)>1&&this.updateCurrItem()}return!!t}getCurrSlideX(){return this.slideWidth*this._currPositionIndex}isShifted(){return this.x!==this.getCurrSlideX()}updateCurrItem(){var t;let{pswp:e}=this,n=this._prevPositionIndex-this._currPositionIndex;if(!n)return;this._prevPositionIndex=this._currPositionIndex,e.currIndex=e.potentialIndex;let s=Math.abs(n),o;s>=3&&(this._containerShiftIndex+=n+(n>0?-3:3),s=3);for(let r=0;r<s;r++)n>0?(o=this.itemHolders.shift(),o&&(this.itemHolders[2]=o,this._containerShiftIndex++,ls(o.el,(this._containerShiftIndex+2)*this.slideWidth),e.setContent(o,e.currIndex-s+r+2))):(o=this.itemHolders.pop(),o&&(this.itemHolders.unshift(o),this._containerShiftIndex--,ls(o.el,this._containerShiftIndex*this.slideWidth),e.setContent(o,e.currIndex+s-r-2)));Math.abs(this._containerShiftIndex)>50&&!this.isShifted()&&(this.resetPosition(),this.resize()),e.animations.stopAllPan(),this.itemHolders.forEach((r,a)=>{r.slide&&r.slide.setIsActive(a===1)}),e.currSlide=(t=this.itemHolders[1])===null||t===void 0?void 0:t.slide,e.contentLoader.updateLazy(n),e.currSlide&&e.currSlide.applyCurrentZoomPan(),e.dispatch("change")}moveTo(t,e){if(!this.pswp.canLoop()&&e){let n=(this.slideWidth*this._currPositionIndex-t)/this.slideWidth;n+=this.pswp.currIndex;let s=Math.round(t-this.x);(n<0&&s>0||n>=this.pswp.getNumItems()-1&&s<0)&&(t=this.x+s*FN)}this.x=t,this.pswp.container&&ls(this.pswp.container,t),this.pswp.dispatch("moveMainScroll",{x:t,dragging:e!=null?e:!1})}},BN={Escape:27,z:90,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Tab:9},as=(i,t)=>t?i:BN[i],hu=class{constructor(t){this.pswp=t,this._wasFocused=!1,t.on("bindEvents",()=>{t.options.trapFocus&&(t.options.initialPointerPos||this._focusRoot(),t.events.add(document,"focusin",this._onFocusIn.bind(this))),t.events.add(document,"keydown",this._onKeyDown.bind(this))});let e=document.activeElement;t.on("destroy",()=>{t.options.returnFocus&&e&&this._wasFocused&&e.focus()})}_focusRoot(){!this._wasFocused&&this.pswp.element&&(this.pswp.element.focus(),this._wasFocused=!0)}_onKeyDown(t){let{pswp:e}=this;if(e.dispatch("keydown",{originalEvent:t}).defaultPrevented||MN(t))return;let n,s,o=!1,r="key"in t;switch(r?t.key:t.keyCode){case as("Escape",r):e.options.escKey&&(n="close");break;case as("z",r):n="toggleZoom";break;case as("ArrowLeft",r):s="x";break;case as("ArrowUp",r):s="y";break;case as("ArrowRight",r):s="x",o=!0;break;case as("ArrowDown",r):o=!0,s="y";break;case as("Tab",r):this._focusRoot();break}if(s){t.preventDefault();let{currSlide:a}=e;e.options.arrowKeys&&s==="x"&&e.getNumItems()>1?n=o?"next":"prev":a&&a.currZoomLevel>a.zoomLevels.fit&&(a.pan[s]+=o?-80:80,a.panTo(a.pan.x,a.pan.y))}n&&(t.preventDefault(),e[n]())}_onFocusIn(t){let{template:e}=this.pswp;e&&document!==t.target&&e!==t.target&&!e.contains(t.target)&&e.focus()}},UN="cubic-bezier(.4,0,.22,1)",uu=class{constructor(t){var e;this.props=t;let{target:n,onComplete:s,transform:o,onFinish:r=()=>{},duration:a=333,easing:l=UN}=t;this.onFinish=r;let c=o?"transform":"opacity",d=(e=t[c])!==null&&e!==void 0?e:"";this._target=n,this._onComplete=s,this._finished=!1,this._onTransitionEnd=this._onTransitionEnd.bind(this),this._helperTimeout=setTimeout(()=>{OT(n,c,a,l),this._helperTimeout=setTimeout(()=>{n.addEventListener("transitionend",this._onTransitionEnd,!1),n.addEventListener("transitioncancel",this._onTransitionEnd,!1),this._helperTimeout=setTimeout(()=>{this._finalizeAnimation()},a+500),n.style[c]=d},30)},0)}_onTransitionEnd(t){t.target===this._target&&this._finalizeAnimation()}_finalizeAnimation(){this._finished||(this._finished=!0,this.onFinish(),this._onComplete&&this._onComplete())}destroy(){this._helperTimeout&&clearTimeout(this._helperTimeout),AN(this._target),this._target.removeEventListener("transitionend",this._onTransitionEnd,!1),this._target.removeEventListener("transitioncancel",this._onTransitionEnd,!1),this._finished||this._finalizeAnimation()}},jN=12,zN=.75,pu=class{constructor(t,e,n){this.velocity=t*1e3,this._dampingRatio=e||zN,this._naturalFrequency=n||jN,this._dampedFrequency=this._naturalFrequency,this._dampingRatio<1&&(this._dampedFrequency*=Math.sqrt(1-this._dampingRatio*this._dampingRatio))}easeFrame(t,e){let n=0,s;e/=1e3;let o=wo(Math.E,-this._dampingRatio*this._naturalFrequency*e);if(this._dampingRatio===1)s=this.velocity+this._naturalFrequency*t,n=(t+s*e)*o,this.velocity=n*-this._naturalFrequency+s*o;else if(this._dampingRatio<1){s=1/this._dampedFrequency*(this._dampingRatio*this._naturalFrequency*t+this.velocity);let r=Math.cos(this._dampedFrequency*e),a=Math.sin(this._dampedFrequency*e);n=o*(t*r+s*a),this.velocity=n*-this._naturalFrequency*this._dampingRatio+o*(-this._dampedFrequency*t*a+this._dampedFrequency*s*r)}return n}},fu=class{constructor(t){this.props=t,this._raf=0;let{start:e,end:n,velocity:s,onUpdate:o,onComplete:r,onFinish:a=()=>{},dampingRatio:l,naturalFrequency:c}=t;this.onFinish=a;let d=new pu(s,l,c),h=Date.now(),p=e-n,m=()=>{this._raf&&(p=d.easeFrame(p,Date.now()-h),Math.abs(p)<1&&Math.abs(d.velocity)<50?(o(n),r&&r(),this.onFinish()):(h=Date.now(),o(p+n),this._raf=requestAnimationFrame(m)))};this._raf=requestAnimationFrame(m)}destroy(){this._raf>=0&&cancelAnimationFrame(this._raf),this._raf=0}},gu=class{constructor(){this.activeAnimations=[]}startSpring(t){this._start(t,!0)}startTransition(t){this._start(t)}_start(t,e){let n=e?new fu(t):new uu(t);return this.activeAnimations.push(n),n.onFinish=()=>this.stop(n),n}stop(t){t.destroy();let e=this.activeAnimations.indexOf(t);e>-1&&this.activeAnimations.splice(e,1)}stopAll(){this.activeAnimations.forEach(t=>{t.destroy()}),this.activeAnimations=[]}stopAllPan(){this.activeAnimations=this.activeAnimations.filter(t=>t.props.isPan?(t.destroy(),!1):!0)}stopMainScroll(){this.activeAnimations=this.activeAnimations.filter(t=>t.props.isMainScroll?(t.destroy(),!1):!0)}isPanRunning(){return this.activeAnimations.some(t=>t.props.isPan)}},vu=class{constructor(t){this.pswp=t,t.events.add(t.element,"wheel",this._onWheel.bind(this))}_onWheel(t){t.preventDefault();let{currSlide:e}=this.pswp,{deltaX:n,deltaY:s}=t;if(e&&!this.pswp.dispatch("wheel",{originalEvent:t}).defaultPrevented)if(t.ctrlKey||this.pswp.options.wheelToZoom){if(e.isZoomable()){let o=-s;t.deltaMode===1?o*=.05:o*=t.deltaMode?1:.002,o=wo(2,o);let r=e.currZoomLevel*o;e.zoomTo(r,{x:t.clientX,y:t.clientY})}}else e.isPannable()&&(t.deltaMode===1&&(n*=18,s*=18),e.panTo(e.pan.x-n,e.pan.y-s))}};Eu=class{constructor(t,e){var n;let s=e.name||e.className,o=e.html;if(t.options[s]===!1)return;typeof t.options[s+"SVG"]=="string"&&(o=t.options[s+"SVG"]),t.dispatch("uiElementCreate",{data:e});let r="";e.isButton?(r+="pswp__button ",r+=e.className||`pswp__button--${e.name}`):r+=e.className||`pswp__${e.name}`;let a=e.isButton?e.tagName||"button":e.tagName||"div";a=a.toLowerCase();let l=Ve(r,a);if(e.isButton){a==="button"&&(l.type="button");let{title:h}=e,{ariaLabel:p}=e;typeof t.options[s+"Title"]=="string"&&(h=t.options[s+"Title"]),h&&(l.title=h);let m=p||h;m&&l.setAttribute("aria-label",m)}l.innerHTML=WN(o),e.onInit&&e.onInit(l,t),e.onClick&&(l.onclick=h=>{typeof e.onClick=="string"?t[e.onClick]():typeof e.onClick=="function"&&e.onClick(h,l,t)});let c=e.appendTo||"bar",d=t.element;c==="bar"?(t.topBar||(t.topBar=Ve("pswp__top-bar pswp__hide-on-close","div",t.scrollWrap)),d=t.topBar):(l.classList.add("pswp__hide-on-close"),c==="wrapper"&&(d=t.scrollWrap)),(n=d)===null||n===void 0||n.appendChild(t.applyFilters("uiElement",l,e))}};qN={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:NT},VN={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit:(i,t)=>{NT(i,t,!0)}},GN={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},JN={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},YN={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit:(i,t)=>{let e,n=null,s=(a,l)=>{i.classList.toggle("pswp__preloader--"+a,l)},o=a=>{e!==a&&(e=a,s("active",a))},r=()=>{var a;if(!((a=t.currSlide)!==null&&a!==void 0&&a.content.isLoading())){o(!1),n&&(clearTimeout(n),n=null);return}n||(n=setTimeout(()=>{var l;o(!!(!((l=t.currSlide)===null||l===void 0)&&l.content.isLoading())),n=null},t.options.preloaderDelay))};t.on("change",r),t.on("loadComplete",a=>{t.currSlide===a.slide&&r()}),t.ui&&(t.ui.updatePreloaderVisibility=r)}},KN={name:"counter",order:5,onInit:(i,t)=>{t.on("change",()=>{i.innerText=t.currIndex+1+t.options.indexIndicatorSep+t.getNumItems()})}};bu=class{constructor(t){this.pswp=t,this.isRegistered=!1,this.uiElementsData=[],this.items=[],this.updatePreloaderVisibility=()=>{},this._lastUpdatedZoomLevel=void 0}init(){let{pswp:t}=this;this.isRegistered=!1,this.uiElementsData=[GN,qN,VN,JN,YN,KN],t.dispatch("uiRegister"),this.uiElementsData.sort((e,n)=>(e.order||0)-(n.order||0)),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(e=>{this.registerElement(e)}),t.on("change",()=>{var e;(e=t.element)===null||e===void 0||e.classList.toggle("pswp--one-slide",t.getNumItems()===1)}),t.on("zoomPanUpdate",()=>this._onZoomPanUpdate())}registerElement(t){this.isRegistered?this.items.push(new Eu(this.pswp,t)):this.uiElementsData.push(t)}_onZoomPanUpdate(){let{template:t,currSlide:e,options:n}=this.pswp;if(this.pswp.opener.isClosing||!t||!e)return;let{currZoomLevel:s}=e;if(this.pswp.opener.isOpen||(s=e.zoomLevels.initial),s===this._lastUpdatedZoomLevel)return;this._lastUpdatedZoomLevel=s;let o=e.zoomLevels.initial-e.zoomLevels.secondary;if(Math.abs(o)<.01||!e.isZoomable()){RT(t,!1),t.classList.remove("pswp--zoom-allowed");return}t.classList.add("pswp--zoom-allowed");let r=s===e.zoomLevels.initial?e.zoomLevels.secondary:e.zoomLevels.initial;RT(t,r<=s),(n.imageClickAction==="zoom"||n.imageClickAction==="zoom-or-close")&&t.classList.add("pswp--click-to-zoom")}};yu=class{constructor(t,e){this.type=t,this.defaultPrevented=!1,e&&Object.assign(this,e)}preventDefault(){this.defaultPrevented=!0}},_u=class{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(t,e,n=100){var s,o,r;this._filters[t]||(this._filters[t]=[]),(s=this._filters[t])===null||s===void 0||s.push({fn:e,priority:n}),(o=this._filters[t])===null||o===void 0||o.sort((a,l)=>a.priority-l.priority),(r=this.pswp)===null||r===void 0||r.addFilter(t,e,n)}removeFilter(t,e){this._filters[t]&&(this._filters[t]=this._filters[t].filter(n=>n.fn!==e)),this.pswp&&this.pswp.removeFilter(t,e)}applyFilters(t,...e){var n;return(n=this._filters[t])===null||n===void 0||n.forEach(s=>{e[0]=s.fn.apply(this,e)}),e[0]}on(t,e){var n,s;this._listeners[t]||(this._listeners[t]=[]),(n=this._listeners[t])===null||n===void 0||n.push(e),(s=this.pswp)===null||s===void 0||s.on(t,e)}off(t,e){var n;this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(s=>e!==s)),(n=this.pswp)===null||n===void 0||n.off(t,e)}dispatch(t,e){var n;if(this.pswp)return this.pswp.dispatch(t,e);let s=new yu(t,e);return(n=this._listeners[t])===null||n===void 0||n.forEach(o=>{o.call(this,s)}),s}},Tu=class{constructor(t,e){if(this.element=Ve("pswp__img pswp__img--placeholder",t?"img":"div",e),t){let n=this.element;n.decoding="async",n.alt="",n.src=t,n.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(t,e){this.element&&(this.element.tagName==="IMG"?(nu(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=qr(0,0,t/250)):nu(this.element,t,e))}destroy(){var t;(t=this.element)!==null&&t!==void 0&&t.parentNode&&this.element.remove(),this.element=null}},Lu=class{constructor(t,e,n){this.instance=e,this.data=t,this.index=n,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=oi.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(t,e){if(this.slide&&this.usePlaceholder())if(this.placeholder){let n=this.placeholder.element;n&&!n.parentElement&&this.slide.container.prepend(n)}else{let n=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new Tu(n,this.slide.container)}this.element&&!e||this.instance.dispatch("contentLoad",{content:this,isLazy:t}).defaultPrevented||(this.isImageContent()?(this.element=Ve("pswp__img","img"),this.displayedImageWidth&&this.loadImage(t)):(this.element=Ve("pswp__content","div"),this.element.innerHTML=this.data.html||""),e&&this.slide&&this.slide.updateContentSize(!0))}loadImage(t){var e,n;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:t}).defaultPrevented)return;let s=this.element;this.updateSrcsetSizes(),this.data.srcset&&(s.srcset=this.data.srcset),s.src=(e=this.data.src)!==null&&e!==void 0?e:"",s.alt=(n=this.data.alt)!==null&&n!==void 0?n:"",this.state=oi.LOADING,s.complete?this.onLoaded():(s.onload=()=>{this.onLoaded()},s.onerror=()=>{this.onError()})}setSlide(t){this.slide=t,this.hasSlide=!0,this.instance=t.pswp}onLoaded(){this.state=oi.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===oi.LOADED||this.state===oi.ERROR)&&this.removePlaceholder())}onError(){this.state=oi.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===oi.LOADING,this)}isError(){return this.state===oi.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(t,e){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(t,e),!this.instance.dispatch("contentResize",{content:this,width:t,height:e}).defaultPrevented&&(nu(this.element,t,e),this.isImageContent()&&!this.isError()))){let n=!this.displayedImageWidth&&t;this.displayedImageWidth=t,this.displayedImageHeight=e,n?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:t,height:e,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==oi.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;let t=this.element,e=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!t.dataset.largestUsedSize||e>parseInt(t.dataset.largestUsedSize,10))&&(t.sizes=e+"px",t.dataset.largestUsedSize=String(e))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var t,e;let n=Ve("pswp__error-msg","div");n.innerText=(t=(e=this.instance.options)===null||e===void 0?void 0:e.errorMsg)!==null&&t!==void 0?t:"",n=this.instance.applyFilters("contentErrorElement",n,this),this.element=Ve("pswp__content pswp__error-msg-container","div"),this.element.appendChild(n),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===oi.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;let t="decode"in this.element;this.isImageContent()?t&&this.slide&&(!this.slide.isActive||wT())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!wT()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===oi.LOADED||this.state===oi.ERROR)&&this.removePlaceholder()))}},tP=5;wu=class{constructor(t){this.pswp=t,this.limit=Math.max(t.options.preload[0]+t.options.preload[1]+1,tP),this._cachedItems=[]}updateLazy(t){let{pswp:e}=this;if(e.dispatch("lazyLoad").defaultPrevented)return;let{preload:n}=e.options,s=t===void 0?!0:t>=0,o;for(o=0;o<=n[1];o++)this.loadSlideByIndex(e.currIndex+(s?o:-o));for(o=1;o<=n[0];o++)this.loadSlideByIndex(e.currIndex+(s?-o:o))}loadSlideByIndex(t){let e=this.pswp.getLoopedIndex(t),n=this.getContentByIndex(e);n||(n=eP(e,this.pswp),n&&this.addToCache(n))}getContentBySlide(t){let e=this.getContentByIndex(t.index);return e||(e=this.pswp.createContentFromData(t.data,t.index),this.addToCache(e)),e.setSlide(t),e}addToCache(t){if(this.removeByIndex(t.index),this._cachedItems.push(t),this._cachedItems.length>this.limit){let e=this._cachedItems.findIndex(n=>!n.isAttached&&!n.hasSlide);e!==-1&&this._cachedItems.splice(e,1)[0].destroy()}}removeByIndex(t){let e=this._cachedItems.findIndex(n=>n.index===t);e!==-1&&this._cachedItems.splice(e,1)}getContentByIndex(t){return this._cachedItems.find(e=>e.index===t)}destroy(){this._cachedItems.forEach(t=>t.destroy()),this._cachedItems=[]}},xu=class extends _u{getNumItems(){var t;let e=0,n=(t=this.options)===null||t===void 0?void 0:t.dataSource;n&&"length"in n?e=n.length:n&&"gallery"in n&&(n.items||(n.items=this._getGalleryDOMElements(n.gallery)),n.items&&(e=n.items.length));let s=this.dispatch("numItems",{dataSource:n,numItems:e});return this.applyFilters("numItems",s.numItems,n)}createContentFromData(t,e){return new Lu(t,this,e)}getItemData(t){var e;let n=(e=this.options)===null||e===void 0?void 0:e.dataSource,s={};Array.isArray(n)?s=n[t]:n&&"gallery"in n&&(n.items||(n.items=this._getGalleryDOMElements(n.gallery)),s=n.items[t]);let o=s;o instanceof Element&&(o=this._domElementToItemData(o));let r=this.dispatch("itemData",{itemData:o||{},index:t});return this.applyFilters("itemData",r.itemData,t)}_getGalleryDOMElements(t){var e,n;return(e=this.options)!==null&&e!==void 0&&e.children||(n=this.options)!==null&&n!==void 0&&n.childSelector?RN(this.options.children,this.options.childSelector,t)||[]:[t]}_domElementToItemData(t){let e={element:t},n=t.tagName==="A"?t:t.querySelector("a");if(n){e.src=n.dataset.pswpSrc||n.href,n.dataset.pswpSrcset&&(e.srcset=n.dataset.pswpSrcset),e.width=n.dataset.pswpWidth?parseInt(n.dataset.pswpWidth,10):0,e.height=n.dataset.pswpHeight?parseInt(n.dataset.pswpHeight,10):0,e.w=e.width,e.h=e.height,n.dataset.pswpType&&(e.type=n.dataset.pswpType);let o=t.querySelector("img");if(o){var s;e.msrc=o.currentSrc||o.src,e.alt=(s=o.getAttribute("alt"))!==null&&s!==void 0?s:""}(n.dataset.pswpCropped||n.dataset.cropped)&&(e.thumbCropped=!0)}return this.applyFilters("domItemData",e,t,n)}lazyLoadData(t,e){return PT(t,this,e)}},jr=.003,Cu=class{constructor(t){this.pswp=t,this.isClosed=!0,this.isOpen=!1,this.isClosing=!1,this.isOpening=!1,this._duration=void 0,this._useAnimation=!1,this._croppedZoom=!1,this._animateRootOpacity=!1,this._animateBgOpacity=!1,this._placeholder=void 0,this._opacityElement=void 0,this._cropContainer1=void 0,this._cropContainer2=void 0,this._thumbBounds=void 0,this._prepareOpen=this._prepareOpen.bind(this),t.on("firstZoomPan",this._prepareOpen)}open(){this._prepareOpen(),this._start()}close(){if(this.isClosed||this.isClosing||this.isOpening)return;let t=this.pswp.currSlide;this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this._duration=this.pswp.options.hideAnimationDuration,t&&t.currZoomLevel*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps(),setTimeout(()=>{this._start()},this._croppedZoom?30:0)}_prepareOpen(){if(this.pswp.off("firstZoomPan",this._prepareOpen),!this.isOpening){let t=this.pswp.currSlide;this.isOpening=!0,this.isClosing=!1,this._duration=this.pswp.options.showAnimationDuration,t&&t.zoomLevels.initial*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps()}}_applyStartProps(){let{pswp:t}=this,e=this.pswp.currSlide,{options:n}=t;if(n.showHideAnimationType==="fade"?(n.showHideOpacity=!0,this._thumbBounds=void 0):n.showHideAnimationType==="none"?(n.showHideOpacity=!1,this._duration=0,this._thumbBounds=void 0):this.isOpening&&t._initialThumbBounds?this._thumbBounds=t._initialThumbBounds:this._thumbBounds=this.pswp.getThumbBounds(),this._placeholder=e==null?void 0:e.getPlaceholderElement(),t.animations.stopAll(),this._useAnimation=!!(this._duration&&this._duration>50),this._animateZoom=!!this._thumbBounds&&(e==null?void 0:e.content.usePlaceholder())&&(!this.isClosing||!t.mainScroll.isShifted()),!this._animateZoom)this._animateRootOpacity=!0,this.isOpening&&e&&(e.zoomAndPanToInitial(),e.applyCurrentZoomPan());else{var s;this._animateRootOpacity=(s=n.showHideOpacity)!==null&&s!==void 0?s:!1}if(this._animateBgOpacity=!this._animateRootOpacity&&this.pswp.options.bgOpacity>jr,this._opacityElement=this._animateRootOpacity?t.element:t.bg,!this._useAnimation){this._duration=0,this._animateZoom=!1,this._animateBgOpacity=!1,this._animateRootOpacity=!0,this.isOpening&&(t.element&&(t.element.style.opacity=String(jr)),t.applyBgOpacity(1));return}if(this._animateZoom&&this._thumbBounds&&this._thumbBounds.innerRect){var o;this._croppedZoom=!0,this._cropContainer1=this.pswp.container,this._cropContainer2=(o=this.pswp.currSlide)===null||o===void 0?void 0:o.holderElement,t.container&&(t.container.style.overflow="hidden",t.container.style.width=t.viewportSize.x+"px")}else this._croppedZoom=!1;this.isOpening?(this._animateRootOpacity?(t.element&&(t.element.style.opacity=String(jr)),t.applyBgOpacity(1)):(this._animateBgOpacity&&t.bg&&(t.bg.style.opacity=String(jr)),t.element&&(t.element.style.opacity="1")),this._animateZoom&&(this._setClosedStateZoomPan(),this._placeholder&&(this._placeholder.style.willChange="transform",this._placeholder.style.opacity=String(jr)))):this.isClosing&&(t.mainScroll.itemHolders[0]&&(t.mainScroll.itemHolders[0].el.style.display="none"),t.mainScroll.itemHolders[2]&&(t.mainScroll.itemHolders[2].el.style.display="none"),this._croppedZoom&&t.mainScroll.x!==0&&(t.mainScroll.resetPosition(),t.mainScroll.resize()))}_start(){this.isOpening&&this._useAnimation&&this._placeholder&&this._placeholder.tagName==="IMG"?new Promise(t=>{let e=!1,n=!0;SN(this._placeholder).finally(()=>{e=!0,n||t(!0)}),setTimeout(()=>{n=!1,e&&t(!0)},50),setTimeout(t,250)}).finally(()=>this._initiate()):this._initiate()}_initiate(){var t,e;(t=this.pswp.element)===null||t===void 0||t.style.setProperty("--pswp-transition-duration",this._duration+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),(e=this.pswp.element)===null||e===void 0||e.classList.toggle("pswp--ui-visible",this.isOpening),this.isOpening?(this._placeholder&&(this._placeholder.style.opacity="1"),this._animateToOpenState()):this.isClosing&&this._animateToClosedState(),this._useAnimation||this._onAnimationComplete()}_onAnimationComplete(){let{pswp:t}=this;if(this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,t.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),t.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed)t.destroy();else if(this.isOpen){var e;this._animateZoom&&t.container&&(t.container.style.overflow="visible",t.container.style.width="100%"),(e=t.currSlide)===null||e===void 0||e.applyCurrentZoomPan()}}_animateToOpenState(){let{pswp:t}=this;this._animateZoom&&(this._croppedZoom&&this._cropContainer1&&this._cropContainer2&&(this._animateTo(this._cropContainer1,"transform","translate3d(0,0,0)"),this._animateTo(this._cropContainer2,"transform","none")),t.currSlide&&(t.currSlide.zoomAndPanToInitial(),this._animateTo(t.currSlide.container,"transform",t.currSlide.getCurrentTransform()))),this._animateBgOpacity&&t.bg&&this._animateTo(t.bg,"opacity",String(t.options.bgOpacity)),this._animateRootOpacity&&t.element&&this._animateTo(t.element,"opacity","1")}_animateToClosedState(){let{pswp:t}=this;this._animateZoom&&this._setClosedStateZoomPan(!0),this._animateBgOpacity&&t.bgOpacity>.01&&t.bg&&this._animateTo(t.bg,"opacity","0"),this._animateRootOpacity&&t.element&&this._animateTo(t.element,"opacity","0")}_setClosedStateZoomPan(t){if(!this._thumbBounds)return;let{pswp:e}=this,{innerRect:n}=this._thumbBounds,{currSlide:s,viewportSize:o}=e;if(this._croppedZoom&&n&&this._cropContainer1&&this._cropContainer2){let r=-o.x+(this._thumbBounds.x-n.x)+n.w,a=-o.y+(this._thumbBounds.y-n.y)+n.h,l=o.x-n.w,c=o.y-n.h;t?(this._animateTo(this._cropContainer1,"transform",qr(r,a)),this._animateTo(this._cropContainer2,"transform",qr(l,c))):(ls(this._cropContainer1,r,a),ls(this._cropContainer2,l,c))}s&&(ee(s.pan,n||this._thumbBounds),s.currZoomLevel=this._thumbBounds.w/s.width,t?this._animateTo(s.container,"transform",s.getCurrentTransform()):s.applyCurrentZoomPan())}_animateTo(t,e,n){if(!this._duration){t.style[e]=n;return}let{animations:s}=this.pswp,o={duration:this._duration,easing:this.pswp.options.easing,onComplete:()=>{s.activeAnimations.length||this._onAnimationComplete()},target:t};o[e]=n,s.startTransition(o)}},iP={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,trapFocus:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"},Sc=class extends xu{constructor(t){super(),this.options=this._prepareOptions(t||{}),this.offset={x:0,y:0},this._prevViewportSize={x:0,y:0},this.viewportSize={x:0,y:0},this.bgOpacity=1,this.currIndex=0,this.potentialIndex=0,this.isOpen=!1,this.isDestroying=!1,this.hasMouse=!1,this._initialItemData={},this._initialThumbBounds=void 0,this.topBar=void 0,this.element=void 0,this.template=void 0,this.container=void 0,this.scrollWrap=void 0,this.currSlide=void 0,this.events=new su,this.animations=new gu,this.mainScroll=new mu(this),this.gestures=new du(this),this.opener=new Cu(this),this.keyboard=new hu(this),this.contentLoader=new wu(this)}init(){if(this.isOpen||this.isDestroying)return!1;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this._createMainStructure();let t="pswp--open";return this.gestures.supportsTouch&&(t+=" pswp--touch"),this.options.mainClass&&(t+=" "+this.options.mainClass),this.element&&(this.element.className+=" "+t),this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new vu(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this._initialItemData=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this._initialItemData,slide:void 0}),this._initialThumbBounds=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",()=>{let{itemHolders:e}=this.mainScroll;e[0]&&(e[0].el.style.display="block",this.setContent(e[0],this.currIndex-1)),e[2]&&(e[2].el.style.display="block",this.setContent(e[2],this.currIndex+1)),this.appendHeavy(),this.contentLoader.updateLazy(),this.events.add(window,"resize",this._handlePageResize.bind(this)),this.events.add(window,"scroll",this._updatePageScrollOffset.bind(this)),this.dispatch("bindEvents")}),this.mainScroll.itemHolders[1]&&this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}getLoopedIndex(t){let e=this.getNumItems();return this.options.loop&&(t>e-1&&(t-=e),t<0&&(t+=e)),Vr(t,0,e-1)}appendHeavy(){this.mainScroll.itemHolders.forEach(t=>{var e;(e=t.slide)===null||e===void 0||e.appendHeavy()})}goTo(t){this.mainScroll.moveIndexBy(this.getLoopedIndex(t)-this.potentialIndex)}next(){this.goTo(this.potentialIndex+1)}prev(){this.goTo(this.potentialIndex-1)}zoomTo(...t){var e;(e=this.currSlide)===null||e===void 0||e.zoomTo(...t)}toggleZoom(){var t;(t=this.currSlide)===null||t===void 0||t.toggleZoom()}close(){!this.opener.isOpen||this.isDestroying||(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}destroy(){var t;if(!this.isDestroying){this.options.showHideAnimationType="none",this.close();return}this.dispatch("destroy"),this._listeners={},this.scrollWrap&&(this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null),(t=this.element)===null||t===void 0||t.remove(),this.mainScroll.itemHolders.forEach(e=>{var n;(n=e.slide)===null||n===void 0||n.destroy()}),this.contentLoader.destroy(),this.events.removeAll()}refreshSlideContent(t){this.contentLoader.removeByIndex(t),this.mainScroll.itemHolders.forEach((e,n)=>{var s,o;let r=((s=(o=this.currSlide)===null||o===void 0?void 0:o.index)!==null&&s!==void 0?s:0)-1+n;if(this.canLoop()&&(r=this.getLoopedIndex(r)),r===t&&(this.setContent(e,t,!0),n===1)){var a;this.currSlide=e.slide,(a=e.slide)===null||a===void 0||a.setIsActive(!0)}}),this.dispatch("change")}setContent(t,e,n){if(this.canLoop()&&(e=this.getLoopedIndex(e)),t.slide){if(t.slide.index===e&&!n)return;t.slide.destroy(),t.slide=void 0}if(!this.canLoop()&&(e<0||e>=this.getNumItems()))return;let s=this.getItemData(e);t.slide=new ru(s,e,this),e===this.currIndex&&(this.currSlide=t.slide),t.slide.append(t.el)}getViewportCenterPoint(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}updateSize(t){if(this.isDestroying)return;let e=kT(this.options,this);!t&&Wr(e,this._prevViewportSize)||(ee(this._prevViewportSize,e),this.dispatch("beforeResize"),ee(this.viewportSize,this._prevViewportSize),this._updatePageScrollOffset(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}applyBgOpacity(t){this.bgOpacity=Math.max(t,0),this.bg&&(this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity))}mouseDetected(){if(!this.hasMouse){var t;this.hasMouse=!0,(t=this.element)===null||t===void 0||t.classList.add("pswp--has_mouse")}}_handlePageResize(){this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(()=>{this.updateSize()},500)}_updatePageScrollOffset(){this.setScrollOffset(0,window.pageYOffset)}setScrollOffset(t,e){this.offset.x=t,this.offset.y=e,this.dispatch("updateScrollOffset")}_createMainStructure(){this.element=Ve("pswp","div"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=Ve("pswp__bg","div",this.element),this.scrollWrap=Ve("pswp__scroll-wrap","section",this.element),this.container=Ve("pswp__container","div",this.scrollWrap),this.scrollWrap.setAttribute("aria-roledescription","carousel"),this.container.setAttribute("aria-live","off"),this.container.setAttribute("id","pswp__items"),this.mainScroll.appendHolders(),this.ui=new bu(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}getThumbBounds(){return QN(this.currIndex,this.currSlide?this.currSlide.data:this._initialItemData,this)}canLoop(){return this.options.loop&&this.getNumItems()>2}_prepareOptions(t){return window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(t.showHideAnimationType="none",t.zoomAnimationDuration=0),O(O({},iP),t)}}});var FT,BT,UT=b(()=>{"use strict";FT=" из ",BT="Не удалось загрузить изображение"});var zT={};at(zT,{openPhotoswipe:()=>oP});function sP(i,t,e=0,n=0){let s=i.getBoundingClientRect(),o=s.width/e,r=s.height/n,a=o<r?t?r:o:t?o:r,l=(s.width-e*a)/2,c=(s.height-n*a)/2;return O({x:s.left+l,y:s.top+c,w:e*a},t&&{innerRect:{w:s.width,h:s.height,x:l,y:c}})}var jT,oP,WT=b(()=>{"use strict";$T();UT();pe();oP=(i,t,e,n)=>{let s=i.map((a,l)=>({src:a.images[0].url,width:a.images[0].width,height:a.images[0].height,msrc:a.images[0].url||a.inline,anchor:n&&n[l]})),o='<div class="pswp__arrow"></div>',r=new Sc(O({dataSource:s,index:t,closeSVG:'<div class="m-icon i-close-l"></div>',arrowPrevSVG:o,arrowNextSVG:o,zoom:!1,spacing:.03,bgOpacity:1,indexIndicatorSep:FT,errorMsg:BT},d2Env.isDesktop&&{maxZoomLevel:1}));r.addFilter("thumbEl",(a,l)=>l.anchor||a),r.addFilter("thumbBounds",(a,l)=>{let c=l.anchor&&l.anchor.getAttribute("fit");return c?sP(l.anchor,c==="cover",l.width,l.height):a}),r.addFilter("placeholderSrc",(a,l)=>l.slide?l.slide.data.msrc:a),r.on("destroy",()=>{document.scrollingElement.scrollTo({top:jT,behavior:"instant"})}),!d2Env.isApp&&e&&r.on("contentActivate",()=>{bt(e)}),jT=document.scrollingElement.scrollTop,r.init()}});var cs,Iu,XT,Ou=b(()=>{"use strict";cs=(i,t)=>{let e=`${i}=`,n=(document.cookie||"").split(";");for(let s of n){let o=s.trim();if(o.lastIndexOf(e,0)===0)return o.substring(e.length);if(o===i)return""}return t},Iu=(i,t,e={})=>{let{maxAge:n=-1,path:s,domain:o,secure:r=!1,sameSite:a}=e,l;n<0?l="":n===0?l=`;expires=${new Date(1970,1,1).toUTCString()}`:l=`;expires=${new Date(Date.now()+n*1e3).toUTCString()}`;let c=s?`;path=${s}`:"",d=o?`;domain=${o}`:"",h=r?";secure":"",p=a!=null?`;samesite=${a}`:"";document.cookie=i+"="+t+d+c+l+h+p},XT=(i,t,e)=>{Iu(i,"",{maxAge:0,path:t,domain:e})}});var ui,QT,vP,tL,ds=b(()=>{"use strict";F();Ou();Ou();ui=(i,t,e)=>{Iu(i,String(t),{maxAge:Number(e)===-1?-1:Number(e)*24*60*60,sameSite:"lax",path:"/",secure:window.location.protocol==="https:"})},QT=i=>{XT(i,"/")},vP=i=>{let t=i.node();t.dataset.cookieParams&&ui(...t.dataset.cookieParams.split(","))},tL=()=>{w.registerHandlers("cookie",{set:vP})}});var Hu,lL,bP,yP,_P,TP,cL,dL,LP,wP,Xs,Mc=b(()=>{"use strict";bl();X();Hu="toast",lL="is-active",bP=3e3,yP=400,_P=d2Env.isApp&&Is?66:10,TP=10,cL=new WeakMap,dL=()=>{let i=_P;ut(Hu,"item").forEach(e=>{let n=e.offsetHeight;e.style.top=`${i}px`,i+=n+TP})},LP=i=>ut(Hu,"item").some(e=>cL.get(e)===i),wP=i=>{i.classList.remove(lL),setTimeout(()=>{i.remove(),dL()},yP)},Xs=(i,t={})=>{let{duration:e=bP,type:n}=t;if(n&&LP(n))return;let s=document.createElement("div");n&&cL.set(s,n),tl(s,Hu,"item"),s.className=`c-toast ctx-dark ${lL}`,s.innerHTML=i,document.body.prepend(s),dL(),e>0&&setTimeout(()=>{wP(s)},e)}});var Tw,zu,ju,to,Dc=b(()=>{"use strict";Tw=kn(ur(),1);jn();zu=class extends EventTarget{constructor(e=window){super();this.win=e;this.win.addEventListener("resize",(0,Tw.throttle)(this.handleResize).bind(this),{passive:!0});let{clientWidth:n,clientHeight:s}=this.win.document.documentElement;this.size=new Bt(n,s)}getSize(){return this.size?this.size.clone():null}handleResize(){let e=this.win.document.documentElement,n=new Bt(e.clientWidth,e.clientHeight);Bt.equals(n,this.size)||(this.size=n,this.dispatchEvent(new CustomEvent("resize")))}},ju=new WeakMap,to=(i=window)=>(ju.has(i)||ju.set(i,new zu(i)),ju.get(i))});var no,Wc=b(()=>{"use strict";Li();no=(i=[],t="purchase")=>{let e={ecommerce:{currencyCode:"RUB",[t]:rt(O({},t==="purchase"&&{actionField:{id:re()}}),{products:i})}};window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)}});var K1,qc,Ku=b(()=>{"use strict";pt();K1="js-deposit-rebilling",qc=(i,t)=>{if((i&&i.data&&i.data.status)!=="PaymentInstrumentRequired")return;let n=document.querySelector(`.${K1}`);if(!n)return;let s=n.value||"";n.addEventListener("click",()=>{Ut(),t(s)},{once:!0})}});var Yi,pa=b(()=>{"use strict";Yi=(i,t)=>{let e=Math.ceil(i.length/t),n=[];for(let s=0;s<t;s+=1)n[s]=i.slice(s*e,(s+1)*e);return n}});var u0,mF,oo,np=b(()=>{"use strict";rl();u0="__sak",mF=i=>{try{return i.setItem(u0,"1"),i.removeItem(u0),!0}catch(t){return!1}},oo=Ls(()=>mF(window.sessionStorage))});function b0(i,t){this.scrollLeft=i,this.scrollTop=t}var Xc,op,Qc,ro,td,ao,rp,lo,Ea,co=b(()=>{Xc=i=>i===void 0||i==="auto"||i==="instant"||i==="smooth";op=(i,t,e="cannot convert to dictionary.")=>`Failed to execute '${i}' on '${t}': ${e}`,Qc=(i,t,e)=>op(i,t,`The provided value '${e}' is not a valid enum value of type ScrollBehavior.`),ro=(i,t,e)=>{var n;let s=`__SEAMLESS.BACKUP$${t}`;return!i[s]&&i[t]&&!(!((n=i[t])===null||n===void 0)&&n.__isPolyfill)&&(i[s]=i[t]),i[s]||e},td=i=>{let t=typeof i;return i!==null&&(t==="object"||t==="function")},ao=i=>"scrollBehavior"in window.document.documentElement.style&&(i==null?void 0:i.forcePolyfill)!==!0,rp=i=>{Object.defineProperty(i,"__isPolyfill",{value:!0})},lo=(i,t)=>{rp(t),[HTMLElement.prototype,SVGElement.prototype,Element.prototype].forEach(e=>{ro(e,i),e[i]=t})},Ea=i=>i.ownerDocument.scrollingElement||i.ownerDocument.documentElement});function y0(i){if(typeof Event=="function")return new Event("scrollend",{bubbles:i,cancelable:!1});let t=document.createEvent("Event");return t.initEvent("scrollend",i,!1),t}var _0=b(()=>{});function ed(){var i;let t;return!((i=window.performance)===null||i===void 0)&&i.now?t=()=>window.performance.now():t=()=>window.Date.now(),ed=t,t()}var pF,fF,ap,T0=b(()=>{pF=i=>.5*(1-Math.cos(Math.PI*i));fF=500,ap=i=>{let e=(ed()-i.timeStamp)/(i.duration||fF);if(e>1){i.method(i.targetX,i.targetY),i.callback();return}let n=(i.timingFunc||pF)(e),s=i.startX+(i.targetX-i.startX)*n,o=i.startY+(i.targetY-i.startY)*n;i.method(s,o),i.rafId=window.requestAnimationFrame(()=>{ap(i)})}});var id,gF,vF,EF,lp,ba,ya,_a,cp,bF,yF,_F,TF,LF,nd=b(()=>{co();_0();T0();id=i=>isFinite(i)?Number(i):0,gF=i=>{var t;return(t=i.isConnected)!==null&&t!==void 0?t:!i.ownerDocument||!(i.ownerDocument.compareDocumentPosition(i)&1)},vF=(i,t,e)=>{var n,s;if(!gF(i))return;let o=i.scrollLeft,r=i.scrollTop,a=id((n=t.left)!==null&&n!==void 0?n:o),l=id((s=t.top)!==null&&s!==void 0?s:r);if(a===o&&l===r)return;let c=ro(HTMLElement.prototype,"scroll",b0),d=ro(Object.getPrototypeOf(i),"scroll",c).bind(i);if(t.behavior!=="smooth"){d(a,l);return}let h=()=>{window.removeEventListener("wheel",u),window.removeEventListener("touchmove",u)},p=()=>{h();let g=i.nodeType===9;i.dispatchEvent(y0(g))},m=Object.assign(Object.assign({},e),{timeStamp:ed(),startX:o,startY:r,targetX:a,targetY:l,rafId:0,method:d,callback:p}),u=()=>{window.cancelAnimationFrame(m.rafId),h()};window.addEventListener("wheel",u,{passive:!0,once:!0}),window.addEventListener("touchmove",u,{passive:!0,once:!0}),ap(m)},EF=i=>i.window===i,lp=i=>(t,e,n)=>{let[s,o]=EF(t)?[Ea(t.document.documentElement),"Window"]:[t,"Element"],r=e!=null?e:{};if(!td(r))throw new TypeError(op(i,o));if(!Xc(r.behavior))throw new TypeError(Qc(i,o,r.behavior));i==="scrollBy"&&(r.left=id(r.left)+s.scrollLeft,r.top=id(r.top)+s.scrollTop),vF(s,r,n)},ba=lp("scroll"),ya=lp("scrollTo"),_a=lp("scrollBy"),cp=ba,bF=ya,yF=_a,_F=ba,TF=ya,LF=_a});var C0,A0,wF,xF,L0,w0,CF,AF,x0,dp,SF,MF,sd,RF,IF,S0,mp,hp=b(()=>{co();nd();C0=i=>{switch(i){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},A0=(i,t,e,n)=>{let s=0;switch(t||(s^=2),i){case 0:s=s>>1|(s&1)<<1,[e,n]=[n,e];break;case 1:case 3:s^=1;break;case 4:s^=2;break}return[s,e,n]},wF=i=>(A0(C0(i.writingMode),i.direction!=="rtl",void 0,void 0)[0]&1)===1,xF=(i,t,e)=>{let[n,s,o]=A0(t,e,i.block||"start",i.inline||"nearest");return[s,o].map((r,a)=>{switch(r){case"center":return 1;case"nearest":return 0;default:{let l=n>>a&1;return r==="start"==!l?2:3}}})},L0=(i,t,e,n,s,o,r)=>i!==0?i:s<t&&o>e||s>t&&o<e?null:s<=t&&r<=n||o>=e&&r>=n?2:o>e&&r<n||s<t&&r>n?3:null,w0=i=>i!=="visible"&&i!=="clip",CF=i=>{var t;try{return((t=i.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch(e){return null}},AF=(i,t)=>i.clientHeight<i.scrollHeight||i.clientWidth<i.scrollWidth?w0(t.overflowY)||w0(t.overflowX)||i===Ea(i):!1,x0=i=>{let t=i.parentNode,e=i.parentElement;if(e===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return CF(i)}return e},dp=(i,t,e)=>i<t?t:i>e?e:i,SF=i=>["scroll-margin","scroll-snap-margin"].filter(t=>t in i.documentElement.style)[0],MF=(i,t,e)=>{let{top:n,right:s,bottom:o,left:r}=t,a=SF(i.ownerDocument);if(!a)return[n,s,o,r];let l=c=>{let d=e.getPropertyValue(`${a}-${c}`);return parseInt(d,10)||0};return[n-l("top"),s+l("right"),o+l("bottom"),r-l("left")]},sd=(i,t,e)=>{switch(i){case 1:return(t+e)/2;case 3:return e;case 2:case 0:return t}},RF=(i,t)=>{var e,n,s;let o=(e=i.ownerDocument.defaultView)===null||e===void 0?void 0:e.visualViewport,[r,a,l,c]=i===Ea(i)?[0,0,(n=o==null?void 0:o.width)!==null&&n!==void 0?n:i.clientWidth,(s=o==null?void 0:o.height)!==null&&s!==void 0?s:i.clientHeight]:[t.left,t.top,i.clientWidth,i.clientHeight],d=r+i.clientLeft,h=a+i.clientTop,p=d+l,m=h+c;return[h,p,m,d]},IF=(i,t)=>{let e=[],n=i.ownerDocument,s=n.defaultView;if(!s)return e;let o=window.getComputedStyle(i),r=o.direction!=="rtl",a=C0(o.writingMode||o.getPropertyValue("-webkit-writing-mode")||o.getPropertyValue("-ms-writing-mode")),[l,c]=xF(t,a,r),[d,h,p,m]=MF(i,i.getBoundingClientRect(),o);for(let u=x0(i);u!==null;u=x0(u)){if(n!==u.ownerDocument){if(n=u.ownerDocument,s=n.defaultView,!s)break;let{left:K,top:V}=u.getBoundingClientRect();d+=V,h+=K,p+=V,m+=K}let g=s.getComputedStyle(u);if(g.position==="fixed")break;if(!AF(u,g))continue;let f=u.getBoundingClientRect(),[v,E,T,M]=RF(u,f),x=L0(l,M,E,u.clientWidth,m,h,h-m),y=L0(c,v,T,u.clientHeight,d,p,p-d),S=x===null?0:sd(x,m,h)-sd(x,M,E),k=y===null?0:sd(y,d,p)-sd(y,v,T),N=wF(g)?dp(S,-u.scrollWidth+u.clientWidth-u.scrollLeft,-u.scrollLeft):dp(S,-u.scrollLeft,u.scrollWidth-u.clientWidth-u.scrollLeft),J=dp(k,-u.scrollTop,u.scrollHeight-u.clientHeight-u.scrollTop);e.push([u,{left:u.scrollLeft+N,top:u.scrollTop+J,behavior:t.behavior}]),d=Math.max(d-J,v),h=Math.min(h-N,E),p=Math.min(p-J,T),m=Math.max(m-N,M)}return e},S0=(i,t,e)=>{let n=t||{};if(!Xc(n.behavior))throw new TypeError(Qc("scrollIntoView","Element",n.behavior));IF(i,n).forEach(([o,r])=>{cp(o,r,e)})},mp=S0});var mo,up,pp,fp,gp,vp,Ep,bp,yp=b(()=>{co();nd();mo=(i,t)=>e=>{if(ao(e))return;let n={scroll:ba,scrollTo:ya,scrollBy:_a}[i];t(i,function(){let s=arguments;if(arguments.length===1){n(this,s[0],e);return}let o=s[0],r=s[1];n(this,{left:o,top:r})})},up=mo("scroll",lo),pp=mo("scrollTo",lo),fp=mo("scrollBy",lo),gp=(i,t)=>{rp(t),ro(window,i),window[i]=t},vp=mo("scroll",gp),Ep=mo("scrollTo",gp),bp=mo("scrollBy",gp)});var _p,Tp=b(()=>{co();hp();_p=i=>{ao(i)||lo("scrollIntoView",function(){let e=arguments,n=e.length===0?{}:e.length===1&&!td(e[0])?{block:e[0]?"start":"end"}:e[0];mp(this,n,i)})}});var OF,M0=b(()=>{co();yp();Tp();yp();Tp();OF=i=>{ao(i)||(up(i),pp(i),fp(i),_p(i),vp(i),Ep(i),bp(i))}});var R0={};at(R0,{elementScroll:()=>cp,elementScrollBy:()=>yF,elementScrollByPolyfill:()=>fp,elementScrollIntoView:()=>mp,elementScrollIntoViewPolyfill:()=>_p,elementScrollPolyfill:()=>up,elementScrollTo:()=>bF,elementScrollToPolyfill:()=>pp,polyfill:()=>OF,scroll:()=>ba,scrollBy:()=>_a,scrollIntoView:()=>S0,scrollTo:()=>ya,windowScroll:()=>_F,windowScrollBy:()=>LF,windowScrollByPolyfill:()=>bp,windowScrollPolyfill:()=>vp,windowScrollTo:()=>TF,windowScrollToPolyfill:()=>Ep});var I0=b(()=>{nd();hp();M0()});var O0=Hn(()=>{(function(){var i={},t={};(function(e,n){function s(D){if(typeof D=="number")return D;var it={};for(var st in D)it[st]=D[st];return it}function o(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=N}function r(){return e.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(D,it,st){var Et=new o;return it&&(Et.fill="both",Et.duration="auto"),typeof D!="number"||isNaN(D)?D!==void 0&&Object.getOwnPropertyNames(D).forEach(function(gt){if(D[gt]!="auto"){if((typeof Et[gt]=="number"||gt=="duration")&&(typeof D[gt]!="number"||isNaN(D[gt]))||gt=="fill"&&S.indexOf(D[gt])==-1||gt=="direction"&&k.indexOf(D[gt])==-1||gt=="playbackRate"&&D[gt]!==1&&e.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;Et[gt]=D[gt]}}):Et.duration=D,Et}function l(D){return typeof D=="number"&&(D=isNaN(D)?{duration:0}:{duration:D}),D}function c(D,it){return D=e.numericTimingToObject(D),a(D,it)}function d(D,it,st,Et){return D<0||D>1||st<0||st>1?N:function(gt){function Yt(DO,NO,Hi){return 3*DO*(1-Hi)*(1-Hi)*Hi+3*NO*(1-Hi)*Hi*Hi+Hi*Hi*Hi}if(gt<=0){var fe=0;return D>0?fe=it/D:!it&&st>0&&(fe=Et/st),fe*gt}if(gt>=1){var en=0;return st<1?en=(Et-1)/(st-1):st==1&&D<1&&(en=(it-1)/(D-1)),1+en*(gt-1)}for(var On=0,To=1;On<To;){var Lo=(On+To)/2,Wf=Yt(D,st,Lo);if(Math.abs(gt-Wf)<1e-5)return Yt(it,Et,Lo);Wf<gt?On=Lo:To=Lo}return Yt(it,Et,Lo)}}function h(D,it){return function(st){if(st>=1)return 1;var Et=1/D;return(st+=it*Et)-st%Et}}function p(D){Y||(Y=document.createElement("div").style),Y.animationTimingFunction="",Y.animationTimingFunction=D;var it=Y.animationTimingFunction;if(it==""&&r())throw new TypeError(D+" is not a valid value for easing");return it}function m(D){if(D=="linear")return N;var it=Tt.exec(D);if(it)return d.apply(this,it.slice(1).map(Number));var st=nt.exec(D);if(st)return h(Number(st[1]),V);var Et=xt.exec(D);return Et?h(Number(Et[1]),{start:J,middle:K,end:V}[Et[2]]):I[D]||N}function u(D){return Math.abs(g(D)/D.playbackRate)}function g(D){return D.duration===0||D.iterations===0?0:D.duration*D.iterations}function f(D,it,st){if(it==null)return Vt;var Et=st.delay+D+st.endDelay;return it<Math.min(st.delay,Et)?He:it>=Math.min(st.delay+D,Et)?Ce:In}function v(D,it,st,Et,gt){switch(Et){case He:return it=="backwards"||it=="both"?0:null;case In:return st-gt;case Ce:return it=="forwards"||it=="both"?D:null;case Vt:return null}}function E(D,it,st,Et,gt){var Yt=gt;return D===0?it!==He&&(Yt+=st):Yt+=Et/D,Yt}function T(D,it,st,Et,gt,Yt){var fe=D===1/0?it%1:D%1;return fe!==0||st!==Ce||Et===0||gt===0&&Yt!==0||(fe=1),fe}function M(D,it,st,Et){return D===Ce&&it===1/0?1/0:st===1?Math.floor(Et)-1:Math.floor(Et)}function x(D,it,st){var Et=D;if(D!=="normal"&&D!=="reverse"){var gt=it;D==="alternate-reverse"&&(gt+=1),Et="normal",gt!==1/0&&gt%2!=0&&(Et="reverse")}return Et==="normal"?st:1-st}function y(D,it,st){var Et=f(D,it,st),gt=v(D,st.fill,it,Et,st.delay);if(gt===null)return null;var Yt=E(st.duration,Et,st.iterations,gt,st.iterationStart),fe=T(Yt,st.iterationStart,Et,st.iterations,gt,st.duration),en=M(Et,st.iterations,fe,Yt),On=x(st.direction,en,fe);return st._easingFunction(On)}var S="backwards|forwards|both|none".split("|"),k="reverse|alternate|alternate-reverse".split("|"),N=function(D){return D};o.prototype={_setMember:function(D,it){this["_"+D]=it,this._effect&&(this._effect._timingInput[D]=it,this._effect._timing=e.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=e.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(D){this._setMember("delay",D)},get delay(){return this._delay},set endDelay(D){this._setMember("endDelay",D)},get endDelay(){return this._endDelay},set fill(D){this._setMember("fill",D)},get fill(){return this._fill},set iterationStart(D){if((isNaN(D)||D<0)&&r())throw new TypeError("iterationStart must be a non-negative number, received: "+D);this._setMember("iterationStart",D)},get iterationStart(){return this._iterationStart},set duration(D){if(D!="auto"&&(isNaN(D)||D<0)&&r())throw new TypeError("duration must be non-negative or auto, received: "+D);this._setMember("duration",D)},get duration(){return this._duration},set direction(D){this._setMember("direction",D)},get direction(){return this._direction},set easing(D){this._easingFunction=m(p(D)),this._setMember("easing",D)},get easing(){return this._easing},set iterations(D){if((isNaN(D)||D<0)&&r())throw new TypeError("iterations must be non-negative, received: "+D);this._setMember("iterations",D)},get iterations(){return this._iterations}};var J=1,K=.5,V=0,I={ease:d(.25,.1,.25,1),"ease-in":d(.42,0,1,1),"ease-out":d(0,0,.58,1),"ease-in-out":d(.42,0,.58,1),"step-start":h(1,J),"step-middle":h(1,K),"step-end":h(1,V)},Y=null,et="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Tt=new RegExp("cubic-bezier\\("+et+","+et+","+et+","+et+"\\)"),nt=/steps\(\s*(\d+)\s*\)/,xt=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Vt=0,He=1,Ce=2,In=3;e.cloneTimingInput=s,e.makeTiming=a,e.numericTimingToObject=l,e.normalizeTimingInput=c,e.calculateActiveDuration=u,e.calculateIterationProgress=y,e.calculatePhase=f,e.normalizeEasing=p,e.parseEasingFunction=m})(i),function(e,n){function s(m,u){return m in p&&p[m][u]||u}function o(m){return m==="display"||m.lastIndexOf("animation",0)===0||m.lastIndexOf("transition",0)===0}function r(m,u,g){if(!o(m)){var f=c[m];if(f){d.style[m]=u;for(var v in f){var E=f[v],T=d.style[E];g[E]=s(E,T)}}else g[m]=s(m,u)}}function a(m){var u=[];for(var g in m)if(!(g in["easing","offset","composite"])){var f=m[g];Array.isArray(f)||(f=[f]);for(var v,E=f.length,T=0;T<E;T++)v={},v.offset="offset"in m?m.offset:E==1?1:T/(E-1),"easing"in m&&(v.easing=m.easing),"composite"in m&&(v.composite=m.composite),v[g]=f[T],u.push(v)}return u.sort(function(M,x){return M.offset-x.offset}),u}function l(m){function u(){var M=g.length;g[M-1].offset==null&&(g[M-1].offset=1),M>1&&g[0].offset==null&&(g[0].offset=0);for(var x=0,y=g[0].offset,S=1;S<M;S++){var k=g[S].offset;if(k!=null){for(var N=1;N<S-x;N++)g[x+N].offset=y+(k-y)*N/(S-x);x=S,y=k}}}if(m==null)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&m[Symbol.iterator]&&(m=Array.from(m)),Array.isArray(m)||(m=a(m));for(var g=m.map(function(M){var x={};for(var y in M){var S=M[y];if(y=="offset"){if(S!=null){if(S=Number(S),!isFinite(S))throw new TypeError("Keyframe offsets must be numbers.");if(S<0||S>1)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else if(y=="composite"){if(S=="add"||S=="accumulate")throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if(S!="replace")throw new TypeError("Invalid composite mode "+S+".")}else S=y=="easing"?e.normalizeEasing(S):""+S;r(y,S,x)}return x.offset==null&&(x.offset=null),x.easing==null&&(x.easing="linear"),x}),f=!0,v=-1/0,E=0;E<g.length;E++){var T=g[E].offset;if(T!=null){if(T<v)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");v=T}else f=!1}return g=g.filter(function(M){return M.offset>=0&&M.offset<=1}),f||u(),g}var c={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},d=document.createElementNS("http://www.w3.org/1999/xhtml","div"),h={thin:"1px",medium:"3px",thick:"5px"},p={borderBottomWidth:h,borderLeftWidth:h,borderRightWidth:h,borderTopWidth:h,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:h,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};e.convertToArrayForm=a,e.normalizeKeyframes=l}(i),function(e){var n={};e.isDeprecated=function(s,o,r,a){var l=a?"are":"is",c=new Date,d=new Date(o);return d.setMonth(d.getMonth()+3),!(c<d&&(s in n||console.warn("Web Animations: "+s+" "+l+" deprecated and will stop working on "+d.toDateString()+". "+r),n[s]=!0,1))},e.deprecated=function(s,o,r,a){var l=a?"are":"is";if(e.isDeprecated(s,o,r,a))throw new Error(s+" "+l+" no longer supported. "+r)}}(i),function(){if(document.documentElement.animate){var e=document.documentElement.animate([],0),n=!0;if(e&&(n=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(s){e[s]===void 0&&(n=!0)})),!n)return}(function(s,o,r){function a(c){for(var d={},h=0;h<c.length;h++)for(var p in c[h])if(p!="offset"&&p!="easing"&&p!="composite"){var m={offset:c[h].offset,easing:c[h].easing,value:c[h][p]};d[p]=d[p]||[],d[p].push(m)}for(var u in d){var g=d[u];if(g[0].offset!=0||g[g.length-1].offset!=1)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return d}function l(c){var d=[];for(var h in c)for(var p=c[h],m=0;m<p.length-1;m++){var u=m,g=m+1,f=p[u].offset,v=p[g].offset,E=f,T=v;m==0&&(E=-1/0,v==0&&(g=u)),m==p.length-2&&(T=1/0,f==1&&(u=g)),d.push({applyFrom:E,applyTo:T,startOffset:p[u].offset,endOffset:p[g].offset,easingFunction:s.parseEasingFunction(p[u].easing),property:h,interpolation:o.propertyInterpolation(h,p[u].value,p[g].value)})}return d.sort(function(M,x){return M.startOffset-x.startOffset}),d}o.convertEffectInput=function(c){var d=s.normalizeKeyframes(c),h=a(d),p=l(h);return function(m,u){if(u!=null)p.filter(function(f){return u>=f.applyFrom&&u<f.applyTo}).forEach(function(f){var v=u-f.startOffset,E=f.endOffset-f.startOffset,T=E==0?0:f.easingFunction(v/E);o.apply(m,f.property,f.interpolation(T))});else for(var g in h)g!="offset"&&g!="easing"&&g!="composite"&&o.clear(m,g)}}})(i,t),function(s,o,r){function a(m){return m.replace(/-(.)/g,function(u,g){return g.toUpperCase()})}function l(m,u,g){h[g]=h[g]||[],h[g].push([m,u])}function c(m,u,g){for(var f=0;f<g.length;f++)l(m,u,a(g[f]))}function d(m,u,g){var f=m;/-/.test(m)&&!s.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(f=a(m)),u!="initial"&&g!="initial"||(u=="initial"&&(u=p[f]),g=="initial"&&(g=p[f]));for(var v=u==g?[]:h[f],E=0;v&&E<v.length;E++){var T=v[E][0](u),M=v[E][0](g);if(T!==void 0&&M!==void 0){var x=v[E][1](T,M);if(x){var y=o.Interpolation.apply(null,x);return function(S){return S==0?u:S==1?g:y(S)}}}}return o.Interpolation(!1,!0,function(S){return S?g:u})}var h={};o.addPropertiesHandler=c;var p={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};o.propertyInterpolation=d}(i,t),function(s,o,r){function a(l){var c=s.calculateActiveDuration(l),d=function(h){return s.calculateIterationProgress(c,h,l)};return d._totalDuration=l.delay+c+l.endDelay,d}o.KeyframeEffect=function(l,c,d,h){var p,m=a(s.normalizeTimingInput(d)),u=o.convertEffectInput(c),g=function(){u(l,p)};return g._update=function(f){return(p=m(f))!==null},g._clear=function(){u(l,null)},g._hasSameTarget=function(f){return l===f},g._target=l,g._totalDuration=m._totalDuration,g._id=h,g}}(i,t),function(s,o){function r(f,v){return!(!v.namespaceURI||v.namespaceURI.indexOf("/svg")==-1)&&(d in f||(f[d]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(f.navigator.userAgent)),f[d])}function a(f,v,E){E.enumerable=!0,E.configurable=!0,Object.defineProperty(f,v,E)}function l(f){this._element=f,this._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style,this._style=f.style,this._length=0,this._isAnimatedProperty={},this._updateSvgTransformAttr=r(window,f),this._savedTransformAttr=null;for(var v=0;v<this._style.length;v++){var E=this._style[v];this._surrogateStyle[E]=this._style[E]}this._updateIndices()}function c(f){if(!f._webAnimationsPatchedStyle){var v=new l(f);try{a(f,"style",{get:function(){return v}})}catch(E){f.style._set=function(T,M){f.style[T]=M},f.style._clear=function(T){f.style[T]=""}}f._webAnimationsPatchedStyle=f.style}}var d="_webAnimationsUpdateSvgTransformAttr",h={cssText:1,length:1,parentRule:1},p={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},m={removeProperty:1,setProperty:1};l.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(f){for(var v={},E=0;E<this._surrogateStyle.length;E++)v[this._surrogateStyle[E]]=!0;this._surrogateStyle.cssText=f,this._updateIndices();for(var E=0;E<this._surrogateStyle.length;E++)v[this._surrogateStyle[E]]=!0;for(var T in v)this._isAnimatedProperty[T]||this._style.setProperty(T,this._surrogateStyle.getPropertyValue(T))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(f){return function(){return this._surrogateStyle[f]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(f,v){this._style[f]=v,this._isAnimatedProperty[f]=!0,this._updateSvgTransformAttr&&s.unprefixedPropertyName(f)=="transform"&&(this._savedTransformAttr==null&&(this._savedTransformAttr=this._element.getAttribute("transform")),this._element.setAttribute("transform",s.transformToSvgMatrix(v)))},_clear:function(f){this._style[f]=this._surrogateStyle[f],this._updateSvgTransformAttr&&s.unprefixedPropertyName(f)=="transform"&&(this._savedTransformAttr?this._element.setAttribute("transform",this._savedTransformAttr):this._element.removeAttribute("transform"),this._savedTransformAttr=null),delete this._isAnimatedProperty[f]}};for(var u in p)l.prototype[u]=function(f,v){return function(){var E=this._surrogateStyle[f].apply(this._surrogateStyle,arguments);return v&&(this._isAnimatedProperty[arguments[0]]||this._style[f].apply(this._style,arguments),this._updateIndices()),E}}(u,u in m);for(var g in document.documentElement.style)g in h||g in p||function(f){a(l.prototype,f,{get:function(){return this._surrogateStyle[f]},set:function(v){this._surrogateStyle[f]=v,this._updateIndices(),this._isAnimatedProperty[f]||(this._style[f]=v)}})}(g);s.apply=function(f,v,E){c(f),f.style._set(s.propertyName(v),E)},s.clear=function(f,v){f._webAnimationsPatchedStyle&&f.style._clear(s.propertyName(v))}}(t),function(s){window.Element.prototype.animate=function(o,r){var a="";return r&&r.id&&(a=r.id),s.timeline._play(s.KeyframeEffect(this,o,r,a))}}(t),function(s,o){function r(a,l,c){if(typeof a=="number"&&typeof l=="number")return a*(1-c)+l*c;if(typeof a=="boolean"&&typeof l=="boolean")return c<.5?a:l;if(a.length==l.length){for(var d=[],h=0;h<a.length;h++)d.push(r(a[h],l[h],c));return d}throw"Mismatched interpolation arguments "+a+":"+l}s.Interpolation=function(a,l,c){return function(d){return c(r(a,l,d))}}}(t),function(s,o){function r(c,d,h){return Math.max(Math.min(c,h),d)}function a(c,d,h){var p=s.dot(c,d);p=r(p,-1,1);var m=[];if(p===1)m=c;else for(var u=Math.acos(p),g=1*Math.sin(h*u)/Math.sqrt(1-p*p),f=0;f<4;f++)m.push(c[f]*(Math.cos(h*u)-p*g)+d[f]*g);return m}var l=function(){function c(p,m){for(var u=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],g=0;g<4;g++)for(var f=0;f<4;f++)for(var v=0;v<4;v++)u[g][f]+=m[g][v]*p[v][f];return u}function d(p){return p[0][2]==0&&p[0][3]==0&&p[1][2]==0&&p[1][3]==0&&p[2][0]==0&&p[2][1]==0&&p[2][2]==1&&p[2][3]==0&&p[3][2]==0&&p[3][3]==1}function h(p,m,u,g,f){for(var v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],E=0;E<4;E++)v[E][3]=f[E];for(var E=0;E<3;E++)for(var T=0;T<3;T++)v[3][E]+=p[T]*v[T][E];var M=g[0],x=g[1],y=g[2],S=g[3],k=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];k[0][0]=1-2*(x*x+y*y),k[0][1]=2*(M*x-y*S),k[0][2]=2*(M*y+x*S),k[1][0]=2*(M*x+y*S),k[1][1]=1-2*(M*M+y*y),k[1][2]=2*(x*y-M*S),k[2][0]=2*(M*y-x*S),k[2][1]=2*(x*y+M*S),k[2][2]=1-2*(M*M+x*x),v=c(v,k);var N=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];u[2]&&(N[2][1]=u[2],v=c(v,N)),u[1]&&(N[2][1]=0,N[2][0]=u[0],v=c(v,N)),u[0]&&(N[2][0]=0,N[1][0]=u[0],v=c(v,N));for(var E=0;E<3;E++)for(var T=0;T<3;T++)v[E][T]*=m[E];return d(v)?[v[0][0],v[0][1],v[1][0],v[1][1],v[3][0],v[3][1]]:v[0].concat(v[1],v[2],v[3])}return h}();s.composeMatrix=l,s.quat=a}(t),function(s,o,r){s.sequenceNumber=0;var a=function(l,c,d){this.target=l,this.currentTime=c,this.timelineTime=d,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=l,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};o.Animation=function(l){this.id="",l&&l._id&&(this.id=l._id),this._sequenceNumber=s.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=l,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},o.Animation.prototype={_ensureAlive:function(){this.playbackRate<0&&this.currentTime===0?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,o.timeline._animations.push(this))},_tickCurrentTime:function(l,c){l!=this._currentTime&&(this._currentTime=l,this._isFinished&&!c&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(l){l=+l,isNaN(l)||(o.restart(),this._paused||this._startTime==null||(this._startTime=this._timeline.currentTime-l/this._playbackRate),this._currentTimePending=!1,this._currentTime!=l&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(l,!0),o.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(l){l=+l,isNaN(l)||this._paused||this._idle||(this._startTime=l,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),o.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(l){if(l!=this._playbackRate){var c=this.currentTime;this._playbackRate=l,this._startTime=null,this.playState!="paused"&&this.playState!="idle"&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),o.applyDirtiedAnimation(this)),c!=null&&(this.currentTime=c)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":this._startTime==null&&!this._paused&&this.playbackRate!=0||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(this._playbackRate>=0)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),o.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,o.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),o.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(l,c){typeof c=="function"&&l=="finish"&&this._finishHandlers.push(c)},removeEventListener:function(l,c){if(l=="finish"){var d=this._finishHandlers.indexOf(c);d>=0&&this._finishHandlers.splice(d,1)}},_fireEvents:function(l){if(this._isFinished){if(!this._finishedFlag){var c=new a(this,this._currentTime,l),d=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){d.forEach(function(h){h.call(c.target,c)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(l,c){this._idle||this._paused||(this._startTime==null?c&&(this.startTime=l-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((l-this._startTime)*this.playbackRate)),c&&(this._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var l=this._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();l.indexOf(this)===-1&&l.push(this)},_unmarkTarget:function(){var l=this._targetAnimations(),c=l.indexOf(this);c!==-1&&l.splice(c,1)}}}(i,t),function(s,o,r){function a(x){var y=m;m=[],x<M.currentTime&&(x=M.currentTime),M._animations.sort(l),M._animations=h(x,!0,M._animations)[0],y.forEach(function(S){S[1](x)}),d(),g=void 0}function l(x,y){return x._sequenceNumber-y._sequenceNumber}function c(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function d(){E.forEach(function(x){x()}),E.length=0}function h(x,y,S){T=!0,v=!1,o.timeline.currentTime=x,f=!1;var k=[],N=[],J=[],K=[];return S.forEach(function(V){V._tick(x,y),V._inEffect?(N.push(V._effect),V._markTarget()):(k.push(V._effect),V._unmarkTarget()),V._needsTick&&(f=!0);var I=V._inEffect||V._needsTick;V._inTimeline=I,I?J.push(V):K.push(V)}),E.push.apply(E,k),E.push.apply(E,N),f&&requestAnimationFrame(function(){}),T=!1,[J,K]}var p=window.requestAnimationFrame,m=[],u=0;window.requestAnimationFrame=function(x){var y=u++;return m.length==0&&p(a),m.push([y,x]),y},window.cancelAnimationFrame=function(x){m.forEach(function(y){y[0]==x&&(y[1]=function(){})})},c.prototype={_play:function(x){x._timing=s.normalizeTimingInput(x.timing);var y=new o.Animation(x);return y._idle=!1,y._timeline=this,this._animations.push(y),o.restart(),o.applyDirtiedAnimation(y),y}};var g=void 0,f=!1,v=!1;o.restart=function(){return f||(f=!0,requestAnimationFrame(function(){}),v=!0),v},o.applyDirtiedAnimation=function(x){if(!T){x._markTarget();var y=x._targetAnimations();y.sort(l),h(o.timeline.currentTime,!1,y.slice())[1].forEach(function(S){var k=M._animations.indexOf(S);k!==-1&&M._animations.splice(k,1)}),d()}};var E=[],T=!1,M=new c;o.timeline=M}(i,t),function(s,o){function r(m,u){for(var g=0,f=0;f<m.length;f++)g+=m[f]*u[f];return g}function a(m,u){return[m[0]*u[0]+m[4]*u[1]+m[8]*u[2]+m[12]*u[3],m[1]*u[0]+m[5]*u[1]+m[9]*u[2]+m[13]*u[3],m[2]*u[0]+m[6]*u[1]+m[10]*u[2]+m[14]*u[3],m[3]*u[0]+m[7]*u[1]+m[11]*u[2]+m[15]*u[3],m[0]*u[4]+m[4]*u[5]+m[8]*u[6]+m[12]*u[7],m[1]*u[4]+m[5]*u[5]+m[9]*u[6]+m[13]*u[7],m[2]*u[4]+m[6]*u[5]+m[10]*u[6]+m[14]*u[7],m[3]*u[4]+m[7]*u[5]+m[11]*u[6]+m[15]*u[7],m[0]*u[8]+m[4]*u[9]+m[8]*u[10]+m[12]*u[11],m[1]*u[8]+m[5]*u[9]+m[9]*u[10]+m[13]*u[11],m[2]*u[8]+m[6]*u[9]+m[10]*u[10]+m[14]*u[11],m[3]*u[8]+m[7]*u[9]+m[11]*u[10]+m[15]*u[11],m[0]*u[12]+m[4]*u[13]+m[8]*u[14]+m[12]*u[15],m[1]*u[12]+m[5]*u[13]+m[9]*u[14]+m[13]*u[15],m[2]*u[12]+m[6]*u[13]+m[10]*u[14]+m[14]*u[15],m[3]*u[12]+m[7]*u[13]+m[11]*u[14]+m[15]*u[15]]}function l(m){var u=m.rad||0;return((m.deg||0)/360+(m.grad||0)/400+(m.turn||0))*(2*Math.PI)+u}function c(m){switch(m.t){case"rotatex":var x=l(m.d[0]);return[1,0,0,0,0,Math.cos(x),Math.sin(x),0,0,-Math.sin(x),Math.cos(x),0,0,0,0,1];case"rotatey":var x=l(m.d[0]);return[Math.cos(x),0,-Math.sin(x),0,0,1,0,0,Math.sin(x),0,Math.cos(x),0,0,0,0,1];case"rotate":case"rotatez":var x=l(m.d[0]);return[Math.cos(x),Math.sin(x),0,0,-Math.sin(x),Math.cos(x),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var y=m.d[0],S=m.d[1],k=m.d[2],x=l(m.d[3]),u=y*y+S*S+k*k;if(u===0)y=1,S=0,k=0;else if(u!==1){var g=Math.sqrt(u);y/=g,S/=g,k/=g}var f=Math.sin(x/2),v=f*Math.cos(x/2),E=f*f;return[1-2*(S*S+k*k)*E,2*(y*S*E+k*v),2*(y*k*E-S*v),0,2*(y*S*E-k*v),1-2*(y*y+k*k)*E,2*(S*k*E+y*v),0,2*(y*k*E+S*v),2*(S*k*E-y*v),1-2*(y*y+S*S)*E,0,0,0,0,1];case"scale":return[m.d[0],0,0,0,0,m.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[m.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,m.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,m.d[0],0,0,0,0,1];case"scale3d":return[m.d[0],0,0,0,0,m.d[1],0,0,0,0,m.d[2],0,0,0,0,1];case"skew":var T=l(m.d[0]),M=l(m.d[1]);return[1,Math.tan(M),0,0,Math.tan(T),1,0,0,0,0,1,0,0,0,0,1];case"skewx":var x=l(m.d[0]);return[1,0,0,0,Math.tan(x),1,0,0,0,0,1,0,0,0,0,1];case"skewy":var x=l(m.d[0]);return[1,Math.tan(x),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":var y=m.d[0].px||0,S=m.d[1].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,y,S,0,1];case"translatex":var y=m.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,y,0,0,1];case"translatey":var S=m.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,S,0,1];case"translatez":var k=m.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,k,1];case"translate3d":var y=m.d[0].px||0,S=m.d[1].px||0,k=m.d[2].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,y,S,k,1];case"perspective":return[1,0,0,0,0,1,0,0,0,0,1,m.d[0].px?-1/m.d[0].px:0,0,0,0,1];case"matrix":return[m.d[0],m.d[1],0,0,m.d[2],m.d[3],0,0,0,0,1,0,m.d[4],m.d[5],0,1];case"matrix3d":return m.d}}function d(m){return m.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:m.map(c).reduce(a)}function h(m){return[p(d(m))]}var p=function(){function m(y){return y[0][0]*y[1][1]*y[2][2]+y[1][0]*y[2][1]*y[0][2]+y[2][0]*y[0][1]*y[1][2]-y[0][2]*y[1][1]*y[2][0]-y[1][2]*y[2][1]*y[0][0]-y[2][2]*y[0][1]*y[1][0]}function u(y){for(var S=1/m(y),k=y[0][0],N=y[0][1],J=y[0][2],K=y[1][0],V=y[1][1],I=y[1][2],Y=y[2][0],et=y[2][1],Tt=y[2][2],nt=[[(V*Tt-I*et)*S,(J*et-N*Tt)*S,(N*I-J*V)*S,0],[(I*Y-K*Tt)*S,(k*Tt-J*Y)*S,(J*K-k*I)*S,0],[(K*et-V*Y)*S,(Y*N-k*et)*S,(k*V-N*K)*S,0]],xt=[],Vt=0;Vt<3;Vt++){for(var He=0,Ce=0;Ce<3;Ce++)He+=y[3][Ce]*nt[Ce][Vt];xt.push(He)}return xt.push(1),nt.push(xt),nt}function g(y){return[[y[0][0],y[1][0],y[2][0],y[3][0]],[y[0][1],y[1][1],y[2][1],y[3][1]],[y[0][2],y[1][2],y[2][2],y[3][2]],[y[0][3],y[1][3],y[2][3],y[3][3]]]}function f(y,S){for(var k=[],N=0;N<4;N++){for(var J=0,K=0;K<4;K++)J+=y[K]*S[K][N];k.push(J)}return k}function v(y){var S=E(y);return[y[0]/S,y[1]/S,y[2]/S]}function E(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1]+y[2]*y[2])}function T(y,S,k,N){return[k*y[0]+N*S[0],k*y[1]+N*S[1],k*y[2]+N*S[2]]}function M(y,S){return[y[1]*S[2]-y[2]*S[1],y[2]*S[0]-y[0]*S[2],y[0]*S[1]-y[1]*S[0]]}function x(y){var S=[y.slice(0,4),y.slice(4,8),y.slice(8,12),y.slice(12,16)];if(S[3][3]!==1)return null;for(var k=[],N=0;N<4;N++)k.push(S[N].slice());for(var N=0;N<3;N++)k[N][3]=0;if(m(k)===0)return null;var J,K=[];S[0][3]||S[1][3]||S[2][3]?(K.push(S[0][3]),K.push(S[1][3]),K.push(S[2][3]),K.push(S[3][3]),J=f(K,g(u(k)))):J=[0,0,0,1];var V=S[3].slice(0,3),I=[];I.push(S[0].slice(0,3));var Y=[];Y.push(E(I[0])),I[0]=v(I[0]);var et=[];I.push(S[1].slice(0,3)),et.push(r(I[0],I[1])),I[1]=T(I[1],I[0],1,-et[0]),Y.push(E(I[1])),I[1]=v(I[1]),et[0]/=Y[1],I.push(S[2].slice(0,3)),et.push(r(I[0],I[2])),I[2]=T(I[2],I[0],1,-et[1]),et.push(r(I[1],I[2])),I[2]=T(I[2],I[1],1,-et[2]),Y.push(E(I[2])),I[2]=v(I[2]),et[1]/=Y[2],et[2]/=Y[2];var Tt=M(I[1],I[2]);if(r(I[0],Tt)<0)for(var N=0;N<3;N++)Y[N]*=-1,I[N][0]*=-1,I[N][1]*=-1,I[N][2]*=-1;var nt,xt,Vt=I[0][0]+I[1][1]+I[2][2]+1;return Vt>1e-4?(nt=.5/Math.sqrt(Vt),xt=[(I[2][1]-I[1][2])*nt,(I[0][2]-I[2][0])*nt,(I[1][0]-I[0][1])*nt,.25/nt]):I[0][0]>I[1][1]&&I[0][0]>I[2][2]?(nt=2*Math.sqrt(1+I[0][0]-I[1][1]-I[2][2]),xt=[.25*nt,(I[0][1]+I[1][0])/nt,(I[0][2]+I[2][0])/nt,(I[2][1]-I[1][2])/nt]):I[1][1]>I[2][2]?(nt=2*Math.sqrt(1+I[1][1]-I[0][0]-I[2][2]),xt=[(I[0][1]+I[1][0])/nt,.25*nt,(I[1][2]+I[2][1])/nt,(I[0][2]-I[2][0])/nt]):(nt=2*Math.sqrt(1+I[2][2]-I[0][0]-I[1][1]),xt=[(I[0][2]+I[2][0])/nt,(I[1][2]+I[2][1])/nt,.25*nt,(I[1][0]-I[0][1])/nt]),[V,Y,et,xt,J]}return x}();s.dot=r,s.makeMatrixDecomposition=h,s.transformListToMatrix=d}(t),function(s){function o(g,f){var v=g.exec(f);if(v)return v=g.ignoreCase?v[0].toLowerCase():v[0],[v,f.substr(v.length)]}function r(g,f){f=f.replace(/^\s*/,"");var v=g(f);if(v)return[v[0],v[1].replace(/^\s*/,"")]}function a(g,f,v){g=r.bind(null,g);for(var E=[];;){var T=g(v);if(!T)return[E,v];if(E.push(T[0]),v=T[1],!(T=o(f,v))||T[1]=="")return[E,v];v=T[1]}}function l(g,f){for(var v=0,E=0;E<f.length&&(!/\s|,/.test(f[E])||v!=0);E++)if(f[E]=="(")v++;else if(f[E]==")"&&(v--,v==0&&E++,v<=0))break;var T=g(f.substr(0,E));return T==null?void 0:[T,f.substr(E)]}function c(g,f){for(var v=g,E=f;v&&E;)v>E?v%=E:E%=v;return v=g*f/(v+E)}function d(g){return function(f){var v=g(f);return v&&(v[0]=void 0),v}}function h(g,f){return function(v){return g(v)||[f,v]}}function p(g,f){for(var v=[],E=0;E<g.length;E++){var T=s.consumeTrimmed(g[E],f);if(!T||T[0]=="")return;T[0]!==void 0&&v.push(T[0]),f=T[1]}if(f=="")return v}function m(g,f,v,E,T){for(var M=[],x=[],y=[],S=c(E.length,T.length),k=0;k<S;k++){var N=f(E[k%E.length],T[k%T.length]);if(!N)return;M.push(N[0]),x.push(N[1]),y.push(N[2])}return[M,x,function(J){var K=J.map(function(V,I){return y[I](V)}).join(v);return g?g(K):K}]}function u(g,f,v){for(var E=[],T=[],M=[],x=0,y=0;y<v.length;y++)if(typeof v[y]=="function"){var S=v[y](g[x],f[x++]);E.push(S[0]),T.push(S[1]),M.push(S[2])}else(function(k){E.push(!1),T.push(!1),M.push(function(){return v[k]})})(y);return[E,T,function(k){for(var N="",J=0;J<k.length;J++)N+=M[J](k[J]);return N}]}s.consumeToken=o,s.consumeTrimmed=r,s.consumeRepeated=a,s.consumeParenthesised=l,s.ignore=d,s.optional=h,s.consumeList=p,s.mergeNestedRepeated=m.bind(null,null),s.mergeWrappedNestedRepeated=m,s.mergeList=u}(t),function(s){function o(d){function h(u){var g=s.consumeToken(/^inset/i,u);return g?(p.inset=!0,g):(g=s.consumeLengthOrPercent(u))?(p.lengths.push(g[0]),g):(g=s.consumeColor(u),g?(p.color=g[0],g):void 0)}var p={inset:!1,lengths:[],color:null},m=s.consumeRepeated(h,/^/,d);if(m&&m[0].length)return[p,m[1]]}function r(d){var h=s.consumeRepeated(o,/^,/,d);if(h&&h[1]=="")return h[0]}function a(d,h){for(;d.lengths.length<Math.max(d.lengths.length,h.lengths.length);)d.lengths.push({px:0});for(;h.lengths.length<Math.max(d.lengths.length,h.lengths.length);)h.lengths.push({px:0});if(d.inset==h.inset&&!!d.color==!!h.color){for(var p,m=[],u=[[],0],g=[[],0],f=0;f<d.lengths.length;f++){var v=s.mergeDimensions(d.lengths[f],h.lengths[f],f==2);u[0].push(v[0]),g[0].push(v[1]),m.push(v[2])}if(d.color&&h.color){var E=s.mergeColors(d.color,h.color);u[1]=E[0],g[1]=E[1],p=E[2]}return[u,g,function(T){for(var M=d.inset?"inset ":" ",x=0;x<m.length;x++)M+=m[x](T[0][x])+" ";return p&&(M+=p(T[1])),M}]}}function l(d,h,p,m){function u(M){return{inset:M,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],f=[],v=0;v<p.length||v<m.length;v++){var E=p[v]||u(m[v].inset),T=m[v]||u(p[v].inset);g.push(E),f.push(T)}return s.mergeNestedRepeated(d,h,g,f)}var c=l.bind(null,a,", ");s.addPropertiesHandler(r,c,["box-shadow","text-shadow"])}(t),function(s,o){function r(f){return f.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function a(f,v,E){return Math.min(v,Math.max(f,E))}function l(f){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(f))return Number(f)}function c(f,v){return[f,v,r]}function d(f,v){if(f!=0)return p(0,1/0)(f,v)}function h(f,v){return[f,v,function(E){return Math.round(a(1,1/0,E))}]}function p(f,v){return function(E,T){return[E,T,function(M){return r(a(f,v,M))}]}}function m(f){var v=f.trim().split(/\s*[\s,]\s*/);if(v.length!==0){for(var E=[],T=0;T<v.length;T++){var M=l(v[T]);if(M===void 0)return;E.push(M)}return E}}function u(f,v){if(f.length==v.length)return[f,v,function(E){return E.map(r).join(" ")}]}function g(f,v){return[f,v,Math.round]}s.clamp=a,s.addPropertiesHandler(m,u,["stroke-dasharray"]),s.addPropertiesHandler(l,p(0,1/0),["border-image-width","line-height"]),s.addPropertiesHandler(l,p(0,1),["opacity","shape-image-threshold"]),s.addPropertiesHandler(l,d,["flex-grow","flex-shrink"]),s.addPropertiesHandler(l,h,["orphans","widows"]),s.addPropertiesHandler(l,g,["z-index"]),s.parseNumber=l,s.parseNumberList=m,s.mergeNumbers=c,s.numberToString=r}(t),function(s,o){function r(a,l){if(a=="visible"||l=="visible")return[0,1,function(c){return c<=0?a:c>=1?l:"visible"}]}s.addPropertiesHandler(String,r,["visibility"])}(t),function(s,o){function r(d){d=d.trim(),c.fillStyle="#000",c.fillStyle=d;var h=c.fillStyle;if(c.fillStyle="#fff",c.fillStyle=d,h==c.fillStyle){c.fillRect(0,0,1,1);var p=c.getImageData(0,0,1,1).data;c.clearRect(0,0,1,1);var m=p[3]/255;return[p[0]*m,p[1]*m,p[2]*m,m]}}function a(d,h){return[d,h,function(p){function m(g){return Math.max(0,Math.min(255,g))}if(p[3])for(var u=0;u<3;u++)p[u]=Math.round(m(p[u]/p[3]));return p[3]=s.numberToString(s.clamp(0,1,p[3])),"rgba("+p.join(",")+")"}]}var l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=l.height=1;var c=l.getContext("2d");s.addPropertiesHandler(r,a,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","fill","flood-color","lighting-color","outline-color","stop-color","stroke","text-decoration-color"]),s.consumeColor=s.consumeParenthesised.bind(null,r),s.mergeColors=a}(t),function(s,o){function r(M){function x(){var V=K.exec(M);J=V?V[0]:void 0}function y(){var V=Number(J);return x(),V}function S(){if(J!=="(")return y();x();var V=N();return J!==")"?NaN:(x(),V)}function k(){for(var V=S();J==="*"||J==="/";){var I=J;x();var Y=S();I==="*"?V*=Y:V/=Y}return V}function N(){for(var V=k();J==="+"||J==="-";){var I=J;x();var Y=k();I==="+"?V+=Y:V-=Y}return V}var J,K=/([\+\-\w\.]+|[\(\)\*\/])/g;return x(),N()}function a(M,x){if((x=x.trim().toLowerCase())=="0"&&"px".search(M)>=0)return{px:0};if(/^[^(]*$|^calc/.test(x)){x=x.replace(/calc\(/g,"(");var y={};x=x.replace(M,function(I){return y[I]=null,"U"+I});for(var S="U("+M.source+")",k=x.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+S,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),N=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],J=0;J<N.length;)N[J].test(k)?(k=k.replace(N[J],"$1"),J=0):J++;if(k=="D"){for(var K in y){var V=r(x.replace(new RegExp("U"+K,"g"),"").replace(new RegExp(S,"g"),"*0"));if(!isFinite(V))return;y[K]=V}return y}}}function l(M,x){return c(M,x,!0)}function c(M,x,y){var S,k=[];for(S in M)k.push(S);for(S in x)k.indexOf(S)<0&&k.push(S);return M=k.map(function(N){return M[N]||0}),x=k.map(function(N){return x[N]||0}),[M,x,function(N){var J=N.map(function(K,V){return N.length==1&&y&&(K=Math.max(K,0)),s.numberToString(K)+k[V]}).join(" + ");return N.length>1?"calc("+J+")":J}]}var d="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",h=a.bind(null,new RegExp(d,"g")),p=a.bind(null,new RegExp(d+"|%","g")),m=a.bind(null,/deg|rad|grad|turn/g);s.parseLength=h,s.parseLengthOrPercent=p,s.consumeLengthOrPercent=s.consumeParenthesised.bind(null,p),s.parseAngle=m,s.mergeDimensions=c;var u=s.consumeParenthesised.bind(null,h),g=s.consumeRepeated.bind(void 0,u,/^/),f=s.consumeRepeated.bind(void 0,g,/^,/);s.consumeSizePairList=f;var v=function(M){var x=f(M);if(x&&x[1]=="")return x[0]},E=s.mergeNestedRepeated.bind(void 0,l," "),T=s.mergeNestedRepeated.bind(void 0,E,",");s.mergeNonNegativeSizePair=E,s.addPropertiesHandler(v,T,["background-size"]),s.addPropertiesHandler(p,l,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),s.addPropertiesHandler(p,c,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","stroke-dashoffset","text-indent","top","vertical-align","word-spacing"])}(t),function(s,o){function r(h){return s.consumeLengthOrPercent(h)||s.consumeToken(/^auto/,h)}function a(h){var p=s.consumeList([s.ignore(s.consumeToken.bind(null,/^rect/)),s.ignore(s.consumeToken.bind(null,/^\(/)),s.consumeRepeated.bind(null,r,/^,/),s.ignore(s.consumeToken.bind(null,/^\)/))],h);if(p&&p[0].length==4)return p[0]}function l(h,p){return h=="auto"||p=="auto"?[!0,!1,function(m){var u=m?h:p;if(u=="auto")return"auto";var g=s.mergeDimensions(u,u);return g[2](g[0])}]:s.mergeDimensions(h,p)}function c(h){return"rect("+h+")"}var d=s.mergeWrappedNestedRepeated.bind(null,c,l,", ");s.parseBox=a,s.mergeBoxes=d,s.addPropertiesHandler(a,d,["clip"])}(t),function(s,o){function r(E){return function(T){var M=0;return E.map(function(x){return x===u?T[M++]:x})}}function a(E){return E}function l(E){if((E=E.toLowerCase().trim())=="none")return[];for(var T,M=/\s*(\w+)\(([^)]*)\)/g,x=[],y=0;T=M.exec(E);){if(T.index!=y)return;y=T.index+T[0].length;var S=T[1],k=v[S];if(!k)return;var N=T[2].split(","),J=k[0];if(J.length<N.length)return;for(var K=[],V=0;V<J.length;V++){var I,Y=N[V],et=J[V];if((I=Y?{A:function(Tt){return Tt.trim()=="0"?f:s.parseAngle(Tt)},N:s.parseNumber,T:s.parseLengthOrPercent,L:s.parseLength}[et.toUpperCase()](Y):{a:f,n:K[0],t:g}[et])===void 0)return;K.push(I)}if(x.push({t:S,d:K}),M.lastIndex==E.length)return x}}function c(E){return E.toFixed(6).replace(".000000","")}function d(E,T){if(E.decompositionPair!==T){E.decompositionPair=T;var M=s.makeMatrixDecomposition(E)}if(T.decompositionPair!==E){T.decompositionPair=E;var x=s.makeMatrixDecomposition(T)}return M[0]==null||x[0]==null?[[!1],[!0],function(y){return y?T[0].d:E[0].d}]:(M[0].push(0),x[0].push(1),[M,x,function(y){var S=s.quat(M[0][3],x[0][3],y[5]);return s.composeMatrix(y[0],y[1],y[2],S,y[4]).map(c).join(",")}])}function h(E){return E.replace(/[xy]/,"")}function p(E){return E.replace(/(x|y|z|3d)?$/,"3d")}function m(E,T){var M=s.makeMatrixDecomposition&&!0,x=!1;if(!E.length||!T.length){E.length||(x=!0,E=T,T=[]);for(var y=0;y<E.length;y++){var S=E[y].t,k=E[y].d,N=S.substr(0,5)=="scale"?1:0;T.push({t:S,d:k.map(function(gt){if(typeof gt=="number")return N;var Yt={};for(var fe in gt)Yt[fe]=N;return Yt})})}}var J=function(gt,Yt){return gt=="perspective"&&Yt=="perspective"||(gt=="matrix"||gt=="matrix3d")&&(Yt=="matrix"||Yt=="matrix3d")},K=[],V=[],I=[];if(E.length!=T.length){if(!M)return;var Y=d(E,T);K=[Y[0]],V=[Y[1]],I=[["matrix",[Y[2]]]]}else for(var y=0;y<E.length;y++){var S,et=E[y].t,Tt=T[y].t,nt=E[y].d,xt=T[y].d,Vt=v[et],He=v[Tt];if(J(et,Tt)){if(!M)return;var Y=d([E[y]],[T[y]]);K.push(Y[0]),V.push(Y[1]),I.push(["matrix",[Y[2]]])}else{if(et==Tt)S=et;else if(Vt[2]&&He[2]&&h(et)==h(Tt))S=h(et),nt=Vt[2](nt),xt=He[2](xt);else{if(!Vt[1]||!He[1]||p(et)!=p(Tt)){if(!M)return;var Y=d(E,T);K=[Y[0]],V=[Y[1]],I=[["matrix",[Y[2]]]];break}S=p(et),nt=Vt[1](nt),xt=He[1](xt)}for(var Ce=[],In=[],D=[],it=0;it<nt.length;it++){var st=typeof nt[it]=="number"?s.mergeNumbers:s.mergeDimensions,Y=st(nt[it],xt[it]);Ce[it]=Y[0],In[it]=Y[1],D.push(Y[2])}K.push(Ce),V.push(In),I.push([S,D])}}if(x){var Et=K;K=V,V=Et}return[K,V,function(gt){return gt.map(function(Yt,fe){var en=Yt.map(function(On,To){return I[fe][1][To](On)}).join(",");return I[fe][0]=="matrix"&&en.split(",").length==16&&(I[fe][0]="matrix3d"),I[fe][0]+"("+en+")"}).join(" ")}]}var u=null,g={px:0},f={deg:0},v={matrix:["NNNNNN",[u,u,0,0,u,u,0,0,0,0,1,0,u,u,0,1],a],matrix3d:["NNNNNNNNNNNNNNNN",a],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",r([u,u,1]),a],scalex:["N",r([u,1,1]),r([u,1])],scaley:["N",r([1,u,1]),r([1,u])],scalez:["N",r([1,1,u])],scale3d:["NNN",a],skew:["Aa",null,a],skewx:["A",null,r([u,f])],skewy:["A",null,r([f,u])],translate:["Tt",r([u,u,g]),a],translatex:["T",r([u,g,g]),r([u,g])],translatey:["T",r([g,u,g]),r([g,u])],translatez:["L",r([g,g,u])],translate3d:["TTL",a]};s.addPropertiesHandler(l,m,["transform"]),s.transformToSvgMatrix=function(E){var T=s.transformListToMatrix(l(E));return"matrix("+c(T[0])+" "+c(T[1])+" "+c(T[4])+" "+c(T[5])+" "+c(T[12])+" "+c(T[13])+")"}}(t),function(s){function o(l){var c=Number(l);if(!(isNaN(c)||c<100||c>900||c%100!=0))return c}function r(l){return l=100*Math.round(l/100),l=s.clamp(100,900,l),l===400?"normal":l===700?"bold":String(l)}function a(l,c){return[l,c,r]}s.addPropertiesHandler(o,a,["font-weight"])}(t),function(s){function o(m){var u={};for(var g in m)u[g]=-m[g];return u}function r(m){return s.consumeToken(/^(left|center|right|top|bottom)\b/i,m)||s.consumeLengthOrPercent(m)}function a(m,u){var g=s.consumeRepeated(r,/^/,u);if(g&&g[1]==""){var f=g[0];if(f[0]=f[0]||"center",f[1]=f[1]||"center",m==3&&(f[2]=f[2]||{px:0}),f.length==m){if(/top|bottom/.test(f[0])||/left|right/.test(f[1])){var v=f[0];f[0]=f[1],f[1]=v}if(/left|right|center|Object/.test(f[0])&&/top|bottom|center|Object/.test(f[1]))return f.map(function(E){return typeof E=="object"?E:d[E]})}}}function l(m){var u=s.consumeRepeated(r,/^/,m);if(u){for(var g=u[0],f=[{"%":50},{"%":50}],v=0,E=!1,T=0;T<g.length;T++){var M=g[T];typeof M=="string"?(E=/bottom|right/.test(M),v={left:0,right:0,center:v,top:1,bottom:1}[M],f[v]=d[M],M=="center"&&v++):(E&&(M=o(M),M["%"]=(M["%"]||0)+100),f[v]=M,v++,E=!1)}return[f,u[1]]}}function c(m){var u=s.consumeRepeated(l,/^,/,m);if(u&&u[1]=="")return u[0]}var d={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},h=s.mergeNestedRepeated.bind(null,s.mergeDimensions," ");s.addPropertiesHandler(a.bind(null,3),h,["transform-origin"]),s.addPropertiesHandler(a.bind(null,2),h,["perspective-origin"]),s.consumePosition=l,s.mergeOffsetList=h;var p=s.mergeNestedRepeated.bind(null,h,", ");s.addPropertiesHandler(c,p,["background-position","object-position"])}(t),function(s){function o(h){var p=s.consumeToken(/^circle/,h);if(p&&p[0])return["circle"].concat(s.consumeList([s.ignore(s.consumeToken.bind(void 0,/^\(/)),a,s.ignore(s.consumeToken.bind(void 0,/^at/)),s.consumePosition,s.ignore(s.consumeToken.bind(void 0,/^\)/))],p[1]));var m=s.consumeToken(/^ellipse/,h);if(m&&m[0])return["ellipse"].concat(s.consumeList([s.ignore(s.consumeToken.bind(void 0,/^\(/)),l,s.ignore(s.consumeToken.bind(void 0,/^at/)),s.consumePosition,s.ignore(s.consumeToken.bind(void 0,/^\)/))],m[1]));var u=s.consumeToken(/^polygon/,h);return u&&u[0]?["polygon"].concat(s.consumeList([s.ignore(s.consumeToken.bind(void 0,/^\(/)),s.optional(s.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),s.consumeSizePairList,s.ignore(s.consumeToken.bind(void 0,/^\)/))],u[1])):void 0}function r(h,p){if(h[0]===p[0])return h[0]=="circle"?s.mergeList(h.slice(1),p.slice(1),["circle(",s.mergeDimensions," at ",s.mergeOffsetList,")"]):h[0]=="ellipse"?s.mergeList(h.slice(1),p.slice(1),["ellipse(",s.mergeNonNegativeSizePair," at ",s.mergeOffsetList,")"]):h[0]=="polygon"&&h[1]==p[1]?s.mergeList(h.slice(2),p.slice(2),["polygon(",h[1],d,")"]):void 0}var a=s.consumeParenthesised.bind(null,s.parseLengthOrPercent),l=s.consumeRepeated.bind(void 0,a,/^/),c=s.mergeNestedRepeated.bind(void 0,s.mergeDimensions," "),d=s.mergeNestedRepeated.bind(void 0,c,",");s.addPropertiesHandler(o,r,["shape-outside"])}(t),function(s,o){function r(c,d){d.concat([c]).forEach(function(h){h in document.documentElement.style&&(a[c]=h),l[h]=c})}var a={},l={};r("transform",["webkitTransform","msTransform"]),r("transformOrigin",["webkitTransformOrigin"]),r("perspective",["webkitPerspective"]),r("perspectiveOrigin",["webkitPerspectiveOrigin"]),s.propertyName=function(c){return a[c]||c},s.unprefixedPropertyName=function(c){return l[c]||c}}(t)}(),function(){if(document.createElement("div").animate([]).oncancel===void 0){var e;if(window.performance&&performance.now)var e=function(){return performance.now()};else var e=function(){return Date.now()};var n=function(o,r,a){this.target=o,this.currentTime=r,this.timelineTime=a,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=o,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},s=window.Element.prototype.animate;window.Element.prototype.animate=function(o,r){var a=s.call(this,o,r);a._cancelHandlers=[],a.oncancel=null;var l=a.cancel;a.cancel=function(){l.call(this);var h=new n(this,null,e()),p=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){p.forEach(function(m){m.call(h.target,h)})},0)};var c=a.addEventListener;a.addEventListener=function(h,p){typeof p=="function"&&h=="cancel"?this._cancelHandlers.push(p):c.call(this,h,p)};var d=a.removeEventListener;return a.removeEventListener=function(h,p){if(h=="cancel"){var m=this._cancelHandlers.indexOf(p);m>=0&&this._cancelHandlers.splice(m,1)}else d.call(this,h,p)},a}}}(),function(e){var n=document.documentElement,s=null,o=!1;try{var r=getComputedStyle(n).getPropertyValue("opacity"),a=r=="0"?"1":"0";s=n.animate({opacity:[a,a]},{duration:1}),s.currentTime=0,o=getComputedStyle(n).getPropertyValue("opacity")==a}catch(c){}finally{s&&s.cancel()}if(!o){var l=window.Element.prototype.animate;window.Element.prototype.animate=function(c,d){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&c[Symbol.iterator]&&(c=Array.from(c)),Array.isArray(c)||c===null||(c=e.convertToArrayForm(c)),l.call(this,c,d)}}}(i)})()});var Ta,H0=b(()=>{"use strict";jn();Ta=class i{constructor(t,e,n,s){this.left=t;this.top=e;this.width=n;this.height=s}clone(){return new i(this.left,this.top,this.width,this.height)}getSize(){return new Bt(this.width,this.height)}ceil(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this}floor(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this}round(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this}translate(t,e){return this.left+=t,this.top+=e,this}scale(t,e){return e=typeof e=="number"?e:t,this.left*=t,this.width*=t,this.top*=e,this.height*=e,this}}});var k0={};at(k0,{XCrop:()=>od,default:()=>HF});var od,HF,D0=b(()=>{"use strict";H0();jn();Mr();od=class extends HTMLElement{connectedCallback(){if(this.image)return;this.innerHTML=`
      <img class="part-image">
      <div class="part-box">
        <div data-dir="nw" class="part-handle nw"></div>
        <div data-dir="ne" class="part-handle ne"></div>
        <div data-dir="sw" class="part-handle sw"></div>
        <div data-dir="se" class="part-handle se"></div>
      </div>`;let t=this.getAttribute("aspect-ratio");this.aspectRatio=t?new Bt(...t.split("/").map(Number)):void 0,this.naturalSize=new Bt(Number(this.getAttribute("width"))||0,Number(this.getAttribute("height"))||0),this.minSize=new Bt(Number(this.getAttribute("min-width"))||20,Number(this.getAttribute("min-height"))||20),this.box=this.querySelector(".part-box"),this.image=this.querySelector("img"),this.src=this.getAttribute("src"),this.updateCropArea=this.updateCropArea.bind(this),this.stopUpdate=this.stopUpdate.bind(this),this.naturalSize.area()||(this.image.width=this.naturalSize.width,this.image.height=this.naturalSize.height),this.image.onload=()=>{let{naturalWidth:e,naturalHeight:n}=this.image;this.naturalSize.width=e,this.naturalSize.height=n;let s=this.offsetWidth,o=Math.round(s*n/e);this.size=new Bt(s,o),this.crop=new Ta(0,0,s,o);let r=s/e;if(this.minSize.scale(r),this.image.style.width=`${s}px`,this.image.style.height=`${o}px`,this.style.width=`${s}px`,this.style.height=`${o}px`,this.updateImageRotation(),this.pendingRect){this.naturalCrop=this.pendingRect,delete this.pendingRect;return}this.setInitialPosition()},this.box.addEventListener("mousedown",e=>this.startUpdate(e)),this.box.addEventListener("touchstart",e=>this.startUpdate(e),{passive:!0}),this.box.addEventListener("dblclick",()=>this.setInitialPosition()),this.image.src=this.src}static get observedAttributes(){return["rotate"]}get rotate(){return Number(this.getAttribute("rotate")||0)%360}set rotate(t){t%=360,t?this.setAttribute("rotate",String(t)):this.removeAttribute("rotate")}get naturalCrop(){return this.crop.clone().scale(this.naturalSize.width/this.size.width).round()}set naturalCrop(t){let e=Math.max(0,t.left),n=Math.max(0,t.top),s=new Ta(e,n,Math.min(this.naturalSize.width,e+t.width)-e,Math.min(this.naturalSize.height,n+t.height)-n);if(!this.size){this.pendingRect=s;return}this.crop=s.scale(this.size.width/this.naturalSize.width).round(),this.update()}attributeChangedCallback(t,e){this.image&&t==="rotate"&&(this.updateImageRotation(Number(e||0)),this.setInitialPosition())}updateImageRotation(t=0){(this.rotate-t)%180!==0&&([this.naturalSize.width,this.naturalSize.height]=[this.naturalSize.height,this.naturalSize.width],[this.size.width,this.size.height]=[this.size.height,this.size.width],[this.minSize.width,this.minSize.height]=[this.minSize.height,this.minSize.width],this.style.width=`${this.size.width}px`,this.style.height=`${this.size.height}px`),this.image.style.transform=this.rotate?`rotate(${this.rotate}deg)`:""}setInitialPosition(){let{crop:t,size:e}=this,n=this.aspectRatio?this.aspectRatio.clone().scaleToFit(this.size):e.clone();t.left=(e.width-n.width)/2,t.top=(e.height-n.height)/2,t.width=n.width,t.height=n.height,this.update()}update(){let{box:t,crop:e}=this;t.style.left=`${e.left}px`,t.style.top=`${e.top}px`,t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,this.dispatchEvent(new Event("change"))}startUpdate(t){if(!(t.currentTarget instanceof HTMLElement&&t.target instanceof HTMLElement))return;let e=t instanceof MouseEvent,{pageX:n,pageY:s}=e?t:t.touches[0];if(this.pointerX=n,this.pointerY=s,this.tempCrop=this.crop.clone(),this.isResize=t.target.hasAttribute("data-dir"),this.isResize){let o=t.target.dataset.dir||"";this.isLeft=["nw","sw"].includes(o),this.isTop=["nw","ne"].includes(o),this.style.cursor=this.isLeft===this.isTop?"nwse-resize":"nesw-resize"}this.classList.add("is-active"),this.ownerDocument.body.addEventListener("mouseup",this.stopUpdate),this.ownerDocument.body.addEventListener("mouseleave",this.stopUpdate),this.ownerDocument.body.addEventListener("mousemove",this.updateCropArea),this.addEventListener("touchend",this.stopUpdate),this.addEventListener("touchmove",this.updateCropArea,{passive:!0})}stopUpdate(){this.style.cursor="",this.classList.remove("is-active"),this.ownerDocument.body.removeEventListener("mouseup",this.stopUpdate),this.ownerDocument.body.removeEventListener("mouseleave",this.stopUpdate),this.ownerDocument.body.removeEventListener("mousemove",this.updateCropArea),this.removeEventListener("touchend",this.stopUpdate),this.removeEventListener("touchmove",this.updateCropArea)}updateCropArea(t){let{pageX:e,pageY:n}=t instanceof MouseEvent?t:t.touches[0],s=e-this.pointerX,o=n-this.pointerY,{crop:r,size:a,minSize:l,aspectRatio:c,isLeft:d,isTop:h,isResize:p}=this,{left:m,top:u,width:g,height:f}=this.tempCrop;if(p){let v=g+(d?-s:s),E=f+(h?-o:o);if(v=si(v,l.width,d?m+g:a.width-m),E=si(E,l.height,h?u+f:a.height-u),c){let T=c.width/c.height;v/E>T?v=E*T:E=v/T}r.left-=d?v-r.width:0,r.top-=h?E-r.height:0,r.width=v,r.height=E}else r.left=si(m+s,0,a.width-g),r.top=si(u+o,0,a.height-f);this.update()}},HF=()=>{customElements.define("x-crop",od)}});var N0={};at(N0,{default:()=>rd});var kF,DF,rd,P0=b(()=>{"use strict";B();G();Z();kF="c-charcounter",DF="is-warning",rd=class extends H{init(){let{element:t}=this,e=Number(t.getAttribute("maxlength"));if(!e)return;t.dataset.maxlength=String(e),t.removeAttribute("maxlength");let n=P("div"),s=P("div",{className:kF,style:`margin-bottom:${ki(t,"margin-bottom")}`},n);t.after(s);let o=()=>{let r=t.value.length,a=e-r,l=a<0;n.textContent=String(a).replace("-","−"),s.classList.toggle(DF,l);let c=ws(t,"border-left-width"),d=ws(t,"border-right-width"),p=(t instanceof HTMLTextAreaElement?Math.max(0,t.offsetWidth-t.scrollWidth):0)-c-d;n.style.right=`${p}px`};t.addEventListener("input",o),o()}}});var $0,F0,B0,U0=b(()=>{"use strict";$0="Не выбран",F0="Сменить",B0="Другой город"});var z0={};at(z0,{default:()=>ad});var j0,PF,ad,W0=b(()=>{"use strict";dt();Wt();U0();B();G();Gt();W();Z();ss();ni();xc();j0="/ajax/geo.cshtml",PF=(i,t,e,n,s)=>L`
<div class="o-pair o-f">
  <div>
    <span class="y-form-badge u-text-overflow">${s||$0}</span>
  </div>
  ${i?$:L`<button class="c-button" type="button" @click=${t}>${F0}</button>`}
</div>
${i&&n.length!==0?L`<div class="o-list o-f">
      ${ct(n,o=>o[0],o=>L`<button class="c-button" type="button" @click=${e} value=${o[0]}>${o[1]}</button>`)}
    </div>`:$}
`,ad=class i extends H{constructor(){super(...arguments);this.list=[]}parsedInit(){this.form=this.element.closest("form");let{country:e="country",city:n="city"}=this.element.dataset;this.countrySelect=this.form[e],this.citySelect=this.form[n],this.filter=this.form.filter,this.filter.setAttribute("autocomplete","nope"),this.filter.placeholder=B0,this.visibility=this.filter.style.visibility==="hidden";let s=lt(".city-wrapper",this.form);if(s){this.optional=!0;let o=this.countrySelect.value!=="";this.cityZippy=wt(s,o),this.cityZippy.duration=400}this.addCity=this.addCity.bind(this),this.onCountryChange=this.onCountryChange.bind(this),this.onCityChange=this.onCityChange.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this),this.changeHandler=this.changeHandler.bind(this),this.selectHandler=this.selectHandler.bind(this),this.countrySelect.addEventListener("change",this.onCountryChange),this.citySelect.addEventListener("change",this.onCityChange),d2Env.isMobile&&(this.filter.addEventListener("focus",this.onFocusIn),this.filter.addEventListener("blur",this.onFocusOut)),this.onCityChange(),this.updateMode()}onCountryChange(){return _(this,null,function*(){this.updateMode(),this.showFilter(!1);let e=this.countrySelect.value,n=e==="0";if(this.optional&&this.cityZippy.expand(e!==""||!n),e!==""){let s=O({_:n?"c":"l"},!n&&{c:e}),o=yield R(j0,this.role,{anchorEl:this.countrySelect,body:s});n?(this.renderCountry(o),yield this.onCountryChange()):(this.renderCity(o),this.onCityChange()),this.updateMode()}})}onCityChange(){this.updateList(),this.updateMode()}addCity(e){d2Env.isMobile&&this.onFocusOut();let{id:n,caption:s}=e.detail.row,o=Array.from(this.citySelect.options).findIndex(r=>r.value===n);if(o!==-1)this.citySelect.selectedIndex=o;else{let r=this.citySelect.lastElementChild;r.remove(),i.appendOption(this.citySelect,n,s,!0,!0),i.appendOption(this.citySelect,r.value,r.text)}this.isButtonsOpen=!1,this.updateMode()}showFilter(e){if(this.filter.value="",e||this.filter.blur(),this.visibility)this.filter.style.visibility=e?"visible":"hidden";else{let n=this.closestSlot(this.filter,"filter");A(n||this.filter,e)}}updateMode(){let e=this.countrySelect.value==="RU"&&!this.citySelect.disabled,n=this.citySelect.value,s=!!n&&n!=="0",o=s?this.citySelect.options[this.citySelect.selectedIndex].text:void 0;this.indicator||(this.indicator=document.createElement("div"),this.indicator.className="y-form-item",this.citySelect.before(this.indicator)),A(this.indicator,e),A(this.citySelect,!e),this.showFilter(e&&(this.isButtonsOpen||!s)),this.ac&&(this.ac.removeEventListener("update",this.addCity),this.ac.dispose()),e&&(this.ac=new Re(`${j0}?_=l&c=${this.countrySelect.value}`,this.filter),this.ac.setRowBuilder(Ys),this.ac.getRenderer().setWidthProvider(this.filter,0,this.filter),this.ac.addEventListener("update",this.addCity)),q(PF(this.isButtonsOpen||!s,this.changeHandler,this.selectHandler,this.list,o),this.indicator)}updateList(){this.list=[];for(let{value:e,text:n,dataset:s}of this.citySelect.options)e&&e!=="0"&&s.skip!==""&&this.list.push([e,n])}changeHandler(){this.isButtonsOpen=!0,this.updateMode()}selectHandler(e){this.citySelect.value=e.target.value,this.isButtonsOpen=!1,Ct(this.citySelect)}onFocusIn(){let{clientHeight:e}=document.documentElement,n=Di(this.filter);setTimeout(()=>{d2Env.isMobile||(document.body.style.minHeight=`${n.top-5-40+e}px`),document.scrollingElement.scrollTo({top:n.top+(d2Env.isMobile?-60:-5),behavior:"instant"})},100)}onFocusOut(){setTimeout(()=>{document.body.style.minHeight="0"},100)}renderCountry(e,n){this.countrySelect.innerHTML="",this.optional&&i.appendOption(this.countrySelect,"",""),e.forEach(s=>i.appendOption(this.countrySelect,s.isocode,s.caption,s.isocode===n))}renderCity(e,n){this.citySelect.innerHTML="";let s=e.length===1;e.forEach(o=>i.appendOption(this.citySelect,o.id,o.caption,s||o.id===n))}static appendOption(e,n="",s=" ",o,r){let a=document.createElement("option");e.appendChild(a),a.value=n,a.textContent=s,a.selected=!!o,r&&(a.dataset.skip="")}}});function q0(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function Ii(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?q0(Object(e),!0).forEach(function(n){$F(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):q0(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function hd(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hd=function(t){return typeof t}:hd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(i)}function $F(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Xi(){return Xi=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Xi.apply(this,arguments)}function FF(i,t){if(i==null)return{};var e={},n=Object.keys(i),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(e[s]=i[s]);return e}function BF(i,t){if(i==null)return{};var e=FF(i,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function Zi(i){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(i)}function Ht(i,t,e){i.addEventListener(t,e,!Qi&&iC)}function Mt(i,t,e){i.removeEventListener(t,e,!Qi&&iC)}function vd(i,t){if(t){if(t[0]===">"&&(t=t.substring(1)),i)try{if(i.matches)return i.matches(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function jF(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function gi(i,t,e,n){if(i){e=e||document;do{if(t!=null&&(t[0]===">"?i.parentNode===e&&vd(i,t):vd(i,t))||n&&i===e)return i;if(i===e)break}while(i=jF(i))}return null}function Ge(i,t,e){if(i&&t)if(i.classList)i.classList[e?"add":"remove"](t);else{var n=(" "+i.className+" ").replace(G0," ").replace(" "+t+" "," ");i.className=(n+(e?" "+t:"")).replace(G0," ")}}function mt(i,t,e){var n=i&&i.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function go(i,t){var e="";if(typeof i=="string")e=i;else do{var n=mt(i,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(i=i.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(e)}function nC(i,t,e){if(i){var n=i.getElementsByTagName(t),s=0,o=n.length;if(e)for(;s<o;s++)e(n[s],s);return n}return[]}function Ri(){var i=document.scrollingElement;return i||document.documentElement}function ne(i,t,e,n,s){if(!(!i.getBoundingClientRect&&i!==window)){var o,r,a,l,c,d,h;if(i!==window&&i.parentNode&&i!==Ri()?(o=i.getBoundingClientRect(),r=o.top,a=o.left,l=o.bottom,c=o.right,d=o.height,h=o.width):(r=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(t||e)&&i!==window&&(s=s||i.parentNode,!Qi))do if(s&&s.getBoundingClientRect&&(mt(s,"transform")!=="none"||e&&mt(s,"position")!=="static")){var p=s.getBoundingClientRect();r-=p.top+parseInt(mt(s,"border-top-width")),a-=p.left+parseInt(mt(s,"border-left-width")),l=r+o.height,c=a+o.width;break}while(s=s.parentNode);if(n&&i!==window){var m=go(s||i),u=m&&m.a,g=m&&m.d;m&&(r/=g,a/=u,h/=u,d/=g,l=r+d,c=a+h)}return{top:r,left:a,bottom:l,right:c,width:h,height:d}}}function J0(i,t,e){for(var n=An(i,!0),s=ne(i)[t];n;){var o=ne(n)[e],r=void 0;if(e==="top"||e==="left"?r=s>=o:r=s<=o,!r)return n;if(n===Ri())break;n=An(n,!1)}return!1}function vo(i,t,e,n){for(var s=0,o=0,r=i.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==ht.ghost&&(n||r[o]!==ht.dragged)&&gi(r[o],e.draggable,i,!1)){if(s===t)return r[o];s++}o++}return null}function Np(i,t){for(var e=i.lastElementChild;e&&(e===ht.ghost||mt(e,"display")==="none"||t&&!vd(e,t));)e=e.previousElementSibling;return e||null}function ri(i,t){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==ht.clone&&(!t||vd(i,t))&&e++;return e}function Y0(i){var t=0,e=0,n=Ri();if(i)do{var s=go(i),o=s.a,r=s.d;t+=i.scrollLeft*o,e+=i.scrollTop*r}while(i!==n&&(i=i.parentNode));return[t,e]}function zF(i,t){for(var e in i)if(i.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===i[e][n])return Number(e)}return-1}function An(i,t){if(!i||!i.getBoundingClientRect)return Ri();var e=i,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var s=mt(e);if(e.clientWidth<e.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Ri();if(n||t)return e;n=!0}}while(e=e.parentNode);return Ri()}function WF(i,t){if(i&&t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function Lp(i,t){return Math.round(i.top)===Math.round(t.top)&&Math.round(i.left)===Math.round(t.left)&&Math.round(i.height)===Math.round(t.height)&&Math.round(i.width)===Math.round(t.width)}function sC(i,t){return function(){if(!Aa){var e=arguments,n=this;e.length===1?i.call(n,e[0]):i.apply(n,e),Aa=setTimeout(function(){Aa=void 0},t)}}}function qF(){clearTimeout(Aa),Aa=void 0}function oC(i,t,e){i.scrollLeft+=t,i.scrollTop+=e}function rC(i){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}function aC(i,t,e){var n={};return Array.from(i.children).forEach(function(s){var o,r,a,l;if(!(!gi(s,t.draggable,i,!1)||s.animated||s===e)){var c=ne(s);n.left=Math.min((o=n.left)!==null&&o!==void 0?o:1/0,c.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,c.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}function VF(){var i=[],t;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(mt(s,"display")==="none"||s===ht.ghost)){i.push({target:s,rect:ne(s)});var o=Ii({},i[i.length-1].rect);if(s.thisAnimationDuration){var r=go(s,!0);r&&(o.top-=r.f,o.left-=r.e)}s.fromRect=o}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(zF(i,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var o=!1,r=0;i.forEach(function(a){var l=0,c=a.target,d=c.fromRect,h=ne(c),p=c.prevFromRect,m=c.prevToRect,u=a.rect,g=go(c,!0);g&&(h.top-=g.f,h.left-=g.e),c.toRect=h,c.thisAnimationDuration&&Lp(p,h)&&!Lp(d,h)&&(u.top-h.top)/(u.left-h.left)===(d.top-h.top)/(d.left-h.left)&&(l=JF(u,p,m,s.options)),Lp(h,d)||(c.prevFromRect=d,c.prevToRect=h,l||(l=s.options.animation),s.animate(c,u,h,l)),l&&(o=!0,r=Math.max(r,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),i=[]},animate:function(n,s,o,r){if(r){mt(n,"transition",""),mt(n,"transform","");var a=go(this.el),l=a&&a.a,c=a&&a.d,d=(s.left-o.left)/(l||1),h=(s.top-o.top)/(c||1);n.animatingX=!!d,n.animatingY=!!h,mt(n,"transform","translate3d("+d+"px,"+h+"px,0)"),this.forRepaintDummy=GF(n),mt(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),mt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){mt(n,"transition",""),mt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function GF(i){return i.offsetWidth}function JF(i,t,e,n){return Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}function YF(i){var t=i.sortable,e=i.rootEl,n=i.name,s=i.targetEl,o=i.cloneEl,r=i.toEl,a=i.fromEl,l=i.oldIndex,c=i.newIndex,d=i.oldDraggableIndex,h=i.newDraggableIndex,p=i.originalEvent,m=i.putSortable,u=i.extraEventProperties;if(t=t||e&&e[Ye],!!t){var g,f=t.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Qi&&!Ia?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=r||e,g.from=a||e,g.item=s||e,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=h,g.originalEvent=p,g.pullMode=m?m.lastPutMode:void 0;var E=Ii(Ii({},u),Oa.getEventProperties(n,t));for(var T in E)g[T]=E[T];e&&e.dispatchEvent(g),f[v]&&f[v].call(t,g)}}function Ie(i){YF(Ii({putSortable:Te,cloneEl:qt,targetEl:z,rootEl:zt,oldIndex:fo,oldDraggableIndex:Sa,newIndex:Je,newDraggableIndex:xn},i))}function ht(i,t){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=t=Xi({},t),i[Ye]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return cC(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ht.supportPointer!==!1&&"PointerEvent"in window&&!Ca,emptyInsertThreshold:5};Oa.initializePlugins(this,i,e);for(var n in e)!(n in t)&&(t[n]=e[n]);dC(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:ZF,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ht(i,"pointerdown",this._onTapStart):(Ht(i,"mousedown",this._onTapStart),Ht(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ht(i,"dragover",this),Ht(i,"dragenter",this)),bd.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Xi(this,VF())}function eB(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function md(i,t,e,n,s,o,r,a){var l,c=i[Ye],d=c.options.onMove,h;return window.CustomEvent&&!Qi&&!Ia?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=i,l.dragged=e,l.draggedRect=n,l.related=s||t,l.relatedRect=o||ne(t),l.willInsertAfter=a,l.originalEvent=r,i.dispatchEvent(l),d&&(h=d.call(c,l,r)),h}function Sp(i){i.draggable=!1}function iB(){Op=!1}function nB(i,t,e){var n=ne(vo(e.el,0,e.options,!0)),s=aC(e.el,e.options,ft),o=10;return t?i.clientX<s.left-o||i.clientY<n.top&&i.clientX<n.right:i.clientY<s.top-o||i.clientY<n.bottom&&i.clientX<n.left}function sB(i,t,e){var n=ne(Np(e.el,e.options.draggable)),s=aC(e.el,e.options,ft),o=10;return t?i.clientX>s.right+o||i.clientY>n.bottom&&i.clientX>n.left:i.clientY>s.bottom+o||i.clientX>n.right&&i.clientY>n.top}function oB(i,t,e,n,s,o,r,a){var l=n?i.clientY:i.clientX,c=n?e.height:e.width,d=n?e.top:e.left,h=n?e.bottom:e.right,p=!1;if(!r){if(a&&pd<c*s){if(!Ra&&(Ma===1?l>d+c*o/2:l<h-c*o/2)&&(Ra=!0),Ra)p=!0;else if(Ma===1?l<d+pd:l>h-pd)return-Ma}else if(l>d+c*(1-s)/2&&l<h-c*(1-s)/2)return rB(t)}return p=p||r,p&&(l<d+c*o/2||l>h-c*o/2)?l>d+c/2?1:-1:0}function rB(i){return ri(z)<ri(i)?1:-1}function aB(i){for(var t=i.tagName+i.className+i.src+i.href+i.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function lB(i){yd.length=0;for(var t=i.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&yd.push(n)}}function fd(i){return setTimeout(i,0)}function Hp(i){return clearTimeout(i)}function cB(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return i.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?Ht(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ht(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Ht(document,"touchmove",this._handleFallbackAutoScroll):Ht(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Mt(document,"dragover",this._handleAutoScroll):(Mt(document,"pointermove",this._handleFallbackAutoScroll),Mt(document,"touchmove",this._handleFallbackAutoScroll),Mt(document,"mousemove",this._handleFallbackAutoScroll)),Q0(),gd(),qF()},nulling:function(){_d=kp=wa=Dp=xa=Mp=Rp=null,ie.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var s=this,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,r);if(_d=e,n||this.options.forceAutoScrollFallback||Ia||Qi||Ca){Ip(e,this.options,a,n);var l=An(a,!0);Dp&&(!xa||o!==Mp||r!==Rp)&&(xa&&Q0(),xa=setInterval(function(){var c=An(document.elementFromPoint(o,r),!0);c!==l&&(l=c,gd()),Ip(e,s.options,c,n)},10),Mp=o,Rp=r)}else{if(!this.options.bubbleScroll||An(a,!0)===Ri()){gd();return}Ip(e,this.options,An(a,!1),!1)}}},Xi(i,{pluginName:"scroll",initializeByDefault:!0})}function gd(){ie.forEach(function(i){clearInterval(i.pid)}),ie=[]}function Q0(){clearInterval(xa)}function Pp(){}function $p(){}var UF,Qi,Ia,V0,Ca,tC,eC,iC,G0,Aa,Ye,ho,wp,Oa,KF,Ue,z,Jt,ft,zt,bs,ud,qt,Cn,fo,Je,Sa,xn,ld,Te,po,Ed,bd,vs,fi,xp,Cp,K0,Z0,La,uo,Ma,Ra,cd,pd,xe,Ap,Op,yd,Td,dd,X0,ZF,lC,cC,XF,QF,dC,mC,hC,Es,tB,ie,wa,kp,Dp,Mp,Rp,_d,xa,Ip,uC,Eo,Ld=b(()=>{UF="1.15.2";Qi=Zi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ia=Zi(/Edge/i),V0=Zi(/firefox/i),Ca=Zi(/safari/i)&&!Zi(/chrome/i)&&!Zi(/android/i),tC=Zi(/iP(ad|od|hone)/i),eC=Zi(/chrome/i)&&Zi(/android/i),iC={capture:!1,passive:!1};G0=/\s+/g;Ye="Sortable"+new Date().getTime();ho=[],wp={initializeByDefault:!0},Oa={mount:function(t){for(var e in wp)wp.hasOwnProperty(e)&&!(e in t)&&(t[e]=wp[e]);ho.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ho.push(t)},pluginEvent:function(t,e,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var o=t+"Global";ho.forEach(function(r){e[r.pluginName]&&(e[r.pluginName][o]&&e[r.pluginName][o](Ii({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](Ii({sortable:e},n)))})},initializePlugins:function(t,e,n,s){ho.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,Xi(n,c.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var r=this.modifyOption(t,o,t.options[o]);typeof r!="undefined"&&(t.options[o]=r)}},getEventProperties:function(t,e){var n={};return ho.forEach(function(s){typeof s.eventProperties=="function"&&Xi(n,s.eventProperties.call(e[s.pluginName],t))}),n},modifyOption:function(t,e,n){var s;return ho.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(s=o.optionListeners[e].call(t[o.pluginName],n))}),s}};KF=["evt"],Ue=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,o=BF(n,KF);Oa.pluginEvent.bind(ht)(t,e,Ii({dragEl:z,parentEl:Jt,ghostEl:ft,rootEl:zt,nextEl:bs,lastDownEl:ud,cloneEl:qt,cloneHidden:Cn,dragStarted:La,putSortable:Te,activeSortable:ht.active,originalEvent:s,oldIndex:fo,oldDraggableIndex:Sa,newIndex:Je,newDraggableIndex:xn,hideGhostForTarget:mC,unhideGhostForTarget:hC,cloneNowHidden:function(){Cn=!0},cloneNowShown:function(){Cn=!1},dispatchSortableEvent:function(a){Ie({sortable:e,name:a,originalEvent:s})}},o))};po=!1,Ed=!1,bd=[],Ra=!1,cd=!1,Ap=[],Op=!1,yd=[],Td=typeof document!="undefined",dd=tC,X0=Ia||Qi?"cssFloat":"float",ZF=Td&&!eC&&!tC&&"draggable"in document.createElement("div"),lC=function(){if(Td){if(Qi)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),cC=function(t,e){var n=mt(t),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=vo(t,0,e),r=vo(t,1,e),a=o&&mt(o),l=r&&mt(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ne(o).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ne(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=s&&n[X0]==="none"||r&&n[X0]==="none"&&c+d>s)?"vertical":"horizontal"},XF=function(t,e,n){var s=n?t.left:t.top,o=n?t.right:t.bottom,r=n?t.width:t.height,a=n?e.left:e.top,l=n?e.right:e.bottom,c=n?e.width:e.height;return s===a||o===l||s+r/2===a+c/2},QF=function(t,e){var n;return bd.some(function(s){var o=s[Ye].options.emptyInsertThreshold;if(!(!o||Np(s))){var r=ne(s),a=t>=r.left-o&&t<=r.right+o,l=e>=r.top-o&&e<=r.bottom+o;if(a&&l)return n=s}}),n},dC=function(t){function e(o,r){return function(a,l,c,d){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(r||h))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return e(o(a,l,c,d),r)(a,l,c,d);var p=(r?a:l).options.group.name;return o===!0||typeof o=="string"&&o===p||o.join&&o.indexOf(p)>-1}}var n={},s=t.group;(!s||hd(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=e(s.pull,!0),n.checkPut=e(s.put),n.revertClone=s.revertClone,t.group=n},mC=function(){!lC&&ft&&mt(ft,"display","none")},hC=function(){!lC&&ft&&mt(ft,"display","")};Td&&!eC&&document.addEventListener("click",function(i){if(Ed)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),Ed=!1,!1},!0);Es=function(t){if(z){t=t.touches?t.touches[0]:t;var e=QF(t.clientX,t.clientY);if(e){var n={};for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Ye]._onDragOver(n)}}},tB=function(t){z&&z.parentNode[Ye]._isOutsideThisEl(t.target)};ht.prototype={constructor:ht,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(uo=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,z):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,s=this.options,o=s.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=s.filter;if(lB(n),!z&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ca&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=gi(l,s.draggable,n,!1),!(l&&l.animated)&&ud!==l)){if(fo=ri(l),Sa=ri(l,s.draggable),typeof d=="function"){if(d.call(this,t,l,this)){Ie({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ue("filter",e,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(h){if(h=gi(c,h.trim(),n,!1),h)return Ie({sortable:e,rootEl:h,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ue("filter",e,{evt:t}),!0}),d)){o&&t.cancelable&&t.preventDefault();return}s.handle&&!gi(c,s.handle,n,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,n){var s=this,o=s.el,r=s.options,a=o.ownerDocument,l;if(n&&!z&&n.parentNode===o){var c=ne(n);if(zt=o,z=n,Jt=z.parentNode,bs=z.nextSibling,ud=n,ld=r.group,ht.dragged=z,vs={target:z,clientX:(e||t).clientX,clientY:(e||t).clientY},K0=vs.clientX-c.left,Z0=vs.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,z.style["will-change"]="all",l=function(){if(Ue("delayEnded",s,{evt:t}),ht.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!V0&&s.nativeDraggable&&(z.draggable=!0),s._triggerDragStart(t,e),Ie({sortable:s,name:"choose",originalEvent:t}),Ge(z,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){nC(z,d.trim(),Sp)}),Ht(a,"dragover",Es),Ht(a,"mousemove",Es),Ht(a,"touchmove",Es),Ht(a,"mouseup",s._onDrop),Ht(a,"touchend",s._onDrop),Ht(a,"touchcancel",s._onDrop),V0&&this.nativeDraggable&&(this.options.touchStartThreshold=4,z.draggable=!0),Ue("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Ia||Qi))){if(ht.eventCanceled){this._onDrop();return}Ht(a,"mouseup",s._disableDelayedDrag),Ht(a,"touchend",s._disableDelayedDrag),Ht(a,"touchcancel",s._disableDelayedDrag),Ht(a,"mousemove",s._delayedDragTouchMoveHandler),Ht(a,"touchmove",s._delayedDragTouchMoveHandler),r.supportPointer&&Ht(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){z&&Sp(z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Mt(t,"mouseup",this._disableDelayedDrag),Mt(t,"touchend",this._disableDelayedDrag),Mt(t,"touchcancel",this._disableDelayedDrag),Mt(t,"mousemove",this._delayedDragTouchMoveHandler),Mt(t,"touchmove",this._delayedDragTouchMoveHandler),Mt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?Ht(document,"pointermove",this._onTouchMove):e?Ht(document,"touchmove",this._onTouchMove):Ht(document,"mousemove",this._onTouchMove):(Ht(z,"dragend",this),Ht(zt,"dragstart",this._onDragStart));try{document.selection?fd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(t,e){if(po=!1,zt&&z){Ue("dragStarted",this,{evt:e}),this.nativeDraggable&&Ht(document,"dragover",tB);var n=this.options;!t&&Ge(z,n.dragClass,!1),Ge(z,n.ghostClass,!0),ht.active=this,t&&this._appendGhost(),Ie({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(fi){this._lastX=fi.clientX,this._lastY=fi.clientY,mC();for(var t=document.elementFromPoint(fi.clientX,fi.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(fi.clientX,fi.clientY),t!==e);)e=t;if(z.parentNode[Ye]._isOutsideThisEl(t),e)do{if(e[Ye]){var n=void 0;if(n=e[Ye]._onDragOver({clientX:fi.clientX,clientY:fi.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);hC()}},_onTouchMove:function(t){if(vs){var e=this.options,n=e.fallbackTolerance,s=e.fallbackOffset,o=t.touches?t.touches[0]:t,r=ft&&go(ft,!0),a=ft&&r&&r.a,l=ft&&r&&r.d,c=dd&&xe&&Y0(xe),d=(o.clientX-vs.clientX+s.x)/(a||1)+(c?c[0]-Ap[0]:0)/(a||1),h=(o.clientY-vs.clientY+s.y)/(l||1)+(c?c[1]-Ap[1]:0)/(l||1);if(!ht.active&&!po){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(ft){r?(r.e+=d-(xp||0),r.f+=h-(Cp||0)):r={a:1,b:0,c:0,d:1,e:d,f:h};var p="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");mt(ft,"webkitTransform",p),mt(ft,"mozTransform",p),mt(ft,"msTransform",p),mt(ft,"transform",p),xp=d,Cp=h,fi=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ft){var t=this.options.fallbackOnBody?document.body:zt,e=ne(z,!0,dd,!0,t),n=this.options;if(dd){for(xe=t;mt(xe,"position")==="static"&&mt(xe,"transform")==="none"&&xe!==document;)xe=xe.parentNode;xe!==document.body&&xe!==document.documentElement?(xe===document&&(xe=Ri()),e.top+=xe.scrollTop,e.left+=xe.scrollLeft):xe=Ri(),Ap=Y0(xe)}ft=z.cloneNode(!0),Ge(ft,n.ghostClass,!1),Ge(ft,n.fallbackClass,!0),Ge(ft,n.dragClass,!0),mt(ft,"transition",""),mt(ft,"transform",""),mt(ft,"box-sizing","border-box"),mt(ft,"margin",0),mt(ft,"top",e.top),mt(ft,"left",e.left),mt(ft,"width",e.width),mt(ft,"height",e.height),mt(ft,"opacity","0.8"),mt(ft,"position",dd?"absolute":"fixed"),mt(ft,"zIndex","100000"),mt(ft,"pointerEvents","none"),ht.ghost=ft,t.appendChild(ft),mt(ft,"transform-origin",K0/parseInt(ft.style.width)*100+"% "+Z0/parseInt(ft.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,s=t.dataTransfer,o=n.options;if(Ue("dragStart",this,{evt:t}),ht.eventCanceled){this._onDrop();return}Ue("setupClone",this),ht.eventCanceled||(qt=rC(z),qt.removeAttribute("id"),qt.draggable=!1,qt.style["will-change"]="",this._hideClone(),Ge(qt,this.options.chosenClass,!1),ht.clone=qt),n.cloneId=fd(function(){Ue("clone",n),!ht.eventCanceled&&(n.options.removeCloneOnHide||zt.insertBefore(qt,z),n._hideClone(),Ie({sortable:n,name:"clone"}))}),!e&&Ge(z,o.dragClass,!0),e?(Ed=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Mt(document,"mouseup",n._onDrop),Mt(document,"touchend",n._onDrop),Mt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",o.setData&&o.setData.call(n,s,z)),Ht(document,"drop",n),mt(z,"transform","translateZ(0)")),po=!0,n._dragStartId=fd(n._dragStarted.bind(n,e,t)),Ht(document,"selectstart",n),La=!0,Ca&&mt(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,s,o,r,a=this.options,l=a.group,c=ht.active,d=ld===l,h=a.sort,p=Te||c,m,u=this,g=!1;if(Op)return;function f(xt,Vt){Ue(xt,u,Ii({evt:t,isOwner:d,axis:m?"vertical":"horizontal",revert:r,dragRect:s,targetRect:o,canSort:h,fromSortable:p,target:n,completed:E,onMove:function(Ce,In){return md(zt,e,z,s,Ce,ne(Ce),t,In)},changed:T},Vt))}function v(){f("dragOverAnimationCapture"),u.captureAnimationState(),u!==p&&p.captureAnimationState()}function E(xt){return f("dragOverCompleted",{insertion:xt}),xt&&(d?c._hideClone():c._showClone(u),u!==p&&(Ge(z,Te?Te.options.ghostClass:c.options.ghostClass,!1),Ge(z,a.ghostClass,!0)),Te!==u&&u!==ht.active?Te=u:u===ht.active&&Te&&(Te=null),p===u&&(u._ignoreWhileAnimating=n),u.animateAll(function(){f("dragOverAnimationComplete"),u._ignoreWhileAnimating=null}),u!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(n===z&&!z.animated||n===e&&!n.animated)&&(uo=null),!a.dragoverBubble&&!t.rootEl&&n!==document&&(z.parentNode[Ye]._isOutsideThisEl(t.target),!xt&&Es(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function T(){Je=ri(z),xn=ri(z,a.draggable),Ie({sortable:u,name:"change",toEl:e,newIndex:Je,newDraggableIndex:xn,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=gi(n,a.draggable,e,!0),f("dragOver"),ht.eventCanceled)return g;if(z.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||u._ignoreWhileAnimating===n)return E(!1);if(Ed=!1,c&&!a.disabled&&(d?h||(r=Jt!==zt):Te===this||(this.lastPutMode=ld.checkPull(this,c,z,t))&&l.checkPut(this,c,z,t))){if(m=this._getDirection(t,n)==="vertical",s=ne(z),f("dragOverValid"),ht.eventCanceled)return g;if(r)return Jt=zt,v(),this._hideClone(),f("revert"),ht.eventCanceled||(bs?zt.insertBefore(z,bs):zt.appendChild(z)),E(!0);var M=Np(e,a.draggable);if(!M||sB(t,m,this)&&!M.animated){if(M===z)return E(!1);if(M&&e===t.target&&(n=M),n&&(o=ne(n)),md(zt,e,z,s,n,o,t,!!n)!==!1)return v(),M&&M.nextSibling?e.insertBefore(z,M.nextSibling):e.appendChild(z),Jt=e,T(),E(!0)}else if(M&&nB(t,m,this)){var x=vo(e,0,a,!0);if(x===z)return E(!1);if(n=x,o=ne(n),md(zt,e,z,s,n,o,t,!1)!==!1)return v(),e.insertBefore(z,x),Jt=e,T(),E(!0)}else if(n.parentNode===e){o=ne(n);var y=0,S,k=z.parentNode!==e,N=!XF(z.animated&&z.toRect||s,n.animated&&n.toRect||o,m),J=m?"top":"left",K=J0(n,"top","top")||J0(z,"top","top"),V=K?K.scrollTop:void 0;uo!==n&&(S=o[J],Ra=!1,cd=!N&&a.invertSwap||k),y=oB(t,n,o,m,N?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,cd,uo===n);var I;if(y!==0){var Y=ri(z);do Y-=y,I=Jt.children[Y];while(I&&(mt(I,"display")==="none"||I===ft))}if(y===0||I===n)return E(!1);uo=n,Ma=y;var et=n.nextElementSibling,Tt=!1;Tt=y===1;var nt=md(zt,e,z,s,n,o,t,Tt);if(nt!==!1)return(nt===1||nt===-1)&&(Tt=nt===1),Op=!0,setTimeout(iB,30),v(),Tt&&!et?e.appendChild(z):n.parentNode.insertBefore(z,Tt?et:n),K&&oC(K,0,V-K.scrollTop),Jt=z.parentNode,S!==void 0&&!cd&&(pd=Math.abs(S-ne(n)[J])),T(),E(!0)}if(e.contains(z))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Mt(document,"mousemove",this._onTouchMove),Mt(document,"touchmove",this._onTouchMove),Mt(document,"pointermove",this._onTouchMove),Mt(document,"dragover",Es),Mt(document,"mousemove",Es),Mt(document,"touchmove",Es)},_offUpEvents:function(){var t=this.el.ownerDocument;Mt(t,"mouseup",this._onDrop),Mt(t,"touchend",this._onDrop),Mt(t,"pointerup",this._onDrop),Mt(t,"touchcancel",this._onDrop),Mt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Je=ri(z),xn=ri(z,n.draggable),Ue("drop",this,{evt:t}),Jt=z&&z.parentNode,Je=ri(z),xn=ri(z,n.draggable),ht.eventCanceled){this._nulling();return}po=!1,cd=!1,Ra=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Hp(this.cloneId),Hp(this._dragStartId),this.nativeDraggable&&(Mt(document,"drop",this),Mt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ca&&mt(document.body,"user-select",""),mt(z,"transform",""),t&&(La&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),ft&&ft.parentNode&&ft.parentNode.removeChild(ft),(zt===Jt||Te&&Te.lastPutMode!=="clone")&&qt&&qt.parentNode&&qt.parentNode.removeChild(qt),z&&(this.nativeDraggable&&Mt(z,"dragend",this),Sp(z),z.style["will-change"]="",La&&!po&&Ge(z,Te?Te.options.ghostClass:this.options.ghostClass,!1),Ge(z,this.options.chosenClass,!1),Ie({sortable:this,name:"unchoose",toEl:Jt,newIndex:null,newDraggableIndex:null,originalEvent:t}),zt!==Jt?(Je>=0&&(Ie({rootEl:Jt,name:"add",toEl:Jt,fromEl:zt,originalEvent:t}),Ie({sortable:this,name:"remove",toEl:Jt,originalEvent:t}),Ie({rootEl:Jt,name:"sort",toEl:Jt,fromEl:zt,originalEvent:t}),Ie({sortable:this,name:"sort",toEl:Jt,originalEvent:t})),Te&&Te.save()):Je!==fo&&Je>=0&&(Ie({sortable:this,name:"update",toEl:Jt,originalEvent:t}),Ie({sortable:this,name:"sort",toEl:Jt,originalEvent:t})),ht.active&&((Je==null||Je===-1)&&(Je=fo,xn=Sa),Ie({sortable:this,name:"end",toEl:Jt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ue("nulling",this),zt=z=Jt=ft=bs=qt=ud=Cn=vs=fi=La=Je=xn=fo=Sa=uo=Ma=Te=ld=ht.dragged=ht.ghost=ht.clone=ht.active=null,yd.forEach(function(t){t.checked=!0}),yd.length=xp=Cp=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":z&&(this._onDragOver(t),eB(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,s=0,o=n.length,r=this.options;s<o;s++)e=n[s],gi(e,r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||aB(e));return t},sort:function(t,e){var n={},s=this.el;this.toArray().forEach(function(o,r){var a=s.children[r];gi(a,this.options.draggable,s,!1)&&(n[o]=a)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(s.removeChild(n[o]),s.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return gi(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var s=Oa.modifyOption(this,t,e);typeof s!="undefined"?n[t]=s:n[t]=e,t==="group"&&dC(n)},destroy:function(){Ue("destroy",this);var t=this.el;t[Ye]=null,Mt(t,"mousedown",this._onTapStart),Mt(t,"touchstart",this._onTapStart),Mt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Mt(t,"dragover",this),Mt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bd.splice(bd.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Cn){if(Ue("hideClone",this),ht.eventCanceled)return;mt(qt,"display","none"),this.options.removeCloneOnHide&&qt.parentNode&&qt.parentNode.removeChild(qt),Cn=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Cn){if(Ue("showClone",this),ht.eventCanceled)return;z.parentNode==zt&&!this.options.group.revertClone?zt.insertBefore(qt,z):bs?zt.insertBefore(qt,bs):zt.appendChild(qt),this.options.group.revertClone&&this.animate(z,qt),mt(qt,"display",""),Cn=!1}}};Td&&Ht(document,"touchmove",function(i){(ht.active||po)&&i.cancelable&&i.preventDefault()});ht.utils={on:Ht,off:Mt,css:mt,find:nC,is:function(t,e){return!!gi(t,e,t,!1)},extend:WF,throttle:sC,closest:gi,toggleClass:Ge,clone:rC,index:ri,nextTick:fd,cancelNextTick:Hp,detectDirection:cC,getChild:vo};ht.get=function(i){return i[Ye]};ht.mount=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(ht.utils=Ii(Ii({},ht.utils),n.utils)),Oa.mount(n)})};ht.create=function(i,t){return new ht(i,t)};ht.version=UF;ie=[],Dp=!1;Ip=sC(function(i,t,e,n){if(t.scroll){var s=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,r=t.scrollSensitivity,a=t.scrollSpeed,l=Ri(),c=!1,d;kp!==e&&(kp=e,gd(),wa=t.scroll,d=t.scrollFn,wa===!0&&(wa=An(e,!0)));var h=0,p=wa;do{var m=p,u=ne(m),g=u.top,f=u.bottom,v=u.left,E=u.right,T=u.width,M=u.height,x=void 0,y=void 0,S=m.scrollWidth,k=m.scrollHeight,N=mt(m),J=m.scrollLeft,K=m.scrollTop;m===l?(x=T<S&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),y=M<k&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(x=T<S&&(N.overflowX==="auto"||N.overflowX==="scroll"),y=M<k&&(N.overflowY==="auto"||N.overflowY==="scroll"));var V=x&&(Math.abs(E-s)<=r&&J+T<S)-(Math.abs(v-s)<=r&&!!J),I=y&&(Math.abs(f-o)<=r&&K+M<k)-(Math.abs(g-o)<=r&&!!K);if(!ie[h])for(var Y=0;Y<=h;Y++)ie[Y]||(ie[Y]={});(ie[h].vx!=V||ie[h].vy!=I||ie[h].el!==m)&&(ie[h].el=m,ie[h].vx=V,ie[h].vy=I,clearInterval(ie[h].pid),(V!=0||I!=0)&&(c=!0,ie[h].pid=setInterval(function(){n&&this.layer===0&&ht.active._onTouchMove(_d);var et=ie[this.layer].vy?ie[this.layer].vy*a:0,Tt=ie[this.layer].vx?ie[this.layer].vx*a:0;typeof d=="function"&&d.call(ht.dragged.parentNode[Ye],Tt,et,i,_d,ie[this.layer].el)!=="continue"||oC(ie[this.layer].el,Tt,et)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&p!==l&&(p=An(p,!1)));Dp=c}},30),uC=function(t){var e=t.originalEvent,n=t.putSortable,s=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=n||o;a();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(h)&&(r("spill"),this.onSpill({dragEl:s,putSortable:n}))}};Pp.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=vo(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(e,s):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:uC};Xi(Pp,{pluginName:"revertOnSpill"});$p.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,s=n||this.sortable;s.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),s.animateAll()},drop:uC};Xi($p,{pluginName:"removeOnSpill"});ht.mount(new cB);ht.mount($p,Pp);Eo=ht});var pC,fC,gC,vC,wd,EC,bC,yC,Fp=b(()=>{"use strict";pC="Кадрирование",fC="Двойной клик выделяет максимально возможный фрагмент.",gC="Если {MAX_IMAGES, plural, one {изображение} other {какое-то из изображений}} нужно скадрировать, сделайте это сейчас. После сохранения формы такой возможности уже не будет.{MAX_IMAGES, plural, one {} other { Также вы можете поменять порядок вывода изображений, перетаскивая их мышкой.}}",vC="Кадрировать",wd="Заменить",EC="Удалить",bC="Вы уверены?",yC="Готово"});var Bp,dB,Ha,TC=b(()=>{"use strict";Bp=`uid_${Math.random()*1e9>>>0}`,dB=0,Ha=i=>Object.prototype.hasOwnProperty.call(i,Bp)&&i[Bp]||(i[Bp]=++dB)});var xd,Cd,LC=b(()=>{"use strict";Ld();F();Fp();B();Gt();be();jn();W();Z();TC();Li();Zt();pt();dn();Lr();xd=i=>i?i.split(",").map(t=>Number(t)):[],Cd=class{constructor(t,e,n){this.container_=n,this.form_=t,this.type_=e,this.fieldName_=e,this.ilgNamespace_=`ilg${this.getId()}`,this.replaceUploaders_=new Map,this.allowCrop_=!0,this.allowReplace_=!0,this.showNumbers_=!1,this.buttonClassName_="c-button u-mobile-100",this.maxImages_=1,this.showCropInfo_=!0,this.removeConfirm_=this.removeConfirm_.bind(this),this.handleReplaceFileUploaded_=this.handleReplaceFileUploaded_.bind(this),this.handleFilesUploaded_=this.handleFilesUploaded_.bind(this),this.form_.addEventListener("imagelist-highlight",s=>this.highlight(s)),w.registerHandlers(this.ilgNamespace_,{remove:this.remove_,link:this.externalLink_,crop:this.showCrop_,cropsubmit:this.updateCrop_},this)}getId(){return this.id_||(this.id_=re())}getAllowCrop(){return this.allowCrop_}setAllowCrop(t){this.allowCrop_=t}setFieldName(t){this.fieldName_=t}getAllowLink(){return this.allowLink_}setAllowLink(t){this.allowLink_=t}getAllowReplace(){return this.allowReplace_}setAllowReplace(t){this.allowReplace_=t}getAspectRatio(){return this.aspectRatio_}setAspectRatio(t,e){this.aspectRatio_=new Bt(t,e)}setShowNumbers(t){this.showNumbers_=t}getShowNumbers(){return this.showNumbers_}setButtonClass(t){this.buttonClassName_=t}getButtonClass(){return this.buttonClassName_}getMaxImages(){return this.maxImages_}setMaxImages(t){this.maxImages_=t}getShowCropInfo(){return this.showCropInfo_}setShowCropInfo(t){this.showCropInfo_=t}getUploader(){return this.uploader_}init(){this.container_.className="c-image-list";let t=document.createElement("div");t.style.position="absolute",this.container_.after(t),this.hidden_=t;let e=0,n;for(;n=this.form_[`${this.fieldName_}-${e+1}`];e++)t.appendChild(n),this.renderThumbnail_(this.getItemInfo_(n));this.imagesNumber_=e,e>0&&(this.cropInfoRendered_=!0);let s=P("div","c-image-list__uploader");this.container_.after(s),this.uploader_=new hi(this.type_,this.buttonClassName_),this.updateUploaderMaxFiles_(),this.uploader_.render(s),this.uploader_.addEventListener("ready",this.handleFilesUploaded_),this.getMaxImages()!==1&&(this.container_.classList.add("c-image-list__drag"),Eo.create(this.container_,{draggable:".c-image-list__item",onSort:this.sync_.bind(this),animation:150,forceFallback:!0,ghostClass:"c-image-list__ghost",handle:".c-image-list__pic-wrapper"}),this.form_.dispatchEvent(new Event("imagelist-update")))}prepareFileInfo_(t,e){let{thumbnail:n,preview:s}=t;return this.allowCrop_&&s&&this.renderCropInfo_(),O({id:t.id,index:e||++this.imagesNumber_,thumbnail:n[0],thumbnailSize:[n[1],n[2]]},this.allowCrop_&&s&&{preview:s[0],previewSize:[s[1],s[2]],crop:t.crop,cropMinSize:t.cropMinSize})}addItem_(t){let e=this.prepareFileInfo_(t);this.createHiddenField_(e);let n=this.renderThumbnail_(e);this.container_.appendChild(n),Ct(this.form_)}replaceItem_(t,e){let n=Number(e.dataset.index),s=this.prepareFileInfo_(t,n),o=this.replaceUploaders_.get(Ha(e));o&&o.dispose(),e.querySelector(".c-image-list__pic-wrapper").innerHTML=this.getThumbnailWrapperHtml_(s),e.querySelector(".c-image-list__controls").innerHTML=this.getThumbnailControlsHtml_(s),this.initReplaceUploader_(e),this.resizeThumbnailCrop_(e,s),this.createHiddenField_(s),this.form_.dispatchEvent(new Event("imagelist-update")),Ct(this.form_)}removeItem_(t){let e=this.replaceUploaders_.get(Ha(t));e&&e.dispose(),t.remove(),this.imagesNumber_--}handleFilesUploaded_(t){t.detail.forEach(e=>this.addItem_(e)),this.updateUploaderMaxFiles_()}handleReplaceFileUploaded_(t){var e;if(t.detail.length>0){let n=(e=t.target.getElement())==null?void 0:e.closest(".c-image-list__item");this.replaceItem_(t.detail[0],n)}}removeConfirm_(t){if(!this.removeConfirmItem_)return;document.removeEventListener("mousedown",this.removeConfirm_,!0),document.removeEventListener("touchstart",this.removeConfirm_,!0);let e=t.target;if(this.removeConfirmItem_.nextSibling.contains(e)){let s=e.closest(".c-image-list__item"),o=this.replaceUploaders_.get(Ha(s));o&&o.dispose(),this.removeItem_(s),this.sync_(),this.updateUploaderMaxFiles_()}this.showRemoveConfirm_(this.removeConfirmItem_,!1),this.removeConfirmItem_=void 0}remove_(t){let e=t.node();this.removeConfirmItem_=e,this.showRemoveConfirm_(e,!0),document.addEventListener("mousedown",this.removeConfirm_,!0),document.addEventListener("touchstart",this.removeConfirm_,!0)}showRemoveConfirm_(t,e){A(t,!e),A(t.nextElementSibling,e)}externalLink_(t){let n=t.node().closest(".c-image-list__item"),{index:s}=n.dataset,o=this.getItemInfo_(this.form_[`${this.fieldName_}-${s}`]);this.form_.dispatchEvent(new CustomEvent("imagelist-link",{detail:{type:this.type_,info:o}}))}highlight(t){let e=t.detail;for(let n of this.container_.children)n.classList.toggle("is-highlighted",e.includes(Number(n.dataset.index)))}updateUploaderMaxFiles_(){let t=Math.max(0,this.getMaxImages()-this.imagesNumber_);this.uploader_.setVisible(t>0),this.uploader_.setMaxFiles(t),this.form_.dispatchEvent(new Event("imagelist-update"))}renderThumbnail_(t){let e=Ei(this.getThumbnailHtml_(t));return this.container_.appendChild(e),this.initReplaceUploader_(e),this.resizeThumbnailCrop_(e,t),e}initReplaceUploader_(t){if(!this.allowReplace_)return;let e=j("js-replace",t),n=new hi(this.type_,"r-button-unstyled c-link c-link--current");n.setButtonCaption(`<div class="m-icon c-icon c-icon--s c-icon--secondary i-replace"></div>${wd}`),n.render(e),n.setVisible(!0),this.replaceUploaders_.set(Ha(t),n),n.addEventListener("ready",this.handleReplaceFileUploaded_)}resizeThumbnailCrop_(t,e){if(!e.preview)return;let n=e.previewSize[0]>e.previewSize[1]?e.thumbnailSize[0]/e.previewSize[0]:e.thumbnailSize[1]/e.previewSize[1],s=[Math.round(e.crop[1]*n),Math.round((e.crop[0]+e.crop[2])*n),Math.round((e.crop[1]+e.crop[3])*n),Math.round(e.crop[0]*n)],o=j("c-image-list__pic-mask",t);o.style.clip=`rect(${s[0]}px, ${s[1]}px, ${s[2]}px, ${s[3]}px)`}renderCropInfo_(){if(!this.showCropInfo_||this.cropInfoRendered_)return;let t=document.createElement("div");t.className="o-b-s",t.innerHTML=tt(gC,{MAX_IMAGES:this.maxImages_}),this.container_.before(t),this.cropInfoRendered_=!0}sync_(){let t=this.getItemsInfo_();this.hidden_.innerHTML="";let e=this.container_.children;for(let s=0,o;o=e[s];s++){let r=Number(o.dataset.index),a=t[r-1];if(a&&(a.index=s+1,this.createHiddenField_(a)),o.dataset.index=String(s+1),this.showNumbers_){let l=j("c-image-list__number",o);l.textContent=String(s+1)}}let n=this.getItemsInfo_();this.form_.dispatchEvent(new CustomEvent("imagelist-sync",{detail:{type:this.type_,info:t,newInfo:n}})),this.form_.dispatchEvent(new Event("imagelist-update")),Ct(this.form_)}getItemInfo_(t){let{dataset:e}=t,n={index:Number(/(\d+)$/.exec(t.name)[1]),id:t.value,thumbnail:e.thumbnail,thumbnailSize:xd(e.thumbnailSize)},{preview:s}=e;return s&&(n.preview=s,n.previewSize=xd(e.previewSize),n.crop=xd(e.crop),n.cropMinSize=xd(e.cropMinSize)),n}getItemsInfo_(){return Q("input",this.hidden_).map(this.getItemInfo_).sort((n,s)=>n.index>s.index?1:-1)}createHiddenField_(t){let e=`${this.fieldName_}-${t.index}`,n=P("input",{type:"hidden",name:e,value:t.id});n.dataset.thumbnail=t.thumbnail,n.dataset.thumbnailSize=t.thumbnailSize.join(","),t.preview&&(n.dataset.preview=t.preview,n.dataset.previewSize=t.previewSize.join(","),n.dataset.crop=t.crop.join(","),n.dataset.cropMinSize=t.cropMinSize.join(",")),this.form_[e]&&this.form_[e].remove(),this.hidden_.appendChild(n)}showCrop_(t){let n=t.node().closest(".c-image-list__item");this.showCropInternal_(n)}showCropInternal_(t){this.cropItem_=t;let{index:e}=this.cropItem_.dataset,n=this.getItemInfo_(this.form_[`${this.fieldName_}-${e}`]);this.cropInfo_=n,this.cropDialog_=Xe({anchor:j("c-image-list__pic",this.cropItem_),className:"c-dialog-crop",title:pC,html:this.getCropDialogHtml_(n)}),this.crop_=this.cropDialog_.contentElement.querySelector("x-crop"),this.crop_.addEventListener("change",()=>{n.crop&&n.crop.length&&(this.crop_.naturalCrop={left:n.crop[0],top:n.crop[1],width:n.crop[2],height:n.crop[3]})},{once:!0})}updateCrop_(t){return _(this,null,function*(){At(t);let e=this.crop_.naturalCrop,n=[e.left,e.top,e.width,e.height],s=t.node(),o=new $e(j("c-dialog-spinner",s)),r=yield R(d2Env.uploadUrl,"upx",{method:"POST",anchorEl:lt('[type="submit"]',s)||void 0,spinner:o,body:{_:"crop",id:this.cropInfo_.id,crop:n.join(","),type:this.type_}});this.cropInfo_.crop=n;let a=this.form_[`${this.fieldName_}-${this.cropInfo_.index}`];a.value=r.id,a.dataset.crop=n.join(","),this.resizeThumbnailCrop_(this.cropItem_,this.cropInfo_),this.cropInfo_=void 0,this.cropItem_=void 0,this.cropDialog_.hide(),this.form_.dispatchEvent(new Event("imagelist-update"))})}getThumbnailHtml_(t){return`<div class="c-image-list__item" data-index="${t.index}"><div class="c-image-list__pic-wrapper">${this.getThumbnailWrapperHtml_(t)}</div><div class="c-image-list__controls">${this.getThumbnailControlsHtml_(t)}</div></div>`}getThumbnailWrapperHtml_(t){return`<div class="c-image-list__pic" style="width:${t.thumbnailSize[0]}px;height:${t.thumbnailSize[1]}px"><img src="${t.thumbnail}" width=${t.thumbnailSize[0]} height=${t.thumbnailSize[1]}><div class="c-image-list__pic-overlay"></div><img src="${t.thumbnail}" class="c-image-list__pic-mask"></div>${this.showNumbers_?`<span class="c-image-list__number">${t.index}</span>`:""}`}getThumbnailControlHtml(t,e,n){return n?`<button type="button" class="r-button-unstyled c-image-list__control m-icon-before c-icon-before c-icon--s c-icon--secondary c-link c-link--current i-${t}" data-action="${this.ilgNamespace_}.${t}">${e}</button>`:""}getThumbnailControlsHtml_(t){return[this.getThumbnailControlHtml("crop",vC,this.allowCrop_&&!!t.preview),this.getThumbnailControlHtml("link","",this.allowLink_),this.allowReplace_?'<div class="c-image-list__replace js-replace"></div>':"",this.getThumbnailControlHtml("remove",EC,!0),`<button type="button" style="display:none" class="r-button-unstyled c-image-list__control c-image-list__remove-confirm">${bC}</button>`].join("")}getCropDialogHtml_(t){return`
<form data-keysubmit data-action="submit:${this.ilgNamespace_}.cropsubmit">
  <div class="o-b-s" style="width:${t.previewSize[0]}px">${fC}</div>
  <x-crop class="c-dialog-crop__preview" src="${t.preview}" style="width:${t.previewSize[0]}px;height:${t.previewSize[1]}px"
    min-width="${t.cropMinSize[0]}" min-height="${t.cropMinSize[1]}"
    ${this.aspectRatio_?`aspect-ratio="${this.aspectRatio_.width}/${this.aspectRatio_.height}"`:""}></x-crop>
  <div class="o-group x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l c-button--wide u-mobile-100" type="submit">${yC}</button>
    <div class="c-dialog-spinner"></div>
  </div>
</form>`}}});var wC={};at(wC,{default:()=>Ad});var Ad,xC=b(()=>{"use strict";G();LC();Ad=class extends H{parsedInit(){let{dataset:t}=this.element,e=this.element.closest("form"),n=t.type||"",{fieldName:s}=t,o=Number(t.max)||1,r=t.ar?t.ar.split(",").map(Number):void 0,a=t.allowlink==="",l=new Cd(e,n,this.element);s&&l.setFieldName(s),l.setAllowLink(a),l.setMaxImages(o),l.setShowNumbers(o>1),d2Env.isMobile&&l.setAllowCrop(!1),r&&r.length===2&&l.setAspectRatio(r[0],r[1]),l.init()}}});var MC={};at(MC,{default:()=>Md});var mB,SC,hB,CC,uB,pB,Sd,AC,Md,RC=b(()=>{"use strict";B();G();Mr();mB="is-active",SC="Пн Вт Ср Чт Пт Сб Вс".split(" "),hB=i=>{let t=Array.from({length:24},(n,s)=>1<<s);return(i?i.split(",").map(n=>Number(n)):[0,0,0,0,0,0,0]).map(n=>t.map(s=>(n&s)!==0))},CC=i=>i.map(e=>e.map((n,s)=>n?1<<s:0).reduce((n,s)=>n|s)).join(","),uB=i=>{let t=Array.from({length:25},(o,r)=>`<th><i>${r}</i></th>`).join(""),e=Array.from({length:24},()=>"<td></td>").join(""),n=SC.map(o=>`<tr><th class="c-hselect__weekday"><span>${o}</span></th>${e}</tr>`).join(""),s=`<table class="c-hselect"><tr class="c-hselect__hours">${t}</tr>${n}</table>`;i.innerHTML=s},pB=i=>{let t=SC.map(o=>`<th><i>${o}</i></th>`).join(""),e=Array.from({length:7},()=>"<td></td>").join(""),s=`<table class="c-hselect">${Array.from({length:25},(o,r)=>`<tr${r===0?' class="c-hselect__weekdays"':""}>
      <th class="c-hselect__hour"><span>${r}</span>${r===0?t:e}</th>
    </tr>`).join("")}</table>`;i.innerHTML=s},Sd=(i,t)=>{d2Env.isMobile&&(t=t[0].map((n,s)=>t.map(o=>o[s])));let e=t.reduce((n,s)=>n.concat(s));i.forEach((n,s)=>n.classList.toggle(mB,e[s]))},AC=(i,t,e,n,s,o)=>{let r=Math.min(t,n),a=Math.min(e,s),l=Math.max(t,n),c=Math.max(e,s),d=(h,p)=>p>=r&&p<=l&&h>=a&&h<=c;return i.map((h,p)=>h.map((m,u)=>{let g=d(p,u);return o?m&&!g:m||g}))},Md=class extends H{init(){this.container=document.createElement("div"),this.element.before(this.container),d2Env.isMobile?pB(this.container):uB(this.container),this.grid=Q("td",this.container);let{width:t,height:e}=this.grid[0].getBoundingClientRect();this.gridWidth=t,this.gridHeight=e,this.data=hB(this.element.value),Sd(this.grid,this.data),this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerClick=this.pointerClick.bind(this),this.pointerDown=this.pointerDown.bind(this),this.attachEvents()}getPosition(t){let e=this.container.getBoundingClientRect(),n=Math.max(0,Math.ceil((si(t.clientX,e.left,e.left+e.width)-e.left)/this.gridWidth)-2),s=Math.max(0,Math.ceil((si(t.clientY,e.top,e.top+e.height)-e.top)/this.gridHeight)-2);return{x:n,y:s}}pointerClick(t){let{x:e,y:n}=this.getPosition(t);this.data=AC(this.data,n,e,n,e,this.data[e][n]),Sd(this.grid,this.data),this.element.value=CC(this.data)}pointerDown(t){this.startHour=void 0,this.startDay=void 0,this.isClearMode=void 0,this.curData=void 0,document.addEventListener("mousemove",this.pointerMove),this.pointerMove(t)}pointerMove(t){t.preventDefault();let{x:e,y:n}=this.getPosition(t);this.startHour=this.startHour!==void 0?this.startHour:e,this.startDay=this.startDay!==void 0?this.startDay:n,this.isClearMode===void 0&&(this.isClearMode=this.data[n][e]||!1),this.curData=AC(this.data,this.startHour,this.startDay,e,n,this.isClearMode),Sd(this.grid,this.curData),document.addEventListener("mouseup",this.pointerUp)}pointerUp(){this.curData&&(this.data=this.curData,Sd(this.grid,this.data),this.element.value=CC(this.data)),this.attachEvents()}attachEvents(){this.container.removeEventListener("mousedown",this.pointerDown),document.removeEventListener("mousemove",this.pointerMove),document.removeEventListener("mouseup",this.pointerUp),d2Env.isMobile?this.container.addEventListener("click",this.pointerClick):this.container.addEventListener("mousedown",this.pointerDown)}}});var IC={};at(IC,{default:()=>gB});var ka,Up,fB,gB,OC=b(()=>{"use strict";F();X();Z();ka="quick-filter",Up=new Map,fB=i=>{let t=C(ka,"root");if(!t)return;Up.size===0&&ut(ka,"item",t).forEach(o=>{Up.set(o,C(ka,"text",o).textContent.toLowerCase())});let e=i.node().value.toLowerCase(),n=!0;for(let[o,r]of Up){let a=r.includes(e);a&&(n=!1),A(o,a)}let s=C(ka,"empty",t);s&&A(s,n)},gB=()=>{w.registerHandlers(ka,{filter:fB})}});var jp,HC,zp,Wp,kC=b(()=>{"use strict";jp="Редактировать",HC="Скопировать ссылку",zp="Удалить из Истории",Wp="Очистить историю"});var DC={};at(DC,{default:()=>yB});var qp,EB,bB,yB,NC=b(()=>{"use strict";F();Kt();kC();X();W();Kn();Gi();pt();qp="history",EB=i=>_(void 0,null,function*(){let t=i.node(),e=[{action:"delete",text:zp,confirmTitle:`${zp}?`,confirm:$t,delete:!0}];"clipboard"in navigator&&e.unshift({action:"copy",text:HC}),new ae(t,e,jp).addEventListener("select",s=>_(void 0,null,function*(){Ut();let o=s.detail;o==="copy"?yield navigator.clipboard.writeText(vt(t,"quick-filter","item").querySelector("a").href):o==="delete"&&(yield R("/my/history/delete",`${qp}.delete`,{method:"POST",anchorEl:t,body:{id:t.dataset.id,kind:t.dataset.kind}}),vt(t,"quick-filter","item").remove())}))}),bB=i=>_(void 0,null,function*(){let t=i.node();new ae(t,[{action:"delete",text:Wp,confirmTitle:`${Wp}?`,confirm:$t,delete:!0}],jp).addEventListener("select",n=>_(void 0,null,function*(){Ut(),n.detail==="delete"&&(yield R("/my/history/clear",`${qp}.delete-all`,{method:"POST",anchorEl:t,body:""}),Rt(),d2Env.isApp&&(yield we(50)),window.location.reload())}))}),yB=()=>{w.registerHandlers(qp,{menu:EB,"top-menu":bB})}});var PC,$C,Da,FC,_B,TB,LB,wB,BC,UC=b(()=>{"use strict";F();B();W();Zt();pt();PC="albums",$C="/ajax/albums.cshtml",FC=(i,t)=>_(void 0,null,function*(){let e=t?t.key.value:i.dataset.key,n=O({_:"picadd",key:e},t&&{album:t.album.value,caption:t.caption.value,delete:t.delete.value}),s=yield R($C,PC,{method:"POST",anchorEl:i,body:n});Rt();let o=Da&&It(Da,"albums-pics-item");if(o&&s.delete&&o.dataset.isowner===""){o.remove();return}let r=Ei(s.html);if(Da.replaceWith(r),o){let l=j("js-album-caption",o).innerHTML,c=j("albums-pics-item-caption",o);c||(c=document.createElement("div"),c.className="albums-pics-item-caption",j("albums-pics-item-i",o).after(c)),l?c.innerHTML=l:c.remove()}}),_B=i=>{let t=i.node();Da=t,FC(t)},TB=i=>_(void 0,null,function*(){let t=i.node(),e={_:"geteditform",key:t.dataset.key},n=yield R($C,`${PC}-edit`,{method:"POST",anchorEl:t,body:e}),{html:s}=n;s&&(Da=t,Xe({anchor:t,title:n.header,html:s}))}),LB=i=>{At(i);let t=i.node();FC(t.submitbtn,t)},wB=i=>{let t=i.node();t.form.delete.value="1",xs(t.form)},BC=()=>{w.registerHandlers("albums",{add:_B,edit:TB,submit:LB,delete:wB})}});var jC,zC,WC=b(()=>{"use strict";jC="Удалить содержимое?",zC="Содержимое Альбома будет утеряно навсегда. Вы уверены?"});var CB,Na,qC=b(()=>{"use strict";F();WC();Kt();B();G();W();le();Z();Zt();pt();CB="/ajax/albums.cshtml",Na=class extends H{parsedInit(){this.maxAlbums_=Number(this.element.dataset.maxAlbums||100),this.listEl_=j("albums-list"),this.newEl_=j("albums-new"),w.registerHandlers("albumslist",{sortname:this.onSort_,sortsize:this.onSort_,sortupdate:this.onSort_,edit:this.onEdit_,submit:this.onSubmit_,update:this.onAction_,create:this.onAction_,delete:this.onDelete_,cancel:this.cancel_},this)}onEdit_(t){this.cancel_();let e=t.node(),n=It(e,"albums-list-row"),s=j("albums-list-title-i",n),o=e.dataset.public==="1",r=e.dataset.protected==="1";this.active_=!0,this.activeRow_=n;let a=this.getForm_(!0,r,o,_e(s.innerHTML));n.after(a),A(n,!1),j("albums-form-input",a).focus()}onDelete_(t){return _(this,null,function*(){let e=t.node();(yield ot(jC,zC,e,$t))&&this.onAction_(t)})}onSubmit_(t){At(t);let e=t.node(),n=e.dataset.mode||"create";this.request_(n,e)}onAction_(t){let e=t.node(),n=t.actionName();this.request_(n,e)}onSort_(t){let e=t.actionName();this.cancel_();let n=Ft("albums-list-row",this.listEl_),s=[],o;for(let a=0;o=n[a];a++){let l=j("c-counter",o);s[a]=[o,j("albums-list-title-i",o).textContent,l?Number(l.innerHTML):0,Number(o.dataset.update)]}let r=e==="sortname"?0:e==="sortsize"?1:2;s.sort((a,l)=>{let c=a[r+1],d=l[r+1];return r===0?c>d?1:-1:c<d?1:-1}),this.listEl_.append(...s.map(a=>a[0]))}cancel_(){if(!this.active_)return;this.active_=!1;let t=It(this.element,"albums-list-row");t&&t.remove(),A(this.element,!1),this.newEl_.after(this.element),this.activeRow_&&(A(this.activeRow_,!0),this.activeRow_=void 0);let e=Ft("albums-list-row",this.listEl_);A(this.newEl_,!(e&&e.length&&e.length>=this.maxAlbums_))}request_(t,e){return _(this,null,function*(){let n=this.element.title.value;if(!n)return;let s=this.element.public.value==="public",o=O(O({_:t},t!=="delete"&&{title:n,public:s}),t!=="create"&&{id:It(this.element,"albums-list-row").previousElementSibling.dataset.id}),{html:r}=yield R(CB,"albums",{method:"POST",anchorEl:e,body:o}),l=It(this.element,"albums-list-row").previousElementSibling;t!=="delete"&&(l?l.insertAdjacentHTML("afterend",r||""):this.listEl_.insertAdjacentHTML("beforeend",r||"")),this.cancel_(),t!=="create"&&l&&l.remove()})}getForm_(t,e,n,s){this.element.dataset.mode=t?"update":"create",A(this.element,!0),A(j("albums-form-newbtns",this.element),!t),A(j("albums-form-editbtns",this.element),t),A(j("albums-form-delete",this.element),!e),this.element.public.value=n?"public":"private",this.element.title.value=s||"";let o=document.createElement("div");return o.className="albums-list-row albums-list-row-new",o.appendChild(this.element),o}}});var AB,Pa,VC=b(()=>{"use strict";B();G();AB="albums-pics-item",Pa=class extends H{parsedInit(){this.update(),this.element.style.visibility="visible",new MutationObserver(()=>this.update()).observe(this.element,{childList:!0})}update(){let t,e=()=>-t,n=Ft(AB,this.element);if(!n)return;let s=this.element.offsetWidth,o=[],r=[{left:0,top:0}];for(let l=0,c;c=n[l];l++){let{offsetWidth:d,offsetHeight:h}=c,p,m=0,u=0,g=0;t=r[0].top;let f;for(f=1;f<r.length&&r[f].left<d;f++)t=Math.max(t,r[f].top);p=t,u=f,g=e();for(let S=1;S<r.length&&r[S].left+d<=s;S++){for(t=r[S].top,f=S+1;f<r.length&&r[f].left-r[S].left<d;f++)t=Math.max(t,r[f].top);let k=e();k>g&&(m=S,u=f,p=t,g=k)}let{offsetLeft:v,offsetTop:E}=c,T={left:r[m].left,top:p};(E!==T.top||v!==T.left)&&o.push([c,T]);let M=r[u-1].top,x=r[u]?r[u].left:s,y=r[m].left+d;r[m].top=p+h,y<x?r.splice(m+1,u-m-1,{left:y,top:M}):r.splice(m+1,u-m-1)}for(let l=0,c;c=o[l];l++)c[0].style.top=`${c[1].top}px`,c[0].style.left=`${c[1].left}px`;let a=0;for(let l=0;l<r.length;l++)a=Math.max(a,r[l].top);this.element.style.height=`${a+20}px`}}});var GC={};at(GC,{default:()=>SB});var SB,JC=b(()=>{"use strict";G();UC();qC();VC();SB=()=>{BC(),U("albums",Na),d2Env.isMobile||U("albumsgrid",Pa)}});var YC,KC=b(()=>{"use strict";YC="Завершить сеанс"});var ZC={};at(ZC,{default:()=>kB});var RB,IB,OB,HB,kB,XC=b(()=>{"use strict";dt();pn();F();KC();Kn();me();RB="sessions",IB="/_api/sessions/logout",OB=i=>L`
<form action=${IB} method="post">
  ${Qt(i)}
  <button class="c-button c-button--primary c-button--l c-button--red u-100 o-t-l" type="submit">
    ${YC}
  </button>
</form>
`,HB=i=>{let t=i.node(),e=t.querySelector("template"),{title:n}=e.dataset,s=e.dataset.current==="",o=new _t({anchor:t,className:"c-modal-popscreen",title:n},!0,!0);o.addEventListener("submit",()=>_(void 0,null,function*(){d2Env.isApp&&(yield we(50)),window.location.reload()})),o.show(s?L`${Qt(e.innerHTML)}`:OB(e.innerHTML))},kB=()=>{w.registerHandlers(RB,{show:HB})}});var QC,tA,eA,iA,nA=b(()=>{"use strict";QC="скрытая",tA="заблокирована",eA="Все записи",iA="Подходящих записей нет. Попробуйте изменить или переформулировать запрос."});var oA={};at(oA,{default:()=>UB});var $a,sA,NB,PB,$B,FB,BB,Vp,UB,rA=b(()=>{"use strict";dt();Qo();Wt();F();nA();X();Ji();W();le();mn();xi();Be();sr();$a="logbook-search",sA=(i,t)=>L`
<a class="x-box c-post-lcard c-darkening-hover-container" href=${i.link} data-track=${ci(t)}>
  <div class="c-post-lcard__pic">
    ${de({images:[i.photo]},2,{size:{width:1,height:1},className:"is-rounded has-darkening-hover"})}
    ${i.mediaPreview?L`<div class="c-post-lcard__media-preview c-darkening-hover" style="background-image: url(${i.mediaPreview})"></div>`:$}
  </div>
  <div class="c-post-lcard__body">
    <div class="c-post-lcard__caption u-line-clamp-2">
      ${i.title&&!i.public?L`<span class="c-entity-hidden">${QC}</span>`:$}
      ${i.title&&!i.moderatorAllowed?L`<span class="c-entity-hidden">${tA}</span>`:$}
      ${_e(i.title||"")}
    </div>
    <div class="u-text-overflow x-secondary x-secondary-color">
      ${i.category}
    </div>
    <div class="c-post-lcard__meta x-secondary x-secondary-color">
      <div class="c-icon-counter"><span class="m-icon c-icon c-icon--s c-icon--secondary i-like-s"></span> ${i.likeCount}</div>
      <div class="c-icon-counter"><span class="m-icon c-icon c-icon--s c-icon--secondary i-comments-s"></span> ${i.commentCount}</div>
      <div data-tt=${uc(i.date,!0)}>${i.dateOffset}</div>
      ${!d2Env.isMobile&&i.cost?L`<div>${i.cost}</div>`:$}
      ${!d2Env.isMobile&&i.mileage?L`<div data-tt=${i.mileage.altText}>${_e(i.mileage.text)}</div>`:$}
    </div>
  </div>
</a>
`,NB=()=>L`
<div class="c-empty-content">
  <div class="c-empty-content__header">${iA}</div>
</div>
`,PB=i=>ct(i.posts,t=>t.link,t=>sA(t,i.clickMetricToken)),$B=i=>{let t=[];return i.categories.forEach(e=>{t.push(e.category),t.push(...e.posts)}),ct(t,e=>typeof e=="string"?e:e.link,e=>typeof e=="string"?L`<h4 class="x-group-header c-lb-list__caption">${e}</h4>`:sA(e,i.clickMetricToken))},FB=i=>i.moreLink?L`<a class="x-box-more" href=${i.moreLink}>${eA}</a>`:$,BB=i=>"categories"in i,Vp=un(()=>_(void 0,null,function*(){let i=C($a,"form"),t=i.sort?i.sort.value:"ByDate",[e,n]=yield Fe(()=>R(i.action,$a,{silent:!0,throwError:!0,body:{query:i.query.value.trim(),sort:t}}));if(n){let s=C($a,"container");ue(s),q(BB(n)?$B(n):n.posts.length===0?NB():PB(n),s);let o=C($a,"more");ue(o),q(FB(n),o)}else e&&e.request.status===429&&Vp()}),400),UB=()=>{w.registerHandlers($a,{sort:Vp,search:he(Vp,300)})}});var aA={};at(aA,{default:()=>Rd});var jB,zB,WB,Rd,lA=b(()=>{"use strict";Ld();B();G();W();jB=".js-car-drag-item",zB=".js-car-drag-handle",WB=".c-car-card[data-id]",Rd=class extends H{parsedInit(){Eo.create(this.element,O({draggable:jB,onSort:()=>this.save(),animation:150,forceFallback:!navigator.userAgent.toLowerCase().includes("firefox"),ghostClass:"c-car-draglist__item--ghost"},d2Env.isMobile&&{handle:zB}))}save(){let t=Q(WB,this.element).map(n=>n.dataset.id),e=new URLSearchParams({_:"sort"});t.forEach(n=>e.append("ids",n)),R("/ajax/cars.cshtml",this.role,{method:"POST",silent:!0,body:e.toString()})}}});var dA={};at(dA,{default:()=>Od});var cA,Id,Od,mA=b(()=>{"use strict";G();pe();cA={brand:"brand",model:"model",generation:"generation",productionYear:"productionYear",purchaseYear:"purchaseYear",info:"comment",color:"color",belongState:"kind",description:"text_start",engine:"engine",displacement:"displacement",transmission:"transmission",power:"power",wheelDrive:"wheelDrive",licensePlateNumber:"licensePlateNumber",VIN:"vin",text_ok:"text_ok"},Id=i=>{bt(`car_add_fill_${i}`)},Od=class extends H{init(){this.trackedNames=[],this.element.addEventListener("change",this),this.element.addEventListener("input",this);let t=new MutationObserver(e=>{e.forEach(n=>{Array.from(n.addedNodes).filter(o=>o.nodeType===1).some(o=>o.classList.contains("c-image-list__item"))&&(t.disconnect(),Id("photo"))})});t.observe(this.element,{childList:!0,subtree:!0}),Id("start")}handleEvent(t){let e=t.target;if(!this.descriptionTracked&&e.name==="description"){let n=Number(e.dataset.minlength);e.value.length>=n&&(this.descriptionTracked=!0,Id("text_ok"))}e.name&&e.name in cA&&!this.trackedNames.includes(e.name)&&(this.trackedNames.push(e.name),Id(cA[e.name]))}}});var Gp,hA,uA,Jp,pA,Yp,fA,gA=b(()=>{"use strict";Gp="Убрать машину из профиля",hA="Вы не сможете восстановить страницу машины, все комментарии, фото и записи в бортжурнале после удаления.",uA="Удалить мою машину",Jp="Сделать бывшей",pA="Сохраним бортжурнал, комментарии и подписчиков. Добавим пометку «Бывшая»",Yp="Удалить совсем",fA="Удалим страницу машины, все комментарии, фото и записи в бортжурнале. Без возможности восстановления."});var EA={};at(EA,{default:()=>KB});var VB,Kp,vA,GB,JB,YB,KB,bA=b(()=>{"use strict";dt();F();gA();me();pt();VB="/ajax/cars.cshtml",Kp=!1,vA=i=>{i.target.form.formaction.value=i.target.value},GB=i=>_(void 0,null,function*(){vA(i),Kp||(i.preventDefault(),(yield ot(Gp,hA,i.target,uA))&&(Kp=!0,i.target.click())),Kp=!1}),JB=(i,t)=>L`
<form action="${VB}" class="x-form o-t-s" novalidate data-role="form">
  <input type="hidden" name="formaction">
  ${i||t?$:L`<div class="x-box">
      <h2 class="x-header x-header--xs">${Jp}</h2>
      <div class="x-text o-b-l">${pA}</div>
      <button class="c-button c-button--primary c-button--l u-100" type="submit" value="ex"
        @click=${vA}>${Jp}</button>
    </div>`}
  <div class="x-box">
    <h2 class="x-header x-header--xs">${Yp}</h2>
    <div class="x-text o-b-l">${fA}</div>
    <button class="c-button ${i||t?"c-button--primary":""} c-button--l u-100" type="submit" value="delete"
      @click=${GB}>${Yp}</button>
  </div>
</form>
`,YB=i=>{let t=i.node(),e=t.dataset.params==="ex",n=t.dataset.params==="delete",s=new _t({anchor:t,title:Gp,className:"c-modal__content--confirm"});q(JB(e,n),s.element),s.setFormDataTransformer(o=>({_:"archive",archive:o.formaction.value,id:t.dataset.id})),s.addEventListener("submit",()=>{Rt(),window.location.reload()}),s.show()},KB=()=>{w.registerHandlers("cardel",{confirm:YB})}});var yA={};at(yA,{default:()=>t2});var Zp,ZB,XB,QB,t2,_A=b(()=>{"use strict";F();X();ni();Zp="caredit",ZB=i=>{let t=i.node(),e=C(Zp,"autoinfo");e&&(e.textContent=t.value)},XB=i=>{let t=i.node(),e=t.form.purchaseYear,n=Number(t.options[1].value),s=Number(t.value)||n,o=Number(e.value);e.options.length=1;for(let r=n;r>=s;r--){let a=document.createElement("option");e.appendChild(a),a.value=String(r),a.textContent=String(r),a.selected=o===r}},QB=i=>{let t=i.node(),n=t.options[t.selectedIndex].dataset.noTransmission==="",s=C(Zp,"transmission");wt(s).expand(!n)},t2=()=>{w.registerHandlers(Zp,{info:ZB,years:XB,engine:QB})}});var e2,TA,LA=b(()=>{"use strict";e2=i=>String(Math.ceil(i)),TA=(i,t,e,n,s=e2)=>{let o,r=a=>{o||(o=a);let l=Math.min((a-o)/n,1);i.textContent=s(l*(e-t)+t),l<1&&requestAnimationFrame(r)};requestAnimationFrame(r)}});var wA={};at(wA,{default:()=>s2});var i2,n2,s2,xA=b(()=>{"use strict";X();nn();LA();i2=1500,n2=i=>`${i.toFixed(2)}%`.replace(".",","),s2=(i,t)=>{let e=(n,s,o)=>{ut(t,s,n).forEach(a=>{let l=Number(a.dataset.value)||0;TA(a,0,l,i2,o)})};ke(i,{onEnter:()=>{i.classList.remove("is-unrevealed"),e(i,"percent",n2),e(i,"num")}})}});var CA,AA,SA,MA,RA,IA,OA,HA,kA,DA,NA,PA,$A,FA,BA,UA,jA,zA,WA,qA,VA,GA,Xp=b(()=>{"use strict";CA="Вы уверены?",AA="Вы действительно хотите отказать этому пользователю в доступе к сообществу? Укажите причину отказа.",SA="Причина",MA="Принимайте новичка",RA="Вступление в это сообщество требует подтверждения его модераторов. Вы также можете оставить комментарий.",IA="Отправить запрос",OA="Покинуть сообщество?",HA="Покинуть",kA="Пригласить в сообщество",DA="Исключить из сообщества",NA="Сменить владельца сообщества",PA="Внимание. После передачи прав владения вы станете обычным участником сообщества.",$A="Ник или URL пользователя",FA="Комментарий пользователю",BA="Пригласить",UA="Выгнать",jA="Сменить",zA="Введите ник или URL пользователя",WA="Оставьте комментарий",qA="Приглашение успешно отправлено",VA="Пользователь успешно выгнан",GA="Сообщество успешно поменяло владельца"});var YA,Hd,KA,ZA,XA=b(()=>{"use strict";dt();Kt();Xp();be();YA=()=>L`
<form action="/ajax/community.apply.cshtml" data-keysubmit data-role="form">
  <div class="o-b">${RA}</div></div>
  <div class="y-form-item">
    <textarea class="y-textarea y-textarea--narrow u-100" name="text" data-role="taflexible" data-autofocus></textarea>
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l c-button--wide u-100"
        type="submit">${IA}</button>
  </div>
</form>
`,Hd=(i,t,e,n)=>i==="invite"?t:i==="suspend"?e:n,KA=i=>L`
<form action="/ajax/community.${i}.cshtml" data-keysubmit data-role="form">
  ${i==="setowner"?L`<div class="o-b">${PA}</div></div>`:$}
  <div class="y-form-item o-t-s">
    <label class="y-form-legend" for="dlg.n">${$A}</label>
    <input class="y-input u-100" type="text" id="dlg.n" name="name" data-autofocus minlength="3">
  </div>
  <div class="y-form-item">
    <label class="y-form-legend" for="dlg.t">${FA}</label>
    <textarea class="y-textarea y-textarea--narrow u-100" name="text" id="dlg.t" data-role="taflexible"></textarea>
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l c-button--wide u-100"
      type="submit">${Hd(i,BA,UA,jA)}</button>
  </div>
</form>
`,ZA=()=>L`
<form action="/ajax/community.applicants.cshtml" data-role="form" data-keysubmit>
  <div class="o-b">${AA}</div>
  <div class="y-form-item">
    <label class="y-form-legend" for="dlg.t">${SA}</label>
    <textarea class="y-textarea y-textarea--narrow u-100" name="text" id="dlg.t" data-autofocus></textarea>
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend o-group o-group--v">
    <button type="submit" class="c-button c-button--primary c-button--alt-l u-mobile-100 is-equal">
      ${tt(aE,{Gender:d2Env.gender})}
    </button>
    <button class="c-button c-button--alt-l u-mobile-100 is-equal" type="button" data-action="dialog.close">
      ${tt(lE,{Gender:d2Env.gender})}
    </button>
  </div>
</form>
`});var iS={};at(iS,{default:()=>c2});var o2,QA,tS,eS,r2,a2,l2,Qp,c2,nS=b(()=>{"use strict";dt();F();Xp();B();W();Z();me();pt();Wi();dn();Ne();XA();o2="community",QA=i=>_(void 0,null,function*(){let t=i.actionName(),e=i.node();yield R("/ajax/community.inviteaccept.cshtml",{method:"POST",body:{_:t,community:e.value},anchorEl:e}),window.location.reload()}),tS=i=>{let t=It(i,"js-request");t.classList.add("is-deleted"),t.querySelectorAll("button").forEach(n=>{n.disabled=!0})},eS=i=>_(void 0,null,function*(){let t=i.actionName(),e=i.node(),n=It(e,"js-request");if(n&&n.classList.contains("is-deleted"))return;let s=It(e,"js-communityid").dataset.id;if(t==="accept"){let o=j("js-spinner",e.parentElement),r=new $e(o);yield R("/ajax/community.applicants.cshtml",{method:"POST",body:{_:"accept",community:s,user:e.value},anchorEl:e,spinner:r}),tS(e)}else{let o=new _t({anchor:e,className:"c-dialog-comm",title:CA});q(ZA(),o.element),o.setFormDataTransformer(r=>({_:"decline",community:s,user:e.value,comment:r.text.value})),o.addEventListener("submit",()=>{tS(e)}),o.show()}}),r2=i=>{let e=i.node().parentElement.nextElementSibling;e&&A(e,e.style.display==="none")},a2=i=>_(void 0,null,function*(){let t=i.node();if(Se(t))return;if(t.dataset.open==="1"){yield R("/ajax/community.apply.cshtml",{method:"POST",body:{community:t.value},anchorEl:t}),window.location.reload();return}let e=new _t({anchor:t,className:"c-dialog-comm",title:MA});q(YA(),e.element),e.setFormDataTransformer(n=>({community:t.value,text:n.text.value})),e.addEventListener("submit",()=>{window.location.reload()}),e.show()}),l2=i=>_(void 0,null,function*(){let t=i.node();(yield ot(OA,void 0,t,HA))&&(yield R("/ajax/community.leave.cshtml",{method:"POST",body:{community:t.value},anchorEl:t}),window.location.href="/communities/")}),Qp=i=>{let t=i.actionName(),e=i.node(),n=Hd(t,kA,DA,NA),s=new _t({anchor:e,className:"c-dialog-comm",title:n});q(KA(t),s.element),s.setFormDataTransformer(o=>({community:e.value,name:o.name.value,text:o.text.value||""})),s.addEventListener("submit",()=>{setTimeout(()=>{jt(Hd(t,qA,VA,GA),e)})}),s.show(),_i(s.form,["name",zA,"minlength"]),t!=="invite"&&_i(s.form,["text",WA,"required"])},c2=()=>{w.registerHandlers(o2,{invaccept:QA,invreject:QA,accept:eS,reject:eS,history:r2,join:a2,leave:l2,invite:Qp,suspend:Qp,setowner:Qp})}});var oS={};at(oS,{default:()=>d2});var Fa,sS,d2,rS=b(()=>{"use strict";F();X();Fa="comm-search",sS=i=>{let t=C(Fa,"list");if(!t)return;let e=ut(Fa,"row",t).map(o=>({element:o,title:C(Fa,"alpha",o).textContent.toLowerCase(),members:Number(C(Fa,"members",o).textContent)||0})),s=i.node().value==="alpha";e.sort((o,r)=>{let a=s?o.title:o.members,l=s?r.title:r.members;return s?a>l?1:-1:a<l?1:-1}),e.forEach(o=>{t.appendChild(o.element)})},d2=()=>{w.registerHandlers(Fa,{members:sS,alpha:sS})}});var lS={};at(lS,{default:()=>kd});var tf,aS,kd,cS=b(()=>{"use strict";cr();G();Gt();le();Z();ge();tf=i=>i.querySelectorAll("input:checked").length>1,aS=i=>{let t=i.querySelector("input:checked");t&&Lt(t,{behavior:"instant",block:"nearest"})},kd=class extends H{parsedInit(){this.form=this.element.closest("form"),this.text=this.slot("text"),this.defaultModels=(this.element.dataset.models||"").split(","),this.defaultGenerations=(this.element.dataset.generations||"").split(","),this.max=Number(this.element.dataset.max||1/0),this.brand=this.slot("brand"),this.model=this.slot("model"),this.generation=this.slot("generation"),this.brand.addEventListener("click",()=>this.renderModels()),this.model.addEventListener("click",()=>this.renderGenerations()),this.generation.addEventListener("click",()=>this.update()),this.renderModels()}renderModels(){return _(this,arguments,function*(t=on(this.form,"brand")){if(this.curBrand===t){this.update();return}let e=yield Qn.get(t,this.brand);this.curBrand=t,A(this.model,e.length>0&&e[0].model!=="selfmade"&&e[0].model!=="other"),this.model.innerHTML=e.map(n=>`
<label class="y-choice o-f">
  <input type="checkbox" name="model" value="${n.id}"${this.defaultModels.includes(n.id)?" checked":""}>
  <span data-slot="cars-m-select.title">${Pt(n.model)}</span>
</label>
    `).join(""),this.defaultModels.length>0&&aS(this.model),this.defaultModels=[],this.renderGenerations()})}renderGenerations(){return _(this,null,function*(){let t=on(this.form,"brand"),e=on(this.form,"model"),n=yield Qn.get(t,this.brand),s=n.find(r=>r.id===e),o=s?s.generations:[];A(this.generation,o.length>0&&n[0].model!=="selfmade"&&n[0].model!=="other"),this.generation.innerHTML=o.map(r=>`
<label class="y-choice o-f">
  <input type="checkbox" name="generation" value="${r[0]}"${this.defaultGenerations.includes(r[0])?" checked":""}>
  <span data-slot="cars-m-select.title">${Pt(r[1])}</span>
</label>
    `).join(""),this.defaultGenerations.length>0&&aS(this.generation),this.defaultGenerations=[],this.update()})}update(){let t=this.getCaption(this.brand),e=this.getCaption(this.model),n=this.getCaption(this.generation),s=Math.max(t.length,e.length,n.length),o=s>=this.max,r=tf(this.generation),a=tf(this.model),l=tf(this.brand);this.disableList(this.generation,a||l,o),this.disableList(this.model,l,o||r),this.disableList(this.brand,!1,o||r||a);let c=[];for(let d=0;d<s;d++)n.length>0?c[d]=`${t[0]} ${e[0]} ${n[d]}`:e.length>0?c[d]=`${t[0]} ${e[d]}`:t.length>0&&(c[d]=t[d]),c[d]=Pt(c[d]);this.text.innerHTML=c.length>0?`<span>${c.join("</span>, <span>")}</span>`:"",A(this.text,c.length>0)}disableList(t,e,n){t.classList.toggle("is-disabled",e),t.querySelectorAll("input").forEach(s=>{e&&(s.checked=!1),s.disabled=n?!s.checked:e})}getCaption(t){return Array.from(t.querySelectorAll("input:checked")).map(e=>this.slot("title",e.parentElement).innerHTML)}}});var dS={};at(dS,{default:()=>Dd});var m2,h2,Dd,mS=b(()=>{"use strict";F();B();G();Gt();Z();ge();Ne();m2="is-si",h2="is-si-elements",Dd=class extends H{parsedInit(){let t=this.element,e=this.slots("step"),n=e.map(u=>Number(u.dataset.step||-1)),s=Math.max(...n),o=()=>lt('input[name="Category"]:checked',t).dataset.soundinsulation==="",r=Number(t.dataset["current-step"]||1),a=o(),l=a?"":t.Description.value,c=()=>{let u=this.slot("submitted",document.body);u&&(A(t,!0),A(u,!1))},d=u=>{r=o()?Math.min(s,Math.max(1,r+(u?1:-1))):u?s:1,e.forEach(g=>{A(g,Number(g.dataset.step||-1)===r)}),Lt(this.element,{behavior:"smooth"})},h=()=>{let u=lt('input[name="SoundInsulationResult"]:checked',t),g=lt('input[name="SoundInsulationScope"]:checked',t),f=g?g.dataset.wholeinterior==="":!1;t.classList.toggle(h2,f);let v=lt('input[name="SoundInsulationInterior"]:checked',t),E=o();if(E){let T=[],M=u&&u.value;T.push(`<b>Хочу</b>
${M==="1"?"Максимальной тишины в салоне":M==="2"?"Заметно снизить шум при езде":M==="3"?"Избавиться от конкретного сверчка, скрипа, стука":""}`);let x=g&&g.value;T.push(`<b>Шумоизоляция</b>
${x==="1"?"Всего салона":x==="2"?"Нескольких элементов":x==="3"?"Одного элемента":x==="4"?"На усмотрение мастера":""}`);let y=t.SoundInsulationScopeItems.value;y.trim()!==""&&!f&&T.push(`<b>Элементы</b>
${y.trim()}`);let S=t.SoundInsulationScopeDescription.value;S.trim()!==""&&T.push(`<b>Заметные сверчки, скрипы, стуки</b>
${S.trim()}`);let k=v&&v.value;T.push(`<b>Салон</b>
${k==="1"?"Разбирали полностью":k==="2"?"Разбирали частично":k==="3"?"Никогда не разбирали":k==="4"?"Неизвестно":""}`),a||(l=t.Description.value),t.Description.value=T.join(`

`)}else a!==E&&(t.Description.value=l);a=E,t.classList.toggle(m2,E)},p=()=>{d(!1)},m=()=>{let u=Qg(t),g=o(),f=r===2&&u&&u[0]==="SoundInsulationResult",v=r===3&&u&&u[0]==="SoundInsulationScope",E=r===4&&u&&u[0]==="SoundInsulationInterior";if(u===void 0||g&&!f&&!v&&!E){if(u&&g){let T=typeof u[0]=="string"?this.element[u[0]]:u[0];Ct(T.length?T[0]:T)}h(),d(!0)}};w.registerHandlers(this.role,{reveal:c,update:h,prev:p,next:m}),h()}}});var hS,uS,pS,fS,gS,vS,ES,ef,bS,nf,sf,yS,of,_S,rf,TS,LS,wS,xS,CS,AS,SS,MS,RS,IS,OS,Nd=b(()=>{"use strict";hS="{Count, plural, =0 {} one {#{HasMore, select, true {+} other {}} новая} other {#{HasMore, select, true {+} other {}} новых}}",uS="Темы заявок: {Count}",pS="Марки машин: {Count}",fS="{State, select, New {Ждёт первого предложения} Awaiting {Ждёт предложений} Accepted {В работе} Completed {Досталась другим} Expired {Больше не актуальна} other {}}",gS="Сделать предложение{Price, select, none {} other { за {Price} ₽}}",vS="Пропустить",ES="Машина",ef="VIN",bS="{Vin, select, none {Не указан} other {{Vin}}}",nf="Район",sf="Выезд или доставка",yS="{TowTruck, select, true {Желательно} other {Не нужно}}",of="Год выпуска",_S="{ProductionYear, select, none {Не указан} other {{ProductionYear}}}{ModelYear, select, none {} other { (поколение {ModelYear})}}",rf="Пробег",TS="{Mileage, select, none {Не указан} other {{Mileage} км}}",LS="Срочность",wS="{Urgency, select, Day {Как можно скорее} Week {На неделе} other {Без спешки}}",xS="Запчасти",CS="{Parts, select, true {Нужны} other {Свои}}",AS="{Number, select, none {б/н} other {№{Number}}}",SS="Не показывать тему «{CategoryName}»",MS="Скрыть все заявки по этой теме?",RS="Чтобы снова видеть их, отметьте тему в настройках наверху страницы",IS="Марки машин",OS="Темы заявок"});var u2,Pd,p2,$d,HS,kS,f2,g2,v2,Ba,DS=b(()=>{"use strict";Nd();B();G();be();Z();Be();Fi();u2="js-order",Pd="is-absolute",p2="is-empty",$d=300,HS="cubic-bezier(.39,.67,.7,1.13)",kS="cubic-bezier(.12,0,.39,0)",f2=-200,g2=1.05,v2=.9,Ba=class extends H{parsedInit(){let t=this.element,e=document.querySelector(`.${u2}`),n=document.createElement("div");n.style.position="relative";let s=n.cloneNode(!1);n.style.zIndex="2",e.before(n),t.before(s),n.appendChild(e),s.appendChild(t);let o,r;function a(){let c=e.offsetHeight+ws(e,"margin-bottom"),h=o.offsetHeight+ws(o,"margin-bottom")-c;e.animate({transform:["none",`translateY(${f2}px) scale(${g2})`],opacity:[1,0]},{duration:$d,easing:kS}),o.animate({transform:[`translateY(${c}px)`,"none"],opacity:[0,1]},{duration:$d,easing:HS}),t.animate({transform:["none",`translateY(${-c}px)`],opacity:[1,0]},{duration:$d,easing:HS}),r.animate({transform:[`translateY(${h}px) scale(${v2})`,`translateY(${h}px)`],opacity:[0,1]},{duration:$d,easing:kS}).onfinish=()=>{e.remove(),t.remove(),e=o,t=r,e.classList.remove(Pd),e.style.cssText="",t.classList.remove(Pd),t.style.cssText=""},Ae()}function l(c){function d(m,u){return d2Env.isMobile?`<tr><th>${m}</th><td>${u}</td></tr>`:`<div><strong>${m}</strong> ${u}</div>`}let h=!c,p="<div></div>";if(!h){let m=tt(fS,{State:c.state}),u=tt(AS,{Number:c.displayNumber||"none"}),g=tt(gS,{Price:c.price||"none"}),f=tt(SS,{CategoryName:c.categoryName||"none"}),v=tt(bS,{Vin:c.vin||"none"}),E=c.locationTags&&c.locationTags.length>0?c.locationTags.join(", "):c.location||"",T=tt(yS,{TowTruck:c.services&&c.services.towTruck||""}),M=tt(_S,{ProductionYear:c.productionYear||"none",ModelYear:c.modelYear||"none"}),x=tt(TS,{Mileage:c.mileage||"none"}),y=tt(wS,{Urgency:c.urgency||""}),S=tt(CS,{Parts:c.services&&c.services.parts||""}),{photo:k}=c,N="";if(k){let{image:I,thumbnail:Y,isFallback:et}=k;N=`<div class="c-order__pic">
          ${et?"":`<a class="c-lightbox-anchor" href="${I.url}" data-action="lightbox.zoom" data-size="${I.width},${I.height}">`}
            ${Yn({images:[{url:Y.url,width:Y.width,height:Y.height}],color:Y.htmlPrimaryColor},void 0,et?{className:"u-grayscale"}:void 0)}
          ${et?"":"</a>"}
        </div>`}let J=c.state==="Awaiting"?"c-order__state--awaiting":c.state==="Accepted"?"c-order__state--accepted":c.state==="Expired"?"c-order__state--expired":c.state==="New"?"c-order__state--new":"",K=`<h3 class="c-header u-break-word">${c.categoryName}<span class="c-order__state ${J}">${m}</span></h3>`,V=`<div class="c-order__text text u-break-word">${c.description||""}</div>`;p=`<div class="c-block c-order js-order">
        <div class="c-order__body">
          ${d2Env.isMobile?`${K}<div class="c-order__info">${V}${N}</div>`:`<div class="c-order__info">${K}${V}</div>${N}`}
        </div>
        <div class="c-order__meta js-orders-meta" data-next>
          ${d2Env.isMobile?'<table class="c-order__meta-table">':'<div class="o-grid o-grid--4 c-order__meta-table">'}
            ${d(ES,c.generation||"")}
            ${d2Env.isMobile?d(of,M)+d(rf,x)+d(ef,v)+d(nf,E)+d(sf,T):d(ef,v)+d(nf,E)+d(sf,T)+d(of,M)+d(rf,x)}
            ${d(LS,y)}
            ${d(xS,S)}
          ${d2Env.isMobile?"</table>":"</div>"}
          <div class="o-group o-group--v o-group--justify c-order__bottom">
              <div>${u}</div>
              ${c.dismissLink?`<div>
                  <button class="r-button-unstyled c-link c-link--secondary" data-url="${c.dismissLink}" data-action="orders.dismiss" data-ym-target="order_decline_remove_category">${f}</button>
                </div>`:""}
          </div>
        </div>
        <div class="c-block__more c-block__more--block c-order__controls js-orders-controls" data-next>
          <div class="o-group o-group--m o-group--v">
            <button class="c-button c-button--primary c-button--green u-mobile-100" data-action="orders.accept" data-url="${c.acceptLink}">${g}</button>
            <button class="c-button u-mobile-100" data-action="orders.discard" data-url="${c.rejectLink}" data-ym-target="order_decline_skip">${vS}</button>
          </div>
        </div>
      </div>`}o=Ei(p),o.style.opacity="0",o.classList.add(Pd),e.before(o),r=t.cloneNode(!0),r.removeAttribute("data-role"),r.classList.add(Pd),r.classList.toggle(p2,h),t.before(r),a()}document.body.addEventListener("orders-next",c=>l(c.detail))}}});function x2(i){return _(this,null,function*(){let t=i.node(),{url:e}=t.dataset;if(!e)return;if(!(t.dataset.confirm==="")||(yield ot(Vl,void 0,t))){let s=yield R(e,Ua,{method:"POST",anchorEl:t});w2(t,s.url,_e(s.replyTemplate))}})}var Ua,NS,PS,E2,b2,y2,$S,_2,T2,L2,Fd,lf,FS,w2,BS,C2,A2,S2,US,jS=b(()=>{"use strict";F();Kt();Nd();be();W();le();Z();Zt();pt();Ua="orders",NS=10,PS="js-order-counter",E2="js-order-categories",b2="js-order-brands",y2="js-orders-form",$S=".js-orders-controls",_2=".js-orders-meta",T2="c-order__controls",L2=["c-block__more","c-block__more--block"],Fd=i=>(i.closest($S)||i.closest(_2)).dataset.next==="",lf=(i,t,e)=>{let n=Number(e),s=document.querySelector(`.${i}`);if(s&&!Number.isNaN(n)){let o=i===PS&&n>=NS;s.textContent=tt(t,{Count:o?NS-1:n,HasMore:o})}},FS=i=>{lf(PS,hS,i.awaitingOrderCount),lf(E2,uS,i.filters.categoryCount),lf(b2,pS,i.filters.brandCount)},w2=(i,t,e)=>{let n=document.querySelector(`.${y2}`),s=i.closest($S);if(!s||!n)return;let o=n.cloneNode(!0);if(o.action=t,s.innerHTML="",s.classList.remove(T2),s.classList.add(...L2),s.appendChild(o),e){let r=e.replace("[text]",""),a=e.indexOf("[text]");o.text.value=r,o.text.addEventListener("focus",()=>{o.text.setSelectionRange(a,a)},{once:!0})}A(o,!0)};BS=i=>{let t=i.node(),{url:e}=t.dataset;e&&R(e,Ua,{method:"POST",anchorEl:t,body:Fd(t)?{next:!0}:{}}).then(n=>{Fd(t)&&(FS(n),document.body.dispatchEvent(new CustomEvent("orders-next",{detail:n.order})))})},C2=i=>_(void 0,null,function*(){let t=i.node();(yield ot(MS,RS,t))&&BS(i)}),A2=i=>{At(i);let t=i.node();t.text.value&&R(t.action,Ua,{method:"POST",anchorEl:t,body:{text:t.text.value,next:Fd(t)}}).then(n=>{Fd(t)?(FS(n),document.body.dispatchEvent(new CustomEvent("orders-next",{detail:n.order}))):window.location.href=n.url})},S2=()=>{w.registerHandlers(Ua,{dismiss:C2,discard:BS,accept:x2,submit:A2})},US=()=>{w.registerLoader(Ua,S2)}});var zS,M2,R2,I2,cf,O2,WS,qS=b(()=>{"use strict";dt();Wt();F();Kt();Nd();pa();W();me();zS="orsettings",M2=3,R2=5,I2=(i,t,e,n)=>L`
<form action="${t.updateLink}" data-role="form chk" data-keysubmit ?data-next=${n}>
  <button class="c-button o-t-xs o-b-s" data-slot="chk.button" type="button"
    data-checkcaption="${hE}" data-uncheckcaption="${uE}"></button>
  <div class="o-grid o-grid--${e.length} o-grid--no-margin">
    ${e.map(s=>L`<div>${ct(s,o=>o.id,o=>L`
        <label class="y-choice o-f">
          <input type="checkbox" name=${i} .value=${o.id} ?checked=${o.selected}>
          ${o.caption}
        </label>
      `)}</div>`)}
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l c-button--wide u-mobile-100"
      type="submit">${ve}</button>
  </div>
</form>
`,cf=i=>_(void 0,null,function*(){let t=i.actionName(),e=i.node(),n=e.dataset.redirect||"",s=e.dataset.url||"";if(!s)return;let{brands:o,categories:r}=yield R(s,zS,{method:"POST",anchorEl:e});if(!o||!r)return;let a=(l,c)=>{let d=l==="categories",h=d?r:o,p=new _t({anchor:e,title:d?OS:IS,className:"c-modal__content--orders"}),m=Yi(h.items,d2Env.isMobile?1:d?M2:R2);q(I2(l,h,m,c),p.element),p.addEventListener("submit",()=>{p.form.dataset.next===""?a("brands"):window.location.href=n}),p.show()};a(t,t==="all")}),O2=()=>{w.registerHandlers("orsettings",{all:cf,brands:cf,categories:cf})},WS=()=>{w.registerLoader(zS,O2)}});var VS={};at(VS,{default:()=>H2});var H2,GS=b(()=>{"use strict";DS();jS();qS();G();H2=()=>{WS(),U("orders",Ba),US()}});var YS={};at(YS,{default:()=>Bd});var k2,D2,N2,P2,$2,F2,B2,U2,JS,j2,z2,W2,q2,V2,Bd,KS=b(()=>{"use strict";B();G();W();k2="js-snaps-edit",D2="js-item",N2="js-remove",P2="js-undo",$2="js-title",F2="js-title-input",B2="js-status",U2="is-editable",JS="is-deleted",j2="is-closed",z2="c-button--primary",W2=["title","isDeleted","isClosed"],q2="snaps",V2=i=>Object.keys(i).reduce((t,e)=>(W2.includes(e)&&(t[e]=i[e]),t),{}),Bd=class extends H{parsedInit(){let t=!1,e=JSON.parse(this.element.dataset.state);this.element.dataset.state&&delete this.element.dataset.state;let n=document.querySelector(`.${k2}`),s=this.element.dataset.url,o=Ft(D2,this.element),r=()=>{if(t=!t,this.element.classList.toggle(U2,t),n.classList.toggle(z2,t),n.textContent=n.dataset[t?"titleReady":"titleEdit"],t&&o.length>0){let m=e[0].titleInput;m.focus(),setTimeout(()=>{m.selectionStart=9999,m.selectionEnd=9999},0)}};function a(m){let{id:u}=m,g=O({_:"save"},V2(m));R(s.replace("{id}",u),`${q2}${u}`,{method:"POST",silent:!0,body:g})}function l(m){let{element:u,titleInput:g}=m;g.readOnly=!1,u.classList.remove(JS),m.isDeleted=!1,a(m)}function c(m){let{element:u,undoButton:g,titleInput:f}=m;f.readOnly=!0,u.classList.add(JS),g.addEventListener("click",()=>{l(m)},{once:!0}),m.isDeleted=!0,a(m)}function d(m){m.isClosed=!m.isClosed,m.statusEl.classList.toggle(j2,m.isClosed),a(m)}function h(m){let{titleEl:u,titleInput:g}=m;m.title=g.value,u.textContent=m.title,a(m)}function p(m,u){let g=u.querySelector(`.${N2}`),f=u.querySelector(`.${P2}`),v=u.querySelector(`.${$2}`),E=u.querySelector(`.${F2}`),T=u.querySelector(`.${B2}`),M;m.element=u,m.removeButton=g,m.undoButton=f,m.titleEl=v,m.titleInput=E,m.statusEl=T,E.addEventListener("input",()=>{t&&(clearTimeout(M),M=setTimeout(h,200,m))}),g.addEventListener("click",()=>{t&&c(m)}),m.isDeleted&&f.addEventListener("click",()=>{l(m)},{once:!0}),T.addEventListener("click",()=>{t&&d(m)})}if(e.length!==o.length)throw Error("[Snaps] Initialization failed");e.forEach((m,u)=>{p(m,o[u])}),n.addEventListener("click",r)}}});var Ud,ZS=b(()=>{"use strict";Lr();Ud=class extends EventTarget{constructor(e,n,s,o){super();this.target=e;this.target&&(this.uploader=new hi(n,s),o&&this.uploader.setButtonCaption(o),this.uploader.render(this.target),this.uploader.setVisible(!0),this.uploader.addEventListener("ready",this))}handleEvent(e){if(e.detail&&e.detail.length===1){let n=new CustomEvent("ready",{detail:e.detail});this.dispatchEvent(n)}}dispose(){this.uploader.removeEventListener("ready",this),this.uploader.dispose()}}});var QS={};at(QS,{default:()=>jd});var G2,J2,Y2,K2,Z2,XS,jd,tM=b(()=>{"use strict";Fp();G();Be();ZS();G2="js-snap-description",J2="js-pic",Y2="js-button",K2="js-replace",Z2="js-field",XS="is-active",jd=class extends H{parsedInit(){let t=this.element.dataset.type||"",e=this.element.querySelector(`.${Y2}`),n=this.element.querySelector(`.${K2}`),s=this.element.querySelector(`.${Z2}`),o=this.element.querySelector(`.${J2}`);if(!e||!o||!n||!s)return;let r,a=d=>{let h=o;for(;h=o.firstChild;)o.removeChild(h);if(!d)return;s.value=d.id;let p=Vi({images:d.images.map(m=>({url:m.url,width:m.w,height:m.h})),color:d.color,inline:d.inline},1,{className:"c-snap-form-pic__pic"});o.appendChild(p),this.element.classList.add(XS)};function l(d,h){r&&(r.removeEventListener("ready",c),r.dispose()),r=new Ud(d,t,h?"r-button-unstyled c-link c-link--current":"c-button u-mobile-100",h?`<div class="m-icon c-icon c-icon--s c-icon--secondary i-replace"></div>${wd}`:void 0),r.addEventListener("ready",c)}function c(d){if(d.detail&&d.detail[0]){a(d.detail[0]),l(n,!0);let h=document.querySelector(`.${G2}`);h&&h.focus()}}this.element.classList.contains(XS)?l(n,!0):l(e)}}});var eM,iM,nM,sM,oM=b(()=>{"use strict";eM="скрытая",iM="заблокирована",nM="Все записи",sM="Подходящих записей нет. Попробуйте изменить или переформулировать запрос."});var rM={};at(rM,{default:()=>sU});var ja,Q2,tU,eU,iU,nU,df,sU,aM=b(()=>{"use strict";dt();Wt();F();oM();X();Ji();W();le();mn();xi();Be();sr();ja="blog-search",Q2=i=>L`<span class=${i.cssClass} data-ihc-token=${i.hovercardToken}>${i.caption}</span>`,tU=i=>L`
<a class="x-box c-post-lcard c-darkening-hover-container" href=${i.link}>
  <div class="c-post-lcard__pic">
    ${de({images:[i.photo]},2,{size:{width:1,height:1},className:"is-rounded has-darkening-hover"})}
    ${i.mediaPreview?L`<div class="c-post-lcard__media-preview c-darkening-hover" style="background-image: url(${i.mediaPreview})"></div>`:$}
  </div>
  <div class="c-post-lcard__body">
    <div class="c-post-lcard__caption u-line-clamp-2">
      ${i.title&&!i.public?L`<span class="c-entity-hidden">${eM}</span>`:$}
      ${i.title&&!i.moderatorAllowed?L`<span class="c-entity-hidden">${iM}</span>`:$}
      ${_e(i.title||"")}
    </div>
    ${i.info?L`<div class="u-text-overflow x-secondary x-secondary-color o-b-xs">${Q2(i.info)}</div>`:$}
    <div class="c-post-lcard__meta x-secondary x-secondary-color">
      <div class="c-icon-counter"><span class="m-icon c-icon c-icon--s c-icon--secondary i-like-s"></span> ${i.likeCount}</div>
      <div class="c-icon-counter"><span class="m-icon c-icon c-icon--s c-icon--secondary i-comments-s"></span> ${i.commentCount}</div>
      <div data-tt=${i.formattedDate}>${i.dateCaption}</div>
    </div>
  </div>
</a>
`,eU=()=>L`
<div class="c-empty-content">
  <div class="c-empty-content__header">${sM}</div>
</div>
`,iU=i=>ct(i.posts,t=>t.link,t=>tU(t)),nU=(i,t)=>i.moreLink?L`<a class=${t?"x-box-more":"c-block__more"} href=${i.moreLink}>${nM}</a>`:$,df=un(()=>_(void 0,null,function*(){let i=C(ja,"form"),t=i.sort?i.sort.value:"ByDate",[e,n]=yield Fe(()=>R(i.action,ja,{silent:!0,throwError:!0,body:{query:i.query.value.trim(),sort:t}}));if(n){let s=C(ja,"container");ue(s),q(n.posts.length===0?eU():iU(n),s);let o=C(ja,"more");ue(o),q(nU(n,o.dataset.new===""),o)}else e&&e.request.status===429&&df()}),400),sU=()=>{w.registerHandlers(ja,{sort:df,search:he(df,300)})}});var lM,cM=b(()=>{"use strict";lM="Продвигается"});var mf,dM,mM=b(()=>{"use strict";mf=class{constructor(t){this.url=t}get(){if(!this.url)throw new Error("Request URL is not set.");return this.url}set(t){this.url=t}},dM=i=>new mf(i)});var yt,hM,rU,aU,uM,Sn,uf,lU,pf,pM,cU,fM,hf,dU,ff,mU,hU,gM,uU,pU,fU,gU,vU,zd,EU,bU,za,vM,EM=b(()=>{"use strict";dt();Wt();F();cM();B();G();X();Gt();Ji();W();Wc();pe();Z();ge();Ku();pt();ni();mM();yt="postpromo",hM=dM("/ajax/postpromo"),rU=(i,t,e,n,s)=>L`
<input type="hidden" name=${i} value=${t} data-avatar=${e} data-caption=${n} data-members=${s}>
`,aU=i=>Q('[name*="communities"],[data-name*="communities"]',i).reduce((e,n)=>{let s=!!n.name,o=s?n.name:n.dataset.name,a=(s?[n]:Q('[type="hidden"]',n)).map(l=>l.value).join(`
`);return Object.assign(e,{[o]:a})},{}),uM=(i,t)=>{let e=Ze(i),n=aU(i),{submitbtn:s}=i,o=O({_:t,key:s.dataset.key},n),r=["isbusiness"];return e.forEach((a,l)=>{a&&!r.includes(l)&&(o[l]=a)}),o},Sn=i=>i.dataset.target?document.getElementById(i.dataset.target):ys(i,yt),uf=i=>vt(i,"postpromo","context")||C("postpromo","context"),lU=i=>{let t=uf(i),e=C(yt,"settings",t);hM.set(e.dataset.boostUrl)},pf=i=>{let t=ut(yt,"targeting",i);t.forEach((n,s)=>{let o=l=>l.replace(/^filters\[\d+\]/,`filters[${s}]`).replace(/^Targets\[\d+\]/,`Targets[${s}]`);Q('input[type="hidden"],select,textarea',n).forEach(l=>{l.removeAttribute("id"),l.name=o(l.name)}),Q("[data-name]",n).forEach(l=>{l.dataset.name=o(l.dataset.name)})});let e=C(yt,"targeting-button",i);e&&A(e,t.length<10)},pM=(i,t={})=>{let e=C(yt,"region",i);e&&sl("regionselect").then(()=>{e.dataset.country=t.countryCode||"",e.dataset.region=t.regionCode||""});let n=C(yt,"gender",i);n&&(n.value=t.gender||"Unknown");let s=C(yt,"cars",i);!d2Env.isMobile&&s&&sl("carmultiselect").then(()=>{s.dispatchEvent(new CustomEvent("set-cars",{detail:t.catalogItems||[]}))});let o=C(yt,"yearfrom",i);o&&(t.productionYearFrom?o.value=t.productionYearFrom:o.selectedIndex=0);let r=C(yt,"yearto",i);r&&(t.productionYearTo?r.value=t.productionYearTo:r.selectedIndex=0);let a=C(yt,"communities",i);a&&(a.value=(t.communityIds||[]).join(`
`));let l=C(yt,"communities-list",i);if(l){let{name:c}=l.dataset,d=t.communities||[],h=C(yt,"communities-tokens",i);if(!h||!c)return;ue(h),q(ct(d,m=>m.id,m=>rU(c,m.id,m.avatar||"",m.caption||"",String(m.memberCount||0))),h);let p=Ts(l);p&&p.reinit()}},cU=i=>{let t=i.node(),e=vt(t,yt,"settings"),n=t.dataset.target,s=e||(n?document.getElementById(`${n}-stats`):null);if(s){let o=wt(s),r=uf(t);(r&&C(yt,"comdb-button",r)||t).classList.toggle("is-active",!o.expanded),o.toggle()}},fM=(i,t,e)=>_(void 0,null,function*(){let n=Sn(i),s=n&&n.submitbtn||i;function o(l){let c=t==="start"||t==="restart";if(c){if(l.budget){let f=n&&n.isbusiness.value||s.dataset.isbusiness==="";no([{name:"Продвижение",category:f?"Пост БА":"Пост",price:l.budget}])}let{metrika:d}=s.dataset;d&&bt(d);let h=document.getElementById("promo");h&&h.remove();let p=uf(i),m=C(yt,"inject",p);if(c&&p&&m){let f=C(yt,"comdb-post",p);if(f){Lt(f,{behavior:"smooth"});let v=wt(m);v.addEventListener("end",()=>{f.classList.add("is-active");let E=C(yt,"comdb-button",f);E&&(E.disabled=!0,E.textContent=lM,E.classList.remove("c-button--primary"),A(E,!0))},{once:!0}),setTimeout(()=>{v.hideAndRemove()},400);return}}let u=n.closest(".js-cpc-block"),g=u?u.dataset.anchor||"promo":"#promo";setTimeout(()=>{window.location.hash=g,window.location.reload()},100)}else{let d=n&&n.id||i.dataset.target,h=d?document.getElementById(`${d}-stats`):null;if(h){let p=j("js-postpromostatsbtns",h),m=Ft("c-button",p),{metrika:u}=m[1].dataset;u&&bt(u),A(m[1],!1),A(m[0],!0)}}}let{key:r}=s.dataset,a=t==="start"?uM(n,"start"):t==="restart"?{_:t,key:r}:{_:"stop",key:r};if(e&&(a.requisite=e),e||(yield ot(i.dataset.confirm||"",i.dataset.confirmMessage,i,i.dataset.confirmNutton)))try{let l=yield R(hM.get(),yt,{method:"POST",anchorEl:s,body:a,throwError:!0});o(l)}catch(l){l&&l.json&&qc(l.json,c=>{fM(i,t,c)})}}),hf=i=>{let t=i.actionName(),e=i.node();lU(e),fM(e,t)},dU=i=>_(void 0,null,function*(){let t=i.node(),e=t.href,n=t.dataset.blocked!=="1";yield R(e,yt,{method:"POST",anchorEl:t,body:{isEnabled:!n}}),t.dataset.blocked=n?"1":"0",t.textContent=t.dataset.values.split(";")[n?1:0],t.classList.toggle("c-button--primary",n)}),ff=i=>{let t=ut(yt,"targeting",i),e=t[t.length-1],n=e.cloneNode(!0),s=Q("select",e);Q("select",n).forEach((a,l)=>{a.selectedIndex=s[l].selectedIndex});let r=C(yt,d2Env.isMobile?"communities-list-mobile":"communities-list",n);return r&&(r.innerHTML=""),e.after(n),pf(i),n},mU=i=>_(void 0,null,function*(){let t=i.node(),e=Sn(t),n=e&&e.dataset.info,s=yield R(n,yt,{body:{budget:t.value}}),o=C(yt,"budget",e);o.innerHTML=s.html||"",e.submitbtn.dataset.confirmMessage&&delete e.submitbtn.dataset.confirmMessage,e.submitbtn.dataset.confirmButton&&delete e.submitbtn.dataset.confirmButton,e.submitbtn.dataset.confirm=s.confirm}),hU=i=>{let t=i.node(),e=Sn(t),n=C(yt,"targeting-default",e);if(!n)return;let s=JSON.parse(n.innerHTML),o=s.length;if(!o)return;let r=ut(yt,"targeting",e),a=r.length,l=o-a;l<0?r.splice(o).forEach(d=>d.remove()):Array(l).fill(0).forEach(()=>{ff(e)}),setTimeout(()=>{ut(yt,"targeting",e).forEach((d,h)=>{pM(d,s[h])})},1)},gM=i=>{let t=C(yt,"region",i);t&&(t.dataset.country="",t.dataset.region="");let e=C(yt,"gender",i);e&&(e.value="Unknown");let n=C(yt,"cars",i);n&&n.dispatchEvent(new CustomEvent("set-cars",{detail:[]}));let s=C(yt,"yearfrom",i);s&&(s.selectedIndex=0);let o=C(yt,"yearto",i);o&&(o.selectedIndex=0);let r=C(yt,"communities",i);r&&(r.value="");let a=C(yt,d2Env.isMobile?"communities-list-mobile":"communities-list",i);a&&(a.innerHTML="")},uU=i=>{let t=i.node(),e=Sn(t),n=C(yt,"targetingtemplate",e);if(!n)return;let s=JSON.parse(n.innerHTML);if(!s.length)return;let r=ut(yt,"targeting",e);r.forEach((l,c)=>{c===0?gM(l):l.remove()}),r=ut(yt,"targeting",e);let a=r.length;for(let l=a;l<s.length;l++)ff(e);r=ut(yt,"targeting",e),s.forEach((l,c)=>{pM(r[c],l)})},pU=i=>{let t=i.node(),e=t.closest("form"),n=t.closest(".block");ut(yt,"targeting",e).length>1?n.remove():gM(n),pf(e)},fU=i=>+(i.substr(0,i.indexOf(".")).replace(/\D/ig,"")||-1),gU=i=>{let t=[...i.options].filter(e=>!e.disabled);i.selectedIndex=t.length-1},vU=i=>i.options[i.selectedIndex].disabled,zd=i=>{let t=Sn(i),e=uM(t,"duration"),n=lt('[name="duration"]',t);if(!n||!e)return;let s="productionyear",o=["region","country","brand","model","generation",s],r={};Object.keys(e).forEach(h=>{let p=fU(h);if(p<0)return;r[p]=r[p]||[];let m=o.some(f=>h.includes(f)),u=h.includes(s),g=r[p].some(f=>f.includes(s));m&&(g&&u||r[p].push(h))});let c=Math.max(0,...Object.values(r).map(h=>h.length))>3,d=lt('[name="duration"] [value="168"]',t);d.disabled=c,c&&vU(n)&&gU(n)},EU=i=>{let t=i.node(),e=Sn(t),n=ff(e);zd(e),Lt(n,{behavior:"smooth"})},bU=i=>{let t=i.node(),e=Sn(t),n=vt(t,yt,"targeting");n&&n.remove(),pf(e),zd(e)},za=class extends H{parsedInit(){let t=Sn(this.element);zd(t),t.addEventListener("change",()=>{zd(t)})}},vM=()=>{w.registerHandlers(yt,{stats:cU,start:hf,restart:hf,stop:hf,block:dU,addtargeting:EU,updatebudget:mU,removetargeting:bU,resettargeting:hU,cleartargeting:pU,addandfillnewtargeting:uU})}});var gf,yU,_U,bM,yM=b(()=>{"use strict";F();X();W();pe();Z();ge();ni();gf="postpromo",yU=i=>vt(i,"postpromo","context")||C("postpromo","context"),_U=i=>_(void 0,null,function*(){let t=i.node(),e=yU(t),n=C(gf,"settings",e),s=n.dataset.formUrl,o=document.createElement("div");A(e,!0),Lt(o),n.after(o),o.innerHTML=yield Dt(s,gf,{body:{_:"fetchform"}});let r=je("postpromo",o);t.dataset.metrika&&bt(t.dataset.metrika),A(t,!1),wt(n,!0).toggle(!0),Lt(r)}),bM=()=>{w.registerHandlers(gf,{fetch:_U})}});var _M={};at(_M,{default:()=>TU});var TU,TM=b(()=>{"use strict";EM();yM();G();TU=()=>{bM(),vM(),U("postpromo",za)}});var wM={};at(wM,{default:()=>xU});var LM,LU,wU,xU,xM=b(()=>{"use strict";F();W();LM=i=>{let t=i.actionName(),e=i.node();e.disabled=!0;let{id:n,kind:s}=e.dataset,o=t==="disablecar"?`/recommendations/cars/${n}/prohibit`:`/recommendations/post/${s}_${n}/prohibit`;R(o,{method:"POST",anchorEl:e})},LU=i=>{let t=i.node(),e=t.dataset.feed;t.disabled=!0,R(`/recommendations/posts/${e}`,{method:"POST",anchorEl:t,body:{kind:t.dataset.kind,id:t.dataset.id}})},wU=i=>_(void 0,null,function*(){let t=i.node();t.disabled=!0;let e=yield R(t.dataset.url,{method:"POST",anchorEl:t,body:{postId:t.dataset.id}});confirm("Перейти к записи в Инбоксе?")&&(window.location.href=e.postLink||"")}),xU=()=>{w.registerHandlers("recommendations",{disable:LM,disablecar:LM,addtofeed:LU,addtoinbox:wU})}});var CM,AM,SM=b(()=>{"use strict";CM="Ждёт продвижения",AM="Смотреть в инбоксе"});var MM={};at(MM,{default:()=>MU});var Wd,AU,SU,MU,RM=b(()=>{"use strict";F();SM();X();W();Zt();Wd="combacklog",AU="is-dashboard",SU=i=>_(void 0,null,function*(){let t=i.node(),e=t.dataset.id||"",{postLink:n}=yield R(t.href,Wd,{method:"POST",anchorEl:t,body:{postId:e}});if(n){zi(t);let s=vt(t,Wd,"badge");s.classList.contains(AU)&&(s.style.display="block");let r=C(Wd,"title");r.textContent=CM,t.href=n,t.textContent=AM}}),MU=()=>{w.registerHandlers(Wd,{post:SU})}});var IM={};at(IM,{default:()=>IU});var RU,IU,OM=b(()=>{"use strict";F();W();Zt();RU=i=>_(void 0,null,function*(){At(i);let t=i.node(),e=t.submitbtn;yield R(t.action,{method:"POST",anchorEl:e,body:new FormData(t)}),t.parentElement.classList.remove("fx-white-fade"),setTimeout(()=>{t.parentElement.classList.add("fx-white-fade")},10)}),IU=()=>{w.registerHandlers("fcat",{set:RU})}});var HM={};at(HM,{default:()=>jU});var OU,HU,kU,DU,NU,PU,$U,FU,BU,UU,jU,kM=b(()=>{"use strict";OU=i=>({date:i,total:0,postBoosts:0,businessCards:0,businessAds:0}),HU=i=>i.toLocaleDateString("ru",{day:"numeric",month:"2-digit",year:"numeric"}).split(".").reverse().join("-"),kU=i=>{let t=new Date(i);return t.setTime(t.getTime()-864e5*(i.getDay()-1)),t},DU=i=>`<li>${i}</li><li>${Math.floor(i/2)}</li><li>0</li>`,NU=(i,t)=>Math.floor((i.getMilliseconds()-t.getMilliseconds())/864e5),PU=i=>{for(let t=1;t<i.length;t++){let e=i[t],n=i[t-1],s=NU(new Date(e.date),new Date(n.date));if(s>1)for(let o=0;o<s-1;o++){let r=new Date(n.date);r.setDate(r.getDate()+o+1);let a=HU(r),l=OU(a);i.splice(t,0,l),t++}}},$U=i=>`
<div class="c-cp-graph-col__tooltip">
  <p>
      <b>${new Date(i.date).toLocaleDateString("ru",{day:"numeric",month:"short"})}</b>
      </br>${i.total} гостей
      <br/><span class="c-cp-color--post">${i.postBoosts} с постов</span>
      <br/><span class="c-cp-color--card">${i.businessCards} с карточек</span>
      <br/><span class="c-cp-color--cpc">${i.businessAds} с CPC</span>
  </p>
</div>`,FU=(i,t)=>{let e=125/t;i.sort((o,r)=>{let a=new Date(o.date),l=new Date(r.date);return a>l?1:a<l?-1:0}),PU(i);let n=Math.max(new Date(i[0].date).getDay()-1,0);return Array.from(new Array(n),()=>'<div class="c-cp-graph-col c-cp-graph-col--blank"></div>').join("")+i.map(o=>{let r=`
<div class="c-cp-graph-col">
  <div class="c-cp-graph-col__section c-cp-graph-col__section--post" style="height: ${o.postBoosts*e}px"></div>
  <div class="c-cp-graph-col__section c-cp-graph-col__section--card" style="height: ${o.businessCards*e}px"></div>
  <div class="c-cp-graph-col__section c-cp-graph-col__section--cpc" style="height: ${o.businessAds*e}px"></div>
    ${$U(o)}
</div>`;return(new Date(o.date).getDay()===1?'<div class="c-cp-graph-col c-cp-graph-col--blank"></div>':"")+r}).join("")},BU=i=>{let t=[];for(let e=0;e<i.length;e++){let n,s=new Date(i[e].date);t.length===0?(n={date:kU(s).toLocaleDateString("ru",{day:"numeric",month:"short"}),postBoosts:0,businessCards:0,businessAds:0,total:0},t.push(n)):s.getDay()===1?(n={date:s.toLocaleDateString("ru",{day:"numeric",month:"short"}),postBoosts:0,businessCards:0,businessAds:0,total:0},t.push(n)):n=t[t.length-1],n.postBoosts+=i[e].postBoosts,n.businessCards+=i[e].businessCards,n.businessAds+=i[e].businessAds,n.total+=i[e].total}return t.map(e=>`<div class="c-cp-legend__section">
  <p class="c-cp-legend__title">${e.date}</p>
  <p class="c-cp-legend__text c-cp-color--post">${e.postBoosts} c постов</p>
  <p class="c-cp-legend__text c-cp-color--card">${e.businessCards} с карточек</p>
  <p class="c-cp-legend__text c-cp-color--cpc">${e.businessAds} с СРС</p>
</div>`).join("")},UU=i=>{let t=Math.max(...i.map(e=>e.total));return`
<div class="c-cp-mod__chart">
  <div class="c-cp-chart">
    <ul class="c-cp-chart__y-axis">${DU(t)}</ul>
    <div class="c-cp-chart__graph">
      <div class="c-cp-graph">
        ${FU(i,t)}
      </div>
      <div class="c-cp-legend">
        ${BU(i)}
      </div>
    </div>
  </div>
</div>`},jU=i=>{let t=i.dataset.data||"",e=[];try{e=JSON.parse(t)}catch(s){}if(e.length===0)return;let n=UU(e);i.insertAdjacentHTML("afterend",n)}});var DM,NM,PM,$M,FM,BM,qd,UM,jM,zM,WM,qM,vf=b(()=>{"use strict";DM="{Num, select, 0 {} other {({Num}) }}Сообщения",NM="Скрыть пользователя из списка собеседников",PM="Скрыть пользователя из списка собеседников?",$M="Вся переписка сохранится. При возобновлении общения контакт вновь вернётся в список",FM="Очистить историю общения с этим человеком?",BM="Восстановить данные будет невозможно",qd="Сообщения",UM="Переписка с ",jM="Показать предыдущие сообщения",zM="Добавить пользователя в Чёрный список?",WM="Добавить",qM=`<p><b>Добавьте номер телефона</b><br>
Российским пользователям сообщения доступны только с подтверждённым номером телефона. <a class="c-link" href="{OriUrl}">Почему?</a></p>
<p><b><a class="c-link" href="{Url}">{IsBusiness, select, true {Привязать сейчас} other {Добавить и подтвердить}}</a></b> {IsBusiness, select, true {  <button class="r-button-unstyled c-link u-bold" data-action="msgr.remind-add-phone" data-url="{RemindLaterUrl}">Отложить на потом</button>} other {}}</p>`});var zU,WU,qU,JM,GM,YM,Ef,VU,GU,JU,YU,KM,ZM,bf=b(()=>{"use strict";dt();ii();Wt();pn();vf();le();Be();zU="msgr",WU="is-active",qU=i=>new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric"}).formatToParts(i).map(({type:t,value:e})=>t==="year"&&Number(e)===new Date().getFullYear()||t==="literal"&&e.match(/^\sг\.$/)?"":e).join("").replace(/,\s?$/,""),JM=i=>L`${Qt(i)}`,GM=(i,t,e,n,s)=>s?L`<span class="${t} c-username--wrap"><span>${n}</span></span>`:L`<a class="${t} c-username--wrap" href=${e} data-ihc-token="p/${i}"><span>${n}</span></a>`,YM=()=>L`
<header class="x-title-header">
  <h1 class="x-title">${d2Env.isMobile?L`<a class="c-link c-link--text" data-action="msgr.contacts">${qd}</a>`:L`${qd}`}</h1>
</header>
`,Ef=(i,t,e,n,s)=>d2Env.isMobile?L`<div class="x-title-header__to-top"><a class="c-link c-link--text" data-action="msgr.contacts">${qd}</a></div>\n <h1 class="x-title">${GM(i,t,e,n,s)}</h1>`:L`<h1 class="x-title">${UM}${GM(i,t,e,n,s)}</h1>`,VU=(i,t,e,n,s)=>L`
<header class="x-title-header">
  <h1 class="x-title">${Ef(i,t,e,n,s)}</h1>
</header>
`,GU=()=>L`
<div class="c-msgr__pager">
  <button class="r-button-unstyled c-link c-link--text" data-action="msgr.prev">${jM}
  </button>
</div>
`,JU=(i,t,e,n,s,o,r,a,l,c,d)=>{let h=t?L`<a class="c-msg__avatar" href=${o} data-ihc-token="p/${r}">${de({images:[{url:n,width:60,height:60}]},void 0,{className:`${s?"is-rounded":"is-round"} u-vignette`})}</a>`:$;return L`
    ${d2Env.isMobile&&c?L`<div class="c-msg-date">${qU(l)}</div>`:$}
    <div id="m${i}" class=${Nt({"c-msg":!0,"c-msg--own":!t,"c-msg--pic":e})} data-slot="${zU}.item">
      ${h}
      <div class=${Nt({"c-msg__body":!0,"ctx-dark":!t})}>
        <div class=${Nt({"u-break-word":!0,"c-link-decorated":!0,"c-link-reset-white":!t})} data-role="emojizoom">${Qt(d)}</div>
        ${d2Env.isMobile?L`<div class="c-msg__date">${new Intl.DateTimeFormat("ru",{hour:"2-digit",minute:"2-digit"}).format(l)}</div>`:$}
      </div>
      ${d2Env.isMobile?$:L`<div class="c-msg__date">${a}</div>`}
    </div>
  `},YU=i=>L`
<div class="c-msg c-msg--disabled">
  <div class="c-msg__avatar c-msg__avatar--system">
    <div class="m-icon i-drive"></div>
  </div>
  <div class="c-msg__body ctx-dark">
    <div class="u-break-word c-link-decorated c-link-reset-white">${Qt(i)}</div>
  </div>
</div>
`,KM=(i,t,e,n,s,o,r,a,l,c)=>L`
  ${d2Env.isMobile?$:VU(i,t,e,n,s)}
  ${a?GU():$}
  ${ct(l,d=>d.id,d=>JU(d.id,d.reply,d.hasImage,o,r,e,i,d.timestamp,d.date,d.headerDate,d.text))}
  ${c?YU(c):$}`,ZM=(i,t)=>{let e=t===i.id,n={[WU]:e,"c-msgr-contact--business":i.isBusiness},s=de({images:[{url:i.avatar,width:60,height:60}]},void 0,{className:`${i.isBusiness?"is-rounded":"is-round"} u-vignette c-msgr-contact__avatar`});return L`
    <a id="mc${i.id}" href="/my/messages/${i.id}" class="c-msgr-contact c-darkening-hover-container ${Nt(n)}" data-action="msgr.contact" data-url=${i.url}>
      ${d2Env.isMobile?$:L`<button class="r-button-unstyled c-msgr-contact__remove" data-action="msgr.remove" data-id=${i.id} data-tt=${NM}>×</button>`}
      ${s}
      <div class="c-msgr-contact__info">
        <div class="c-msgr-contact__nickname">
          <div class="c-msgr-contact__username u-text-overflow ${i.nicknameCssClass||"c-link c-link--color00 c-username"}" data-ihc-token="p/${i.id}">
              ${i.username}
          </div>
          ${Number(i.unread)?L`<span class="c-msgr-contact__num c-notification-bubble" data-slot="msgr.bubble">${i.unread}</span>`:$}
        </div>
        ${i.status?L`<div class="u-text-overflow">${_e(i.status)}</div>`:$}
        ${i.lastOnline?L`<div class="u-text-overflow">${i.lastOnline}</div>`:$}
      </div>
    </a>
  `}});var XM,yf,KU,_f,Tf,ZU,XU,Vd,QM=b(()=>{"use strict";XM=kn(ur(),1);dt();Wt();Ro();B();X();Ji();W();ge();bf();yf="msgrlist",KU="/ajax/messages.cshtml",_f="is-active",Tf=3e4,ZU=12e4,XU=200,Vd=class{constructor(t){this.partnerId=t;this.lastActive=-1/0;this.container=C(yf,"contacts"),this.filterEl=C(yf,"filter"),this.timeout=setTimeout(()=>this.updateContacts(),Tf),this.filterEl.value="",this.filterEl.addEventListener("input",()=>this.filter()),this.container.addEventListener("scroll",(0,XM.throttle)(this.scroll).bind(this),{passive:!0}),this.scrollToTarget()}setActiveContact(t){let e=j(_f,this.container);if(e&&e.classList.remove(_f),t){this.partnerId=t;let n=lt(`#mc${t}`);if(n){n.classList.add(_f);let s=j("c-msgr-contact__num",n);s&&(document.body.dispatchEvent(new Event("force-update")),s.remove())}this.scrollToTarget()}}updateContacts(){return _(this,null,function*(){if(Date.now()-this.lastActive<5e3){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.updateContacts(),Tf);return}let t=yield R(KU,yf,{method:"POST",silent:!0,body:O(O({_:"partners"},this.filterEl.value&&{filter:this.filterEl.value.toLowerCase()}),this.partnerId&&{partner:this.partnerId})});clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.updateContacts(),vi.isIdle?ZU:Tf),this.renderContacts(t)})}renderContacts(t){t.unread&&["update-unread","update-unread-title"].forEach(n=>{document.body.dispatchEvent(new CustomEvent(n,{detail:t.unread}))});let e=t.partners||[];ue(this.container),q(ct(e,n=>n.id,n=>ZM(n,this.partnerId)),this.container),this.scrollToTarget()}scrollToTarget(){let t=this.partnerId?lt(`#mc${this.partnerId}`):null;Lt(t,{behavior:"smooth",block:"nearest"})}filter(){clearTimeout(this.filterTm),this.filterTm=setTimeout(()=>this.updateContacts(),XU)}scroll(){this.lastActive=Date.now()}}});var QU,Gd,tR=b(()=>{"use strict";X();Lr();QU="msgr",Gd=class extends EventTarget{constructor(){super();let t=C(QU,"upload");t&&(this.uploader=new hi("messengerimage",d2Env.isMobile?"r-button-unstyled c-msgr__btn":"c-msgr__btn c-button"),this.uploader.setAction("uploadSimple"),this.uploader.setButtonCaption('<div class="m-icon c-icon c-icon--s i-photo"></div>'),this.uploader.render(t),this.uploader.setVisible(!0),this.uploader.addEventListener("ready",this))}disable(t){this.uploader&&this.uploader.getButton()&&(this.uploader.getButton().disabled=t)}dispose(){this.uploader&&(this.uploader.removeEventListener("ready",this),this.uploader.dispose(),this.uploader=void 0)}handleEvent(t){t.detail.length===1&&this.dispatchEvent(new CustomEvent("ready",{detail:t.detail[0]}))}}});var iR={};at(iR,{default:()=>Jd});var Oe,Lf,tj,ej,eR,ij,nj,wf,Jd,nR=b(()=>{"use strict";dt();Ro();F();Vo();Kt();Ph();vf();B();G();X();be();W();Z();ge();Zt();hc();Fi();pt();QM();bf();tR();Oe="msgr",Lf="/ajax/messages.cshtml",tj=7e3,ej=14e3,eR=i=>!!i.html,ij=i=>!!i.warning,nj=(i,t)=>i.getFullYear()===t.getFullYear()&&i.getMonth()===t.getMonth()&&i.getDate()===t.getDate(),wf=class i{constructor(t,e=""){this.root=t;this.partnerId=e;this.partnerDeleted_=!1;this.messages_=[];this.hasMoreMessages_=!1;this.pendingUpdateHistory_=!1;this.allowReply=!1;this.lockHistory=!1;this.hasNoPhone=!1;this.disablePhoneReminder=!1;this.oriUrl=this.root.dataset.oriUrl,this.phoneUrl=this.root.dataset.phoneUrl,this.remindUrl=this.root.dataset.remindUrl,this.form_=C(Oe,"form",this.root),this.button_=C(Oe,"submitbtn",this.form_),this.header_=C(Oe,"header",this.root),this.history_=C(Oe,"history",this.root),this.historyDel_=C(Oe,"history-delete",this.root),this.blacklistEl_=C(Oe,"bl",this.root);let n=new URLSearchParams(window.location.search);window.history.replaceState(null,document.title,window.location.href.split("?")[0]),this.presetMessage_=n.get("message")||"",this.button_.disabled=!1,window.addEventListener("popstate",o=>this.onNavigate_(o)),w.registerHandlers("msgr",{prev:this.onPrev_,post:this.onPost_,wipehistory:this.onDelete_,remove:this.removeContact_,blacklist:this.onBlacklist_,contact:this.onContact_,contacts:this.onShowContacts_,"remind-add-phone":this.onRemindAddPhone_},this),document.body.addEventListener("update-unread-title",i.updateTitle),this.getNewMessages_=this.getNewMessages_.bind(this),this.contacts_=new Vd(e);let s=this.form_.text;A(this.form_,!0),this.ta_=new Tn(s,s.offsetHeight,Math.round(document.documentElement.clientHeight*.6)),A(this.form_,!1),this.ta_.addEventListener("resize",()=>this.onTextareaResize_()),this.changePartner_(this.partnerId)}enableHistoryDeleteButton_(t){this.historyDel_&&A(this.historyDel_,t!==void 0?t:ut(Oe,"item",this.history_).length>0)}uploaderInit_(){this.uploader_&&this.uploader_.dispose(),this.uploader_=new Gd,this.uploader_.addEventListener("ready",t=>this.onPicPost_(t.detail.id))}onShowContacts_(){d2Env.isMobile&&document.scrollingElement.scrollTo({top:0,behavior:"instant"}),this.changePartner_("",!0)}showContacts_(t){this.root.classList.toggle("c-msgr--contacts",t),d2Env.isMobile&&document.documentElement.classList.toggle("g-messenger",!t)}onRemindAddPhone_(t){return _(this,null,function*(){let e=t.node(),{url:n}=e.dataset;n&&(yield R(n,`${Oe}_nophone`,{method:"POST",anchorEl:e}),this.disablePhoneReminder=!0,this.changePartner_(this.partnerId))})}onContact_(t){let e=t.node().id.substring(2);this.partnerId!==e&&this.changePartner_(e,!0)}onNavigate_(t){t.state!==this.partnerId&&this.changePartner_(t.state||"")}changePartner_(t,e=!1){return _(this,null,function*(){t||this.showContacts_(!0),this.uploaderInit_(),this.pendingPartnerId_=t,this.pendingUpdateHistory_=e;let n=yield this.request_("init",{partner:t||""},!0);if(this.showContacts_(!this.pendingPartnerId_),this.partnerId=this.pendingPartnerId_||"",this.pendingUpdateHistory_&&window.history.pushState(this.partnerId,document.title,`/my/messages/${this.partnerId}`),!eR(n)){this.partnerUrl_=n.url,this.partnerUsername_=n.username,this.partnerCssClass_=n.nicknameCssClass,this.partnerDeleted_=n.deleted,this.partnerAvatar_=n.avatar,this.partnerIsBusiness_=n.isBusiness,this.partnerBlacklisted_=n.blacklisted,this.contacts_.setActiveContact(this.partnerId),this.allowReply=n.allowReply,this.lockHistory=n.lockHistory,this.hasNoPhone=n.hasNoPhone,this.disableReason="";let s=!0;this.allowReply||(this.hasNoPhone?this.disablePhoneReminder||(this.disableReason=tt(qM,{OriUrl:this.oriUrl,Url:this.phoneUrl,IsBusiness:!!this.remindUrl,RemindLaterUrl:this.remindUrl})):n.disableReason?this.disableReason=n.disableReason:s=!1),this.ta_.setEnabled(this.allowReply),this.blacklistEl_&&(this.blacklistEl_.disabled=this.lockHistory,this.updateBlacklist()),this.historyDel_&&(this.historyDel_.disabled=this.lockHistory),this.button_.disabled=!this.allowReply,this.uploader_&&this.uploader_.disable(!this.allowReply),A(this.form_,s)}(d2Env.isMobile?document.scrollingElement:this.history_).scrollTo({top:0,behavior:"instant"}),this.render_(n,void 0,!0),this.ta_.setContent(this.presetMessage_),this.presetMessage_="",this.enableHistoryDeleteButton_()})}historyScroll_(t,e,n){let s=d2Env.isMobile?document.scrollingElement:this.history_;if(t){s.scrollTo({top:t.offsetTop+e,behavior:"instant"});return}let o=s.scrollHeight;n?s.scrollTo({top:o,behavior:"instant"}):setTimeout(()=>{s.scrollTo({top:o,behavior:"smooth"})},100)}static updateTitle(t){document.title=tt(DM,{Num:t.detail||0})}updateBlacklist(){this.blacklistEl_&&(this.blacklistEl_.textContent=this.partnerBlacklisted_?Ds:qo)}request_(t,e,n){return _(this,null,function*(){let s=O({_:t==="init"?"get":t},e);return R(Lf,Oe,{method:"POST",silent:n,body:s})})}onPost_(t){return _(this,null,function*(){At(t),this.formFocus_();let e=this.form_.text.value;if(!e)return;let n=yield this.request_("post",{partner:this.partnerId||"",messageId:this.lastId_||"",text:e});if(ij(n)){let s=d2Env.isMobile?`
<div class="x-box x-box--ghost">
<div class="x-text c-link-decorated">${n.warning}</div>
<button class="c-button c-button--primary c-button--l o-t-l u-100"
type="button" data-action="dialog.close">${Er}</button>
</div>`:`
<div class="c-dialog-desc c-link-decorated">${n.warning}</div>
<div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
<button class="c-button c-button--primary c-button--m-no-padding"
  type="button" data-action="dialog.close">${Er}</button>
</div>`,o=li({anchor:this.button_,className:"c-dialog-warning",title:dc,html:s});o.render(),o.show();return}this.ta_.setContent(""),this.render_(n),this.contacts_.updateContacts()})}onPicPost_(t){return _(this,null,function*(){this.formFocus_();let e=yield R(Lf,`${Oe}.pic`,{method:"POST",body:{_:"post",partner:this.partnerId||"",messageId:this.lastId_||"",image:t}});this.render_(e),this.contacts_.updateContacts()})}onDelete_(t){return _(this,null,function*(){let e=t.node();(yield ot(FM,BM,e,$t))&&(yield this.request_("clear",{partner:this.partnerId||""}),this.enableHistoryDeleteButton_(!1),this.messages_=[],ut(Oe,"item",this.history_).forEach(n=>n.remove()))})}onPrev_(){return _(this,null,function*(){let t=yield this.request_("prev",{partner:this.partnerId||"",messageId:this.prevId_||""});this.render_(t,!0)})}getNewMessages_(){return _(this,null,function*(){let t=yield this.request_("get",{partner:this.partnerId||"",messageId:this.lastId_||""},!0);t&&(document.body.dispatchEvent(new Event("force-update")),this.render_(t),this.contacts_.updateContacts())})}renderHeader_(t){A(this.header_,t),t&&(this.partnerId&&this.partnerUsername_?q(Ef(this.partnerId,this.partnerCssClass_,this.partnerUrl_,this.partnerUsername_,this.partnerDeleted_),this.header_):q(YM(),this.header_))}render_(t,e,n){if(clearTimeout(this.tm_),this.tm_=setTimeout(this.getNewMessages_,vi.isIdle?ej:tj),eR(t)){this.messages_=[],this.renderHeader_(!0),q(JM(t.html),this.history_),A(this.form_,!1);return}(e||n)&&(this.hasMoreMessages_=t.hasMore);let{messages:s}=t;n?(this.messages_=s,s.length>0&&(this.prevId_=t.messages[0].id)):e?this.messages_=[...s,...this.messages_]:this.messages_=[...this.messages_,...s];let o=C(Oe,"item",this.history_),r=0;e&&o&&(r=this.history_.scrollTop-o.offsetTop);let a,l=this.messages_.map(d=>{let h=new Date(d.unixTimestamp*1e3),p=a&&nj(a,h)?void 0:h;return a=h,{id:d.id,timestamp:d.timestamp,date:new Date(d.unixTimestamp*1e3),headerDate:p,text:d.text,reply:d.reply,hasImage:d.hasImage}});this.renderHeader_(d2Env.isMobile),q(KM(this.partnerId,this.partnerCssClass_,this.partnerUrl_,this.partnerUsername_,this.partnerDeleted_,this.partnerAvatar_||"",!!this.partnerIsBusiness_,this.hasMoreMessages_,l,this.disableReason),this.history_);let{messageId:c}=t;c&&(e?this.prevId_=c:this.lastId_=c),this.enableHistoryDeleteButton_(),this.blacklistEl_&&(this.blacklistEl_.dataset.id=this.partnerId),n&&this.formFocus_(),s.length>0&&(this.historyScroll_(e?o:void 0,r,n),n&&setTimeout(()=>{this.historyScroll_(void 0,0,!0)}))}formFocus_(){this.allowReply&&!d2Env.isMobile&&this.form_.text.focus()}onTextareaResize_(){if(d2Env.isMobile)return;let t=this.form_.text;Lt(t,{behavior:"instant"})}removeContact_(t){return _(this,null,function*(){At(t);let e=t.node(),n=e.dataset.id;if(Ae(),!(yield ot(PM,$M,e,Us)))return;yield R(Lf,`${Oe}.del`,{method:"POST",anchorEl:e,body:{_:"deletepartner",partner:n||""}});let o=lt(`#mc${n}`);n===this.partnerId?this.changePartner_(""):o&&C(Oe,"bubble",o)&&document.body.dispatchEvent(new Event("force-update")),o&&o.remove()})}onBlacklist_(t){return _(this,null,function*(){let e=t.node(),n=e.dataset.id;if(Ae(),!(!this.partnerBlacklisted_&&!(yield ot(zM,void 0,e,WM))))if(yield R("/ajax/blacklist.cshtml",`${Oe}.bl`,{method:"POST",anchorEl:e,body:{_:this.partnerBlacklisted_?"remove":"add",id:n}}),this.partnerBlacklisted_=!this.partnerBlacklisted_,this.updateBlacklist(),this.partnerBlacklisted_){this.changePartner_("");let s=lt(`#mc${n}`);s&&s.remove()}else this.changePartner_(n)})}},Jd=class extends H{parsedInit(){let{partner:t}=this.element.dataset,e=t&&t!=="0"?t:void 0;new wf(this.element,e)}}});var Yd,sR=b(()=>{"use strict";Yd=class extends EventTarget{constructor(){super(...arguments);this.imageMap=new Map;this.completionFired=!1}addImage(e){this.completionFired=!1,this.imageMap.set(e,new Image)}removeImage(e){let n=this.imageMap.get(e);n&&(this.imageMap.delete(e),n.removeEventListener("load",this),n.removeEventListener("abort",this),n.removeEventListener("error",this))}start(){this.imageMap.forEach((e,n)=>{e.addEventListener("load",this),e.addEventListener("abort",this),e.addEventListener("error",this),e.id=n,e.src=n})}handleEvent(e){let n=e.currentTarget;n&&(this.removeImage(n.id),this.dispatchEvent(new CustomEvent(e.type,{detail:n})),this.imageMap.size===0&&!this.completionFired&&(this.completionFired=!0,this.dispatchEvent(new Event("complete"))))}}});var oR={};at(oR,{default:()=>Kd});var sj,Kd,rR=b(()=>{"use strict";B();G();Dc();sR();sj=960,Kd=class extends H{parsedInit(){let t=Q("img",this.element).map(o=>o.src),e=["mm/android-6","email/app-store-badge-ru","email/google-play-badge-ru","email/app-gallery-badge-ru","mm/iphone-6"].map(o=>`/assets/images/${o}.png`),n=t.concat(e),s=new Yd;n.forEach(o=>{s.addImage(o)}),s.addEventListener("complete",()=>{this.element.classList.remove("is-inactive")}),s.start(),d2Env.isMobile&&(to().addEventListener("resize",()=>this.fixScale),this.fixScale())}fixScale(){let e=this.element.offsetWidth/sj;this.element.firstElementChild.style.transform=`translateZ(0) scale(${e})`}}});var aR,lR,cR,dR,mR,hR,uR,pR,fR=b(()=>{"use strict";aR="Добавить сатегорию",lR="Управление категорией",cR="Удалить категорию",dR="Название",mR="Красивый URL",hR="Приоритет",uR="Публичная",pR="Активная"});var yR={};at(yR,{default:()=>cj});var gR,vR,ER,bR,rj,aj,lj,cj,_R=b(()=>{"use strict";dt();F();fR();Kt();W();Kn();me();pt();gR="classify",vR="/_api/",ER=(i,t="",e="",n=0,s,o,r)=>L`
<form action=${vR}>
  <div class="y-form-item o-t">
    <label class="y-form-legend" for="dlg.caption">${dR}</label>
    <input class="y-input u-100" type="text" name="caption" id="dlg.caption" .value=${t}>
  </div>
  <div class="y-form-item">
    <label class="y-form-legend" for="dlg.url">${mR}</label>
    <input class="y-input u-100" type="text" name="url" id="dlg.url" .value=${e}>
  </div>
  <div class="y-form-item">
    <label class="y-form-legend" for="dlg.priority">${hR}</label>
    <input class="y-input u-100 u-nospin" type="number" name="priority" id="dlg.priority" .value=${n}>
  </div>
  <div class="y-form-item">
    <label class="y-choice o-f">
      <input type="checkbox" ?checked=${s}> ${uR}
    </label>
    <label class="y-choice o-f">
      <input type="checkbox" ?checked=${o}> ${pR}
    </label>
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend o-group o-group--v">
    ${i?L`
        <div class="u-100 o-flow">
          <button class="c-button c-button--primary c-button--l c-button--block" type="submit" name="submitbtn">
            ${ve}
          </button>
          <button class="c-button c-button--l c-button--block" type="button" @click=${r}>
            ${$t}
          </button>
        </div>`:L`<button class="c-button c-button--primary c-button--alt-l u-100"
          type="submit" name="submitbtn">${ve}</button>`}
  </div>
</form>
`,bR=(i,t,e)=>{let n=new _t({anchor:i,className:"c-modal__content--classify",title:e},!0,!0);n.addEventListener("submit",()=>_(void 0,null,function*(){d2Env.isApp&&(yield we(50)),window.location.reload()})),n.show(t)},rj=i=>R(`${vR}/delete`,gR,{method:"POST",anchorEl:i,body:{}}),aj=i=>_(void 0,null,function*(){let t=i.node();bR(t,ER(),aR)}),lj=i=>{let t=i.node();bR(t,ER(!0,"Выбор редакции","f1",43,!0,!0,n=>_(void 0,null,function*(){let s=n.target;(yield ot(`${cR}?`,void 0,s,$t))&&(yield rj(s),Rt(),d2Env.isApp&&(yield we(50)),window.location.reload())})),lR)},cj=()=>{w.registerHandlers(gR,{add:aj,edit:lj})}});var TR={};at(TR,{default:()=>Zd});var Zd,LR=b(()=>{"use strict";G();Gt();Zd=class extends H{parsedInit(){this.select=this.slot("select"),this.tags=this.slot("tags");let t=Array.from(this.tags.children).map(e=>e.querySelector("input").value);for(let e of this.select.options)e.disabled=t.includes(e.value);this.select.addEventListener("change",()=>this.add()),this.tags.addEventListener("click",e=>this.remove(e))}add(){if(this.select.selectedIndex===0)return;let t=this.select.options[this.select.selectedIndex],e=document.createElement("input");e.type="hidden",e.name="category",e.value=t.value;let n=document.createElement("li");n.textContent=t.text,n.appendChild(e),this.tags.appendChild(n),t.disabled=!0,this.select.selectedIndex=0,Ct(this.select)}remove(t){let e=t.target;if(e.tagName==="LI"){let n=e.querySelector("input").value,s=Array.from(this.select.options).find(o=>o.value===n);s&&(s.disabled=!1),e.remove()}}}});var Wa,wR=b(()=>{"use strict";G();Z();Wa=class extends H{parsedInit(){this.handleEvent(),this.element.addEventListener("change",this)}handleEvent(){let{region:t}=this.element;this.element.querySelector('button[type="submit"]').disabled=t.value==="";let e="directions"in t[t.selectedIndex].dataset;A(this.slot("directions"),e),e||(this.element.direction.selectedIndex=0)}}});var qa,xR=b(()=>{"use strict";G();W();ts();qa=class extends H{init(){let t=JSON.parse(this.element.textContent);this.pages=t.pages,this.pagerLink=t.pagerLink,this.token=t.token,this.current=t.current,ye().addEventListener("scroll",this)}handleEvent(){let t=this.current+1;if(!this.pages[t]){ye().removeEventListener("scroll",this);return}Dt(this.pagerLink,this.role,{silent:!0,body:{token:this.token,id:this.pages[t]}}).then(e=>{this.element.insertAdjacentHTML("beforebegin",e),this.current=t})}}});var CR,AR=b(()=>{"use strict";ds();CR=()=>{ui("companies-about","visited",30*12)}});var SR={};at(SR,{default:()=>dj});var dj,MR=b(()=>{"use strict";wR();xR();AR();G();dj=()=>{U("companies",qa),U("companies-form",Wa),d2Env.isMobile&&U("companies-promo",CR)}});var RR={};at(RR,{default:()=>Xd});var Xd,IR=b(()=>{"use strict";G();Z();Be();Xd=class extends H{parsedInit(){this.type=this.element.dataset.imageName,this.element.addEventListener("imagelist-update",()=>this.picSync()),this.bindInput("title"),this.bindInput("text"),this.bindInput("url"),A(this.slot("preview",document.body),!0)}bindInput(t){let e=this.slot(`${t}-input`),n=this.slot(t,document.body);e.dataset.type=t,e.dataset.defaultValue=n.textContent,this.inputSync(e),e.addEventListener("input",()=>this.inputSync(e))}picSync(){let t=this.element[`${this.type}-1`],e=t?t.dataset.preview||t.dataset.thumbnail:null,n=this.slot("pic",document.body),s=this.slot("pic-url",document.body);if(e){let o=Vi({images:[{url:e,width:16,height:9}]},2,{className:"is-rounded",size:{width:16,height:9}});o.dataset.slot=`${this.role}.pic-url`,s?s.replaceWith(o):n.before(o)}else s&&s.remove();A(n,!e)}inputSync(t){let e=t.dataset.type,n="";try{n=e==="url"?new URL(t.value).host:t.value}catch(o){}let s=this.slot(e,document.body);s.textContent=n||t.dataset.defaultValue}}});var xf,Cf,OR,HR,kR,Af,DR,NR,PR,$R=b(()=>{"use strict";xf="Очистить",Cf="Сохранить",OR="{Text}{Extra, select, 0 {} other { и ещё {Extra}}}",HR="Ваши шаблоны",kR="Шаблоны",Af="Быстрые категории",DR="Какие марки обслуживаете?",NR="Выберите марки",PR="{Count, plural, one {# марка} many {# марок} other {# марки}}"});var FR,BR=b(()=>{"use strict";FR=[{name:"ru",caption:"Все российские",brands:["derways","gaz","lada","moskvich","tagaz","uaz"]},{name:"foreign",caption:"Все иномарки",brands:["ac","acura","alfaromeo","alpina","amc","aro","asia","astonmartin","audi","austin","autozam","avia","bac","barkas","bcc","bentley","bertone","bilenkinclassiccars","bmw","bogdan","brilliance","bugatti","buick","byd","cadillac","caterham","changan","chery","chevrolet","chrysler","citroen","cord","dacia","dadi","daewoo","daihatsu","daimler","datsun","detomaso","delorean","dodge","dongfeng","eagle","efini","eunos","faw","ferrari","fiat","ford","foton","fso","geely","genesis","gmc","greatwall","hafei","haima","haval","hawtai","holden","honda","huanghai","hummer","hyundai","infiniti","ikco","isuzu","iveco","jac","jaguar","jeep","kia","ktm","lamborghini","lancia","landrover","ldv","lexus","lifan","ligier","lincoln","lotus","luxgen","marussia","maserati","maybach","mazda","mercedes","mercury","merkur","mg","mini","mitsubishi","morgan","morris","nissan","noble","nysa","oldsmobile","opel","peugeot","plymouth","pontiac","porsche","proton","ravon","renault","rollsroyce","rover","saab","samsung","saturn","scion","seat","simca","skoda","sma","smart","ssangyong","subaru","suzuki","talbot","tata","tatra","tesla","toyota","trabant","vauxhall","volkswagen","volvo","wartburg","wiesmann","willys","zotye","zx"]},{name:"eu",caption:"Европейские",brands:["alfaromeo","audi","bmw","bugatti","citroen","dacia","ferrari","fiat","jaguar","landrover","lotus","mercedes","mini","opel","porsche","renault","saab","seat","skoda","smart","volkswagen","volvo"]},{name:"de",caption:"Немецкие",brands:["audi","bmw","mercedes","opel","porsche","smart","volkswagen"]},{name:"kr",caption:"Корейские",brands:["daewoo","genesis","hyundai","kia","ssangyong"]},{name:"cn",caption:"Китайские",brands:["brilliance","byd","changan","chery","dongfeng","faw","foton","geely","greatwall","haima","haval","hawtai","huanghai","jac","lifan"]},{name:"jp",caption:"Японские",brands:["acura","datsun","honda","isuzu","infiniti","lexus","mazda","mitsubishi","nissan","subaru","suzuki","toyota"]},{name:"us",caption:"Американские",brands:["chevrolet","chrysler","dodge","fiat","ford","hummer","jeep","cadillac"]},{name:"vw",caption:"Ваги",brands:["audi","porsche","seat","skoda","volkswagen"]},{name:"gm",caption:"GM",brands:["cadillac","chevrolet","gmc","hummer"]}]});var ZR={};at(ZR,{default:()=>xj});var St,Mn,Qd,qR,VR,tm,UR,bo,Mf,hj,GR,JR,uj,jR,zR,WR,pj,Rf,YR,fj,If,gj,yo,Sf,KR,Of,vj,Ej,bj,yj,_j,Tj,Lj,wj,xj,XR=b(()=>{"use strict";dt();ii();tr();F();$R();pa();B();X();be();Z();me();BR();St="directions",Mn="brand",Qd="mode",qR="preset",VR="template",tm=6,UR=5,bo=new Map,Mf=[],hj=(i,t)=>{let e=i.map(r=>bo.get(r));if(t)return e.join(", ");let n=i.length,s=e.slice(0,UR).join(", "),o=Math.max(n-UR,0);return tt(OR,{Text:s,Count:n,Extra:o})},GR=i=>Mf.map(t=>({name:t.name,caption:t.caption,brands:t.brands,selected:t.brands.every(e=>i.includes(e))})),JR=(i,t,e,n,s="check",o)=>d2Env.isMobile?L`
<div class="x-form__item">
  <div class="x-form__body">
    <label class="x-choice x-choice--switch">
      <input type="checkbox" name=${i} .value=${t} ?disabled=${o}
        ?checked=${n} data-action="${`change:${St}.${s}`}">
      <span class="x-choice__label">${e}</span>
    </label>
  </div>
</div>
`:L`
<label class="y-choice o-f">
  <input type="checkbox" name=${i} .value=${t} ?disabled=${o}
    ?checked=${n} data-action="${`change:${St}.${s}`}">
  ${e}
</label>
`,uj=(i,t,e,n,s)=>d2Env.isMobile?L`
<div class="x-form__item">
  <div class="x-form__body">
    <label class="x-choice x-choice--radio">
      <input type="radio" name=${i} .value=${t} ?disabled=${s}
        ?checked=${n} data-action=${`change:${St}.template`}>
      <span class="x-choice__label u-text-overflow">${e}</span>
    </label>
  </div>
</div>
  `:L`
<label class="y-choice o-f">
  <input type="radio" name=${i} .value=${t} ?disabled=${s}
    ?checked=${n} data-action=${`change:${St}.template`}>
  <span class="u-text-overflow">${e}</span>
</label>
`,jR=(i,t,e)=>{let n=Array.from(bo.keys()).map(o=>JR(i,o,bo.get(o),t.includes(o),void 0,e));if(d2Env.isMobile)return n;let s=Yi(n,tm);return L`<div class="o-grid o-grid--${Math.min(tm,n.length)} o-grid--no-margin">${s.map(o=>L`<div>${o}</div>`)}</div>`},zR=(i,t)=>i.map(e=>uj(VR,e.brands.join(","),L`<b>${e.caption}</b> <i>${hj(e.brands,!0)}</i>`,!1,t)),WR=(i,t)=>{let n=GR(i).map(o=>JR(qR,o.name,o.caption,!!o.selected,"preset",t));if(d2Env.isMobile)return n;let s=Yi(n,tm);return L`<div class="o-grid o-grid--${Math.min(tm,n.length)} o-grid--no-margin">${s.map(o=>L`<div>${o}</div>`)}</div>`},pj=(i,t,e)=>{let n=t.length===0;return d2Env.isMobile?L`
<form class="x-form c-com-dirform o-t-s" novalidate data-role="form">
  <div class="x-box x-box--narrow">
    <div class="c-radiogroup o-t" style=${Le({opacity:n?"0.5":"1"})}>
      <label class="c-radiogroup__item">
        <input name="${Qd}" type="radio" value="templates" data-action="change:${St}.presets"
          ?disabled=${n} ?checked=${!n}>
        <span class="c-radiogroup__button">${kR}</span>
      </label>
      <label class="c-radiogroup__item">
        <input name="${Qd}" type="radio" value="presets" data-action="change:${St}.presets"
          ?disabled=${n} ?checked=${n}>
        <span class="c-radiogroup__button">${Af}</span>
      </label>
    </div>
    <div class="c-com-dirform__templates"
      data-slot="${St}.templates-el" style=${Le({display:n?"none":""})}>
      ${zR(t,e)}
    </div>
    <div class="c-com-dirform__presets"
      data-slot="${St}.presets-el" style=${Le({display:n?"":"none"})}>
      ${WR(i,e)}
    </div>
  </div>
  <div class="x-box x-box--narrow" data-role="chk">
    ${jR(Mn,i,e)}
  </div>
  <div class="c-com-dirform__submit o-group o-group--l">
    <div class="c-com-dirform__selected is-auto" data-slot="${St}.selected"></div>
    <button class="r-button-unstyled c-link c-link--secondary" style=${Le({opacity:e?"0.5":"1"})}
      ?disabled=${e} type="button" data-action="${St}.clear" data-slot="${St}.clear">${xf}</button>
    <button class="c-button c-button--primary" ?disabled=${e} name="submitbtn" type="submit">${Cf}</button>
  </div>
</form>
    `:L`
<form class="c-com-dirform" novalidate data-keysubmit>
  <div class="o-grid-row ${Nt({"o-grid-row--s":!d2Env.isMobile,"o-group":!d2Env.isMobile,"o-group--justify":!d2Env.isMobile})}">
    <div class="c-radiogroup" style=${Le({opacity:n?"0.5":"1"})}>
      <label class="c-radiogroup__item">
        <input name="${Qd}" type="radio" value="templates" data-action="change:${St}.presets"
          ?disabled=${n} ?checked=${!n}>
        <span class="c-radiogroup__button">${HR}</span>
      </label>
      <label class="c-radiogroup__item">
        <input name="${Qd}" type="radio" value="presets" data-action="change:${St}.presets"
          ?disabled=${n} ?checked=${n}>
        <span class="c-radiogroup__button">${Af}</span>
      </label>
    </div>
    <div class="c-com-dirform__submit o-group o-group--l">
      <button class="r-button-unstyled c-link c-link--secondary" style=${Le({opacity:e?"0.5":"1"})}
        ?disabled=${e} type="button" data-action="${St}.clear" data-slot="${St}.clear">${xf}</button>
      <button class="c-button c-button--primary" ?disabled=${e} name="submitbtn" type="submit">${Cf}</button>
    </div>
  </div>
  <div class="c-com-dirform__templates"
    data-slot="${St}.templates-el" style=${Le({display:n?"none":""})}>
    ${zR(t,e)}
  </div>
  <div class="c-com-dirform__presets"
    data-slot="${St}.presets-el" style=${Le({display:n?"":"none"})}>
    ${WR(i,e)}
  </div>
  <div class="hr"></div>
  <div class=${Nt({"o-grid-row":d2Env.isMobile})} data-role="chk">
    ${jR(Mn,i,e)}
  </div>
</form>
    `},Rf=()=>{if(bo.size===0){let i=C(St,"brands-list");i&&(JSON.parse(i.textContent).forEach(e=>{bo.set(e.name,e.caption)}),Mf=FR.map(e=>({name:e.name,caption:e.caption,brands:e.brands.filter(n=>bo.has(n))})))}},YR=i=>{Q(`[name="${VR}"]`,i).forEach(e=>{e.checked=!1})},fj=(i,t)=>{let n=i[t.name].value.split(",");n.length!==0&&Array.from(i[Mn]).forEach(s=>{s.checked=n.includes(s.value)})},If=i=>{let t=Array.from(i[Mn]).filter(s=>s.checked).map(s=>s.value),e=GR(t);Array.from(i[qR]).forEach((s,o)=>{s.checked=!!e[o].selected})},gj=(i,t)=>{let e=Mf.find(s=>s.name===t.value);if(!e)return;let{checked:n}=t;Array.from(i[Mn]).forEach(s=>{e.brands.includes(s.value)&&(s.checked=n)}),If(i)},yo=i=>{let t=Array.from(i[Mn]).filter(n=>n.checked).length,e=C(St,"selected");if(e.textContent=t===0?d2Env.isMobile?NR:DR:tt(PR,{Count:t}),d2Env.isMobile){let n=C(St,"clear",i);A(n,t!==0)}},Sf=i=>Array.from(i.options).map(t=>t.value),KR=(i,t)=>{let e=C(St,"button",i),n=C(St,"checkbox",i);A(e,t),n.checked=t},Of=(i,t,e)=>{let n=C(St,"fields",t),s=(n.dataset.caption||"")+(d2Env.isMobile?"":` <span class="c-counter" data-slot="${St}.selected"></span>`),o=Sf(n),a=ut(St,"fields").filter(c=>c.options.length>0).map(c=>({name:c.name,caption:c.dataset.caption||"",brands:Sf(c)})),l=new _t({anchor:i,className:"c-modal__content--brands",title:s});q(pj(o,a,e),l.element),l.setSubmitHandler(c=>{let d=C(St,"brands",t),h=Array.from(c[Mn]).filter(m=>m.checked).map(m=>m.value);d.textContent=String(h.length)||"",n.innerHTML=h.map(m=>`<option value="${m}" selected></option>`).join("");let p=Sf(n).length>0;return KR(t,p),Promise.resolve()}),l.show(),yo(l.form)},vj=i=>{Rf();let t=i.node(),e=vt(t,St,"item");if(KR(e,t.checked),t.checked){let n=C(St,"button",e);Of(n,e)}},Ej=i=>{Rf();let t=i.node(),e=vt(t,St,"item");Of(t,e)},bj=i=>{Rf();let t=i.node(),e=vt(t,St,"item");Of(t,e,!0)},yj=i=>{let{form:t}=i.node();If(t),YR(t),yo(t)},_j=i=>{let t=i.node();Array.from(t.form[Mn]).forEach(e=>{e.checked=!1}),If(t.form),YR(t.form),yo(t.form)},Tj=i=>{let t=i.node();fj(t.form,t),yo(t.form)},Lj=i=>{let t=i.node();gj(t.form,t),yo(t.form)},wj=i=>{let t=i.node(),e=vt(t,St,"item"),n=C(St,"templates-el",e),s=C(St,"presets-el",e);A(n,t.value==="templates"),A(s,t.value==="presets"),yo(t.form)},xj=()=>{w.registerHandlers(St,{checkdirection:vj,select:Ej,show:bj,check:yj,clear:_j,template:Tj,preset:Lj,presets:wj})}});var QR={};at(QR,{default:()=>Sj});var _o,Cj,Aj,Sj,tI=b(()=>{"use strict";F();B();X();Z();_o="adv-profile",Cj=i=>{let t=vt(i.node(),_o,"section"),e=C(_o,"country-code",t),n=String(e.options[e.selectedIndex].dataset.isDomestic===""),s=C(_o,"type",t).value||"";Q("[data-domestic],[data-types]",t).forEach(r=>{A(r,(!r.hasAttribute("data-domestic")||r.dataset.domestic===n)&&(!r.hasAttribute("data-types")||r.dataset.types.split(" ").includes(s)))});let o=C(_o,"name",t);o.placeholder=["Person","Entrepreneur"].includes(s)?o.dataset.placeholderPerson:o.dataset.placeholderCompany},Aj=i=>{let t=i.node(),e=C(_o,"customer",t.form);e&&A(e,t.value==="Agency")},Sj=()=>{w.registerHandlers(_o,{update:Cj,toggleCustomer:Aj})}});var Oi,Mj,Rj,eI,Ij,Oj,Hj,kj,Dj,iI,nI=b(()=>{"use strict";F();B();X();W();Z();ge();wh();Zt();me();pt();Ne();Oi="appointments",Mj=(i,t)=>`
<label class="c-hours__item">
  <input name="hours" value="${i}" type="checkbox"${t?" checked":""}>
  <span class="c-hours__label">${i}:00</span>
</label>
`,Rj=(i,t)=>!!(t&&t.includes(i)),eI=(i,t)=>{let e=lt('input[name="urgency"]:checked',i);if(e){let n=e.dataset.hours.split(","),s=C(Oi,"hours",i),o=n.map(r=>Mj(r,Rj(r,t)));s.innerHTML=o.join("")}},Ij=i=>{let t=i.node(),n=Q('input[name="hours"]:checked',t.form).map(s=>s.value);eI(t.form,n)},Oj=i=>{let e=i.node().value==="phone",n=C(Oi,"contacts");A(n,e);let s=C(Oi,"phone-notes");A(s,e);let o=C(Oi,"messages-notes");A(o,!e)},Hj=(i,t)=>{let e=t.validationErrors;if(e&&e.length>0){let{field:n,messages:s}=e[0],o=n[0].toLowerCase()+n.slice(1),r=i[o]&&i[o].length?i[o][0]:i[o];if(r){try{Lt(r,{behavior:"instant",block:"nearest"}),r.focus()}catch(a){}Fo(s.join("<br>"),r)}}return!!e},kj=i=>{Rt(),i.node().href===""&&At(i)},Dj=i=>_(void 0,null,function*(){let t=i.node(),e=yield Dt(t.href,Oi,{anchorEl:t}),n=Ei(e),s=lt('script[type="application/json"]',n),o=JSON.parse(s.textContent),r=new _t({anchor:t,title:o.header},!0);r.element.append(n),eI(r.element),r.addEventListener("submit",l=>{l.preventDefault();let c=l.detail;if(!Hj(r.form,c)){let d=C(Oi,"success"),h=C(Oi,"text",d),p=C(Oi,"link",d);h.innerHTML=c.text||"",p.innerHTML=c.linkText||"",p.href=c.linkUrl||"",A(r.form,!1),A(d,!0)}}),r.show();let a=C(Oi,"validation",r.element);a&&sc(a)}),iI=()=>{w.registerHandlers(Oi,{form:Dj,hours:Ij,contacts:Oj,link:kj})}});var Nj,sI,Pj,oI,rI=b(()=>{"use strict";B();Nj="js-text",sI="is-clamped",Pj="is-short",oI=i=>{let t=It(i,sI);if(!t)return;let e=()=>{t.classList.remove(sI),i.remove()},n=j(Nj,t);n.offsetWidth<n.scrollWidth?i.addEventListener("click",e):(e(),t.classList.add(Pj))}});var tn,Hf,aI,$j,lI,cI=b(()=>{"use strict";F();X();W();Z();ge();tn="comfeedback",aI=()=>_(void 0,null,function*(){let i=C(tn,"filters"),t=i.kind.value,e=t==="Assessed",n=yield Dt(i.action,tn,{anchorEl:i,body:new FormData(i)}),s=C(tn,"container");s.innerHTML=n;let o=C(tn,"more");o&&(Hf||(Hf=o.href),o.href=`${Hf}${e?"":`?kind=${t}`}`);let r=document.getElementById("reviews");Lt(r,{behavior:"smooth"})}),$j=i=>{let e=i.node().value==="mentions",n=C(tn,"filters");n.kind.value=e?"Neutral":"Assessed";let s=C(tn,"reviews-desc"),o=C(tn,"mentions-desc");A(s,!e),A(n,!e),A(o,e);let r=C(tn,"more");r&&A(r,!e);let a=C(tn,"more-mentions");a&&A(a,e),aI()},lI=()=>{w.registerHandlers("comfeedback",{section:$j,filter:aI})}});var dI,mI,hI,uI,pI=b(()=>{"use strict";dI="Ответ на отзыв",mI="Удалить",hI="Удалить ответ?",uI="Изменить"});var Df,Nf,Bj,Uj,jj,zj,Wj,qj,Vj,em,kf,Gj,Jj,Yj,Kj,fI,gI=b(()=>{"use strict";F();pI();Kt();B();W();Zt();Gi();pt();Df="comfeedback",Nf="is-collapsed",Bj="is-active",Uj="is-short",jj="is-edit",zj="js-container",Wj="js-field",qj="js-text",Vj=[{action:"edit",text:uI},{action:"delete",text:mI,confirmTitle:hI,confirm:$t}],kf=(i,t,e,n)=>{let s=It(i,zj),o=j(Wj,s);if(s.classList.toggle(Bj,t),s.classList.remove(Uj),n){let r=j(qj,s);r&&(r.innerHTML=n)}t||(s.classList.toggle(jj,!e),o&&(e?(o.value="",o.form.classList.add(Nf)):(o.focus(),setTimeout(()=>{o.selectionStart=o.selectionEnd=o.value.length},0))))},Gj=i=>{let t=i.node();clearTimeout(em),t.form.classList.remove(Nf);let e=t.form.oldtext,n=e&&e.value;n&&(t.value=n,e.value="")},Jj=i=>{let t=i.node();clearTimeout(em),em=setTimeout(()=>{t.value||t.form.classList.add(Nf)},350)},Yj=i=>_(void 0,null,function*(){At(i),clearTimeout(em);let t=i.node(),{text:e}=yield R(t.action,`${Df}.submit`,{method:"POST",anchorEl:t.submitbtn,body:{text:t.text.value}});kf(t,!0,!1,e||"")}),Kj=i=>{let t=i.node(),e=t.dataset.editable==="",n=Vj.slice();e||n.splice(0,1),new ae(t,n,dI).addEventListener("select",o=>{let r=o.detail;r==="delete"?Dt(t.dataset.url||"",`${Df}.delete`,{delay:!0,method:"DELETE",anchorEl:t}).then(()=>{kf(t,!1,!0),Ut()}):r==="edit"&&kf(t,!1)})},fI=()=>{w.registerHandlers(Df,{focus:Gj,blur:Jj,submit:Yj,dropdown:Kj})}});var Va,vI=b(()=>{"use strict";B();G();W();ts();Va=class extends H{parsedInit(){ye().addEventListener("scroll",this)}handleEvent(){let t=lt('link[rel="next"]',this.element);if(!t){ye().removeEventListener("scroll",this);return}if(this.isBusy)return;this.isBusy=!0;let e=t.href;t.remove(),Dt(e,this.role,{silent:!0,throwError:!0}).then(n=>{this.element.insertAdjacentHTML("beforeend",n)}).catch(()=>{}).finally(()=>{this.isBusy=!1})}}});var EI,bI,yI=b(()=>{"use strict";F();X();Z();EI="cpgallery",bI=()=>{w.registerHandlers(EI,{unfold:i=>{let t=i.node();ut(EI,"photo").forEach(n=>{A(n,!0)}),t.parentElement.remove()}})}});var _I,Zj,TI,LI=b(()=>{"use strict";F();X();Z();_I="highlights",Zj=i=>{let t=i.node();ut(_I,"hidden").forEach(n=>{A(n,!0)}),t.remove()},TI=()=>{w.registerHandlers(_I,{more:Zj})}});var wI,xI,CI=b(()=>{"use strict";X();le();wI=(i,t)=>{let e=C(t,"params"),{lat:n,lng:s,title:o,address:r}=(e||i).dataset;if(!n||!s)return;let a=[Number(n),Number(s)];DG.then(()=>{let l=DG.map(i,{center:a,zoom:15,scrollWheelZoom:!1,closePopupOnClick:!1}),c=DG.popup({closeButton:!1}).setLatLng(a).setContent(`<div><h3 class="c-header">${Pt(o||"")}</h3>${Pt(r||"")}</div>`);DG.marker(a).addTo(l).bindPopup(c).openPopup()})},xI=()=>{let i=C("com-map","placeholder");i&&Xf(i,"com-map")}});var Xj,Qj,AI,SI=b(()=>{"use strict";F();W();Xj="/_api/companies/click",Qj=i=>{let t=i.node(),e=t.dataset.key||"";d2Env.isMobile?R(Xj,{method:"POST",silent:!0,body:{key:e}}):t.classList.add("is-active")},AI=()=>{w.registerHandlers("phone",{reveal:Qj})}});var tz,MI,RI=b(()=>{"use strict";F();tz="is-disabled",MI=(i,t)=>{let e=i.classList.contains(tz),n=i.closest("form"),s=[Number(n.latitude.value)||55.7427928,Number(n.longitude.value)||37.6154009];DG.then(()=>{let o=DG.map(i,{center:s,zoom:15,fullscreenControl:!1,scrollWheelZoom:!1}),r=DG.marker(s,{draggable:!e}).addTo(o);e||r.on("dragend",c=>{let d=c.target._latlng;a([d.lat,d.lng])});let a=(c,d)=>{d!==n.latitude&&(n.latitude.value=c[0].toFixed(6)),d!==n.longitude&&(n.longitude.value=c[1].toFixed(6)),o.panTo(c),d&&r.setLatLng(c)},l=c=>{let d=c.node(),h=Number(n.latitude.value),p=Number(n.longitude.value);!e&&h&&p&&a([h,p],d)};w.registerHandlers(t,{update:l})})}});var II,OI=b(()=>{"use strict";nn();II=i=>{ke(i,{onEnter:()=>{i.style.animationDelay=`${Math.round(Math.random()*200)}ms`,i.classList.add(i.dataset.fx||"fx-cp-fadein-up")},permanent:!0})}});var HI={};at(HI,{default:()=>ez});var ez,kI=b(()=>{"use strict";nI();rI();cI();gI();vI();yI();LI();CI();SI();RI();OI();G();ez=()=>{U(".c-fadeinup",II,!0),U("com-map",wI),U("com-profile-map",MI),AI(),bI(),TI(),U("comfeedback",Va),iI(),lI(),fI(),U("comfeedback-show",oI),window._mapShow=xI}});var DI,NI=b(()=>{"use strict";DI="Все объявления"});var Ga,PI=b(()=>{"use strict";ss();xc();Ga=class extends EventTarget{constructor(e){super();this.input=e;this.ac=new Re("/ajax/geo.cshtml?_=r&p=1",this.input),this.ac.setRowBuilder(Ys),this.update=this.update.bind(this),this.dismiss=this.dismiss.bind(this),this.ac.addEventListener("update",this.update),this.ac.addEventListener("dismiss",this.dismiss)}update(e){let{row:n}=e.detail;this.dispatchEvent(new CustomEvent("select",{detail:{kind:n.kind||"city",value:n.id||"",name:n.caption||"",country:n.country,countryId:n.countryId}}))}dismiss(){clearTimeout(this.dismissTimer),this.dismissTimer=setTimeout(()=>{this.dispatchEvent(new Event("cancel"))},100)}dispose(){this.ac&&this.ac.dispose()}}});var $I={};at($I,{default:()=>sm});var nz,sz,oz,im,rz,Pf,nm,sm,FI=b(()=>{"use strict";F();NI();B();G();X();Gt();W();Z();xi();Li();ts();Be();np();dn();PI();nz=400,sz=5,oz=10,im=i=>{i.delete("page")},rz=()=>{let i=C("nav","guest-extra");i&&i.remove()},Pf=i=>{document.querySelectorAll(".js-market-listmode, .js-market-indexmode").forEach(t=>A(t,t.classList.contains("js-market-indexmode")?i:!i))},nm=()=>{let i=new URLSearchParams(window.location.search);return!(i.get("section")||i.get("brand")||i.get("model")||i.get("generation")||i.get("car"))&&!i.get("query")&&(!i.get("location")||i.get("location")==="*")},sm=class extends H{parsedInit(){let t=JSON.parse(this.element.textContent);this.page_=0,this.nextPageEnabled_=!1,this.nextPageIsLoading_=!1,this.searchUrl_=t.searchUrl,this.pageSize_=t.pageSize,this.data_=t.results,this.items_=0,this.adsEnabled_=t.dvEnabled,this.resources_=t.resources,this.sections_=new Map,this.data_.section&&this.data_.section.id&&this.sections_.set(this.data_.section.id,this.data_.section.caption||""),this.filterType_=this.data_.filterType||"default",this.offersEl_=j("js-market-offers"),this.sectionsEl_=j("js-market-sections"),this.facetsForm_=j("js-market-facets"),this.filtersContainer_=j("js-market-filters"),this.filterEls_=Q("[data-target]",this.filtersContainer_),this.navEls_=Q(".js-market-nav"),this.searchEl_=j("js-market-search"),this.locationEl_=j("js-market-location"),this.locationAcEl_=j("js-market-location-ac"),this.isUserInput_=!1,ye().addEventListener("scroll",()=>this.more_()),this.locationEl_.addEventListener("change",()=>this.onLocationChange_()),this.searchEl_.addEventListener("input",he(()=>this.onInput_(),nz)),window.addEventListener("popstate",()=>this.navigate_()),this.restoreLocations_(),this.slots("block",document.body).forEach(e=>A(e,!0)),this.render_(),Pf(nm()),w.registerHandlers("marketsearch",{nav:this.onNav_,presets:this.onNav_,toindex:this.onToIndex_,more:this.onNextPage_,setlocation:this.onSetLocation_},this)}onNav_(t){rz();let e=t.actionName();this.isUserInput_=!1;let n=this.getQuery_();if(im(n),e==="presets"){let a=t.node();if(a.selectedIndex!==0){let l=a.options[a.selectedIndex];n.set("brand",l.dataset.brand||""),n.set("model",l.dataset.model||""),n.set("generation",l.dataset.gen||"")}}let s=n.get("section"),o=this.sections_.get(s),r=s&&o?o:this.resources_.defaultTitle;document.title=r,window.history.pushState(null,r,nm()?window.location.pathname:`?${n}`),this.navigate_()}onSetLocation_(t){let e=t.node(),{value:n}=e.dataset;if(n==="country"){let s=this.locationEl_.options[this.locationEl_.selectedIndex],{countryid:o,country:r}=s.dataset;for(let a=0,l;l=this.locationEl_.options[a];a++)if(/^[A-Z]+$/.test(l.value)&&!o){this.locationEl_.selectedIndex=a;break}o&&r&&this.addLocation_("country",o,r)}else this.locationEl_.selectedIndex=0;this.onLocationChange_()}onToIndex_(){document.title=this.resources_.defaultTitle,window.history.pushState(null,this.resources_.defaultTitle,window.location.pathname),this.navigate_()}onNextPage_(){this.more_()}setPageTitle_(t){let e=j("js-market-section-title");if(!e)return;let n="";if(t){let o=this.getQuery_();im(o),o.delete("query"),o.set("section",t),n=`?${o}`}let s=t&&this.sections_.get(t)||"";e.innerHTML=s?`<a class="c-link c-link--text" href="${n}">${s}</a>`:"",A(e,!!s)}more_(){this.nextPageEnabled_&&!this.nextPageIsLoading_&&(this.nextPageIsLoading_=!0,this.request_(!1,!0))}resetPage_(){this.page_=0,this.setMoreButton_()}setMoreButton_(){let t=Math.ceil(this.data_.hitCount/this.pageSize_),e=this.page_+1<t;this.nextPageEnabled_=e,A(j("js-catalog-more"),e)}onLocationChange_(){this.ls_&&this.ls_.dispose();let{value:t}=this.locationEl_,e=t==="more";if(this.LocationShow_(!e),e)this.locationAcEl_.value="",this.locationAcEl_.focus(),this.ls_=new Ga(this.locationAcEl_),this.ls_.addEventListener("select",n=>this.onLocationSelect_(n)),this.ls_.addEventListener("cancel",()=>this.onLocationCancel_());else{this.lastChosenOption_=this.locationEl_.selectedIndex;let n=this.getQuery_();im(n),window.history.pushState(null,document.title,`?${n}`),this.navigate_()}this.saveLocations_()}onLocationSelect_(t){let{kind:e,value:n,name:s,country:o,countryId:r}=t.detail;A(this.locationAcEl_,!1),this.addLocation_(e,n,s,o,r),this.onLocationChange_()}addLocation_(t,e,n,s,o){let{options:r}=this.locationEl_,a=Array.from(r).find(l=>l.value===e);if(a)a.selected=!0;else{let l=this.locationEl_.options[this.locationEl_.options.length-1],c=document.createElement("option");this.locationEl_.insertBefore(c,l),c.value=e||"",c.dataset.new="1",t==="city"&&o&&s&&(c.dataset.countryid=o,c.dataset.country=s),c.innerHTML=n||"",c.selected=!0}}onLocationCancel_(){this.lastChosenOption_!==void 0&&(this.locationEl_.selectedIndex=this.lastChosenOption_),this.onLocationChange_()}LocationShow_(t){A(this.locationEl_,t),A(this.locationAcEl_,!t)}onInput_(){let{value:t}=this.searchEl_;if(t.length<2)return;this.isUserInput_=!0;let e=this.getQuery_();e.set("section",""),this.facetsForm_.querySelector("input").checked=!0,e.set("query",t),this.switchFiltersType_("default",!0),im(e),document.title=this.resources_.defaultTitle,window.history.replaceState(null,this.resources_.defaultTitle,`?${e}`),this.navigate_()}navigate_(){let t=this.getQuery_(!0),e=nm();e||this.isUserInput_&&t.get("query")===""?(Pf(e),this.searchEl_.value="",this.data_.facets||(this.data_.facets={}),this.data_.facets.sectionId=[],this.data_.offers=[],this.data_.hitCount=0,this.data_.brand="",this.data_.model="",this.data_.generation="",this.render_()):this.request_(!this.isUserInput_),this.isUserInput_=!1}request_(t,e){let n=new $e(j("js-market-spin")),s=this.getQuery_(!0);e&&(s.delete("page"),s.set("page",String(this.page_+1))),R(this.searchUrl_,this.role,{anchorEl:this.searchEl_,spinner:n,body:s,throwError:!0}).then(o=>{this.data_=o;let r=this.getQuery_().get("query")||"";t&&this.searchEl_.value!==r&&(this.searchEl_.value=r),Pf(nm()),e?this.page_++:this.resetPage_(),this.render_()}).catch(()=>{}).finally(()=>{this.nextPageIsLoading_=!1})}getQuery_(t){let e=new URLSearchParams(window.location.search);if(!t){Ze(this.facetsForm_).forEach((s,o)=>{e.set(o,s)}),e.delete("q");for(let s=0,o;o=this.filterEls_[s];s++)e.delete(o.name);for(let s=0,o;o=this.filterEls_[s];s++)o.value&&o.dataset.target.includes(this.filterType_)&&e.set(o.name,o.value);e.get("brand")===""&&e.set("model",""),e.get("model")===""&&e.set("generation","")}return e}render_(){let t=j("js-market-empty"),e=[],n=[];if(this.data_.offers&&this.data_.offers.length){for(let o=0,r;r=this.data_.offers[o];o++){let a=`/market/offers/${r.id}`,l=Yn({images:[{url:r.picture.url,width:r.picture.width,height:r.picture.height}],color:r.picture.htmlPrimaryColor},2,{size:{width:1,height:1},className:`is-rounded ${d2Env.isMobile?"":"has-darkening-hover"}`});if(e[o]=`<div class="offer-card offer-card--wide ${d2Env.isMobile?"c-block":"c-darkening-hover-container"}"><div class="offer-card__pic">${l}</div><div class="offer-card__body"><a class="u-link-area" href="${a}"></a><div class="offer-card__title ${d2Env.isMobile?"u-line-clamp-2":"u-line-clamp"}"><span class="c-link c-link--current">${r.caption}</span></div><div class="offer-card__location">${r.location}${r.delivery?` <span>${this.resources_.delivery[r.delivery]}</span>`:""}</div><div class="offer-card__price">${r.formattedPrice}</div></div></div>`,this.items_+=1,this.adsEnabled_&&(this.items_-sz)%oz===0){let c=re();n.push(c),e[o]+=`<div id="${c}"></div>`}}A(t,!1)}else{e[0]="";let o=this.getQuery_(),r=o.get("location"),a=j("js-market-empty-country"),l=a&&/^\d+$/.test(r),c=/^[A-Z]+$/.test(r);a&&A(a,!!l&&!c),A(j("js-market-empty-location-all"),c);let d=o.toString().includes("facets");A(j("js-market-empty-filter"),d);let h=!!o.get("section");A(j("js-market-empty-section"),h),A(t,!0)}this.page_>0?this.offersEl_.insertAdjacentHTML("beforeend",e.join("")):this.offersEl_.innerHTML=e.join(""),this.setMoreButton_();let s=this.data_.filterType||"default";this.filterType_!==s&&this.switchFiltersType_(s),this.renderNav_();try{n.forEach(o=>{window.yaContextCb.push(()=>{Ya.adfoxCode.createScroll({ownerId:59610,sequentialLoading:!0,containerId:o,params:{pp:"h",ps:"nkx",p2:"gqqe",puid1:"",puid2:"",puid3:"",puid4:"",puid5:"",puid6:"",puid7:"",puid8:"",puid9:"",puid10:"",puid11:"",puid12:"",puid13:"",puid14:""},lazyLoad:{fetchMargin:100,mobileScaling:2}})})})}catch(o){}}switchFiltersType_(t,e){this.filterType_=t;let n;for(let s=0,o;o=this.filterEls_[s];s++){let r=o.dataset.target.includes(t);A(o,r),r&&(n=!0),(e||!r)&&(o.value="")}A(this.filtersContainer_,!!n)}renderNav_(){let{facets:t}=this.data_,e=this.getQuery_(!0),n="section",s=e.get(n)||"";this.setPageTitle_(s);let o=[],r=t&&t.sectionId||[];r.unshift({matchCount:0,name:DI,value:""});for(let c=0,d;d=r[c];c++){let h=d.value===s;o[c]=`
<label class="c-side-nav__item${h?" is-active":""}">
  <input type="radio" name="${n}" value="${d.value||""}" data-action="marketsearch.nav"${h?" checked":""}>
  <span class="${h?"":"c-link c-link--current"}">${d.name}</span>
  ${d.matchCount?` <span class="c-counter">${d.matchCount}</span>`:""}
</label>
      `,d.value&&this.sections_.set(d.value,d.name)}this.sectionsEl_.innerHTML=o.join("");for(let c=0,d;d=this.navEls_[c];c++){s=e.get(d.name)||"";let h=s===d.value;d.checked=h,d.parentElement.classList.toggle("is-active",h);let p=j("js-side-link",d.parentElement);p&&(p.classList.toggle("c-link",!h),p.classList.toggle("c-link--text",!h))}let a=e.get("location"),{options:l}=this.locationEl_;for(let c=0,d;d=l[c];c++)d.selected=d.value===a}restoreLocations_(){if(!oo())return;let t=(o,r)=>{for(let a=0,l;l=o.options[a];a++)if(l.value===r)return!0;return!1},e=JSON.parse(window.sessionStorage.getItem("marketLocations")||"[]"),n=window.sessionStorage.getItem("marketSelectedLocation"),s=this.locationEl_.options[this.locationEl_.options.length-1];for(let o=0,r;r=e[o];o++){if(!/^[A-Z]+$/.test(r.value)&&!(r.countryid&&r.country)||t(this.locationEl_,r.value))continue;let a=document.createElement("option");this.locationEl_.insertBefore(a,s),a.value=r.value,a.dataset.new="1",a.dataset.countryid=r.countryid||"",a.dataset.country=r.country||"",a.innerHTML=r.name,a.selected=r.value===n}this.saveLocations_()}saveLocations_(){if(!oo())return;let t=[],{options:e}=this.locationEl_;for(let n=0,s;s=e[n];n++)s.dataset.new==="1"&&t.push({name:s.text,value:s.value,country:s.dataset.country||"",countryid:s.dataset.countryid||""});sessionStorage.setItem("marketLocations",JSON.stringify(t)),sessionStorage.setItem("marketSelectedLocation",this.locationEl_.value)}}});var BI={};at(BI,{default:()=>mz});var az,lz,cz,dz,mz,UI=b(()=>{"use strict";F();B();Be();eu();az="js-gallery-thumb",lz="js-offer-preview",cz="is-active",dz=i=>{let t=i.node(),e=rs(t);Ft(az).forEach(p=>{p.classList.toggle(cz,p===t);let m=rs(p);!d2Env.isMobile&&m&&m.classList.toggle("has-darkening-hover",p!==t)});let s=(t.dataset.size||"").split(/\s*,\s*/).map(p=>Number(p)||0),[o,r]=s,a=j(lz),l=a.querySelector("a");l.href=t.href,l.dataset.size=t.dataset.size;let c=rs(a),d=[{url:t.href,width:o,height:r}],h=Vi({images:d,inline:e.src,color:e.color},!d2Env.isMobile&&o>r?0:1,{size:d2Env.isMobile?{width:16,height:9}:o>r?void 0:{width:1,height:1},className:"is-rounded"});c.replaceWith(h)},mz=()=>{w.registerHandlers("offer",{photo:dz})}});var jI,zI,WI,qI,VI=b(()=>{"use strict";jI="Выберите причину",zI="Я продал товар на DRIVE2",WI="Я продал товар где-то ещё",qI="Другая причина"});var KI={};at(KI,{default:()=>gz});var Rn,uz,GI,JI,YI,pz,fz,gz,ZI=b(()=>{"use strict";F();VI();X();W();pe();Gi();pt();Rn="myoffers",uz="is-off",GI="u-grayscale",JI="c-link--secondary",YI=()=>{let i=C(Rn,"inactive");i&&ut(Rn,"item",i).length===0&&i.remove()},pz=i=>_(void 0,null,function*(){let t=i.node(),e=vt(t,Rn,"item");yield R(`/market/offers/${e.dataset.id}/activate`,Rn,{method:"POST",anchorEl:t}),e.classList.remove(uz);let n=e.querySelector(`.${GI}`);n&&n.classList.remove(GI);let s=e.querySelector(`.${JI}`);s&&s.classList.remove(JI),t.parentElement.remove(),C(Rn,"offers").appendChild(e),YI()}),fz=i=>_(void 0,null,function*(){let t=i.node(),e=vt(t,Rn,"item");new ae(t,[{action:"delete_offer_D2",text:zI},{action:"delete_offer_notD2",text:WI},{action:"delete_offer_another",text:qI}],jI).addEventListener("select",s=>_(void 0,null,function*(){let o=`/market/offers/${(e||t).dataset.id}`;yield Dt(o,Rn,{delay:!0,method:"DELETE",anchorEl:t}),Ut(),bt(s.detail),e?(e.remove(),YI()):window.location.href="/market/offers/my"}))}),gz=()=>{w.registerHandlers(Rn,{restore:pz,remove:fz})}});var XI={};at(XI,{default:()=>Ez});var vz,Ez,QI=b(()=>{"use strict";F();B();Z();vz=i=>{let t=i.node(),n=t.options[t.selectedIndex].dataset.type||"default";Q("[data-target]",t.form).forEach(o=>{let r=o.dataset.target.includes(n);A(o,r)})},Ez=()=>{w.registerHandlers("marketform",{updatefields:vz})}});var tO={};at(tO,{default:()=>yz});var om,bz,yz,eO=b(()=>{"use strict";F();X();W();om="parts",bz=i=>_(void 0,null,function*(){let t=i.node(),{url:e}=t.dataset,n=C(om,"replacements");if(!e||!n)return;let s=yield R(e,om,{anchorEl:t});C(om,"container").classList.remove("is-folded");let r=s.map(a=>`
<tr>
  <td>${a.manufacturer}</td>
  <td><a href="${a.link}" class="c-link c-link--text" data-ym-target="parts_cross_click">${a.code}</a></td>
  <td>${a.mentionCount}</td>
</tr>
`).join("");t.remove(),n.innerHTML=r}),yz=()=>{w.registerHandlers(om,{more:bz})}});var nO={};at(nO,{default:()=>Tz});var iO,_z,Tz,sO=b(()=>{"use strict";F();X();Z();iO="parts-photos",_z=i=>{let t=i.node(),e=ut(iO,"item");e.length&&(e.forEach(n=>A(n,!0)),t.remove())},Tz=()=>{w.registerHandlers(iO,{more:_z})}});var oO,rO=b(()=>{"use strict";oO="Показать ещё"});var aO={};at(aO,{default:()=>rm});var rm,lO=b(()=>{"use strict";rO();B();G();rm=class extends H{parsedInit(){let t=this.element.children.length,e=Number(this.element.dataset.minUnfolded)||6;if(t<=e){this.unfold();return}this.button=P("button",{type:"button",class:"x-box-more",textContent:oO}),this.button.addEventListener("click",()=>this.unfold(),{once:!0}),this.element.after(this.button)}unfold(){this.element.classList.remove("is-folded"),this.button&&this.button.remove()}}});var cO={};at(cO,{default:()=>xz});var $f,wz,xz,dO=b(()=>{"use strict";F();Kt();X();W();Wc();pt();$f="premiumform",wz=i=>_(void 0,null,function*(){let t=i.node();if(yield ot(Vl,void 0,t).then(o=>!o))return;let e=vt(t,$f,"buttons"),n=t.dataset.userid;yield R("/ajax/premium/",$f,{method:"POST",anchorEl:t,body:O({_:"p",k:e.dataset.key,m:t.dataset.value},n&&{u:n})});let s=Number(t.dataset.cost)||0;no([{name:"Премиум-аккаунт",category:`Премиум-аккаунт/${t.dataset.value}`,price:s}]),setTimeout(()=>{window.location.reload()},100)}),xz=()=>{w.registerHandlers($f,{buy:wz})}});var mO={};at(mO,{default:()=>Sz});var Cz,Az,Sz,hO=b(()=>{"use strict";F();B();W();Cz="/ajax/moderation/moderation.cshtml",Az=i=>_(void 0,null,function*(){let e=i.node().form,s=Q('input[name^="c_"]:checked',e).reduce((r,a)=>(r[a.name]=a.value,r),{}),o=yield R(Cz,{method:"POST",silent:!0,body:O({_:"getcomment",t:e.type.value,r:e.comment.value},s)});lt("#modcomment").innerHTML=o.data||""}),Sz=()=>{w.registerHandlers("moderation",{rcheck:Az})}});var uO,pO,fO,gO,Ff,vO,Bf=b(()=>{"use strict";uO="Ошибка чтения изображения",pO="Заменить",fO="Удалить",gO="Удалить фотографию?",Ff="Обрезать или повернуть",vO="Повернуть"});var Uf,Mz,bO,yO,_O,jf,TO,LO,wO=b(()=>{"use strict";Bf();rl();Uf=i=>{let t=document.createElement("canvas");return t.width=i.width,t.height=i.height,t},Mz=(i,t)=>{if(t<2)return;let e=i.getContext("2d"),{width:n,height:s}=i;switch(t>4&&(i.width=s,i.height=n),t){case 2:e.translate(n,0),e.scale(-1,1);break;case 3:e.translate(n,s),e.rotate(Math.PI);break;case 4:e.translate(0,s),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-s);break;case 7:e.rotate(.5*Math.PI),e.translate(n,-s),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-n,0);break;default:break}},bO=Ls(()=>new Promise(i=>{let t="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",e=document.createElement("img");e.onload=()=>i(e.width===2&&e.height===3),e.onerror=()=>i(!1),e.src=t})),yO=i=>new Promise(t=>{i.type!=="image/jpeg"&&t(1);let e=o=>{let r=new DataView(o);r.getUint16(0)!==65496&&t(1);let a=r.byteLength,l=2;for(;l<a;){let c=r.getUint16(l);if(l+=2,c===65505){if(r.getUint32(l+2)!==1165519206){t(1);return}l+=2;let d=r.getUint16(l+6)===18761;l+=6,l+=r.getUint32(l+4,d);let h=r.getUint16(l,d);l+=2;for(let p=0;p<h;p++)if(r.getUint16(l+p*12,d)===274){t(r.getUint16(l+p*12+8,d));return}}else{if((c&65280)!==65280)break;l+=r.getUint16(l)}}t(1)},n=new FileReader,s=i.slice(0,256*1024);n.onloadend=o=>e(o.target.result),n.onerror=()=>t(1),n.onabort=()=>t(1),n.readAsArrayBuffer(s)}),_O=i=>new Promise(t=>{let e=document.createElement("img");e.onload=()=>{URL.revokeObjectURL(e.src),t([void 0,e])},e.onerror=()=>t([uO,void 0]),e.src=URL.createObjectURL(i)}),jf=(i,t,e)=>new Promise(n=>{if(i.toBlob){i.toBlob(n,t,e);return}let o=i.toDataURL(t,e).split(","),r=o[0].includes("base64")?atob(o[1]):decodeURIComponent(o[1]),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let c=0;c<r.length;c++)l[c]=r.charCodeAt(c);n(new Blob([l],{type:t||"image/png"}))}),TO=(i,t,e,n,s,o,r)=>_(void 0,null,function*(){let a=e.aspectRatio()>n.aspectRatio()?e.width/n.width:e.height/n.height,l=Math.max(t.size>s?1:0,Math.ceil(Math.log(a)/Math.log(2))-1),c=l>0,d=e.clone();c&&d.scale(.5);let h=Uf(d),p=h.getContext("2d");r||Mz(h,o),p.imageSmoothingQuality="high",p.drawImage(i,0,0,d.width,d.height);for(let g=0;g<l;g++){let f=d.clone();d.scale(.5),p.drawImage(h,0,0,f.width,f.height,0,0,d.width,d.height)}let m=Uf(d),u=m.getContext("2d");if(u.drawImage(h,0,0,d.width,d.height,0,0,d.width,d.height),c){let g;for(;(g=yield jf(m,t.type))&&g.size>s;){let f=d.clone();d.scale(.5),p.drawImage(m,0,0,f.width,f.height,0,0,d.width,d.height),m.width=d.width,m.height=d.height,u.drawImage(h,0,0,d.width,d.height,0,0,d.width,d.height)}}return{preview:m,wasResized:c}}),LO=(i,t,e=0)=>{let n=e%180!==0,s=document.createElement("canvas");s.width=n?i.height:i.width,s.height=n?i.width:i.height;let o=s.getContext("2d");o.translate(s.width/2,s.height/2),o.rotate(e/180*Math.PI),o.drawImage(i,-i.width/2,-i.height/2);let r=Uf(t.getSize());return r.getContext("2d").drawImage(s,t.left,t.top,t.width,t.height,0,0,t.width,t.height),r}});var Rz,Iz,Oz,Hz,xO,kz,Dz,Ja,CO=b(()=>{"use strict";dt();Qo();Wt();Ld();Kt();Bf();Gl();B();Fh();jn();Uh();jh();Li();me();Gi();pt();wO();Rz=3840,Iz=3840,Oz=23*1024*1024,Hz=2,xO="image/jpeg,image/png",kz=i=>L`
${i.error?L`<div class="part-error">${i.error}</div>`:L`<img src=${i.pic}>`}
<div class="part-dots" style="opacity:${i.loading?0:1}" @click=${i.menu}></div>
${!i.error&&i.sort&&i.num&&!i.loading?L`<div class="part-index ctx-dark">${i.num}</div>`:$}
${!i.error&&i.loading?L`<progress-ring .progress=${i.progress||0}></progress-ring>`:$}
`,Dz=i=>L`
<form action=${d2Env.uploadUrl}>
  <x-crop class="o-grid-row" src=${i.src} style=${`width:${i.size.width}px;height:${i.size.height}px`}
    aspect-ratio=${ci(i.ar)}
    min-width=${i.minSize?i.minSize.width:""} min-height=${i.minSize?i.minSize.height:""}
    rotate=${ci(i.rotate)}></x-crop>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <button class="c-button c-button--m-no-padding" type="button" @click=${i.rotateFn}>
      ${vO}
    </button>
    <button class="c-button c-button--m-no-padding" type="button" data-action="dialog.close">
      ${zs}
    </button>
    <button class="c-button" type="submit">${ve}</button>
  </div>
</form>
`,Ja=class extends HTMLElement{connectedCallback(){if(this.form)return;let t=(this.getAttribute("aspect-ratio")||"1/1").split("/").map(Number);this.aspectRatio=new Bt(...t),this.minSize=new Bt(Number(this.getAttribute("min-width")||100),Number(this.getAttribute("min-height")||100)),this.sort=this.hasAttribute("sort"),this.style.setProperty("--ar",String(this.aspectRatio.aspectRatio())),this.fixedAspectRatio=this.hasAttribute("fixed-aspect-ratio"),this.type=this.getAttribute("type"),this.form=this.closest("form"),this.maxItems=Number(this.getAttribute("max-items"))||1,this.items=[],this.uploadPool=pc(Hz),this.button=P("button",{type:"button"},P("div","m-icon c-icon i-photo")),this.appendChild(this.button),this.inputs=P("div"),this.after(this.inputs),this.button.addEventListener("click",()=>this.addFiles()),Array.from(this.closest("form").elements).filter(e=>e.name.startsWith(this.type)).forEach(e=>{let n={id:e.value,previewSrc:e.dataset.preview};e.remove(),this.addItem(n)}),this.sort&&(this.sortable=Eo.create(this,{disabled:this.items.length<=1,onSort:this.sortItems.bind(this),animation:150,filter:".is-error,button",preventOnFilter:!0,forceFallback:!0,onMove(e){return e.related.nodeName!=="BUTTON"}}))}sortItems(){let t=Array.from(this.querySelectorAll(".part-item")).map(e=>e.id);this.items.sort((e,n)=>t.indexOf(e.uuid)-t.indexOf(n.uuid)),this.render()}addFiles(){return _(this,null,function*(){let t=yield _r(this.maxItems!==1,xO);this.maxItems&&t.splice(this.maxItems-this.items.length),t.forEach(e=>this.addItem({file:e}))})}replaceFile(t){return _(this,null,function*(){let e=yield _r(!1,xO);e.length!==0&&this.addItem({file:e[0]},t)})}addItem(t,e){let n=e?this.items.findIndex(r=>r.uuid===e.uuid):this.items.length,s=rt(O({},t),{element:P("div","part-item"),uuid:re(),isLoading:!t.id});this.items.splice(n,1,s),this.update(),this.render(s);let o=this.items[n-1];o?o.element.after(s.element):this.prepend(s.element),s.file&&this.uploadPool(()=>this.upload(s.file,s)).then(([r,a])=>{s.isLoading=!1,a?s.id=a.id:s.error=r,this.render(s)})}upload(t,e){return _(this,null,function*(){let n=yield bO(),s=yield yO(t),o=yield _O(t);if(o[0])return o;let r=o[1],a=new Bt(r.naturalWidth,r.naturalHeight),l=new Bt(Rz,Iz),{preview:c,wasResized:d}=yield TO(r,t,a,l,Oz,s,n);e.preview=c,e.previewSrc=c.toDataURL("image/png");let h=d?new File([yield jf(c,t.type)],t.name):t,p=new es(h);return p.addEventListener("progress",m=>{e.progress=m.lengthComputable&&m.loaded!==m.total?100*m.loaded/m.total:0,this.render(e)}),this.render(e),p.start(this.type)})}update(){!this.maxItems||this.items.length!==this.maxItems?this.appendChild(this.button):this.button.remove(),this.sortable&&this.sortable.option("disabled",this.items.length<=1)}render(t){let e=this.items.filter(s=>s.id),n=1;e.forEach(s=>{s.num=n++}),t?this.renderItem(t):this.items.forEach(s=>this.renderItem(s)),q(ct(e,s=>s.uuid,s=>L`<input type="hidden" name=${`${this.type}-${s.num}`} .value=${s.id}>`),this.inputs)}renderItem(t){q(kz({id:t.uuid,pic:t.previewCropSrc||t.previewSrc||Jn,num:t.num,progress:t.progress,loading:t.isLoading,error:t.error,sort:this.sort,menu:e=>this.menu(e.target,t)}),t.element),t.element.id=t.uuid,t.element.classList.toggle("ctx-dark",!!t.error),t.element.classList.toggle("is-error",!!t.error),t.element.classList.toggle("is-cover",this.fixedAspectRatio)}menu(t,e){let n=[{action:"replace",text:pO},{action:"delete",text:fO,confirmTitle:gO,confirm:$t,delete:!0}];d2Env.isDesktop&&e.preview&&n.unshift({action:"crop",text:Ff}),new ae(t,n).addEventListener("select",o=>{if(Ut(),o.detail==="crop"){let r=new _t({anchor:t,title:Ff}),a;q(Dz({src:e.previewSrc,ar:this.fixedAspectRatio?this.getAttribute("aspect-ratio"):void 0,size:new Bt(e.preview.width,e.preview.height).scaleToFit(new Bt(600,450)),crop:e.crop,rotate:e.rotate,minSize:this.minSize,rotateFn:()=>{a.rotate+=90}}),r.element),a=r.element.querySelector("x-crop"),e.crop&&(a.naturalCrop=e.crop),r.setFormDataTransformer(()=>{let l=a.naturalCrop;return{_:"crop",id:e.id,type:this.type,rotate:a.rotate,crop:[l.left,l.top,l.width,l.height].join(",")}}),r.addEventListener("submit",()=>{e.crop=a.naturalCrop,e.rotate=a.rotate,e.previewCropSrc=LO(e.preview,e.crop,e.rotate).toDataURL("image/png"),this.render(e)}),r.show()}else if(o.detail==="replace")this.replaceFile(e);else if(o.detail==="delete"){let r=this.items.findIndex(a=>a.uuid===e.uuid);this.items[r].element.remove(),this.items.splice(r,1),this.update(),this.render()}})}}});var AO,Nz,Ka,SO=b(()=>{"use strict";AO=2*Math.PI*45,Nz=`
<svg height="${50*2}" width="${50*2}" viewBox="0 0 ${50*2} ${50*2}">
   <circle r="45" cx="50" cy="50"/>
</svg>
`,Ka=class extends HTMLElement{connectedCallback(){this.children.length===0&&(this.innerHTML=Nz,this.update())}static get observedAttributes(){return["progress"]}get progress(){return Number(this.getAttribute("progress")||0)}set progress(t){t?this.setAttribute("progress",String(t)):this.removeAttribute("progress")}attributeChangedCallback(t){t==="progress"&&this.update()}update(){let t=AO-Number(this.progress||0)/100*AO,e=this.querySelector("circle");e&&(e.style.strokeDashoffset=String(t))}}});var am,MO,RO=b(()=>{"use strict";W();am=i=>{console.warn(new Date,i)},MO=()=>{setTimeout(()=>{let i=R("/ajax/brand.models.cshtml","testId",{body:new URLSearchParams({brand:"audi"})});Promise.resolve().then(()=>{R("/ajax/brand.models.cshtml","testId",{body:new URLSearchParams({brand:"bmw"})}).then(am)});let t=yv("/ajax/brand.models.cshtml",{body:{brand:"zaz"}});i.then(am),t.then(n=>JSON.parse(n.responseText)).then(am);let e=new FormData;e.append("_","more"),e.append("type","topRU"),e.append("key","qW_AwJJS2gjYAHsiSXRlbTEiOlsyMDksNTYyMTE3ODk5MDcwNzM0MzM5LDU1NDI4MzYwMzg0NDkyMzM5NSw1NTAzODYxMTAwMDIzNjQ0MTksNTQ5OTkwMjg1ODE2MzY1MDc2LDU0OTIwOTkwNzQzODU1MTA0MywxODUsNTQyMzIyODQxNDgwMDY5MTIxLDUsMTcyOTM4MjI1NjkxMDI3MDUxNiw1MTQwNjMxOTM2MjI5NzAzNjksNTEyODA1MDc3NDQyODg3NjgxXSwiSXRlbTIiOjIxOTEsIkl0ZW0zIjo0fc4rpHV0MFTjLOJvZDp_gU9nrto1"),R("/ajax/people.cshtml",{method:"POST",body:e}).then(am)},3e3)}});var Ke,IO,OO=b(()=>{"use strict";Ke=(i,t)=>{t?console.warn(`${i} is supported`):console.error(`${i} is NOT supported`)},IO=()=>{console.warn("=========================================");let i=0,t=()=>{i++},e=!0;try{window.addEventListener("_",t,{once:!0}),window.dispatchEvent(new Event("_")),window.dispatchEvent(new Event("_")),window.removeEventListener("_",t)}catch(r){e=!1}i!==1&&(e=!1),Ke("eventListener Options",e),Ke("Object.values",!!Object.values),Ke("Object.entries",!!Object.entries),Ke("String.prototype.padStart",!!String.prototype.padStart),Ke("String.prototype.padEnd",!!String.prototype.padEnd);let n=!0;try{((r,a)=>{if(new r("q=%2B").get("q")!==a||new r({q:a}).get("q")!==a||new r([["q",a]]).get("q")!==a||new r(`q=
`).toString()!=="q=%0A"||new r({q:" &"}).toString()!=="q=+%26"||new r({q:"%zx"}).toString()!=="q=%25zx")throw r;window.URLSearchParams=r})(URLSearchParams,"+")}catch(r){n=!1}Ke("URLSearchParams",n),console.warn("========================================="),Ke("Array.prototype.values",!!Array.prototype.values),Ke("Object.fromEntries",!!Object.fromEntries),Ke("Promise.prototype.finally",!!Promise.prototype.finally);let s=!0;try{new EventTarget().constructor}catch(r){s=!1}Ke("EventTarget constructor",s);let o=!0;try{new File([],"")}catch(r){o=!1}Ke("File constructor",o),Ke("FormData",!!(typeof FormData!="undefined"&&FormData.prototype.keys)),Ke("customElements",!!window.customElements),console.warn("=========================================")}});var HO={};at(HO,{default:()=>Pz});var Pz,kO=b(()=>{"use strict";Mc();CO();SO();F();RO();OO();Pz=()=>{IO(),MO(),customElements.define("progress-ring",Ka),customElements.define("x-upload",Ja),w.registerHandlers("toast-test",{show:()=>{Xs("<strong>Запомнили!</strong> Так вашу страницу увидят читатели")}})}});function WO({modulePath:i=".",importFunctionName:t="__import__"}={}){try{self[t]=new Function("u","return import(u)")}catch(e){let n=new URL(i,location),s=o=>{URL.revokeObjectURL(o.src),o.remove()};self[t]=o=>new Promise((r,a)=>{let l=new URL(o,n);if(self[t].moduleMap[l])return r(self[t].moduleMap[l]);let c=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),d=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){a(new Error(`Failed to import: ${o}`)),s(d)},onload(){r(self[t].moduleMap[l]),s(d)}});document.head.appendChild(d)}),self[t].moduleMap={}}}var Fz=Object.freeze({initialize:WO});G();nn();Z();var Mo=class extends H{postInit(){let t=this.slot("dv");t&&ke(this.element,{rootMargin:-window.innerHeight,onEnter:()=>{A(t,!0)},onExit:()=>{A(t,!1)},permanent:!0})}};Ro();G();nn();var tH="adfox_1487022369548130",eH="adfox_151031424031449778",iH=2e4,dg=i=>{try{Ya.adfoxCode.reload(i)}catch(t){}},nH=i=>{let t,e,n=()=>{e=!1,clearTimeout(t)},s=()=>{e||(e=!0,t=setTimeout(()=>{e=!1;try{let o=document.getElementById(i);o.matches(":hover")?o.addEventListener("mouseleave",()=>dg(i),{once:!0}):(dg(i),s())}catch(o){n()}},iH))};vi.addEventListener("active",()=>s()),vi.addEventListener("idle",()=>n()),vi.isIdle||s()},mg=()=>{[tH,eH].forEach(i=>{U(`#${i}`,t=>{ke(t,{onEnter:()=>{nH(i)}})},!0)})};F();Vo();X();W();mn();Zt();pt();Ne();var Go="blacklist",_v="/ajax/blacklist.cshtml",zH=i=>_(void 0,null,function*(){At(i);let t=i.node(),e=t.user,n=C(Go,"list"),s=e.value;if(!s)return;let[o,r]=yield Fe(()=>R(_v,Go,{method:"POST",anchorEl:e,silent:d2Env.isMobile,body:{_:"adduser",nick:s},throwError:!0}));if(r){let{html:a}=r;if(!a)return;e.value="",t.submitbtn.disabled=!0,n.insertAdjacentHTML("afterbegin",a)}else o&&(d2Env.isMobile?Fo(o.messages[0],e):jt(o.messages[0],e))}),WH=i=>_(void 0,null,function*(){let t=i.node(),e=vt(t,Go,"item");(yield ot(mv,hv,t,uv))&&(yield R(_v,`${Go}.remove`,{method:"POST",anchorEl:t,body:{_:"remove",id:t.dataset.id}}),e.remove())}),qH=i=>{let t=i.node(),e=t.form.submitbtn;e.disabled=!t.value.trim()},Tv=()=>{w.registerHandlers(Go,{adduser:zH,remove:WH,input:qH})};F();Vo();W();var Lv="blacklist-user",VH="/ajax/blacklist.cshtml",GH=i=>_(void 0,null,function*(){let t=i.node(),e=t.dataset.blacklisted==="";yield R(VH,Lv,{method:"POST",anchorEl:t,body:{_:e?"remove":"add",id:t.dataset.id}}),e?t.dataset.blacklisted&&delete t.dataset.blacklisted:t.dataset.blacklisted="",t.textContent=e?dv:Ds}),wv=()=>{w.registerHandlers(Lv,{toggle:GH})};var xv="Добавить закладку",Nl="Удалить закладку",Cv="Сохранить закладку",Av="Редактировать закладку",Sv="Заметка о закладке",Mv="Видна только вам",Rv="Добавить папку",Iv="Выберите папку",Ov="Новая папка",Hv="Название папки",Pl="Переименовать",kv="Редактировать папку",Dv="Удалить папку",Nv="Удалить папку?",Pv="Да, удалить",$v="Нет, оставить",Fv="Выберите папку для закладки",Bv="Укажите название папки";var Ps=(i,t,e,n)=>{let s={};for(let o of e)s[o]=i[o];if(n){let o=document.querySelector(`${t}:not([no-sync])`);if(o)for(let r of e)i[r]=o[r]}else{let o=document.querySelectorAll(t);for(let r of o)if(n||r!==i)for(let a of e)r[a]=s[a]}};Wi();dt();ii();Wt();Kt();W();Be();me();pt();Ne();var ih="bookmarks",ir="/_api/bookmarks",ek=(i,t,e,n,s)=>L`
<form action=${ir} class="x-form o-t" novalidate data-keysubmit data-role="form">
  <input type="hidden" name="id" value=${i}>
  <input type="hidden" name="bookmarkType" value=${e}>
  ${s?L`<input type="hidden" name="containerId" value=${s}>`:$}
  <div class=${Nt({"x-box":!0,"c-entry":!0,"is-disabled":t.state==="Stub"})}>
    <div class="c-entry__body">
      <div class="c-entry__pic">
        ${de({images:[{url:t.photo,width:1,height:1}]},2,{size:{width:1,height:1},className:"is-rounded u-vignette"})}
        ${t.price?L`<div class="c-entry__price">${t.price}</div>`:$}
      </div>
      <div>
        ${t.subTitle?L`<div class="u-block-above u-text-overflow x-secondary o-b-xs">
              ${t.subLink?L`<a class="c-link c-link--color00 c-username" href=${t.subLink}>${t.subTitle}</a>`:L`<span class="c-link c-link--color00 c-username">${t.subTitle}</span>`}
            </div>`:$}
        <h3>${t.title||""}</h3>
      </div>
    </div>
  </div>
  <div class="x-box x-box--narrow x-form--compact">
    <div class="x-form__item is-focusable">
      <div class="x-form__body">
        <textarea class="x-textarea x-textarea--narrow" name="comment" placeholder=${Sv}
          maxlength="32" data-role="taflexible charcounter">${t.comment}</textarea>
      </div>
      <div class="x-form__notes">${Mv}</div>
    </div>
    <h3 class="x-group-header o-t-xl">${Iv}</h3>
    <div class="x-form__item is-focusable">
      <label class="x-form__body x-form__focusable-check m-icon-after">
        <div class="x-form__pic x-form__pic--icon m-icon i-plus"></div>
        <input class="x-input" type="text" name="folderTitle"
          placeholder=${Ov} data-placeholder=${Hv}
          maxlength="64"
          data-radio="folderId" data-action="focus:rich-radiogroup.focus;blur:rich-radiogroup.blur">
      </label>
    </div>
    ${ct(t.folders,o=>o.id,(o,r)=>L`
      <div class="x-form__item">
        <label class="x-form__body">
          ${de({images:[{url:o.photo,width:1,height:1}]},2,{size:{width:1,height:1},className:"is-rounded u-vignette x-form__pic"})}
          <div class="x-choice x-choice--radio">
            <input type="radio" name="folderId" value=${o.id}
              ?checked=${!t.folderId&&r===0||t.folderId===o.id}>
            <span class="x-choice__label">${o.title} <span class="c-counter">${o.count}</span></span>
          </div>
        </label>
      </div>
    `)}
  </div>
  <div class="x-form__submit u-extend u-flow">
    ${t.isBookmarked?L`<div class="u-100 o-flow">
          <button class="c-button c-button--primary c-button--l c-button--block"
            type="submit" name="submitbtn">${ve}</button>
          <button class="c-button c-button--l c-button--block" type="button"
            @click=${n}>${$t}</button>
        </div>`:L`<button class="c-button c-button--primary c-button--alt-l u-100"
          type="submit" name="submitbtn">${ve}</button>`}
  </div>
</form>
`,ik=(i,t)=>L`
<form action="${ir}/folders${i?`/${i}/update`:"/post"}"
  class="x-form x-box x-box--ghost" novalidate data-role="form">
  <div class="x-form__item is-focusable">
    <div class="x-form__body">
      <input class="x-input" type="text" name="title" value=${t||""} maxlength="64" autofocus>
    </div>
  </div>
  <button class="c-button c-button--primary c-button--l u-100 o-t-l" type="submit">
    ${ve}
  </button>
  <button class="c-button c-button--l u-100 o-t-s" type="button" data-action="dialog.close">
    ${zs}
  </button>
</form>
`,Yl=(i,t,e,n)=>R(ir,ih,{anchorEl:i,body:O({id:t,bookmarkType:e},n&&{containerId:n})}),nr=(i,t,e,n)=>R(`${ir}/delete`,ih,{method:"POST",anchorEl:i,body:O({id:t,bookmarkType:e},n&&{containerId:n})}),nh=(i,t,e)=>new Promise(n=>{let s=new _t({anchor:i,className:"c-modal-popscreen",title:t?Pl:Rv},!0,!0);s.addEventListener("submit",()=>n()),s.show(ik(t,e)).then(()=>{_i(s.form,["title",Bv,"required"])})}),yE=(i,t)=>R(`${ir}/folders/${t}/delete`,ih,{method:"POST",anchorEl:i}),Kl=(i,t,e,n,s)=>new Promise(o=>{let r=new _t({anchor:e,className:"c-modal__content--bookmarks",title:n.folderId?Av:Cv}),a=l=>_(void 0,null,function*(){let c=l.target;if(yield ot(`${Nl}?`,void 0,c,$t)){let d=yield nr(c,i,t,s);r.close(),o({deleted:!0,result:d})}});r.addEventListener("submit",l=>{let{detail:c}=l;o({deleted:!0,result:c})}),r.show(ek(i,n,t,a,s)).then(()=>{_i(r.form,["folderTitle",Fv,l=>l.folderId&&l.folderId.value||l.folderTitle.value])})});var sh="bookmark-button",oh=class extends HTMLButtonElement{constructor(){super(),this.setAttribute("is",sh),this.updateTooltip(),requestAnimationFrame(()=>this.syncState(this.getAttribute("no-sync")===""))}static get observedAttributes(){return["active","count"]}get active(){return this.hasAttribute("active")}set active(t){t?this.setAttribute("active",""):this.removeAttribute("active")}get count(){return this.getAttribute("count")||""}set count(t){this.setAttribute("count",String(t||""))}get uid(){return this.getAttribute("uid")||""}get kind(){return this.getAttribute("kind")}get container(){return this.getAttribute("container")||void 0}connectedCallback(){this.addEventListener("click",this)}disconnectedCallback(){this.removeEventListener("click",this)}attributeChangedCallback(t,e,n){t==="count"?this.textContent=n||"":t==="active"&&this.updateTooltip()}handleEvent(t){return _(this,null,function*(){if(t.type!=="click"||Se(this))return;let{result:e}=yield this.bookmark();this.active=!this.active,this.count=e.counterHtml||"",this.syncState()})}bookmark(){return _(this,null,function*(){if(this.active)return{result:yield nr(this,this.uid,this.kind,this.container)};let t=yield Yl(this,this.uid,this.kind,this.container);return Kl(this.uid,this.kind,this,t,this.container)})}updateTooltip(){this.dataset.tt=this.active?Nl:xv}syncState(t){Ps(this,`[is="${sh}"][uid="${this.uid}"][container="${this.container}"][kind="${this.kind}"]`,["count","active"],t)}},_E=()=>{customElements.define(sh,oh,{extends:"button"})};F();X();W();Kn();Z();mn();xi();Zt();sr();Gi();pt();var di="bookmarks",sk=0,TE,rh,ok=(i,t)=>_(void 0,null,function*(){let e=i.node(),{id:n,type:s,container:o}=e.dataset;if(t)return{deleted:!0,result:yield nr(e,n,s,o)};let r=yield Yl(e,n,s,o);return Kl(n,s,e,r,o)}),rk=i=>_(void 0,null,function*(){At(i);let{deleted:t}=yield ok(i);if(t){let e=i.node(),n=vt(e,di,"entry");n&&n.remove()}Rt(),d2Env.isApp&&(yield we(50)),window.location.reload()}),ak=i=>_(void 0,null,function*(){let t=i.node(),{id:e}=t.dataset;new ae(t,[{action:"rename",text:Pl},{action:"delete",text:Dv,confirmTitle:Nv,confirm:Pv,cancel:$v,delete:!0}],kv).addEventListener("select",s=>_(void 0,null,function*(){let o=s.detail;o==="rename"?(yield nh(t,e,C(di,"title").textContent||""),Rt(),d2Env.isApp&&(yield we(50)),window.location.reload()):o==="delete"&&(yield yE(t,e),Rt(),d2Env.isApp&&(yield we(50)),window.location.href=C(di,"index").href)}))}),LE=i=>{let t=C(di,"counter");t&&(t.textContent=i||String(ut(di,"entry").length||""))},lk=i=>_(void 0,null,function*(){let t=i.node();yield nh(t),Rt(),d2Env.isApp&&(yield we(50)),window.location.reload()}),wE=un(i=>_(void 0,null,function*(){let t=C(di,"content");if(rh===void 0){let l=C(di,"counter");TE=l&&l.textContent||"",rh=t.innerHTML}let{action:e,folderId:n}=i.form,s=i.value,o=C(di,"pager");if(o&&A(o,!s),d2Env.isMobile&&A(C(di,"folders"),!s),!s){t.innerHTML=rh,LE(TE);return}let[r,a]=yield Fe(()=>Dt(e,di,{method:"POST",anchorEl:i,silent:!0,throwError:!0,acceptOnlyHttp200:!0,body:O({query:s,counter:sk++},n&&{folderId:n.value})}));t.innerHTML=a||r&&r.request.status===202&&r.request.responseText||"",LE(),r&&(r.request.status===202||r.request.status===204)&&wE(i)}),300),xE=()=>{w.registerHandlers(di,{edit:rk,folder:ak,addFolder:lk,search:he(i=>wE(i.node()),300),submit:i=>At(i)})};F();var ck="slideshow",CE,dk=i=>{clearTimeout(CE);let t=i.node();t.classList.toggle("is-active"),t.classList.contains("is-active")?CE=setTimeout(()=>{t.style.zIndex="0"},220):t.style.zIndex="2"},AE=()=>{w.registerHandlers(ck,{cup:dk})};G();Z();var Zl=i=>{i.offsetHeight};var SE=d2Env.isMobile?window.innerHeight-190:750,rr=class extends H{init(){this.button=this.slot("button",document.body),this.height=this.element.offsetHeight,!(this.height<SE+200)&&(this.element.classList.add("is-closed"),A(this.button,!0),this.element.style.height=`${SE}px`,Zl(this.element),this.button.addEventListener("click",this,{once:!0}))}handleEvent(){this.element.classList.remove("is-closed"),this.element.style.height=`${this.height}px`,A(this.button,!1)}};F();W();pt();var mk=i=>_(void 0,null,function*(){let t=i.node(),{title:e,html:n}=yield R("/ajax/drive","drive",{method:"POST",anchorEl:t,body:{_:"di",car:t.dataset.carid}});Xe({anchor:t,title:e,html:n})}),ME=()=>{w.registerHandlers("drive",{info:mk})};F();B();W();Zt();var RE="caru",hk="/ajax/notifications.cshtml",uk=i=>_(void 0,null,function*(){let t=i.node();yield R(hk,RE,{method:"POST",anchorEl:t,body:{_:"loadPhotoRequest",key:t.dataset.key}}),zi(t),It(t,"js-container").remove()}),IE=()=>{w.registerHandlers(RE,{req:uk})};F();var OE="Продавец — {Contacts}",HE="Скажите, что вы по объявлению на DRIVE2.",kE="Не отправляйте предоплату незнакомым продавцам!";X();be();pt();var bh="sell",Hk=i=>{let t=C(bh,"desc"),e=C(bh,"contacts");if(!t&&!e)return;let n=e.innerHTML,s=tt(OE,{Contacts:n}),o=i.node(),r=`
<div>${HE}</div>
<div class="x-secondary x-secondary-color o-t-s">${kE}</div>
`;d2Env.isMobile?Jg({anchor:o,title:s,html:`<div class="x-box x-box--ghost">${r}</div>`}):Xe({anchor:o,closeOnClick:!0,title:s,html:r})},XE=()=>{w.registerHandlers(bh,{info:Hk})};G();X();Z();ni();var QE=(i,t)=>{let e=i.dataset[t];return!e||e==="0"?"":e},lr=class extends H{parsedInit(){let t=this.element.dataset.noAnimation==="",e=je("carselect",this.element.parentElement),n=Ts(e,"carselect"),s=QE(this.element,"model"),o=QE(this.element,"gen"),r=this.slot("presets"),a=this.slot("brand"),l=this.slot("model"),c=this.slot("gen"),d=this.slot("model-regular"),h=this.slot("model-custom");if(r&&a){let m=wt(a,!r.value);m.duration=400}if(l){let m=wt(l,!!s);m.duration=400}if(c){let m=wt(c,!!o);m.duration=400}let p=m=>{let u=!1,g=m==="selfmade"||m==="other";d&&h&&(g&&(u=!0),A(d,!g),A(h,g));let f=r&&a&&r.value==="";if(r&&a)if(f)u=!wt(a).expanded;else{wt(a).expand(!1,t);return}l&&wt(l).expand(!!m,t||u),c&&wt(c).expand(!!(n&&n.model)&&!g,t||u),f&&wt(a).expand(!0,t)};e.addEventListener("change",()=>{p(n&&n.brand||"")})}};dt();Wt();cr();G();Ji();Z();var nb=i=>{let t=i.dataset.ph,e=i.options[0]&&i.options[0].value===""?i.options[0].text:void 0;return!t&&e&&(i.dataset.ph=e),t||e},sb=(i,t)=>Array.from({length:t-i+1},(e,n)=>String(n+i)).reverse().map(e=>({value:e,text:e})),dr=class extends H{parsedInit(){this.brandEl=this.slot("brand"),this.modelEl=this.slot("model"),this.generationEl=this.slot("gen"),this.engineEl=this.slot("engine"),this.transmissionEl=this.slot("transmission"),this.productionEl=this.slot("production"),this.purchaseEl=this.slot("purchase"),this.addCarLinkEl=this.slot("add-car-link"),this.presetEl=this.slot("presets");let{model:t,gen:e,production:n,purchase:s,noPlaceholders:o,genAutoselect:r}=this.element.dataset;this.caption="",this.brand=this.brandEl.value,this.model=t,this.generation=e,this.production=Number(n)||void 0,this.purchase=Number(s)||void 0,this.noPlaceholder=o==="",this.genAutoselect=r==="",this.element.addEventListener("change",this),this.presetEl&&this.presetEl.addEventListener("change",()=>{let a=this.presetEl.options[this.presetEl.selectedIndex],{brand:l,model:c,gen:d,reset:h}=a.dataset;(h===""||l||c||d)&&(this.brand=l,this.model=c,this.generation=d,this.update())}),this.update()}handleEvent(t){if(!(t.target instanceof HTMLSelectElement||t.target instanceof HTMLInputElement)||t.target===this.presetEl)return;let e=t.target,n=e===this.brandEl,s=e===this.modelEl;if(this.brand=this.brandEl.value,this.model=n?void 0:this.modelEl.value,this.generation=n||s?void 0:this.generationEl.value,this.production=this.productionEl&&Number(this.productionEl.value)||void 0,this.purchase=this.purchaseEl&&Number(this.purchaseEl.value)||void 0,e===this.engineEl&&this.transmissionEl){let o=this.engineEl.options[this.engineEl.selectedIndex];o&&o.dataset.noTransmission===""?(this.transmissionEl.selectedIndex=0,this.transmissionEl.disabled=!0):this.transmissionEl.disabled=!1}this.presetEl&&(this.presetEl.selectedIndex=0),this.setAddCarLink(),this.update()}haveNoCar(){return this.brandEl.value===""&&this.brandEl.selectedIndex!==0}isCustomCar(){return this.brandEl.value==="selfmade"||this.brandEl.value==="other"}getInfo(){return this.brand?Qn.get(this.brand,this.brandEl):Promise.resolve([])}update(){return _(this,null,function*(){!this.brand&&!this.haveNoCar()&&(this.brandEl.selectedIndex=0,this.brandEl.dispatchEvent(new CustomEvent("forced-change"))),this.model||(this.modelEl.selectedIndex=0,this.modelEl.dispatchEvent(new CustomEvent("forced-change"))),this.generation||(this.generationEl.selectedIndex=0,this.generationEl.dispatchEvent(new CustomEvent("forced-change"))),this.render(yield this.getInfo()),this.dispatch()})}dispatch(){this.element.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{brand:this.brand,model:this.model,generation:this.generation,caption:this.caption}}))}setAddCarLink(){if(!this.addCarLinkEl)return;let t=this.slot("add-car-container");t&&A(t,!!this.brand),this.addCarLinkEl.search=`?${new URLSearchParams(O(O(O({},this.brand&&{brand:this.brand}),this.model&&{model:this.model}),this.generation&&{generation:this.generation}))}`}render(t){let{brandEl:e}=this;this.caption="";let n="",s=nb(e);if(this.noPlaceholder&&this.brand&&e.options[0]&&e.options[0].value==="")e.options[0].remove();else if(s&&!this.noPlaceholder&&e.options[0]&&e.options[0].value!==""){let d=document.createElement("option");d.value="",d.innerHTML=s,e.prepend(d)}this.brand?(e.value=this.brand,this.caption=e.options[e.selectedIndex]?e.options[e.selectedIndex].text:"",n=this.caption):this.haveNoCar()||(this.brandEl.selectedIndex=0),e.value||(this.haveNoCar()||(this.brandEl.selectedIndex=0),this.model=void 0,this.generation=void 0,this.production=void 0,this.purchase=void 0),this.noPlaceholder&&!this.model&&(this.model=t[0]&&t[0].id);let o=t.map(d=>({value:d.id,text:d.model}));if(this.modelEl.disabled=!this.brand||this.isCustomCar(),this.renderSelect(this.modelEl,o,this.model),this.model){let d=this.modelEl.options[this.modelEl.selectedIndex]?this.modelEl.options[this.modelEl.selectedIndex].text:"";this.caption=`${n} ${d}`}let r=t.find(d=>d.id===this.model),a=r?r.generations:[];(this.genAutoselect&&a.length===1||this.noPlaceholder&&!this.generation)&&(this.generation=a[0]&&a[0][0]);let l=a.length===1,c=a.map(([d,h])=>({value:d,text:h}));if(this.generationEl.disabled=!this.model||!this.brand||this.isCustomCar(),this.renderSelect(this.generationEl,c,this.generation,l),this.generation){let d=this.generationEl.options[this.generationEl.selectedIndex]?this.generationEl.options[this.generationEl.selectedIndex].text:"";this.caption=`${n} ${d}`}if(this.generationEl.dispatchEvent(new CustomEvent("forced-change")),this.productionEl||this.purchaseEl){let d=a.find(m=>this.generation===m[0]),h=d&&d[2]||a[0]&&a[0][2]||this.production||1900,p=Math.max(new Date().getFullYear(),h);if(this.productionEl){let m=sb(h,p);this.renderSelect(this.productionEl,m,String(this.production||""))}if(this.purchaseEl){let u=Number(this.productionEl&&this.productionEl.value)||h,g=sb(u,p),f=this.purchase?this.purchase<u?u:this.purchase:this.purchaseEl.value;this.renderSelect(this.purchaseEl,g,String(f||""))}}}renderSelect(t,e,n,s){let o=this.noPlaceholder&&!!n||s,r=nb(t),a=[...e];!o&&(r||r==="")&&a.unshift({value:"",text:r}),ue(t),q(ct(a,l=>l.value,l=>L`<option value=${l.value} .selected=${n===l.value}>${l.text}</option>`),t)}};dt();Wt();cr();G();Gt();Ji();var bn={CARS:"cars",BRAND:"brand",MODEL:"model",GENERATION:"generation"},nc=i=>Array.from(i.querySelectorAll("select")),ob=(i,t,e)=>{let n=i.options[0]&&i.options[0].value===""&&i.options[0].text,s=[...t];(n||n==="")&&s.unshift({value:"",text:n}),ue(i),q(ct(s,o=>o.value,o=>L`<option value=${o.value} .selected=${e===o.value}>${o.text}</option>`),i),Ct(i)},Dk=(i,t,e,n)=>{i.disabled=!e;let s=t.map(o=>({value:o.id,text:o.model}));ob(i,s,n)},Nk=(i,t,e,n,s)=>{i.disabled=!n||!e;let o=t.find(c=>c.id===n),r=o?o.generations:[],a=r.length===1,l=r.map(([c,d])=>({value:c,text:d}));ob(i,l,s!==void 0?s:a?l[0].value:void 0)},mr=class extends H{init(){this.isFullGenerations=this.element.dataset.fullGenerations==="",this.element.addEventListener("change",this),this.element.addEventListener("click",this),this.element.addEventListener("set-cars",t=>this.setCars(t.detail))}setCars(t){return _(this,null,function*(){let e=this.slots("item");e.pop(),e.forEach(n=>n.remove()),t.forEach(n=>{let s=this.slots("item"),o=s[s.length-1];this.updateItem(o,{brand:n.brand,model:String(n.model),generation:String(n.generation)||""}),this.update()}),Ct(this.element)})}handleEvent(t){return _(this,null,function*(){let{target:e}=t;if(t.type==="click"){e instanceof HTMLButtonElement&&this.removeItem(this.closestSlot(e,"item"));return}if(!(e instanceof HTMLSelectElement))return;let n=this.closestSlot(e,"item");yield this.updateItem(n,void 0,e),Ct(this.element)})}removeItem(t){this.slots("item").length>1&&(t.remove(),this.update(),Ct(this.element))}updateItem(s){return _(this,arguments,function*(t,e={},n){let{brand:o,model:r,generation:a}=e,[l,c,d]=nc(t);o!==void 0?l.value=o:o=l.value,r=r===void 0&&(n===c||n===d)?c.value:r;let h=yield Qn.get(o,l);(!n||n===l)&&Dk(c,h,o,r),n!==d&&Nk(d,h,o,r,a),this.update()})}update(){let t=this.slots("item"),e=t[0],n=t[t.length-1],[s,o,r]=nc(n),a=Number(this.element.dataset.max)||100;if((this.isFullGenerations?s.value!==""&&o.value!==""&&r.value!=="":s.value!=="")&&t.length<a){let h=e.cloneNode(!0);n.after(h);let p=nc(h);p[0].value="",p[0].name="",p[1].value="",p[1].name="",p[1].options.length=1,p[1].disabled=!0,p[2].value="",p[2].name="",p[2].options.length=1,p[2].disabled=!0,h.classList.add("is-unremovable")}let c=0,d;t.forEach(h=>{let p=nc(h);if(!d){let m=new RegExp(`${bn.CARS}\\[\\d+]\\.${bn.BRAND}$`,"i");d=p[0].name.replace(m,"")}if(p[0].value===""&&h!==n)h.remove();else{let m=this.isFullGenerations?p[0].value===""||p[1].value===""||p[2].value==="":p[0].value==="";h.classList.toggle("is-unremovable",m&&h===n),p[0].name=`${d}${bn.CARS}[${c}].${bn.BRAND}`,p[1].name=`${d}${bn.CARS}[${c}].${bn.MODEL}`,p[2].name=`${d}${bn.CARS}[${c}].${bn.GENERATION}`,c+=1}})}};dt();Wt();tr();var rb="Машины",ab="Выберите, владельцам каких машин показывать запись.",lb="Выберите одно или несколько  поколений, к которым подходит ваш товар.",cb="Выберите марку",db="Выберите модель",mb="Любые модели",hb="Выберите поколение",ub="Любые поколения",pb="Добавить",fb="Закрыть окно?",gb="Выбранные машины не сохранятся",vb="Выбрать",Eb="Редактировать";Kt();B();G();X();Gt();var yn=class{constructor(t=1/0){this.maxnum=t;this.tokens=[]}get(){return this.tokens}add(t,e){this.tokens.length<this.maxnum&&(e?this.tokens.unshift(t):this.tokens.push(t),this.tokens=this.tokens.filter((n,s,o)=>o.findIndex(r=>r.id?r.id===n.id:JSON.stringify(r)===JSON.stringify(n))===s))}remove(t){this.tokens.splice(t,1)}removeById(t){let e=this.tokens.findIndex(n=>n.id===t);e!==-1&&this.remove(e)}removeLast(){this.tokens.pop()}clear(){this.tokens=[]}};pt();var Gs=[],$k=({list:i,brand:t,model:e,fullGenerations:n,addDisabled:s,submitDisabled:o,addHandler:r,removeHandler:a,submitHandler:l})=>L`
  <div>
    <div class="o-b">${n?lb:ab}</div>
    <div class="x-box" data-role="formcarselect carselect" data-gen-autoselect data-no-animation>
      <select class="y-select u-100 o-f" name="brand" data-slot="carselect.brand">
        <option value="">${cb}</option>
        ${ct(Gs,c=>c[0],c=>L`<option value="${c[0]}">${c[1]}</option>`)}
      </select>
      <div class="o-f" data-slot="formcarselect.model" style=${Le({display:t?"":"none"})}>
        <select class="y-select u-100 o-f" name="model" data-slot="carselect.model">
          <option value="">${n?db:mb}</option>
        </select>
        <select class="y-select u-100 o-f" name="generation" data-slot="carselect.gen formcarselect.gen"
          style=${Le({display:e?"":"none"})}>
          <option value="">${n?hb:ub}</option>
        </select>
      </div>
      <button class="o-t-l c-button c-button--l u-100" ?disabled=${s} @click=${r}>${pb}</button>
    </div>
    ${i&&i.length>0?L`
        <div class="x-box u-break-word">
          ${ct(i,c=>JSON.stringify(c),(c,d)=>L`
            <div class="y-form-badge y-form-badge--block o-f">
              <div class="o-group o-group--top o-group--justify">
                <div class="is-auto">${c.caption}</div>
                <button class="r-button-unstyled r-button-unstyled m-icon c-icon u-icon-hover i-close" @click=${()=>a(d)}></button>
              </div>
            </div>
          `)}
        </div>`:$}
    <div class="x-form__submit x-form__submit--dialog u-extend">
      <button class="c-button c-button--primary c-button--alt-l c-button--wide u-mobile-100" type="button"
        ?disabled=${o} @click=${l}>${ve}</button>
    </div>
  </div>
`,hr=class extends H{constructor(){super(...arguments);this.addDisabled=!0;this.contentChanged=!1;this.closeWithoutConfirm=!1;this.brand="";this.model=""}parsedInit(){this.listEl=this.slot("list"),this.buttonEl=this.slot("button"),this.name=this.element.dataset.name||"",this.placeholder=this.element.dataset.placeholder,this.fullGenerations=this.element.dataset.fullGenerations==="",this.tokens=new yn(Number(this.element.dataset.max)),Gs.length===0&&(Gs=this.slot("brands",document.body).textContent.split(";").map(n=>n.split(",")),Gs[Gs.length-1][0]===""&&Gs.pop()),this.carSelectChange=this.carSelectChange.bind(this),this.element.addEventListener("click",()=>this.showModal())}showModal(){this.initTokens(),this.addDisabled=!0,this.contentChanged=!1,this.closeWithoutConfirm=!1,this.dialog=li({anchor:this.element,title:rb}),this.dialog.addEventListener("beforehide",e=>_(this,null,function*(){!this.closeWithoutConfirm&&this.contentChanged&&(e.preventDefault(),(yield ot(fb,gb,void 0,js))&&this.close())})),this.dialog.addEventListener("hide",()=>this.hideModal(),{once:!0}),this.dialog.render(),this.dialog.show(),this.updateModal(),this.carSelectContainer=je("carselect",this.dialog.contentElement),this.carSelectContainer.addEventListener("change",this.carSelectChange)}initTokens(){this.tokens.clear();let e=Q(this.name?`input[name^="${this.name}"]`:'input[type="hidden"]',this.listEl).reduce((s,o)=>{let r=o.name.match(/cars\[(\d+)]\.(\w+)/),a=Number(r&&r[1]),l=r&&r[2];return l&&(s[a]=s[a]||{},s[a][l]=o.value),s},[]);Q("[data-index]",this.listEl).forEach((s,o)=>{e[o].caption=s.textContent,this.tokens.add(e[o])})}updateForm(){this.listEl.innerHTML="";let e=this.tokens.get();if(e.sort((n,s)=>{let o=n.caption,r=s.caption;return o>r?1:o<r?-1:0}),e.forEach((n,s)=>{let o=document.createElement("input");if(o.name=`${this.name?`${this.name}.`:""}cars[${s}].brand`,o.type="hidden",o.value=n.brand||"",this.listEl.appendChild(o),n.model){let a=document.createElement("input");a.name=`${this.name?`${this.name}.`:""}cars[${s}].model`,a.type="hidden",a.value=n.model,this.listEl.appendChild(a)}if(n.generation){let a=document.createElement("input");a.name=`${this.name?`${this.name}.`:""}cars[${s}].generation`,a.type="hidden",a.value=n.generation,this.listEl.appendChild(a)}let r=document.createElement("div");r.className="u-text-overflow",r.textContent=n.caption,r.dataset.index=String(s),this.listEl.appendChild(r)}),e.length===0){let n=document.createElement("div");n.textContent=this.placeholder||"",this.listEl.appendChild(n)}this.buttonEl&&(this.buttonEl.textContent=e.length===0?vb:Eb),Ct(this.element)}updateModal(){q($k({list:this.tokens.get(),brand:this.brand,model:this.model,fullGenerations:!!this.fullGenerations,addDisabled:this.addDisabled,submitDisabled:!this.contentChanged,addHandler:this.addHandler.bind(this),removeHandler:this.removeHandler.bind(this),submitHandler:this.updateFormAndClose.bind(this)}),this.dialog.contentElement)}close(){this.closeWithoutConfirm=!0,Rt()}updateFormAndClose(){this.updateForm(),this.close()}carSelectChange(e){if(e.detail){let{brand:n,model:s}=e.detail;this.addDisabled=this.fullGenerations?!n||!s:!n,this.brand=n||"",this.model=s||"",this.updateModal()}}hideModal(){this.carSelectContainer.removeEventListener("change",this.carSelectChange)}addHandler(){let e=Ts(this.carSelectContainer,"carselect"),{brand:n,model:s,generation:o,caption:r}=e;this.tokens.add(rt(O(O({brand:n},s&&{model:s}),o&&{generation:o}),{caption:r}),!0),this.contentChanged=!0,this.updateModal()}removeHandler(e){this.tokens.remove(e),this.contentChanged=!0,this.updateModal()}};F();B();X();W();wh();ts();dn();var pr="catalog",Uk="/ajax/carsearch.cshtml",wb=0,jk=()=>{ut(pr,"dv").forEach(t=>{Qf(t),Q("script",t).forEach(sc)})},Sh=()=>{let i=C(pr,"more");if(!i)return;let{dataset:t}=i,e=O(O({context:t.context,start:t.start,sort:t.sort,index:wb},t.city&&{city:t.city}),t.country&&{country:t.country}),n=C(pr,"spin"),s=new $e(n);R(Uk,pr,{anchorEl:i,spinner:s,body:e}).then(o=>{wb++;let{start:r}=o;r&&(i.dataset.start=String(r));let{html:a}=o;a&&(i.insertAdjacentHTML("beforebegin",a),jk()),(!a||!r)&&(i.remove(),ye().removeEventListener("scroll",Sh))})},xb=()=>{ye().addEventListener("scroll",Sh),w.registerHandlers(pr,{morecars:Sh})};F();G();Z();ge();var Cb=(i,t)=>{let e=i.length,n,s=1;for(;!n;)if(e%s===1)s++;else{n=!0;for(let o=0,r=0;o*s<e;o++)if(r+=Math.max(...i.slice(o*s,(o+1)*s)),r>t){n=!1,s++;break}}return s};var fr=class extends H{parsedInit(){let t=this.element,e=Array.from(t.children),n=t.classList.contains("is-open"),s=(o,r)=>{r&&Lt(t,{behavior:"smooth"});let a=this.slot("more",document.body);a&&A(a,!o);let l=this.slot("mode",document.body);if(l&&(A(l,!!a),l.catalog.value=o?"more":"less"),d2Env.isMobile)t.classList.toggle("is-open",o);else if(e.length){t.style.visibility="hidden";let c=e.map(g=>g.getBoundingClientRect());t.classList.add("is-open","is-parked");let d=t.offsetWidth,h=e.map(g=>g.offsetWidth),p=e[0].offsetHeight,m=e.map(g=>n||g.classList.contains("is-important")),u=Cb(h,d);t.style.maxHeight=`${u*p}px`,t.classList.remove("is-parked"),e.forEach((g,f)=>{let v=g.getBoundingClientRect();g.style.cssText=m[f]?`transform:translate(${c[f].left-v.left}px,${c[f].top-v.top}px)`:"opacity:0"}),t.style.visibility="",e.forEach(g=>{g.style.transition="transform .5s ease-in-out, opacity .5s linear",Zl(g),g.style.transform="",g.style.opacity=""})}};w.registerHandlers(this.role,{more:()=>s(!0),"more-top":()=>s(!0,!0),less:()=>s(!1)})}};dt();Qo();F();var Ab="Комментарии",Sb="Ваше сообщение добавлено на последнюю страницу.",Mb="Редактирова­ние",Rb="темы",Ib="коммен­тария",Ob="Свеженаписанный комментарий можно редактировать в течение 72 часов с момента его добавления. Полная история изменений будет доступна для ознакомления всем.",Hb="Заголовок",kb="Сообщение",Db="Ответить на комментарий",Nb="Сохранить изменения",Pb="Пользователь",$b="Комментарии заблокированы до",Fb="Комментарии модератора",Bb="замаскированный мат в комментариях|мат в комментариях|переход на личности|флуд|флуд бессодержательными комментариями|спам|рекламный спам|писать ЗАГЛАВНЫМИ БУКВАМИ нельзя|писать translitom нельзя|писать на иностранном языке нельзя",Ub="Заблокировать комментарии на",jb="Заблокировать",zb="Снять блокировку",Wb="История редактирования",qb="Скрыть историю",oc="Удалить комментарий?",Vb="Комментарий",Gb="Изменить",Jb="Пожаловаться на комментарий",Yb="Модерация",rc="Скрыть тему?",Kb="Скрыть тему",Zb="Скрыть",Xb="Тема скрыта",gr="Удалить тему?",Qb="Удалить тему",ty="Deleted";var ey="Жалоба модератору",iy="Комментарий",ny="Отправить",sy="Комментарий",oy="Выберите хотя бы одну причину для жалобы",ry="Комментарии с матом или переходом на личности",ay="Непристойное фото или текст",ly="Рассылает спам",cy="Чужая фотография",dy="Спам",my="Нецензурная лексика в тексте",hy="Контент эротического или порнографического характера",uy="Чужой текст",py="Нечитабельная ерунда",fy="Непристойное фото или текст",gy="Чужая фотография",vy="Чужой текст",Ey="Пользовательская информация не соответствует этой модели машины",by="Реклама услуг или магазина",yy="Несколько товаров в одном объявлении",_y="Неправильная категория",Ty="Чужое или рекламное фото",Ly="Чужой, непристойный или нечитабельный текст",wy="Спам";B();X();W();Z();dt();pe();me();pt();Ne();var Wk="/ajax/complaint.cshtml",qk={comments:ry,abusive:ay,spam:ly,copyright:cy},Vk={spam:dy,abusivetext:my,abusivephoto:hy,textcopyright:uy,garbage:py},Gk={abusive:fy,copyright:gy,textcopyright:vy,incorrect:Ey},Jk={ads:by,manyinone:yy,wrongsection:_y,faultyphoto:Ty,faultytext:Ly,spam:wy},Yk=(i,t)=>L`<div class="y-form-item o-t-xs">${Object.entries(i==="user"?qk:i==="journal"?Vk:i==="car"?Gk:Jk).map(([n,s])=>L`<label class="y-choice o-f">
        <input type="radio" name="reason" .value=${n} ?disabled=${!!(t&&n==="copyright")}> ${s}
      </label>`)}</div>`,Kk=(i,t="",e)=>L`
<form action="${Wk}" data-role="form">
  ${i==="commentspam"?L`<input type="hidden" name="reason" value="spam">`:Yk(i,e)}
  <div class="y-form-item">
    <label class="y-form-legend" for="dlg.t">${iy}</label>
    <textarea class="y-textarea y-textarea--full u-100" name="text" id="dlg.t" data-autofocus>${t}</textarea>
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l u-100" type="submit">${ny}</button>
  </div>
</form>
`,ac=(i,t,e,n,s)=>{let o=new _t({anchor:i,title:ey,className:"c-modal__content--complaint"});q(Kk(t,s.text,s.skipPhotos),o.element),o.setFormDataTransformer(r=>({id:e,type:n,reason:r.reason.value,text:r.text.value})),o.addEventListener("submit",()=>{bt("moderation",{from:n}),Ut()}),o.show(),_i(o.form,["reason",oy,"required"])};var Zk=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520],Xk=[[128512,128591],[127744,128511],[128640,128767],[127462,127487],[9728,9983],[9984,10175],[65024,65039],12953,12951,12349,12336,9410,[9642,9643],9654,9664,[9723,9726],11013,11014,11015,11035,11036,11088,11093,8986,8987,9e3,9167,[9193,9203],[9208,9210],10548,10549,[8592,8703],[129280,129535],[65024,65039],[9100,9300]],Js=(i,t,e)=>i>=t&&i<=e,Qk=i=>i===" ",tD=i=>typeof i=="string"&&i.charCodeAt(0)===8205,Ry=i=>!!i&&Js(i[0].charCodeAt(0),55296,56319),Rh=i=>{let t=i.charCodeAt(0)-55296,e=i.charCodeAt(1)-56320;return(t<<10)+e+65536},My=i=>Js(Rh(i),127462,127487),eD=i=>Js(Rh(i),127995,127999),iD=i=>typeof i=="string"&&Js(i.charCodeAt(0),65024,65039),nD=i=>typeof i=="string"&&Js(i.charCodeAt(0),8400,8447),sD=i=>typeof i=="string"&&Zk.includes(i.charCodeAt(0)),oD=(i,t)=>{let e=t[i];if(!Ry(e)||i===t.length-1)return 1;let n=e+t[i+1],s=t.substring(i+2,i+5);return My(n)&&My(s)||eD(s)?4:2},rD=i=>{let t=!Ry(i[0])||i.length===1?i[0].charCodeAt(0):Rh(i.substring(0,2));return Xk.some(e=>Js(t,Array.isArray(e)?e[0]:e,Array.isArray(e)?e[1]:e))},aD=(i,t=1/0)=>{let e=[],n=0,s=0,o=0;for(;n<i.length&&s<t;){if(o+=oD(n+o,i),sD(i[n+o])&&o++,iD(i[n+o])&&o++,nD(i[n+o])&&o++,tD(i[n+o])){o++;continue}let r=i.substring(n,n+o);Qk(r)||(e.push(r),s++),n+=o,o=0}return e},lc=i=>{let t=i.textContent.replace(/\s+/g,""),e=aD(t,4),n=e.length>0&&e.length<=3&&e.every(s=>rD(s));i.classList.toggle("c-emoji-zoom",n)};me();pt();Wi();ni();F();Vo();Kt();B();Gi();var lD="comment",cD={"edit-history":{text:Wb},"edit-history-hide":{text:qb},edit:{text:Gb},blacklist:{text:qo,confirmTitle:qo,confirm:pv},unblacklist:{text:Ds},spam:{text:Jb},delete:{text:$t,confirmTitle:oc,confirm:$t,delete:!0},mod:{text:Yb,isMod:!0},"thread-hide":{text:Kb,confirmTitle:rc,confirm:Zb},"thread-hidden":{text:Xb,inactive:!0},"thread-moderate":{text:Qb,confirmTitle:gr,confirm:$t,isMod:!0},"thread-moderated":{text:ty,isMod:!0,inactive:!0}},Ih=i=>lt('[data-action="comment.dropdown"]',i),Oh=i=>(i.dataset.menu||"").split(","),Iy=(i,t)=>{i.dataset.menu=t.join(",")},dD=i=>Oh(i).map(e=>rt(O({},cD[e]),{action:e})),Hh=(i,t,e)=>{let n=Oh(i),s=n.indexOf(t);s!==-1&&(n[s]=e),Iy(i,n)},Oy=(i,t,e)=>{let n=Oh(i);n=n.map(s=>s===t?e:s===e?t:s),Iy(i,n)},mD=i=>{let t=i.node(),e=dD(t);new ae(t,e,Vb).addEventListener("select",s=>{let o=kh(t);o&&o.dropdown(t,s.detail)})},Hy=()=>{w.registerHandlers(lD,{dropdown:mD})};var Si="/ajax/forums.cshtml";dt();pn();W();me();pt();var ky="/ajax/admin.cshtml",hD=i=>{let t=i.target,n=t.closest("form").mcomment;n.value=(n.value?`${n.value}, `:"")+t.textContent},uD=i=>L`
<form action=${ky} novalidate>
  ${i.unmuteTime?L`<div class="x-text o-b-l c-link-decorated u-moderated-message u-bold">${$b} ${i.unmuteTime}</div>`:$}
  <div class="y-form-item">
    <label class="y-form-legend">${Fb}</label>
    <div class="o-list o-f">${Bb.split("|").map(t=>L`<button type="button" class="c-button" @click=${hD}>${t}</button>`)}</div>
    <textarea class="y-textarea y-textarea--narrow u-100 o-f" name="mcomment" data-autofocus>${i.comment}</textarea>
  </div>
  <div class="y-form-item">
    <label class="y-form-legend" for="dlg.b">${Ub}</label>
    <select class="y-select" name="unmutedate" id="dlg.b">${Qt(i.denySelect)}</select>
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l c-button--wide u-mobile-100" type="submit" .value=${i.unmuteTime?1:0}>
      ${i.unmuteTime?zb:jb}
    </button>
  </div>
</form>
${i.history?L`<div class="c-dialog-modcomment__table">${Qt(i.history)}</div>`:$}
`,cc=(i,t)=>_(void 0,null,function*(){let e=yield R(ky,"comments-moderate",{method:"POST",anchorEl:i,body:t}),n=new _t({anchor:i,title:`${Pb} ${e.nickname}`},!0);q(uD(e),n.element),n.setFormDataTransformer(s=>rt(O({},t),{_:s.querySelector('button[type="submit"]').value==="1"?"remindCommentingRules":"muteUserComments",text:s.mcomment.value,days:s.unmutedate.value})),n.addEventListener("submit",Ut),n.show()});var _n="comment",Dy="is-original",fD="/ajax/blacklist.cshtml",Dh=new WeakMap,Ny=new WeakSet,gD=(i,t,e,n)=>L`
  <form action="${Si}" class="" novalidate>
    <div class="x-text o-b-l c-link-decorated">${Ob}</div>
    ${t?L`<div class="y-form-item">
          <label class="y-form-legend" for="dlg.h">${Hb}</label>
          <input class="y-input u-100" type="text" name="header" id="dlg.h" .value=${t}>
        </div>`:$}
    <div class="y-form-item">
      ${t?L`<label class="y-form-legend" for="dlg.t">${kb}</label>`:$}
      <textarea class="y-textarea y-textarea--narrow u-100" name="text" id="dlg.t" data-autofocus>${i}</textarea>
    </div>
    <div class="x-form__submit x-form__submit--dialog o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
      <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
      ${!t&&(n||e)?L`<label class="c-upload-button" data-thumbnail=${ci(e)} data-role="upload-button"></label>`:$}
      <button class="c-button c-button--primary c-button--m-no-padding" name="submitbtn" type="submit">
        ${Nb}
      </button>
    </div>
  </form>
`,Nh=class{constructor(t){this.rootEl=t;this.isThread=this.rootEl.dataset.thread===""}showReplyForm(t){let e=t.dataset.parent||"",n=this.getReplyForm(e),s=wt(n);s.addEventListener("end",o=>{let{expanded:r}=o.target;r&&n.text.focus()},{once:!0}),s.toggle()}getReplyForm(t){if(this.replyForm&&document.documentElement.contains(this.replyForm))return this.replyForm;let n=Co("comment-form").find(a=>a.classList.contains(Dy)).cloneNode(!0);this.replyForm=n,n.classList.remove(Dy),n.id="",n.dataset.hidden&&delete n.dataset.hidden;let s=n.text;s.style.height="",s.setAttribute("placeholder",Db),s.value="";let o=je("upload-button",n);o.innerHTML="",o.dataset.thumbnail&&delete o.dataset.thumbnail;let r=P("input",{type:"hidden",name:"parent",value:t||""});return n.appendChild(r),A(n,!1),this.rootEl.after(n),n}getDropdownQuery(t,e={}){return O({_:t,owner:this.rootEl.dataset.owner,ownerId:this.rootEl.dataset.ownerid,id:this.rootEl.dataset.id},e)}dropdown(t,e){switch(e){case"edit-history":case"edit-history-hide":this.editHistory(t);break;case"edit":this.edit(t);break;case"blacklist":this.blacklist(t,!0);break;case"unblacklist":this.blacklist(t,!1);break;case"spam":this.spam(t);break;case"thread-moderate":this.deleteCommentOrThread(t,!0);break;case"thread-hide":case"delete":this.deleteCommentOrThread(t);break;case"mod":this.moderate(t);break}}editHistory(t){return _(this,null,function*(){let e=this.getDropdownQuery(this.isThread?"ht":"hc"),n=C(_n,"history",this.rootEl);if(n||(n=P("div",{"data-slot":`${_n}.history`}),C(_n,"text",this.rootEl).before(n)),Ny.has(n)){wt(n).toggle(),Ut();return}let o=yield R(Si,"comment-edit-history",{delay:!0,method:"POST",anchorEl:t,body:e});o.html&&(Ny.add(n),A(n,!1),n.innerHTML=o.html,wt(n).addEventListener("start",r=>{let a=Ih(this.rootEl);a&&(r.target.expanded?Hh(a,"edit-history","edit-history-hide"):Hh(a,"edit-history-hide","edit-history"))}),wt(n).toggle(),Ut())})}edit(t){return _(this,null,function*(){let e=this.getDropdownQuery(this.isThread?"ut":"uc"),n=yield R(Si,"comment-edit",{delay:!0,method:"POST",anchorEl:t,body:rt(O({},e),{begin:!0})}),s=n.thumbnail&&n.thumbnail.length>0?n.thumbnail[0]:"",o=new _t({anchor:t,title:`${Mb} ${this.isThread?Rb:Ib}`},!0);q(gD(n.text,n.header,s,n.canPostImages),o.element),o.setFormDataTransformer(r=>{let a=O(rt(O({},e),{text:r.text.value}),r.header&&{header:r.header.value}),l=je("upload-button",r);if(l){let{id:c,thumbnail:d}=l.dataset;(c||s&&!c&&!d)&&(a.image=c||"")}return a}),o.addEventListener("submit",r=>{let{detail:a}=r,l=C(_n,"text",this.rootEl);a.text&&(l.innerHTML=a.text,lc(l));let c=document.getElementById("thread-header");c&&a.header&&(c.innerHTML=a.header),Rt(),Rt()}),o.show()})}blacklist(t,e){return _(this,null,function*(){Ut();let n=this.rootEl.dataset.user;yield R(fD,"comment-blacklist",{method:"POST",delay:!0,anchorEl:t,body:{_:e?"add":"remove",id:n}}),Co(_n).filter(o=>o.dataset.user===n).forEach(o=>{let r=Ih(o);r&&Oy(r,"blacklist","unblacklist")})})}spam(t){let e=this.rootEl.dataset.user,n=C(_n,"text",this.rootEl),s=n?`${sy}: ${n.innerText}`:"";setTimeout(ac,1,t,"commentspam",e,"user",{text:s})}deleteCommentOrThread(t,e){return _(this,null,function*(){let n=this.getDropdownQuery(this.isThread?e?"mt":"dt":"dc"),s=yield R(Si,"comment-delete",{delay:!0,method:"POST",anchorEl:t,body:n});Ut(),this.isThread?s.url?window.location.href=s.url:window.location.reload():wt(this.rootEl).hideAndRemove()})}moderate(t){cc(t,{_:"getUserCommentsModerationData",userId:this.rootEl.dataset.user,forumId:this.rootEl.dataset.forum,messageId:this.rootEl.dataset.id})}},kh=i=>{let t=ys(i,_n);return t&&!Dh.has(t)&&Dh.set(t,new Nh(t)),t&&Dh.get(t)},vD=i=>{let t=i.node(),e=kh(t);e&&!Se(t)&&e.showReplyForm(t)},Py=()=>{w.registerHandlers(_n,{reply:vD})};Ph();B();G();W();pe();var mc=class{constructor(t,e,n){this.key=t;this.expiration=e;this.idFn=n;this.data=this.removeExpired(this.data)}save(t,e){let n=this.removeExpired(this.data).filter(s=>!this.idFn(s));e||n.push(t),this.data=n}load(){return this.data.find(this.idFn)}get data(){return JSON.parse(localStorage.getItem(this.key)||"[]")}set data(t){localStorage.setItem(this.key,JSON.stringify(t))}removeExpired(t){return t.filter(e=>e.timestamp+this.expiration>Date.now())}};ge();eh();xi();hc();pt();dn();ni();var ED=500,Fy="is-collapsed",br=class extends H{parsedInit(){this.isInline=this.element.dataset.inline==="",this.draftStorage=new mc("commentsDrafts",28*60*60*1e3,n=>{let s=this.element.ownerId.value,o=this.element.parent&&this.element.parent.value;return s===n.ownerId&&o===n.parent}),this.restoreDraft(),this.element.addEventListener("input",he(()=>this.saveDraft(),300)),Jl(this.element,()=>this.post());let t=this.element.text;this.isInline?(t.addEventListener("focus",()=>this.focus()),t.addEventListener("blur",()=>this.blur())):this.textarea=new Tn(t,t.offsetHeight);let e=this.slot("upload");e&&(e.addEventListener("click",()=>this.cancelFocus()),e.addEventListener("change",()=>this.saveDraft()))}cancelFocus(){clearTimeout(this.blurTm)}focus(t){clearTimeout(this.blurTm),this.element.classList.remove(Fy),!t&&this.element.dataset.metrika&&bt(this.element.dataset.metrika)}blur(){this.blurTm=setTimeout(()=>{this.element.text.value===""&&this.element.classList.add(Fy)},350)}post(){return _(this,null,function*(){let t=this.element,e=this.slot("upload"),n=e&&e.dataset.id,s=O(O(O({_:t.dataset.type,text:t.text.value,owner:t.owner.value,ownerId:t.ownerId.value},t.header&&{header:t.header.value}),t.parent&&{parent:t.parent.value}),n&&{image:n}),o=new $e(this.slot("spinner")),r=yield R(Si,this.role,{method:"POST",body:s,anchorEl:t.querySelector('button[type="submit"]'),spinner:o});if(r.url){this.saveDraft(!0),window.location.href=r.url;return}if(r.warning){Xe({anchor:this.element.submitbtn,className:"c-dialog-warning",title:dc,html:`
<div class="x-text">${r.warning}</div>
<div class="x-form__submit x-form__submit--dialog u-extend">
  <button class="c-button c-button--primary c-button--alt-l c-button--wide u-mobile-100"
  type="button" data-action="dialog.close">${Er}</button>
</div>
        `});return}if(!r.html)return;let a=Ei(r.html);a.style.visibility="hidden";let l=document.getElementById("commentstitle");if(l){let m=l.querySelector(".c-counter"),u=m?parseInt(m.textContent,10)+1:1;l.innerHTML=`${Ab} <span class="c-counter">${u}</span>`}let c=t.closest(".js-entity"),d=j("js-commentscounter",c);d&&(d.textContent=String((Number(d.textContent)||0)+1)),t.header&&(t.header.value=""),this.textarea?this.textarea.setContent(""):t.text.value="",e&&(e.dataset.id&&delete e.dataset.id,e.dataset.thumbnail&&delete e.dataset.thumbnail);let h=!!t.parent,p=t.dataset.hidden==="";if(this.isInline)this.element.before(a);else if(h)t.after(a);else if(p)jt(Sb,t.submitbtn);else{let m=j("c-comments");t.dataset.position==="top"?m.prepend(a):m.appendChild(a)}this.saveDraft(!0),Lt(a,{behavior:"smooth",block:"nearest"}),this.animate(a,t,h),this.isInline&&t.remove()})}saveDraft(t){let e=this.element.ownerId.value,n=this.element.text.value,s=this.element.header&&this.element.header.value,o=this.element.parent&&this.element.parent.value,r=this.slot("upload"),a=r&&r.dataset.id,l=r&&r.dataset.thumbnail;this.draftStorage.save(O(O(O(rt(O({timestamp:Date.now(),ownerId:e},o&&{parent:o}),{text:n}),s&&{header:s}),a&&{image:a}),l&&{thumbnail:l}),t)}restoreDraft(){let t=this.draftStorage.load();if(!t)return;this.element.text.value=t.text||"",this.element.header&&t.header&&(this.element.header.value=t.header);let e=this.slot("upload");e&&t.image&&t.thumbnail&&(e.dataset.id=t.image,e.dataset.thumbnail=t.thumbnail),this.isInline&&t.text&&this.focus(!0)}animate(t,e,n){let s=t.getBoundingClientRect(),o=e.getBoundingClientRect(),r=o.width/s.width,a=o.x-s.x,l=o.y-s.y;t.classList.add("is-animated"),t.animate({transform:[`translate(${a}px,${l}px) scale(${r})`,"none"],opacity:[.2,1]},{duration:ED,easing:"cubic-bezier(.65,0,.35,1)"}).onfinish=()=>{t.classList.remove("is-animated"),n&&wt(e).hideAndRemove()},t.style.visibility="visible"}};F();Kt();B();W();pt();var By="js-thread",bD="js-entity",yD=(i,t)=>{for(i.appendChild(t);i.firstChild!==t;)t.appendChild(i.firstChild)},Uy=i=>_(void 0,null,function*(){let t=i.actionName(),e=i.node();if(yield ot(t==="mt"?gr:rc,void 0,e,t==="mt"?$t:Us).then(c=>!c))return;let o=It(e,By),{dataset:r}=o;yield R(Si,"mod-delete-thread",{method:"POST",anchorEl:e,body:{_:t,owner:r.owner,ownerId:r.ownerid,id:r.id}});let a=It(o,bD),l=a&&Ft(By,a).length===1?a:o;l&&l.remove()}),_D=i=>{let t=i.node(),{dataset:e}=t,n=O({_:"getUserCommentsModerationData",userId:e.user,forumId:e.forum,messageId:e.id},e.thread&&{threadId:e.thread});cc(t,n)},TD=i=>_(void 0,null,function*(){let t=i.node(),{dataset:e}=t,n=e.thread==="";if(yield ot(n?gr:oc,void 0,t,$t).then(c=>!c))return;yield R(Si,"mod-delete-comment",{method:"POST",anchorEl:t,body:{_:n?"dt":"dc",owner:e.owner,ownerId:e.ownerid,id:e.id}});let o=t.closest("li"),r=j("js-link",o),a=j("js-moddel",o),l=document.createElement("span");l.className="u-deleted",a&&a.remove(),yD(r,l)}),jy=()=>{w.registerHandlers("comments",{dt:Uy,mt:Uy,mod:_D,moddel:TD})};G();var LD=60,yr=class extends H{parsedInit(){this.element.scrollHeight-this.element.offsetHeight<LD&&this.element.classList.remove("is-closed"),this.element.classList.remove("is-off"),this.element.addEventListener("click",t=>{this.element.classList.contains("is-closed")&&(t.preventDefault(),this.element.classList.remove("is-closed"))})}};dt();var zy="Добавить фотографию с компьютера";G();Gt();Ji();Lr();Fi();var MD=(i,t)=>L`
<button class="c-button c-upload-button__button u-icon-hover u-icon-hover--normal" type="button" @click=${t}>
  <span class="c-upload-button__thumb" style="background-image: url(${i})"></span>
  <span class="c-upload-button__remove m-icon c-icon i-close"></span>
</button>
`,wr=class extends H{init(){this.reset=this.reset.bind(this),this.thumbnail||this.attributeChanged()}get thumbnail(){return this.element.dataset.thumbnail||""}set thumbnail(t){this.element.dataset.thumbnail=t}get observedAttributes(){return["data-thumbnail"]}attributeChanged(){ue(this.element),this.thumbnail?(this.uploader&&(this.uploader.dispose(),this.uploader=void 0),Ae(),this.element.dataset.tt&&delete this.element.dataset.tt,q(MD(this.thumbnail,this.reset),this.element)):this.uploader||(this.element.dataset.tt=zy,q($,this.element),this.uploader=new hi("commentimage","c-button"),this.uploader.setAction("uploadSimple"),this.uploader.setButtonCaption('<div class="m-icon c-icon c-icon--s i-photo"></div>'),this.uploader.render(this.element),this.uploader.setVisible(!0),this.uploader.addEventListener("ready",this),this.uploader.addEventListener("started",this))}reset(t){t&&t.preventDefault(),this.element.dataset.id&&delete this.element.dataset.id,this.thumbnail="",Ct(this.element)}handleEvent(t){t.type==="ready"?t.detail&&t.detail.length===1&&(this.element.dataset.id=t.detail[0].id,this.thumbnail=t.detail[0].thumbnail[0]):t.type==="started"&&this.reset(),Ct(this.element)}};F();var Xy="Состою";W();pe();var Qy="feedcomm",ID=i=>_(void 0,null,function*(){let t=i.node();yield R("/ajax/community.apply.cshtml",Qy,{method:"POST",anchorEl:t,body:{community:t.value}}),bt("myfeed_r_communities_join"),t.disabled=!0,t.textContent=Xy}),t_=()=>{w.registerHandlers(Qy,{join:ID})};F();X();var e_=(i,t)=>{document.documentElement.style.overflow="hidden",w.registerHandlers(t,{close:()=>{let e=C(t,"bg");e&&e.remove();let n=C(t,"overlay");n&&n.remove(),document.documentElement.style.overflow=""}})};F();X();W();Z();Zt();Ne();var zh="banktransfer",OD=i=>_(void 0,null,function*(){At(i);let t=i.node();if(!Qe(t))return;let n=yield R(t.action,zh,{method:"POST",anchorEl:t.submitbtn,body:new FormData(t)}),s=C(zh,"success");s.innerHTML=s.innerHTML.replace("{email}",n.email||""),A(t,!1),A(s,!0)}),i_=()=>{w.registerHandlers(zh,{submit:OD})};G();var xr=class extends H{parsedInit(){this.initial=this.element.rebilling.checked,Array.from(this.element.currency).forEach(t=>t.addEventListener("change",()=>this.update())),this.update()}update(){let{rebilling:t}=this.element,e=this.element.currency.value!=="YK:AC";e&&!t.disabled&&(this.initial=t.checked),t.disabled=e,t.checked=e?!1:this.initial}};F();Kt();var n_="Без этой карты Аккаунт специалиста отключится",s_="После удаления, выберите в настройках Аккаунта специалиста другую карту, иначе он отключится после окончания оплаченного периода";B();X();W();Z();ge();Zt();pt();Ne();ni();F();B();G();X();Z();var Wh="deposit-payment",o_="js-deposit-payment-type",r_=()=>{Ft(o_).forEach(t=>{ll(t)||t.remove()})},kD=()=>{Ft(o_).forEach(t=>{A(t,!1)})},a_=i=>{let t=C(Wh,i);A(t,!0)},DD=i=>{let t=C(Wh,"invoice-terms");t&&A(t,i==="invoice")},ND=i=>{let t=C(Wh,"hidden");t&&(t.value=i)},PD=i=>{let t=i.node(),e=t.value;if(kD(),a_(e),DD(e),"kind"in t.dataset){let n=t.dataset.kind||"";ND(n)}},Cr=class extends H{parsedInit(){w.registerHandlers(this.role,{type:PD});let t=lt('[name="payment-type"]',this.element);t&&(t.checked=!0,a_(t.value))}};var $D="js-com-deposit-form",FD="js-deposit-requisite",l_="js-deposit-item",fc="deposit",BD=i=>{let t=It(i,l_);if(t){t.remove();let e=j(FD);Ft(l_,e).length===0&&e.remove()}},UD=i=>_(void 0,null,function*(){let t=i.node(),e=(t.dataset.dependencies||"").split(",").includes("ProAccount");if(yield ot(e?n_:rE,e?s_:void 0,t,e?$t:void 0)){let n=t.dataset.url||"";yield Dt(n,{method:"DELETE",anchorEl:t}),BD(t)}}),jD=i=>{let t=i.node(),e=ut(fc,"submit-btn"),n=ut(fc,"type"),s=C(fc,"payment-options");if(n&&n.length&&n.forEach(o=>{o.value=t.value}),s&&!ll(s)){let o=wt(s);o.addEventListener("show",()=>{Lt(s,{behavior:"smooth"})},{once:!0}),o.toggle(!0)}e.forEach(o=>{o.innerText=t.dataset.caption,o.value=t.dataset.amount})},zD=i=>_(void 0,null,function*(){At(i);let t=i.node(),e=t.closest("form"),n=()=>{t.disabled=!0,e.submit()};if("validateBeforeConfirm"in t.dataset&&!Qe(e))return;"cleanupBeforeSubmit"in e.dataset&&r_();let o=t.dataset.confirm||e.dataset.confirm;if(!o){n();return}(yield ot(o,void 0,t))&&n()}),WD=()=>{let i=C(fc,"tariffs");if(i)Lt(i,{behavior:"smooth"});else{let t=j($D),e=wt(t);e.addEventListener("show",()=>{Lt(t,{behavior:"smooth"})},{once:!0}),e.toggle(!0)}},c_=()=>{w.registerHandlers("deposit",{remove:UD,"update-tariff":jD,"confirm-submit":zD,"show-payment":WD})};F();B();var qD="editorial",VD=i=>{let t=i.node(),e=t.dataset.target,n=lt(`[data-name="${e}"]`);n&&(t.parentElement.remove(),n.classList.remove("is-hidden"))},d_=()=>{w.registerHandlers(qD,{expand:VD})};F();X();W();Z();Zt();var gc="election",GD=i=>_(void 0,null,function*(){At(i);let t=i.node(),e=t.form.id.value;if(!e)return;yield R(t.form.action,gc,{method:"POST",anchorEl:t,body:{id:e}});let n=C(gc,"success");n&&A(n,!0);let s=C(gc,"form");s&&A(s,!1)}),m_=()=>{w.registerHandlers(gc,{submit:GD})};F();B();X();W();Z();Zt();Fi();var JD="/ajax/experience",is="experience",YD=i=>{At(i);let e=i.node().parentElement,n=lt('input[type="checkbox"]',e);Q(`input[name="${n.name}"]`,n.form).forEach(o=>{o.checked=o===n}),xs(n.form)},KD=i=>_(void 0,null,function*(){let t=i.node(),e=vt(t,is,"item"),n=vt(e,is,"reqs"),s=e.dataset.id||"";yield R(JD,is,{method:"POST",anchorEl:t,body:{_:"remove",id:s}}),e.remove(),Ae(),ut(is,"item",n).length===0&&n.remove()}),ZD=i=>{let t=i.node(),e=C(is,"additional"),n=t&&vt(t,is,"additional-control");n&&e&&(A(n,!1),A(e,!0))},h_=()=>{w.registerHandlers(is,{show:YD,remove:KD,"show-additional":ZD})};G();var Ar=class extends H{parsedInit(){let t=this.slot("button");t&&new IntersectionObserver(e=>{this.element.classList.toggle("is-stuck",!e[0].isIntersecting)},{rootMargin:"-1px 0px",threshold:1}).observe(t)}};B();var qh,u_=(i=!0)=>{if(document.body.classList.toggle("g-branded",i),Q(".l-top,.dv-post-header").forEach(t=>{t.style.display=i?"none":""}),i){let{styleSheets:t}=document;if(t&&t.length){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].cssRules.length;n++)if(t[e].cssRules[n].selectorText==="body.g-branded"){qh=t[e].cssRules[n].cssText,t[e].deleteRule(n);break}}}else if(qh){let t=document.createElement("style");t.appendChild(document.createTextNode(qh)),document.head.appendChild(t)}};dt();ii();Wt();var p_="Посмотреть больше машин на Дроме",f_="Посмотреть ещё";B();W();Be();var QD=(i,t)=>L`
<a class=${Nt({"drom-item":!0,"drom-item--index":t.alternative,"ctx-dark":t.alternative})}
  href=${i.link} rel="noopener" target="_blank" data-ym-target="${t.metrikaTarget}_click">
  ${de({images:[i.image]},2,{size:{width:16,height:9},className:"is-rounded u-vignette drom-item__pic"})}
  <div class="drom-item__location">${i.city}</div>
  <h4 class=${Nt({"drom-item__caption":!0,"u-line-clamp-3":t.alternative})}>
    ${i.caption}, ${i.productionYear}
  </h4>\n
  <div class="drom-item__price">${i.price}</div>
</a>
`,g_=(i,t)=>_(void 0,null,function*(){let{url:e}=i.dataset;if(!e)return;let n=yield R(e,t,{silent:!0});q(ct(n.offers,s=>s.link,s=>QD(s,n)),i),n.searchLink||i.after(P("a",{className:n.alternative||n.newDesign?"x-box-more":"c-block__more",href:n.searchLink,rel:"noopener",target:"_blank","data-ym-target":`${n.metrikaTarget}_click`},d2Env.isMobile||n.newDesign?f_:p_))});var vc=class{constructor(t,e){this.root=t;this.providersSelectors=e;this.inited=!1;this.type=this.root.dataset.type,this.providers={},this.syncTargetValueWithProviders=this.syncTargetValueWithProviders.bind(this),this.syncProvidersValuesWithTarget=this.syncProvidersValuesWithTarget.bind(this)}isSupported_(){let t=document.createElement("input"),e="a";return t.setAttribute("type",this.type),t.setAttribute("value",e),t.value!==e}createProviders_(){Object.entries(this.providersSelectors).forEach(([t,e])=>{this.providers[t]=this.root.querySelector(e)})}forEachProvider(t){Object.values(this.providers).forEach(t)}attachAdditionalAttributes_(){let{max:t,min:e}=this.root.dataset;t&&(this.target.max=t),e&&(this.target.min=e)}init(){this.isSupported_()&&(this.inited=!0,this.target=document.createElement("input"),this.target.className="c-native-control",this.target.type=this.type,this.root.appendChild(this.target),this.createProviders_(),this.attachAdditionalAttributes_(),this.syncTargetValueWithProviders(),this.syncProvidersValuesWithTarget=this.syncProvidersValuesWithTarget.bind(this),this.syncTargetValueWithProviders=this.syncTargetValueWithProviders.bind(this),this.target.addEventListener("change",this.syncProvidersValuesWithTarget),this.forEachProvider(t=>{t.addEventListener("change",this.syncTargetValueWithProviders)}))}destroy(){this.inited&&(this.inited=!1,this.target.remove(),this.target.removeEventListener("change",this.syncProvidersValuesWithTarget),this.forEachProvider(t=>{t.removeEventListener("change",this.syncTargetValueWithProviders)}))}syncTargetValueWithProviders(){this.forEachProvider(t=>this.target.value=t.value)}syncProvidersValuesWithTarget(t){let{value:e}=t.target;this.forEachProvider(n=>n.value=e)}};var Vh=(i="")=>i.startsWith("0")?i.substr(1):i,Gh=(i="")=>i.padStart(2,"0");var Ec=class extends vc{syncTargetValueWithProviders(){let t=`${this.providers.year.value}-${Gh(this.providers.month.value)}-${Gh(this.providers.date.value)}`,e=!Number.isNaN(Date.parse(t));this.target.value=e&&t||this.target.max||""}syncProvidersValuesWithTarget(t){let{value:e}=t.target;if(!this.validateValue(e)){this.resetControl();return}let[n,s,o]=e.split("-");this.providers.date.value=Vh(o),this.providers.month.value=Vh(s),this.providers.year.value=n}validateValue(t){if(!t)return!1;let{max:e,min:n}=this.target,s=Date.parse(t);return!(e&&s>Date.parse(e)||n&&s<Date.parse(n))}resetControl(){setTimeout(()=>{this.syncTargetValueWithProviders(),this.target.blur(),this.target.focus()},0)}};var v_=i=>{new Ec(i,{date:'[name="birthDateDay"]',month:'[name="birthDateMonth"]',year:'[name="birthDateYear"]'}).init()};B();G();var Sr=class extends H{parsedInit(){this.button=this.slot("button"),this.toggle(!0),this.element.addEventListener("click",t=>{t.target instanceof HTMLInputElement&&t.target.type==="checkbox"&&this.toggle(!0)}),this.button&&this.button.addEventListener("click",()=>this.toggle())}toggle(t){let e=Q('input[type="checkbox"]',this.element),s=e.reduce((o,r)=>o+(r.checked?0:1),0)>1;t||e.forEach(o=>{o.checked=s}),this.button&&(this.button.textContent=this.button.dataset[`${(t?s:!s)?"":"un"}checkcaption`])}};F();var tN="daterender",eN=(i,t)=>new Date(t,i+1,0).getDate(),iN=i=>{let t=i.node(),e=t.form,n=/(Day|Month|Year)/,s=e[t.name.replace(n,"Day")],o=e[t.name.replace(n,"Month")],r=e[t.name.replace(n,"Year")];if(!o.value||!r.value)return;let a=Number(s.value),l=Number(o.value)-1,c=Number(r.value),d=eN(l,c),h=Math.min(a,d);s.options.length=s.options[0].value==="1"?0:1;for(let p=1;p<=d;p++){let m=document.createElement("option");s.appendChild(m),m.value=String(p),m.textContent=String(p),m.selected=p===h}},E_=()=>{w.registerHandlers(tN,{update:iN})};dt();Wt();Kt();var b_="Дата",y_=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];G();Gt();Mr();me();var Jh=(i,t)=>Array.from({length:t-i+1},(e,n)=>i+n),sN=(i,t)=>new Date(t,i+1,0).getDate(),oN=(i,t,e,n,s)=>L`
<form class="x-box x-box--ghost">
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="day" @change=${s}>
        ${ct(t,o=>o,o=>L`<option value=${o} .selected=${o===i.day}>${o}</option>`)}
      </select>
    </div>
  </div>
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="month" @change=${s}>
        ${ct(e,o=>o,o=>L`<option value=${o} .selected=${o===i.month}>${y_[o]}</option>`)}
      </select>
    </div>
  </div>
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="year" @change=${s}>
        ${ct(n,o=>o,o=>L`<option value=${o} .selected=${o===i.year}>${o}</option>`)}
      </select>
    </div>
  </div>
  <button class="c-button c-button--primary c-button--l u-100 o-t-l" type="submit">
    ${ve}
  </button>
  <button class="c-button c-button--l u-100 o-t-s" type="button" data-action="dialog.close">
    ${zs}
  </button>
</form>
`,Rr=class extends H{parsedInit(){this.form=this.element.closest("form"),this.prefix=this.element.dataset.prefix||"",this.minDate=this.element.dataset.min?new Date(this.element.dataset.min):new Date(1970,0,1),this.maxDate=this.element.dataset.max?new Date(this.element.dataset.max):new Date,this.change=this.change.bind(this),this.element.addEventListener("click",()=>this.showForm())}field(t){return this.form[`${this.prefix}${t}`]}value(t,e=0){return this.field(t)&&Number(this.field(t).value)||e}setValue(t,e){this.field(t)&&(this.field(t).value=String(e)||"",Ct(this.field(t)))}getState(){return{day:this.value("Day"),month:this.value("Month",1)-1,year:this.value("Year")}}showForm(){this.state=this.getState();let{state:t}=this,e=new _t({anchor:this.element,className:"c-modal-popscreen",title:b_},!1,!0);this.container=e.element,this.update(),e.setSubmitHandler(()=>{this.setValue("Year",t.year),this.setValue("Month",t.month+1),this.setValue("Day",t.day);let n=this.slot("date");return n.innerText=new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric"}).format(new Date(t.year,t.month,t.day)),Promise.resolve()}),e.show()}update(){let{state:t,minDate:e,maxDate:n}=this,s=new Date(t.year,t.month,t.day),o=new Date(s.getTime());o.setDate(1);let r=(o<this.minDate?e:o).getDate();o.setMonth(o.getMonth()+1),o.setDate(0);let a=(n<o?n:o).getDate();o.setMonth(0);let l=(o<e?e:o).getMonth();o.setFullYear(o.getFullYear()+1),o.setMonth(-1);let c=(n<o?n:o).getMonth();t.month=si(t.month,l,c);let d=e.getFullYear(),h=n.getFullYear(),p=Jh(r,a),m=Jh(l,c),u=Jh(d,h);q(oN(t,p,m,u,this.change),this.container)}change(t){let e=t.target,{name:n}=e,{state:s}=this,o=Number(e.value)||0;n==="year"?s.year=o:n==="month"?(s.month=o,s.day=Math.min(s.day,sN(s.month,s.year))):n==="day"&&(s.day=o),this.update()}};B();G();X();Z();Ne();var Yh="is-invalid",rN="field-validation-error",__=i=>{i&&(Ft(rN,i).forEach(e=>A(e,!1)),i.querySelectorAll(`.${Yh}`).forEach(e=>e.classList.remove(Yh)))},Ir=class extends H{parsedInit(){let t=this.element.tagName==="FORM"?this.element:this.element.querySelector("form");if(!t)throw Error(`data-role="form": can't find form.`);t.addEventListener("change",this),t.addEventListener("input",this),t.addEventListener("submit",e=>this.preventMultipleSubmits(e),!0)}handleEvent(t){let e=t.target;if(!e)return;let n=this.slot("submit");n&&(n.disabled=!1);let s=It(e,"x-form__item")||It(e,"y-form-item");e.form&&(d2Env.isMobile||It(e,"x-form__item")||It(e,"y-form-item"))&&(__(s),e.form.querySelectorAll(`.x-form__item.${Yh}`).forEach(o=>__(o)))}preventMultipleSubmits(t){let e=t.target;je("recaptcha",e)||!Qe(e)||(this.disabled?t.preventDefault():(this.disabled=!0,setTimeout(()=>{this.disabled=!1},2500)))}};F();W();var L_="check-password",aN=150,T_,ns,lN=i=>{clearTimeout(T_);let t=i.node();T_=setTimeout(()=>_(void 0,null,function*(){let e=t.dataset.passwordCheckUrl;if(!e)return;let n=yield R(e,L_,{method:"POST",silent:!0,body:{password:t.value}});ns||(ns=document.createElement("div"),ns.className="y-form-check",t.after(ns)),ns.innerHTML=n.message,ns.classList.toggle("not-valid",!n.isValid),ns.classList.toggle("valid",!!n.isValid)}),aN)},w_=()=>{w.registerHandlers(L_,{check:lN})};B();G();_m();ss();pt();xc();var hN="/ajax/geo.cshtml",H_=(i,t)=>{let e=new URLSearchParams(window.location.search);e.delete("city"),e.delete("country"),i&&t&&e.set(i,t);let n=e.toString(),s=()=>{window.location.href=n?`?${n}#filter`:window.location.pathname};d2Env.isApp?($o("modal-close"),setTimeout(s,100)):s()},uN=(i,t)=>rt(O({},t),{render(e){let n=P("div","x-form__body",P("div","x-form__text",t.caption,t.extra&&P("div","x-form__secondary x-secondary-color",t.extra)));e.appendChild(n)},select(e){e.value=t.caption}}),Hr=class extends H{init(){let t=this.element.dataset.context||"",e=this.element.dataset.selling||"",n=`${hN}?_=r&s=${e}&context=${t}`;this.hasFilter=this.element.value!=="",this.update=this.update.bind(this),this.clear=this.clear.bind(this),d2Env.isMobile?this.element.addEventListener("focus",()=>{if(this.isDialogActive)return;let s=this.closestSlot(this.element,"search");s.classList.remove("c-search--s");let o=s.parentElement,r=this.element.placeholder;this.isDialogActive=!0;let a=this.element.value,l=Xe({anchor:s,title:r}),c=l.contentElement;l.addEventListener("hide",()=>{s.classList.add("c-search--s"),this.element.placeholder=r,this.element.value=a,o.prepend(s),setTimeout(()=>{this.isDialogActive=!1,this.ac.removeEventListener("update",this.update),this.ac.removeEventListener("dismiss",Rt),this.ac.dispose()},0)}),this.ac&&this.ac.dispose(),this.ac=new Re(n,this.element,!1,!1,c),this.ac.setRowBuilder(uN);let d=this.ac.getRenderer();d.className="x-box x-box--narrow o-t-s",d.rowClassName="x-form__item",d.activeClassName="is-active",this.ac.addEventListener("update",this.update),this.ac.addEventListener("dismiss",Rt),this.ac.setToken(a),this.ac.setTarget(s),this.ac.update(!0),this.element.placeholder="",c.appendChild(P("div","x-box o-t",s)),this.element.focus(),setTimeout(()=>{this.element.setSelectionRange(0,a.length)},0)}):(this.ac=new Re(n,this.element),this.ac.setRowBuilder(Ys),this.ac.getRenderer().setWidthProvider(this.element,0,this.element),this.ac.addEventListener("update",this.update),this.element.addEventListener("input",this.clear),this.element.addEventListener("blur",this.clear),this.element.addEventListener("focus",()=>{this.element.value===""&&this.ac.update(!0)}))}clear(){this.element.value||(this.hasFilter?H_():(this.ac.setTarget(this.element),this.ac.setToken(""),d2Env.isMobile||this.ac.dismiss()))}update(t){let{row:e}=t.detail;if(!e){this.clear();return}let{id:n}=e;H_(e.kind||"city",n)}};G();var os=[],kr=class extends H{parsedInit(){this.select=this.element.querySelector("select"),this.select.addEventListener("change",()=>this.change());let t=this.slot("remove");t&&t.addEventListener("click",()=>this.remove())}parsed(){os.push(this.select),this.update()}disconnected(){let t=os.indexOf(this.select);t!==-1&&(os.splice(t,1),this.update())}change(){let t=os[os.length-1];if(t.selectedIndex!==0){let e=this.root(t),n=e.cloneNode(!0);e.after(n),t.options[0].remove()}this.update()}remove(){this.element.remove(),this.update()}update(){let t=os.map(e=>e.value);os.forEach(e=>{for(let n of e.options)n.disabled=n.value!==e.value&&!!(n.value&&t.includes(n.value))})}};F();X();Z();var k_="lg-feedback",pN=i=>{let t=i.node(),e=t.options[t.selectedIndex].dataset.feedback==="",n=C(k_,"container");A(n,e)},D_=()=>{w.registerHandlers(k_,{toggle:pN})};dt();ii();var N_="Недопустимый",P_="Свободен",$_="Занят",F_="Вы можете выбрать один из этих:";B();W();xi();var B_={Free:P_,Taken:$_,Invalid:N_},gN="nickname",vN="/_api/nickname/check",EN=600,U_=(i,t,e)=>L`
<div class=${Nt({"y-form-check__nickname":!0,"is-in-use":i!=="Free","is-available":i==="Free"})}>
    ${B_[i]||B_.Invalid}
</div>
${t&&t.length!==0?L`<div>
      <div>${F_}</div>
      <ul class="c-link-decorated">
          ${t.map(n=>L`<li><button class="r-button-unstyled c-link c-link--current" type="button" @click=${e}>${n}</button></li>`)}
      </ul>
  </div>`:$}
`,bN=(i,t)=>_(void 0,null,function*(){let e=r=>{let a=r.target;t.value=a.textContent,q(U_("Free"),i),t.dispatchEvent(new Event("input",{bubbles:!0}))},n=t.value;if(!n){q($,i);return}let{current:s}=t.dataset,o=s&&s===n?{state:"Free"}:yield R(vN,gN,{silent:!0,body:{nickname:n}});q(U_(o.state,o.variants,e),i)}),j_=i=>{let t=P("div","y-form-check");i.after(t),i.addEventListener("input",he(()=>bN(t,i),EN))};dt();ii();Wt();var z_="{VoteCount, plural, one {# голос} many {# голосов} other {# голоса}}{AbstentionCount, plural, =0 {} one {, # воздержался} other {, # воздержалось}}";G();be();W();le();var _N=i=>L`
<div class=${Nt({"x-poll__result":!0,"is-active":i.selected})} style="--percentage:${i.percentage}">
  <div class="x-poll__value">${i.percentage}</div>
  <div class="x-poll__option">
    ${_e(i.text)} <span class="c-counter">${i.voteCount}</span>
  </div>
</div>
`,W_=(i,t)=>L`
<div class="x-poll x-poll--post" style="--percentage-base:${i.percentageBase}">
  <div class="x-box is-small">
    <h2 class="x-header x-header--xs">${t}</h2>
    ${ct(i.answers,e=>e.id,_N)}
    <div class="x-poll__overall">
      ${tt(z_,{VoteCount:i.voteCount,AbstentionCount:i.abstentionCount})}
    </div>
  </div>
</div>
`,Dr=class extends H{init(){this.element.addEventListener("click",t=>this.click(t)),this.element.addEventListener("submit",t=>this.submit(t))}click(t){this.button=t.target.closest("button")}submit(t){return _(this,null,function*(){t.preventDefault();let e=t.submitter||this.button;if(!e)return;let n=yield R(this.element.action,{method:"POST",anchorEl:e,body:{[e.name]:e.value}}),s=this.slot("text").textContent||"",o=rt(O({},n),{answers:n.answers.map(a=>rt(O({},a),{percentage:0}))}),r=document.createElement("div");q(W_(o,s),r),this.element.replaceWith(r.firstElementChild),setTimeout(()=>{q(W_(n,s),r)})})}};var q_="Удалить опрос?",V_="Опрос и его результаты будут удалены без возможности восстановления.",G_="Редактировать опрос?",J_="После редактирования опроса, его результаты будут удалены без возможности восстановления.";B();G();Gt();Z();ge();pt();var Y_=2,Nr=i=>lt("textarea",i),Pr=class extends H{parsedInit(){this.maxItems=Number(this.element.dataset.max||10),this.form=this.slot("form"),this.form.addEventListener("input",()=>this.input()),this.form.addEventListener("click",n=>this.remove(n));let t=this.slot("delete"),e=this.slot("edit");t&&e&&(t.addEventListener("click",n=>this.delete(n)),e.addEventListener("click",n=>this.edit(n)))}input(){let t=this.slots("item"),e=t[t.length-1];if(Nr(e).value){if(t.length<this.maxItems){let s=e.cloneNode(!0);Nr(s).value="",e.after(s)}}else t.length>Y_&&!Nr(e.previousElementSibling).value&&e.remove()}remove(t){if(!(t.target instanceof HTMLButtonElement))return;let e=this.slots("item"),n=this.closestSlot(t.target,"item");if(e.length<=Y_){let s=Nr(n);s.value="",s.blur()}else n.remove(),Ct(this.element);this.input()}restore(){this.slot("results").remove(),A(this.form,!0),Lt(this.form,{behavior:"smooth",block:"nearest"});let t=this.element.querySelector('[name="Poll.Overwrite"]');t&&(t.value="true",Ct(t))}delete(t){return _(this,null,function*(){let e=t.target;(yield ot(q_,V_,e,e.textContent))&&(this.form.querySelector("textarea").value="",this.slots("item").forEach((s,o)=>{o<=1?Nr(s).value="":s.remove()}),this.restore())})}edit(t){return _(this,null,function*(){let e=t.target;(yield ot(G_,J_,e,e.textContent))&&this.restore()})}};dt();ii();Wt();cr();G();Ji();xi();var $r=class extends H{parsedInit(){this.countryEl=this.slot("country"),this.regionEl=this.slot("region"),this.country=this.country||this.countryEl.value,this.region=this.region||this.regionEl.value,queueMicrotask(()=>{this.inited=!0}),this.countryEl.addEventListener("change",()=>{this.country=this.countryEl.value,this.region&&(this.region="")}),this.regionEl.addEventListener("change",()=>{this.region=this.regionEl.value}),this.update=he(()=>this.updateInternal(),20)}get country(){return this.element.dataset.country||""}set country(t){this.element.dataset.country=t}get region(){return this.element.dataset.region||""}set region(t){this.element.dataset.region=t}get observedAttributes(){return["data-country","data-region"]}attributeChanged(){this.inited&&this.countryEl&&this.regionEl&&this.update()}updateInternal(){return _(this,null,function*(){let{country:t,region:e,countryEl:n,regionEl:s}=this;s.disabled=!0,s.selectedIndex=0;let o=!1;if(t){n.value=t;let a=yield ib.get(t,n);o=a.region;let l=s.options[0].value===""&&s.options[0].text,c=[...a.regions];l&&c.unshift({id:"",caption:l}),ue(s),q(ct(c,d=>d.id,d=>L`<option class=${Nt({"is-important":!!d.important})} value=${d.id}>${d.caption}</option>`),s)}else n.selectedIndex=0;s.disabled=!t,e?s.value=e:s.selectedIndex=0;let r=this.slot("region-label");r&&(r.textContent=r.dataset[o?"region":"city"]),this.element.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:this}))})}};F();B();Gt();var K_=new WeakSet,Z_=i=>{let t=i.actionName()==="focus",e=i.node();e.dataset.addPlaceholder||(e.dataset.addPlaceholder=e.placeholder);let n=e.form,s=e.dataset.radio;e.parentElement.classList.add("is-checked"),e.placeholder=t?e.dataset.placeholder:e.dataset.addPlaceholder,t&&Q(`[name="${s}"]`,n).forEach(o=>{o.checked=!1}),K_.has(e)||(K_.add(e),n.addEventListener("change",()=>{e.parentElement.classList.toggle("is-checked",!on(n,s))}))},X_=()=>{w.registerHandlers("rich-radiogroup",{focus:Z_,blur:Z_})};B();G();pt();var Q_="is-active",Fr=class extends H{parsedInit(){this.selectEl=lt("select",this.element),this.selectEl.addEventListener("change",()=>{d2Env.isMobile?this.resizeSelect():this.updateCaption(this.selectEl.options[this.selectEl.selectedIndex].text)}),d2Env.isMobile?this.resizeSelect():this.element.addEventListener("click",()=>this.open())}updateSelect(t){this.selectEl.selectedIndex=t,this.selectEl.dispatchEvent(new Event("change"))}updateCaption(t){let e=this.slot("caption");e&&(e.textContent=t)}resizeSelect(){if(this.element.dataset.wide==="")return;let t=this.selectEl.cloneNode(!1);t.add(this.selectEl.options[this.selectEl.selectedIndex].cloneNode(!0)),t.style.cssText="position:absolute;width:auto;right:0;visibility:hidden",this.selectEl.after(t),this.selectEl.style.width=`${t.offsetWidth}px`,t.remove()}open(){if(this.isOpen)return;this.isOpen=!0;let t=document.createElement("div"),e=jt(t,this.element,{classNames:["c-bubble--select"],placement:"bottom",noAnimation:!0,noFlip:!0});Array.from(this.selectEl.options).forEach((n,s)=>{let o=document.createElement("div");o.className="c-rich-select__option",o.textContent=n.text,o.addEventListener("click",()=>{this.updateCaption(n.text),this.updateSelect(s),e.hide()},{once:!0}),t.appendChild(o)}),this.element.classList.add(Q_),e.addEventListener("hide",()=>{this.element.classList.remove(Q_),setTimeout(()=>{this.isOpen=!1},200)},{once:!0}),window.addEventListener("scroll",()=>e.hide(),{once:!0,passive:!0})}};var Xh,Qh=i=>{let t=i.cloneNode(!1);delete t.dataset.role,t.add(i.options[i.selectedIndex].cloneNode(!0)),t.style.cssText="position:absolute;visibility:hidden",i.after(t),i.style.width=`${t.offsetWidth}px`,t.remove()},tT=i=>{Qh(i),Xh=new IntersectionObserver(()=>{i.offsetWidth&&Xh.unobserve(i),Qh(i)},{threshold:0}),Xh.observe(i),i.addEventListener("change",()=>Qh(i))};var tu=i=>{i.classList.toggle("is-placeholder",!i.classList.contains("no-placeholder")&&i.selectedIndex===0&&i.options[0].value==="")},eT=i=>{tu(i),i.addEventListener("change",()=>tu(i)),i.addEventListener("forced-change",()=>tu(i))};hc();var iT=i=>{new Tn(i)};dt();pn();var nT="Ссылка",sT="Вставить видеоролик",oT="Вставить картинку",rT="Ссылка на пользователя",aT="Ссылка (URL)",lT="Текст ссылки",cT="Ссылка на видеоролик (YouTube, Vimeo, VK Видео или Rutube)",dT="Подпись к картинке",mT="Ник пользователя",hT="Вставить";B();G();X();Gt();le();Z();xi();me();var uT=i=>/^https?:\/\//i.test(i),pT=i=>i.indexOf("@")===0?i.substring(1):i,Br=(i,t,e,n,s)=>L`
<div class="y-form-item">
  <label class="y-form-legend" for="dlg.${t}">${i}</label>
  ${s?L`<textarea class="y-textarea y-textarea--double u-100" name="${t}" id="dlg.${t}" ?data-autofocus=${n}>${e}</textarea>`:L`<input class="y-input u-100" type="text" name="${t}" id="dlg.${t}" ?data-autofocus=${n} value="${e}">`}
</div>
`,wN=(...i)=>L`
<form data-role="form">
  ${i}
  <div class="x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l c-button--wide u-100" type="submit">${hT}</button>
  </div>
</form>
`,Cc=(i,t,...e)=>new Promise(n=>{let s=new _t({anchor:t,className:"c-dialog-toolbar",title:i});q(wN(...e),s.element),s.setSubmitHandler(o=>_(void 0,null,function*(){queueMicrotask(()=>n(o))})),s.show()}),Ur=class extends H{init(){this.highlightImages=this.highlightImages.bind(this),this.element.addEventListener("keydown",e=>this.shortcut(e));let t=this.closestSlot(this.element,"container");if(t){this.buttons=this.slot("buttons",t),this.buttons&&(this.buttons.setAttribute("tabindex","-1"),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this),this.buttons.addEventListener("focus",this),this.buttons.addEventListener("blur",this)),t.addEventListener("click",n=>this.clickHandler(n));let e=this.slot("description",t);e&&e.addEventListener("click",n=>this.toggleDescription(n)),this.element.addEventListener("input",he(this.highlightImages,300)),this.element.form.addEventListener("imagelist-update",this.highlightImages)}this.element.form.addEventListener("imagelist-link",e=>{e.detail.type===this.element.dataset.toolbarType&&this.pic(e.detail.info)}),this.element.form.addEventListener("imagelist-sync",e=>{if(e.detail.type===this.element.dataset.toolbarType){let n=e.detail.info.map(o=>o.id),s=e.detail.newInfo.map(o=>o.id);this.sync(n,s)}})}handleEvent(t){t.type==="focus"?this.buttons.classList.add("is-sticky"):(!t.relatedTarget||!(t.relatedTarget.closest(xo("toolbar.buttons"))||t.relatedTarget===this.element))&&this.buttons.classList.remove("is-sticky")}clickHandler(t){let e=t.target.closest("[data-toolbar-action]");if(e)switch(e.dataset.toolbarAction){case"bold":this.bold();break;case"italic":this.italic();break;case"strike":this.strike();break;case"link":this.link(e);break;case"video":this.video(e);break;case"user":this.user(e);break}}highlightImages(){let t=/<img\b.*?\bsrc="(\d+)"/ig,e=this.element.value,n=[],s;for(;(s=t.exec(e))!==null;){let o=Number(s[1]);n.indexOf(o)===-1&&n.push(o)}this.element.form.dispatchEvent(new CustomEvent("imagelist-highlight",{detail:n}))}toggleDescription(t){let e=t.target.nextElementSibling;e&&A(e,ki(e,"display")==="none")}shortcut(t){if(t.ctrlKey||t.metaKey)switch(t.keyCode){case 66:case 98:t.preventDefault(),this.bold();break;case 73:case 105:t.preventDefault(),this.italic();break;case 88:case 120:t.shiftKey&&(t.preventDefault(),this.strike());break}}getText(){return this.element.value.substring(this.element.selectionStart,this.element.selectionEnd)}insert(t,e,n,s){this.element.focus();let{scrollTop:o}=this.element,r=this.getText(),a=n?"":r,l=t,c=e;if(s){let d=this.element.value.substring(0,this.element.selectionStart),h=this.element.value.substring(this.element.selectionEnd),p=d.trimRight(),m=h.trimLeft();this.element.setSelectionRange(this.element.selectionStart-(d.length-p.length),this.element.selectionEnd+(h.length-m.length)),l=(p?`

`:"")+t,c=e+(m?`

`:""),a=a.trim()}document.execCommand("insertText",!1,l+a+c),this.element.setSelectionRange(this.element.selectionStart+l.length,this.element.selectionEnd-c.length),this.element.scrollTo({top:o,behavior:"instant"}),this.element.focus(),Ct(this.element)}bold(){this.insert("<b>","</b>")}italic(){this.insert("<i>","</i>")}strike(){this.insert("<s>","</s>")}link(t){return _(this,null,function*(){this.element.focus();let e=this.getText(),n=uT(e),s=n?e:"",o=n?"":e,r=yield Cc(nT,t,Br(aT,"p",s,!s),Br(lT,"text",o,!!s));this.insert(`<a href="${Pt(r.p.value)}">${r.text.value}</a>`,"",!0)})}video(t){return _(this,null,function*(){this.element.focus();let e=this.getText(),n=uT(e)?e:"",s=yield Cc(sT,t,Br(cT,"p",n,!0));s.p.value&&this.insert(Pt(s.p.value),"",!0,!0)})}user(t){return _(this,null,function*(){this.element.focus();let e=yield Cc(rT,t,Br(mT,"p",pT(this.getText()),!0)),n=pT(Pt(e.p.value));n&&this.insert(`<user name="${n}">`,"",!0)})}pic(t){return _(this,null,function*(){let e=Ft("c-image-list__item",this.element.form),n=String(t.index||""),s=e.find(l=>l.dataset.index===n);if(!s)return;this.element.focus();let o=this.getText(),r=j("c-image-list__pic-wrapper",s),a=yield Cc(oT,s,L`
        <div class="c-image-list__item">
          <div class="c-image-list__pic-wrapper">${Qt(r.innerHTML)}</div>
        </div>`,Br(dT,"p",o,!0,!0));this.insert(`<img src="${n}" title="${Pt(a.p.value)}">`,"",!0,!0)})}sync(t,e){let n=this.element.value,s=/<img[^>]+>/igm,o=/src="\$?([^"]*)"/i,r,a=[],l=0,c;for(;r=s.exec(n);)if(c=o.exec(r[0]),c&&c.length&&c.length===2){let d=r[0].length,h=t[Number(c[1])-1],p=e.indexOf(h),m=r[0].replace(o,`src="${p>=0?p+1:""}"`);a.push(n.substring(l,s.lastIndex-d),m),l=s.lastIndex}a.push(n.substring(l)),this.element.value=a.join("")}};var fT=i=>{let t=i.target;t.value=t.value.replace(/[oо]/ig,"0").replace(/I/ig,"1")},gT=i=>{i.addEventListener("input",fT),i.addEventListener("paste",fT)};F();Li();eu();var rP="__d2gallery",Au,qT=i=>i&&i.getAttribute("itemprop")==="description"?i.innerHTML:void 0,aP=i=>{let t=i.nextElementSibling,e=qT(t);if(e===void 0){let n=i.parentElement,s=n&&n.nextElementSibling;e=s?qT(s):""}return e},lP=(i,t)=>{let e=t.map(aP);return i.map((n,s)=>e[s]!==null?Object.assign(n,{description:e[s]}):n)},VT=i=>{let{trackTarget:t}=i.dataset,e=rs(i),n=_T(i),s=n.findIndex(r=>r===e);s===-1&&(s=n.findIndex(r=>r.parentElement.classList.contains("is-active")),e&&s!==-1&&(n[s]=e)),s=Math.max(s,0);let o=n.map(TT);if(d2Env.isApp){let r;if(d2Env.gallery){let l={pictures:lP(o.map(LT),n),selectedIndex:s},c=`${rP}${re()}`;window[c]=()=>JSON.stringify(l),r=`drive://gallery2?callback=${c}()`,Au&&delete window[Au],Au=c}else r=`drive://gallery?${o.map(l=>`image=${encodeURIComponent(l.images[0].url||"")}&`).join("")}index=${s}`;window.location.href=r}else Promise.resolve().then(()=>(WT(),zT)).then(r=>r.openPhotoswipe(o,s,t,n))};var cP="lightbox",dP=i=>{let t=i.node();VT(t)},GT=()=>{w.registerHandlers(cP,{zoom:dP})};F();B();X();var Su="block",mP=i=>{let t=i.node(),e=vt(t,Su,"container"),n=C(Su,"more",e);n&&(hg(n),t.remove())},JT=()=>{w.registerHandlers(Su,{more:mP})};G();Mr();var hP=0,uP=100,pP="var(--theme-progress-trail)",YT="var(--theme-money)",Mu=class{constructor(t,e,n,s,o){this.percentage=n;this.container=t,this.strokeWidth=s.strokeWidth||4.16667,this.trailColor=s.trailColor||pP,this.inverted=s.inverted||!1,this.colors=o&&o.length>0?o:[{threshold:100,light:YT,dark:YT}];let r=document.createElementNS("http://www.w3.org/2000/svg","svg");this.trail=this.getPath(r,`${e}__trail`),this.trail.setAttribute("stroke",this.trailColor),this.path=this.getPath(r,`${e}__path`),this.update(),r.setAttribute("class",`${e}__progress`),r.setAttribute("viewBox","0 0 100 100"),r.appendChild(this.trail),r.appendChild(this.path),this.container.prepend(r)}setPercentage(t){this.percentage=t,this.update()}update(){let t=this.getColorByPercentage(this.percentage);this.container.style.setProperty("--progress-color-light",t.light),this.container.style.setProperty("--progress-color-dark",t.dark),this.path&&this.path.setAttribute("style",this.getProgressStyle()+(this.percentage===0?";opacity: 0":""))}getRadius(){return(100-this.strokeWidth)/2}getColorByPercentage(t){return this.colors.find(e=>e.threshold>=t)||this.colors[this.colors.length-1]}getPath(t,e){let n=this.getRadius(),s=this.inverted?"0":"1",o=`M 50,50 m 0,-${n} a ${n},${n} 0 1 ${s} 0,${2*n} a ${n},${n} 0 1 ${s} 0,-${2*n}`,r=document.createElementNS(t.namespaceURI,"path");return r.setAttribute("class",e),r.setAttribute("d",o),r.setAttribute("stroke-width",String(this.strokeWidth)),r.setAttribute("stroke","var(--progress-color)"),r.setAttribute("fill","none"),r}getProgressStyle(){let t=Math.PI*2*this.getRadius(),n=(1-si(this.percentage,hP,uP)/100)*t;return`stroke-dasharray:${t-n}px,${n}px;stroke-dashoffset:0px;`}},fP=i=>(i||"").split(";").filter(t=>t.includes(":")).map(t=>t.trim().split(":")).map(t=>({threshold:Number(t[0])||100,light:t[1]||"",dark:t[2]||t[1]||""})).sort((t,e)=>t.threshold>e.threshold?1:-1),Gr=class extends H{parsedInit(){let{animateFrom:t,percentage:e,pathColor:n,trailColor:s,strokeWidth:o,inverted:r}=this.element.dataset,a=Number(t),l=!Number.isNaN(a),c=Number(e)||0,d=fP(n);this.progress=new Mu(this.element,"c-circular-progress",l?a:c,{trailColor:s,strokeWidth:Number(o),inverted:r===""},d),l&&setTimeout(()=>{this.progress.setPercentage(c)},100)}get observedAttributes(){return["data-percentage"]}attributeChanged(t,e,n){var s;(s=this.progress)==null||s.setPercentage(Number(n)||0)}};F();X();W();ni();var Ks=class extends EventTarget{constructor(e,n){super();this.element=e;this.handleEl=n;this.noAnimation=!1;this.duration=0;this.collapse=!1;this.hideHandle=!1;this.show=!1;this.hide=!1;this.inited=!1;this.toggle=this.toggle.bind(this),n.addEventListener("click",this.toggle)}toggle(){let e=wt(this.element);e.expanded&&this.show||!e.expanded&&this.hide||(this.inited||(this.inited=!0,this.duration!==0&&(e.duration=this.duration),this.collapse&&(e.addEventListener("hide",()=>{this.element.remove(),this.dispose()},{once:!0}),e.addEventListener("show",()=>this.dispose(),{once:!0})),e.addEventListener("start",()=>{this.dispatchEvent(new Event("start"))}),e.addEventListener("end",()=>{this.dispatchEvent(new Event("end"))}),this.hideHandle&&e.addEventListener("end",()=>{this.handleEl.remove(),this.dispose()},{once:!0})),e.toggle(this.noAnimation))}dispose(){this.handleEl.removeEventListener("click",this.toggle)}};var Ru="closable-hint",gP=i=>{let t=i.node(),e=vt(t,Ru,"root"),{link:n}=e.dataset,s=new Ks(e,t);n&&s.addEventListener("start",()=>{R(n,Ru,{method:"POST",anchorEl:t,silent:!0})}),s.toggle()},KT=()=>{w.registerHandlers(Ru,{close:gP})};F();var Jr=i=>{let t=i.node(),e=i.actionName(),n=t.dataset.skipphoto==="",[s,o]=t.dataset.params.split(":");ac(t,e,o,s,{skipPhotos:n})},ZT=()=>{w.registerHandlers("complaint",{car:Jr,commentspam:Jr,user:Jr,journal:Jr,offer:Jr})};ds();B();var eL=i=>{"clipboard"in navigator&&(i.appendChild(P("span","m-icon c-icon c-icon--s i-clipboard-s")),i.addEventListener("click",()=>{navigator.clipboard.writeText(i.textContent.trim())}),i.style.cursor="pointer")};ds();var iL=".UTZ",Zs=(i,t=0,e=1,n=0,s=0)=>new Date(Date.UTC(i,t,e,n,s,0,0)),Yr=i=>-1*i.getTimezoneOffset()/60,nL=i=>Math.floor(i.getTime()/1e3),sL=(i,t)=>{let e=Zs(i,t),n=Yr(e),s=-1;for(let o=0;o<50;o++){let r=Zs(i,t,o),a=Yr(r);if(a!=n){let l=0;for(r=Zs(i,t,o-1),a=Yr(r);s==-1;)if(r=Zs(i,t,o-1,0,l),a=Yr(r),a!=n){r=Zs(i,t,o-1,0,l-1),s=l;break}else l++;return r}}},oL=(i=new Date().getFullYear())=>{let t=0,e=0,n=99;for(let r=0;r<12;r++){let a=Zs(i,r),l=Yr(a);l>n?t=r-1:l<n&&(e=r-1),n=l}let s=sL(i,e),o=sL(i,t);return o&&s?[o,s]:void 0},rL=()=>{let i=cs(iL),t=i&&new Date(i.split(" ").map(Number)[0]*1e3),e=new Date;if((t?(e.getTime()-t.getTime())/(1e3*60*60*24):1/0)>1){let s=`${nL(e)} ${e.getTimezoneOffset()}`,o=oL(),r=oL(e.getFullYear()+1);o&&r&&(s+=` ${o.concat(r).map(nL).join(" ")}`),ui(iL,s,365)}};var aL="<strong>Запомнили!</strong> Так вашу страницу увидят читатели";G();X();W();pe();Mc();var xP=500,CP=(i,t)=>{i==="user"&&bt(t?"user_expand":"user_collapse")},Kr=class extends H{init(){this.element.addEventListener("toggle",this)}handleEvent(){this.element.dataset.ns&&(CP(this.element.dataset.ns,this.element.open),clearTimeout(this.debounceTm),this.debounceTm=setTimeout(()=>this.save(this.element.dataset.ns),xP))}save(t){let e=C(t,"config");if(e&&e.dataset.url){let n=Array.from(document.querySelectorAll(`details[data-ns="${t}"]`)).map(s=>[s.dataset.id,s.open]);R(e.dataset.url,this.role,{method:"POST",silent:!0,body:Object.fromEntries(n)}).then(()=>{t==="user"&&Xs(aL,{type:t})})}}};ds();var AP=".DPR",mL=()=>{let i=window.devicePixelRatio||1;ui(AP,i,365)};var hL=i=>{let t=e=>{let{scrollHeight:n,clientHeight:s}=i,{deltaY:o}=e;if(n>s){let{scrollTop:r}=i;(o<0&&r===0||o>0&&r>=n-s)&&e.preventDefault()}};i.addEventListener("wheel",t)};F();ds();var ku=".FV",uL=()=>{w.registerHandlers("fv",{set:()=>{if(cs(ku))QT(ku);else{let t=d2Env.isMobile?"desktop":"mobile";ui(ku,t,-1)}window.location.reload()}})};G();var pL=".u-line-clamp,.u-line-clamp-2,.u-line-clamp-3",fL=i=>{let t=getComputedStyle(i);i.style.maxHeight=`${(parseFloat(t.getPropertyValue("line-height"))||1)*parseInt(t.getPropertyValue("--clamp-lines"),10)}px`},gL=()=>{CSS.supports("-webkit-line-clamp","2")||(U(pL,fL,!0),document.querySelectorAll(pL).forEach(i=>fL(i)))};F();B();Gi();var SP="menu",MP=i=>{let t=i.node(),e=t.nextElementSibling;if(!e)return;let n=Q("a",e).map(r=>{let a=r.cloneNode(!0);return a.classList.add("x-menu"),{html:a.outerHTML}}),s=lt("header",e),o=s&&s.textContent?s.textContent:void 0;new ae(t,n,o)},vL=()=>{w.registerHandlers(SP,{show:MP})};var EL=i=>{let t=Math.floor(Math.random()*6+1);i.style.backgroundImage=`url(/assets/images/pagebg/${t<10?`0${t}`:t}.png)`};X();Ne();var RP={google:"https://www.google.com/recaptcha/api.js?onload=__captchaCallback&render=explicit&hl=ru",yandex:"https://captcha-api.yandex.ru/captcha.js?render=onload&onload=__captchaCallback"},bL=!1,yL=!1,IP=i=>{let t=document.createElement("script");t.async=!0,t.src=RP[i],document.body.appendChild(t)},_L=(i,t)=>{let e=t==="yandex",n=!1,{form:s}=i,o=document.createElement("div");i.parentElement.after(o);let r=e?smartCaptcha.render(o,{sitekey:d2Env.smartCaptchaSiteKey,hl:"ru",invisible:!0,callback:()=>{n=!0,i.click()}}):grecaptcha.render(o,{sitekey:d2Env.recaptchaSiteKey,badge:"inline",size:"invisible",callback:()=>{n=!0,i.click()}});s.addEventListener("submit",a=>{Qe(s)&&!n&&(a.preventDefault(),(e?smartCaptcha:grecaptcha).execute(r)),n=!1})},TL=(i,t)=>{let e=i.dataset.type||"google";if(window.__captchaCallback=()=>{Co(t).forEach(s=>{_L(s,e)}),yL=!0},!!d2Env.recaptchaSiteKey){if(!bL){bL=!0,IP(e);return}yL&&_L(i,e)}};var wL=(i,t)=>{if(!/^#[^ ]+$/.test(i))return!1;let e=document.getElementById(i.slice(1));return e&&(e.scrollIntoView(),t&&window.history.pushState(null,document.title,window.location.pathname+i)),!!e},LL=()=>{wL(window.location.hash)},xL=()=>{CSS.supports("scroll-margin-top","0")||(window.addEventListener("hashchange",LL),document.documentElement.addEventListener("click",i=>{let t=i.target;t.nodeName==="A"&&wL(t.href,!0)&&i.preventDefault()}),LL())};B();G();Gt();var Zr=class extends H{parsedInit(){this.element.options[this.element.options.length-1].value===""&&(this.hiddenOptions=Q("[data-hidden]",this.element).map(e=>({option:e,prev:e.previousSibling})),this.hiddenOptions.forEach(e=>{e.option.remove()}),this.lastSelectedValue=this.element.value)}connected(){this.element.addEventListener("change",this)}disconnected(){this.element.removeEventListener("change",this)}handleEvent(){this.disconnected(),this.element.selectedIndex===this.element.options.length-1?(this.hiddenOptions.forEach(t=>{t.prev&&t.prev.after(t.option)}),this.element.options[this.element.options.length-1].remove(),this.element.value=this.lastSelectedValue,Ct(this.element)):(this.lastSelectedValue=this.element.value,Ct(this.element),this.connected())}};F();X();var CL=(i,t,e=626,n=436)=>{let s=window.screen.width-e>>1,o=window.screen.height-n>>1;window.open(i,t,`left=${s},top=${o},width=${e},height=${n}`)};pe();Zt();Wi();dt();pn();var AL="Добавьте пару слов от себя",Du="Поделиться";W();mn();me();var HP="share-drive",SL="/_api/share",kP=i=>L`
<form action=${SL} data-role="form">
  <div class="y-form-item o-t">
    <textarea class="y-textarea y-textarea--single u-100" type="text" name="comment" data-autofocus
      placeholder="${AL}" data-role="taflexible" maxlength="128"></textarea>
  </div>
  <div class="c-share-card">
    ${Qt(i)}
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l u-100" type="submit">${Du}</button>
  </div>
</form>
`,ML=(i,t)=>_(void 0,null,function*(){let[,e]=yield Fe(()=>Dt(SL,HP,{anchorEl:i,silent:!0,throwError:!0,body:{token:t}}));return e?new Promise(n=>{let s=new _t({anchor:i,title:Du,className:"c-modal__content--share"});q(kP(e),s.element),s.addEventListener("submit",o=>{let{detail:r}=o;n(r)}),s.setFormDataTransformer(o=>({token:t,comment:o.comment.value})),s.show()}):!1});var IL="share",DP={vk:"https://vk.com/share.php?url={url}",fb:"https://www.facebook.com/sharer/sharer.php?u={url}",ok:"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",telegram:"https://t.me/share/url?url={url}",telegramapp:"tg://msg?url={url}&text={title}",whatsapp:"whatsapp://send?text={title}+{url}",viber:"viber://forward?text={title}+{url}"},OL={cjr:"logbook",ubr:"blog",gbr:"blog_community",us:"snap",c:"car"},NP=(i,t,e,n)=>_(void 0,null,function*(){let s=DP[t==="telegram"&&d2Env.isMobile?"telegramapp":t].replace("{url}",encodeURIComponent(n)).replace("{title}",encodeURIComponent(document.title));d2Env.isApp?window.location.href=s:CL(s,"d2share");let o=OL[e]||e||"";bt(`${i==="self"?"self":""}share_${t}`,{from:o})}),RL=i=>{let t=i.actionName(),e=i.node(),{type:n,url:s}=vt(e,IL,"root").dataset;NP(t,e.dataset.target,n,s)},PP=i=>_(void 0,null,function*(){let t=i.node();if(Se(t))return;let e=yield ML(t,t.dataset.token);if(e){t.classList.add("is-active");let n=t.querySelector("div:last-child");n&&(n.innerHTML=e.counterHtml||""),zi(t),t.dataset.tt&&delete t.dataset.tt;let s=t.dataset.type,o=OL[s]||s||"";bt("share_drive",{from:o})}}),HL=()=>{w.registerHandlers(IL,{share:RL,self:RL,repost:PP})};var kL="Подписаться?",DL="Подписаться на бывшую машину?",NL="Вы действительно хотите отписаться?",wn="Подписаться",Nu="Отписаться",Rc="Читаю",PL="{num, plural, one {читает} other {читают}}",$L="подписчик{num, plural, one {} many {ов} other {а}}",FL="{num, plural, one {подписчик} many {подписчиков} other {подписчика}}<br>на блог",BL="Владелец указал, что это бывшая машина. Её бортжурнал больше не будет обновляться",UL="Пользователи воспринимают уведомления от компаний как спам. Чтобы о вас не думали плохо, мы отключили уведомления о подписке. Пользователь не узнает, что вы подписались";be();W();pe();pt();Wi();B();Z();var $P=400,Qs=(i,t)=>{let e=["fx-zoomout","c-button","c-button--primary",t||"c-button--red"];["c-button--s","c-button--l"].forEach(r=>{i.classList.contains(r)&&e.push(r)});let s=Di(i),o=P("div",{className:e.join(" "),style:`top:${s.top}px;left:${s.left}px;width:${i.offsetWidth}px;height:${i.offsetHeight}px`});document.body.appendChild(o),setTimeout(()=>{o.remove()},$P)};var Ic="subscribe-button",FP="/ajax/subscription",$u=class extends HTMLButtonElement{constructor(){super(),this.setAttribute("is",Ic),requestAnimationFrame(()=>this.syncState(this.getAttribute("no-sync")===""))}static get observedAttributes(){return["subscribed"]}get subscribed(){return this.hasAttribute("subscribed")}set subscribed(t){t?this.setAttribute("subscribed",""):this.removeAttribute("subscribed")}get company(){return this.hasAttribute("company")}get uid(){return this.getAttribute("uid")||""}get kind(){return this.getAttribute("kind")}get confirm(){return this.getAttribute("confirm")}connectedCallback(){["click","mouseenter","mouseleave"].forEach(t=>this.addEventListener(t,this))}disconnectedCallback(){["click","mouseenter","mouseleave"].forEach(t=>this.removeEventListener(t,this))}attributeChangedCallback(){requestAnimationFrame(()=>this.update())}handleEvent(t){t.type==="mouseenter"?this.hover():t.type==="mouseleave"?this.update():t.type==="click"&&!Se(this)&&this.subscribe()}subscribe(){return _(this,null,function*(){if(yield(this.subscribed?ot(NL,void 0,this,Nu):this.confirm==="company"?ot(kL,UL,this,wn):this.confirm==="former"?ot(DL,BL,this,wn):Promise.resolve(!0)).then(o=>!o))return;let{types:e}=yield R(FP,Ic,{method:"POST",body:{_:this.subscribed?"unsubscribe":"subscribe",type:this.kind,id:this.uid},anchorEl:this});this.subscribed||Qs(this),e.forEach(o=>this.updateNum(o));let n=this.classList.contains("js-promofeedsubs"),s=(this.company&&this.kind==="user"?"company":this.kind)+(n?"_feedpromopost":"");bt(`${this.subscribed?"unfollow":"follow"}_${s||""}`),this.dataset.at&&!this.subscribed&&bt(this.dataset.at),this.subscribed=!this.subscribed,this.syncState()})}update(){this.classList.remove("is-hover"),this.textContent=this.subscribed?Rc:wn}hover(){this.subscribed&&(this.classList.add("is-hover"),this.textContent=Nu)}updateNum(t){let e=document.getElementById(`${t}-followers`);if(e){let n=Number(e.textContent);if(n>=0){n+=this.subscribed?-1:1,e.textContent=String(n);let s=document.getElementById(`${t}-followers-legend`);if(s){let r=s.dataset.type==="company"?FL:t==="user"?$L:PL;s.innerHTML=tt(r,{num:n})}}}}syncState(t){Ps(this,`[is="${Ic}"][uid="${this.uid}"][kind="${this.kind}"]`,["subscribed"],t)}},jL=()=>{customElements.define(Ic,$u,{extends:"button"})};F();W();var BP="/ajax/subscription",UP=i=>_(void 0,null,function*(){let t=i.node(),{html:e}=yield R(BP,"subscribe-more",{anchorEl:t,body:{_:"get",type:t.dataset.type,key:t.dataset.key,id:t.dataset.id}});e&&(t.insertAdjacentHTML("beforebegin",e),t.remove())}),zL=()=>{w.registerHandlers("subscribe",{more:UP})};F();B();var WL=()=>{w.registerHandlers("u",{focus:i=>{let t=i.node(),e=t.dataset.target&&lt(t.dataset.target);if(e)try{e.focus()}catch(n){}}})};F();B();var jP=i=>{let t=i.node(),{url:e,provider:n}=t.dataset;if(e){if(d2Env.extvideo||d2Env.extYoutube&&n==="YouTube"){window.location.href=`drive://video?url=${encodeURIComponent(e)}`;return}t.replaceWith(P("div","c-media",P("iframe",{src:`${e}&autoplay=1`,allowfullscreen:""})))}},qL=()=>{w.registerHandlers("video",{play:jP})};var VL=i=>{(d2Env.extvideo||d2Env.extYoutube&&i.dataset.provider==="YouTube")&&(i.style.pointerEvents="none",i.parentElement.addEventListener("click",()=>{let t=i.src;window.location.href=`drive://video?url=${encodeURIComponent(t)}`}))};W();Po();dt();bl();B();mn();dt();ii();Wt();tr();pn();var GL="{Count, plural, one {# участник} many {# участников} other {# участника}}",JL="создано",Fu="Сообщение",YL="{IsUserSubscribed, select, true {{IsMale, select, true {Подписан} other {Подписана}} на вас{FollowingAllCars, select, true { и все ваши машины} other {{FollowingCarsCount, plural, =0 {} one { и {Cars}} other {, {Cars}}}}}} other {{FollowingAllCars, select, true {{IsMale, select, true {Подписан} other {Подписана}} на все ваши машины} other {{FollowingCarsCount, plural, =0 {} other {{IsMale, select, true {Подписан} other {Подписана}} на {Cars}}}}}}}",KL="все ваши машины.",Oc=" и ",ZL="{Age, plural, one {# год} many {# лет} other {# года}}",XL="У меня нет машины",Hc="{Now, select, true {Я езжу на} other {Я {IsMale, select, true {ездил} other {ездила}} на}}",QL="до этого —",tw='<a class="c-link c-link--text" href="{Url}" data-tt="{CarsTitle}">ещё {CarsCount} {CarsCount, plural, one {машине} many {машинах} other {машинах}}</a>',ew='<a class="c-link c-link--text" href="{Url}" data-tt="{CarsTitle}">{CarsCount} {CarsCount, plural, one {машина} many {машин} other {машины}}</a>',iw="Я могу помочь",nw="Производитель",sw="Артикул",ow="Фотографии",rw="Упоминания в блогах",aw="Все запчасти с этим артикулом";be();le();Be();var Xr=i=>({images:[i],color:i.htmlPrimaryColor,inline:i.inlineImage}),Uu=(i,t,e,n=!1)=>L`
<button class=${Nt({"c-button":!0,"c-button--primary":!0,"c-button--s":n,"is-small":n})} is="subscribe-button" ?subscribed=${e} kind=${i} uid=${t}>
  ${e?Rc:wn}
</button>
`,dw=i=>L`
<a class="c-link c-link--color${String(i.nicknameColor||0).padStart(2,"0")} c-username c-username--wrap"
 href=${i.url}><span>${i.nickname}</span></a>
`,mw=i=>L`
<div class=${Nt({"c-user__status":!0,"is-online":i.isOnline})}>
  ${i.lastVisit}
</div>
`,WP=i=>{if(i.followsAllCars&&i.followedCars.length>1)return KL;let t=i.followedCars,e=s=>`<a class="c-car-title c-link c-link--secondary" href="${s.url}"> ${Pt(t.length>=5?s.caption:s.fullCaption)}</a>`,n=t.slice(0,t.length>1?-1:1).map(s=>e(s)).join(", ");return t.length>1&&(n+=Oc+e(t[t.length-1])),n},hw=(i,t)=>t?L`<div class="c-user-subscribed">${Qt(tt(YL,{IsMale:i,IsUserSubscribed:t.followsMe,FollowingCarsCount:t.followedCars.length,FollowingAllCars:t.followsAllCars&&t.followedCars.length>1,Cars:WP(t)}))}</div>`:$,qP=i=>Qt(i.html),VP=i=>L`
<div class="c-hover-card c-car-card-sa c-darkening-hover-container c-car-card-sa--no-shadow">
  <a class="u-link-area" href=${i.url}></a>
  <div class="c-car-card-sa__pic">
    ${de(Xr(i.photo),void 0,{className:"has-darkening-hover c-car-card-sa__img"})}
    ${i.isFollowable?L`<div class="c-car-card-sa__misc">
        <div class="c-car-card-sa__subscribe">${Uu("car",i.id,i.isFollowed,!0)}</div>
      </div>`:$}
  </div>
  <div class="c-car-card-sa__caption">
    <a class="c-car-title c-link ${i.belongState==="WasMy"?"c-link--secondary":"c-link--text"}" href=${i.owner.url}>
      ${i.caption}
    </a>
  </div>
  <div class="c-car-card-sa__info">
    <div class="c-car-card-sa__owner">${dw(i.owner)}</div>
    ${i.owner.location?L`<div class="c-car-card-sa__location">${i.owner.location.name}</div>`:$}
    <div class="c-car-card-sa__drive" style=${Le({borderColor:i.driveBackgroundColor})}>${i.driveLevel}</div>
    <div class="c-car-card-sa__logbook">${i.journalRecordCount}</div>
  </div>
</div>
`,uw=i=>Pt(i.map(t=>`<a class="c-car-title c-link c-link--current" href=${t.url}> ${Pt(t.fullCaption)}</a>`).join("<br>")),lw=(i,t)=>`<a class="c-car-title c-link c-link--text" href=${i.url}> ${Pt(t?i.caption:i.fullCaption)}</a>`,cw=(i,t=!0,e)=>{let{length:n}=i;if(n===0)return"";let s=i.slice(0,t?-1:void 0).map(o=>lw(o,e)).join(", ");return t&&(n>1&&(s+=Oc),s+=lw(i[n-1],e)),s},Bu=(i,t,e,n,s)=>{let{length:o}=i;if(o>t){let r=cw(i.slice(0,e),!1,s);return e>0&&(r+=Oc+tt(tw,{Url:n,CarsCount:o-e,CarsTitle:uw(i.slice(e))})),r}return cw(i,!0,s)},GP=(i,t,e,n)=>{if(!e)return n?`${tt(Hc,{Now:!0,IsMale:i})} ${n}`:XL;let s=5,o=3,r=e.filter(h=>h.belongState==="My"),a=e.filter(h=>h.belongState==="WasMy"),l=r!=null&&r.length>0,c=a!=null&&a.length>0,d="";return l&&(d+=`${tt(Hc,{Now:!0,IsMale:i})} ${Bu(r,s,o,`${t}#currentcars`)}`),c&&(l?(d+=` (${QL} `,e.length>s&&a.length>1?d+=tt(ew,{Url:`${t}#formercars`,CarsCount:a.length,CarsTitle:uw(a)}):d+=Bu(a,s,o,`${t}#formercars`,!0),d+=")"):d+=`${tt(Hc,{Now:!1,IsMale:i})} ${Bu(a,s,o,`${t}#formercars`)}`),d},JP=i=>L`
<div class="c-user c-user--hovercard">
  <div class="c-user__card">
    <div class="c-user__avatar">
      <a href=${i.url}>
        ${de(Xr(i.avatar),void 0,{className:"is-round has-darkening-hover u-vignette"})}
      </a>
    </div>
    <div class="c-user__info x-secondary u-break-word">
      <div class="c-user__username">${dw(i)}</div>
      ${i.fullName||i.age?L`<div>${i.fullName}${i.fullName&&i.age?`, ${tt(ZL,{Age:i.age})}`:""}</div>`:$}
      <div>
        ${Qt(i.proAccount?`${iw} ${i.proAccount.skills}`:GP(i.gender==="XY",i.url,i.cars,i.generation))}
      </div>
      ${i.location?L`<div class="x-secondary-color"><span data-tt=${i.location.fullName}>${i.location.name}</span></div>`:$}
      ${mw(i)}
    </div>
    ${hw(i.gender==="XY",i.subscriptions)}
    <div class="o-group">
      ${i.isFollowable?Uu("user",i.id,i.isFollowed):$}
      ${i.messengerLink?L`<a class="c-button c-button--primary" data-action="msgr.show" href=${i.messengerLink}>
          ${Fu}
        </a>`:$}
    </div>
  </div>
</div>
`,YP=i=>L`
<div class="c-user c-user--hovercard">
  <div class="c-user__card">
    <div class="c-user__avatar">
      <a href=${i.url}>
        ${de(Xr(i.avatar),void 0,{className:"is-rounded has-darkening-hover u-vignette"})}
      </a>
    </div>
    <div class="c-user__info x-secondary u-break-word">
      <div class="c-user__username">
        <a class="c-link c-link--color00 c-username c-username--wrap" href=${i.url}><span>${i.caption}</span></a>
      </div>
      <div>${i.subtitle}</div>
      ${i.location?L`<div class="c-user__address"><span data-tt=${i.location.fullName}>${i.location.name}</span></div>`:$}
      ${mw(i)}
    </div>
    ${hw(!1,i.subscriptions)}
    <div class="o-group">
      ${i.isFollowable?Uu("user",i.id,i.isFollowed):$}
      ${i.messengerLink?L`<a class="c-button c-button--primary" data-action="msgr.show" href=${i.messengerLink}>
          ${Fu}
        </a>`:$}
    </div>
  </div>
</div>`,KP=i=>L`
<div class="c-comm-card">
  <div class="c-comm-card__pic">
    <a href=${i.url}>
      ${de(Xr(i.avatar),void 0,{className:"is-round has-darkening-hover u-vignette"})}
    </a>
  </div>
  <div class="c-comm-card__body">
    <div class="c-comm-card__title u-break-word"><a class="c-link c-link--text" href=${i.url}>
      ${i.caption}</a>
    </div>
    ${i.memberCount?L`<div class="c-comm-card__members">${tt(GL,{Count:i.memberCount})}</div>`:$}
    <div class="c-comm-card__date">
      ${JL} ${i.createdOn}
    </div>
  </div>
</div>
`,ZP=i=>L`
<div class="c-hover-card c-post-card c-post-card--hover-card">
  <div class="c-post-card__pic-container">
    <a href=${i.url}>
      ${de(Xr(i.kind==="Post"&&i.mediaPreview?{url:i.mediaPreview,width:1,height:1}:i.photo),2,{size:{width:16,height:9},className:"has-darkening-hover u-vignette"})}
    </a>
  </div>
  <div class="c-post-card__body">
    <div class="c-post-card__caption">
      <a class="c-link c-link--text" href=${i.url}>${_e(i.title||"")}</a>
    </div>
    ${i.kind==="Post"&&i.subtitle?L`<div class="c-post-card__category u-break-word">${i.subtitle}</div>`:$}
    ${i.kind==="Snap"?L`<div class="c-post-card__category u-break-word">
        <a class="c-link c-link--text" href=${i.album.url}>${i.album.title}</a>
      </div>`:$}
    <div class="c-post-card__info">
      <span class="c-icon-counter">
        <span class="m-icon c-icon c-icon--s c-icon--secondary i-like-s"></span> ${i.likeCount}
      </span>
      ${i.commentCount!==void 0?L`<a class="c-post-card__comments c-icon-counter" href="${i.url}#comments">
          <span class="m-icon c-icon c-icon--s c-icon--secondary i-comments-s"></span> ${i.commentCount}
        </a>`:$}
      <a class="c-post-card__date c-link c-link--secondary" href=${i.url}>${i.timestamp}</a>
    </div>
  </div>
</div>
`,XP=i=>L`
<a class="c-part-card x-secondary" href=${i.url} data-ym-target="parts_from_hover">
  <h2 class="x-header x-header--m u-break-word">${i.caption}</h2>
  <table class="o-b-s">
    <tr>
      <th>${nw}</th>
      <td>${i.manufacturer}</td>
    </tr>
    <tr>
      <th>${sw}</th>
      <td>${i.code}</td>
    </tr>
  </table>
  <div class="o-group">
    <div><b>${ow}</b> <span class="c-counter">${i.photoCount}</span></div>
    <div><b>${rw}</b> <span class="c-counter">${i.postCount}</span></div>
  </div>
</a>
`,QP=i=>L`
<div class="c-part-code-card">
  ${ct(i.parts,t=>t.code,t=>L`
    <div class="x-form__item">
      <a class="x-form__body has-hover c-link c-link--current" href=${t.url} data-ym-target="parts_from_hover">
        <div class="x-form__text">
          <div class="u-text-overflow"><b>${t.caption}</b></div>
          <div class="o-group x-secondary">
            <div>${t.code}</div>
            <div class="x-secondary-color">${t.manufacturer}</div>
          </div>
        </div>
      </a>
    </div>
  `)}
  <a class="x-box-more" href=${i.url} data-ym-target="parts_from_hover">
    ${aw}
  </a>
</div>
`,pw=i=>{switch(i.kind){case"Html":return qP(i);case"Car":return VP(i);case"User":return JP(i);case"Business":return YP(i);case"Community":return KP(i);case"Post":case"Snap":return ZP(i);case"CarPart":return XP(i);case"CarPartCode":return QP(i);default:return $}};var t1=400,e1=100,Qr=document.documentElement,fw=(i,t,e)=>i.left<=t&&i.right>=t&&i.top<=e&&i.bottom>=e,i1=(i,t,e)=>{let n=t<i.left?t-i.left:t>i.right?t-i.right:0,s=e<i.top?e-i.top:e>i.bottom?e-i.bottom:0;return Math.sqrt(n*n+s*s)},ms=class{constructor(t,e,n={}){this.anchorSelector=t;this.getContent=e;this.config=n;this.distance=1/0;this.isTriggered=!1;this.handleTriggerMouseOver=this.handleTriggerMouseOver.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),Qr.addEventListener("mouseover",this.handleTriggerMouseOver)}handleTriggerMouseOver(t){if(!t.target)return;let e=t.target.closest(this.anchorSelector);e&&this.triggerForElement(e)}triggerForElement(t){if(t===this.anchor){this.clearHideTimer();return}this.content=void 0,this.clearShowTimer(),this.startShowTimer(t)}show(){if(this.clearShowTimer(),!this.content)return;this.floatingCleanup&&(this.floatingCleanup(),delete this.floatingCleanup),this.element&&this.element.remove();let t=P("div","c-bubble__arrow"),e=P("div",{className:"c-bubble__content"});q(pw(this.content),e);let n=P("div",`c-bubble__body${this.config.isDark?" ctx-dark":""}`);n.append(e,t),this.element=P("div","c-bubble"),this.config.classNames&&this.element.classList.add(...this.config.classNames);let s=this.anchor&&this.anchor.closest("[data-float-container]")||document.body;this.element.style.zIndex=String(sn(s)+1),this.element.appendChild(n),s.appendChild(this.element),this.attachMouseEvents(this.element),this.startCursorTracking(),this.floatingCleanup=ln(this.anchor,this.element,()=>{cn(this.anchor,this.element,{placement:this.config.placement||"top",middleware:[$n(9),El({padding:{top:d2Env.isApp?Is?56:0:50,bottom:d2Env.isApp?56:0}}),Ng({element:t,padding:6})]}).then(({x:o,y:r,middlewareData:a,placement:l})=>{if(Object.assign(this.element.style,{left:`${o}px`,top:`${r}px`}),a.arrow){let c=l.split("-")[0],d={top:"bottom",right:"left",bottom:"top",left:"right"}[c],{x:h,y:p}=a.arrow;Object.assign(t.style,{left:h!=null?`${h}px`:"",top:p!=null?`${p}px`:"",[d]:`${-t.offsetWidth/2}px`})}})}),this.anchorObserver=new MutationObserver(()=>{(!this.anchor||!Qr.contains(this.anchor))&&(this.anchorObserver.disconnect(),this.hide())}),this.anchorObserver.observe(this.anchor.parentElement,{childList:!0})}hide(){this.clearHideTimer(),this.anchorObserver&&this.anchorObserver.disconnect(),this.content=void 0,this.floatingCleanup&&(this.floatingCleanup(),delete this.floatingCleanup),this.element&&(this.detachMouseEvents(this.element),this.element.remove(),this.element=void 0),this.stopCursorTracking(),this.anchor&&(this.detachMouseEvents(this.anchor),this.anchor=void 0)}attachMouseEvents(t){t.addEventListener("mouseenter",this.handleMouseEnter),t.addEventListener("mouseleave",this.handleMouseLeave)}detachMouseEvents(t){t.removeEventListener("mouseenter",this.handleMouseEnter),t.removeEventListener("mouseleave",this.handleMouseLeave)}startCursorTracking(){this.config.cursorTracking&&Qr.addEventListener("mousemove",this.handleMouseMove)}stopCursorTracking(){this.config.cursorTracking&&Qr.removeEventListener("mousemove",this.handleMouseMove)}handleMouseEnter(){this.clearHideTimer()}handleMouseLeave(){this.startHideTimer()}handleMouseMove(t){let{clientX:e,clientY:n}=t,s=this.element.getBoundingClientRect(),o=this.anchor.getBoundingClientRect(),r=i1(s,e,n);fw(o,e,n)||fw(s,e,n)||r<=this.distance?this.clearHideTimer():(this.stopCursorTracking(),this.startHideTimer()),this.distance=r}startShowTimer(t){return _(this,null,function*(){if(this.showTimer)return;this.isTriggered=!0,this.anchor=t,this.attachMouseEvents(this.anchor),this.showTimer=setTimeout(this.show.bind(this),this.config.showDelay||t1);let[,e]=yield Fe(()=>this.getContent(t));e&&e.kind?this.isTriggered&&this.anchor===t&&(this.content=e,this.showTimer===void 0&&this.show()):this.clearShowTimer()})}clearShowTimer(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)}startHideTimer(){this.isTriggered=!1,this.clearShowTimer(),this.clearHideTimer(),this.hideTimer=setTimeout(this.hide.bind(this),this.config.hideDelay||e1)}clearHideTimer(){this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=void 0)}dispose(){Qr.removeEventListener("mouseover",this.handleTriggerMouseOver)}};Fi();var n1="ihc",s1=200,gw,o1=i=>R(`/_api/hovercards/${i.dataset.ihcToken}${d2Env.userId?`?tail=${d2Env.userId}`:""}`,n1,{silent:!0,throwError:!0}),r1=i=>{let t=i.target;t.hasAttribute("data-ihc-token")&&i.pointerType==="touch"&&gw!==t&&(i.preventDefault(),gw=t)},vw=()=>{Ug(new ms("[data-tt]",i=>Promise.resolve({kind:"Html",html:i.dataset.tt||""}),{classNames:["c-bubble--tt"],isDark:!0})),jg(new ms("[data-ihc-token]",o1,{classNames:["c-bubble--ihc"],placement:"top-start",showDelay:s1,cursorTracking:!0})),document.body.addEventListener("click",r1)};F();X();Z();var kc="filter",Ew=i=>{let t=C(kc,"root");t&&t.classList.toggle("is-filtered",i);let e=C(kc,"full");e&&(e.checked=!i),ut(kc,"when-filtered").forEach(s=>A(s,i))},bw=()=>{w.registerHandlers(kc,{filtered:()=>Ew(!0),full:()=>Ew(!1)})};W();ts();var a1="/_api/index/more",l1="0",yw=(i,t)=>{let e=["like-button","bookmark-button","subscribe-button"],n=i.querySelectorAll(e.map(s=>`[is="${s}"]`).join(","));for(let s of n)s.toggleAttribute("no-sync",t)},_w=i=>{let t=i.dataset.next;if(!t)return;let e=[],n,s=()=>{let a=document.createElement("div");for(i.appendChild(a);i.firstChild!==a;)a.appendChild(i.firstChild);e.push({wrapper:a}),n=new IntersectionObserver(l=>{l.forEach(c=>{let d=c.target,h=e.find(p=>p.wrapper===d);c.isIntersecting?d.children.length===0&&(d.innerHTML=h.content||"",requestAnimationFrame(()=>yw(d,!1)),d.removeAttribute("style")):(yw(d,!0),h.content=d.innerHTML,d.style.height=`${d.getBoundingClientRect().height}px`,d.textContent="")})},{rootMargin:"800px 0px"}),n.observe(a)},o=a=>{let l=document.createElement("div");i.appendChild(l),l.innerHTML=a,e.push({wrapper:l}),n.observe(l)},r=()=>{if(!t){ye().removeEventListener("scroll",r);return}R(a1,"feed",{body:{filter:i.dataset.filter||"",direction:l1,token:t}}).then(a=>{n||s();let l=a.html.trim();l!==""&&o(l),t=a.forward,l===""&&r()})};ye().addEventListener("scroll",r)};G();var ta=class extends H{constructor(){super(...arguments);this.current=0}parsedInit(){let e=this.slot("tips",document.body);e&&(this.tips=JSON.parse(e.innerHTML).map(n=>n.text.charAt(0).toUpperCase()+n.text.substring(1)),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this),this.start())}handleEvent(e){clearInterval(this.tm),e.type==="focus"&&(clearInterval(this.tm),this.element.placeholder="",this.element.style.direction="",this.element.classList.remove("is-tip-active")),e.type==="blur"&&!this.element.value&&(this.element.placeholder="",this.start())}start(){this.tips[this.current]||(this.current=0);let e=this.tips[this.current];this.current+=1;let n=0;this.element.classList.add("is-tip-active"),this.delta||(this.delta=this.element.clientWidth-this.element.scrollWidth),this.tm=setInterval(()=>{let s=e.substring(0,n);this.element.placeholder=s,this.element.value=s,this.element.style.direction=this.element.scrollWidth+this.delta>this.element.clientWidth?"rtl":"",this.element.value="",n+=1,n>e.length&&(clearInterval(this.tm),this.tm=setTimeout(()=>this.start(),500))},100)}};var xw=kn(ur(),1);B();G();Dc();Z();ds();ni();var Lw="user_preferences_mainnav",c1=30*12,d1="is-fit",m1="is-at-top",h1="is-at-bottom",Wu="is-active",ww="no-transition",ea=class extends H{parsedInit(){this.scrollable=this.slot("container"),this.sections=this.slots("section"),al()||this.scrollable.classList.add("c-nav-container--full-height"),this.applyPreferences(),this.checkFit(),this.checkScroll(),to().addEventListener("resize",()=>this.checkFit),this.scrollable.addEventListener("scroll",(0,xw.throttle)(this.checkScroll).bind(this),{passive:!0}),this.sections.forEach(t=>{let e=this.slot("list",t);if(this.slot("header",t)){let s=wt(e);s.enableInterruption=!1,s.addEventListener("end",()=>this.checkFit()),s.addEventListener("start",()=>{t.classList.toggle(Wu),this.savePreferences()})}})}applyPreferences(){let t=cs(Lw);t&&(this.closeClosableSections(),t.split(",").forEach(e=>{let n=lt(`[data-id=section-${e}]`,this.element),s=n&&this.closestSlot(n,"section");s&&this.openSection(s,!0)}))}checkFit(){this.element.classList.toggle(d1,this.scrollable.scrollHeight<=this.element.offsetHeight)}checkScroll(){let{scrollTop:t,scrollHeight:e,offsetHeight:n}=this.scrollable;this.element.classList.toggle(m1,t<=0),this.element.classList.toggle(h1,Math.round(t)>=e-n)}getListElement(t){return this.slot("list",t)}savePreferences(){let t=this.sections.filter(e=>e.classList.contains(Wu)).map(e=>this.getListElement(e)).map(e=>(e.dataset.id||"").replace(/\D/g,""));ui(Lw,t.toString(),c1)}closeClosableSections(){this.sections.filter(t=>this.slot("header",t)).forEach(t=>{this.openSection(t,!1),t.classList.add(ww),setTimeout(()=>t.classList.remove(ww),0)})}openSection(t,e){t.classList.toggle(Wu,e);let n=this.slot("list",t);n&&A(n,e)}};F();var Cw="Комментарии",Aw="Уведомления",Sw="Все комментарии",Mw="Все уведомления";B();X();var eo=class extends EventTarget{constructor(e,n=!1,s){super();this.element=e;this.hideOnEscape=n;this.elements=s;this.eventTypes=["mousedown","touchstart"];this.hideOnEscape&&this.eventTypes.push("keydown"),this.eventTypes.forEach(o=>this.element.ownerDocument.addEventListener(o,this,!0))}handleEvent(e){if(e.type==="keydown"){e.keyCode===27&&(e.stopPropagation(),this.dispatchOutsideEvent());return}let n=e.target,s=this.elements&&this.elements.some(o=>o.contains(n));!this.element.contains(n)&&!s&&this.dispatchOutsideEvent()}dispatchOutsideEvent(){this.dispatchEvent(new CustomEvent("outside")),this.dispose()}dispose(){this.eventTypes.forEach(e=>this.element.ownerDocument.removeEventListener(e,this,!0))}};var io=class extends EventTarget{constructor(e){super();this.element=e;this.backwardTabWrapInProgress=!1;this.element.tabIndex=0,this.element.classList.add("no-scroll-margin"),this.catcher=document.createElement("div"),this.catcher.classList.add("no-scroll-margin"),this.catcher.style.position="fixed",this.catcher.tabIndex=0,this.element.after(this.catcher),document.documentElement.addEventListener("focus",this,!0),document.addEventListener("keydown",this),this.element.focus({preventScroll:!0})}dispose(){document.documentElement.removeEventListener("focus",this,!0),document.removeEventListener("keydown",this),this.catcher.remove(),this.element.tabIndex=0}handleEvent(e){e.type==="focus"?this.backwardTabWrapInProgress?this.resetBackwardTabWrap():e.target===this.catcher&&setTimeout(()=>{try{this.element.focus()}catch(n){}}):e.type==="keydown"&&e.keyCode===9&&e.shiftKey&&e.target===this.element&&this.setupBackwardTabWrap()}setupBackwardTabWrap(){this.backwardTabWrapInProgress=!0;try{this.catcher.focus()}catch(e){}setTimeout(()=>this.resetBackwardTabWrap())}resetBackwardTabWrap(){this.backwardTabWrapInProgress=!1}};W();Z();var Ow="notifications",Rw="is-active",Nc=!1,hs,Pc,qu,$c,p1=Array(16).fill('<div class="c-loading c-ntfy__mask"></div>').join(""),Iw=(i,t,e)=>`<div class="c-ntfy__col">
    <div class="c-ntfy__list">
      <h3 class="c-header c-ntfy__header">${i}</h3>
      <div class="c-ntfy__loading">${p1}</div>
    </div>
    <a class="c-ntfy__link" href="${t}">${e}</a>
  </div>`,f1=()=>`<div class="c-ntfy">
    ${Iw(Cw,"/my/comments/",Sw)}
    ${Iw(Aw,"/my/all-notifications/",Mw)}
  </div>`,g1=i=>{let t=i.node(),e=C(Ow,"container"),n=()=>{Pc=P("div","c-bubble__content"),hs=P("div",{className:"c-bubble c-bubble--ntfy ctx-reset","data-float-container":""},P("div","c-bubble__body",Pc)),e.prepend(hs)},s=()=>{Nc&&($c&&$c.dispose(),qu&&qu.dispose(),t.classList.remove(Rw),A(hs,!1),Nc=!1)};(()=>{hs||n(),Nc?s():(t.classList.add(Rw),Pc.innerHTML=f1(),A(hs,!0),Nc=!0,$c=new eo(hs,!0,[t]),$c.addEventListener("outside",()=>s(),{once:!0}),qu=new io(hs),R("/ajax/notifications.cshtml","notifications",{method:"POST",anchorEl:t,body:{_:"get"},throwError:!0}).then(r=>{document.body.dispatchEvent(new Event("reset-notifications"));let a=Pc.firstElementChild;a.insertAdjacentHTML("beforebegin",r.html),a.remove()}).catch(()=>{s()}))})()},Hw=()=>{w.registerHandlers(Ow,{toggle:g1})};F();W();var kw=()=>{w.registerHandlers("topsearch",{delete:i=>_(void 0,null,function*(){let t=i.node();yield Dt(t.dataset.url,"topsearch",{method:"DELETE",anchorEl:t}),t.parentElement.remove()})})};G();Z();var v1="is-active",ia=class extends H{init(){let t=!1,e,n,s=this.slot("dropdown",document.body),o=()=>{t=!t,this.element.classList.toggle(v1,t),A(s,t),t?(e=new eo(s,!0,[this.element]),e.addEventListener("outside",o,{once:!0}),n=new io(s)):e&&(e.dispose(),n.dispose())};this.element.addEventListener("click",o)}};B();G();var na=class extends H{parsedInit(){this.items=Q("a",this.element),this.items.forEach(n=>{n.addEventListener("click",this)});let t=this.slot("button");t&&t.addEventListener("click",()=>{this.element.toggleAttribute("data-open")}),new MutationObserver(()=>this.update()).observe(this.element,{attributeFilter:["data-open"]})}handleEvent(t){t.preventDefault();let e=t.currentTarget;this.items.forEach(n=>{n.classList.toggle("is-active",n===e)}),e.dataset.close===""&&this.element.removeAttribute("data-open"),setTimeout(()=>{window.location.href=e.href},0)}update(){let t=this.element.dataset.open==="";t&&(this.scrollTop=document.scrollingElement.scrollTop),document.documentElement.classList.toggle("g-nav-active",t),!t&&this.scrollTop!==void 0&&document.scrollingElement.scrollTo({top:this.scrollTop,behavior:"instant"})}};X();var Dw="_d2_br_",Vu="BroadcastChannel"in window,sa=class extends EventTarget{constructor(e){super();this.channel=e;this.storageHandler=this.storageHandler.bind(this),Vu?(this.bc=new BroadcastChannel(this.channel),this.bc.addEventListener("message",this)):window.addEventListener("storage",this.storageHandler)}close(){Vu?(this.bc.removeEventListener("message",this),this.bc.close()):window.removeEventListener("storage",this.storageHandler)}postMessage(e){Vu?this.bc.postMessage(e):window.localStorage.setItem(Dw+this.channel,JSON.stringify(e))}handleEvent(e){this.dispatchEvent(new CustomEvent("message",{detail:e.data}))}storageHandler(e){if(e.key===Dw+this.channel)try{this.dispatchEvent(new CustomEvent("message",{detail:JSON.parse(e.newValue)}))}catch(n){}}};var E1=5e3,Nw=1e4,Fc=class extends EventTarget{constructor(e){super();this.channel=e;this.isMaster=!1;this.lastHeartBeatValue="0";this.messageHandler=this.messageHandler.bind(this),this.heartBeatChannel=new sa(`heartbeat_${this.channel}`),this.messageChannel=new sa(`message_${this.channel}`),this.heartBeatChannel.addEventListener("message",this),this.messageChannel.addEventListener("message",this.messageHandler),this.watcherTm=setTimeout(()=>this.setMaster(!0),Nw+Math.random()*1e3)}close(){clearInterval(this.hearthBeatInterval),clearTimeout(this.watcherTm),this.heartBeatChannel.removeEventListener("message",this),this.messageChannel.removeEventListener("message",this.messageHandler),this.heartBeatChannel.close(),this.messageChannel.close()}postMessage(e={}){this.messageChannel.postMessage(e),this.dispatchEvent(new CustomEvent("message",{detail:e}))}handleEvent(){this.resetWatch(),this.setMaster(!1)}messageHandler(e){this.dispatchEvent(new CustomEvent("message",{detail:e.detail}))}setMaster(e){this.isMaster!==e&&(this.isMaster=e,e?this.startHeartBeat():clearInterval(this.hearthBeatInterval),this.dispatchEvent(new Event("master")))}resetWatch(){clearTimeout(this.watcherTm),this.watcherTm=setTimeout(()=>this.setMaster(!0),Nw)}heartBeat(){this.lastHeartBeatValue=this.lastHeartBeatValue==="1"?"0":"1",this.heartBeatChannel.postMessage(this.lastHeartBeatValue)}startHeartBeat(){this.heartBeat(),this.hearthBeatInterval=setInterval(()=>this.heartBeat(),E1)}};W();sr();var b1="polling",y1="/ajax/polling.cshtml",$w="messages-status",Fw="notifications-status",_1="feed-status",T1=60*1e3,Pw=new WeakMap,Gu,Ju=(i,t,e)=>{let n=je(i);if(!n)return;let s=parseInt(t||"0",10),o=C(i,"counter",n),r=n.dataset.kind==="side",a=i===Fw;if(o){let l=Pw.get(o);l&&clearTimeout(l),o.classList.remove("fx-fadeout")}if(o&&s===-1){let l=o.textContent,c=parseInt(l,10);t=c>0&&!/\+$/.test(l)?String(c-1):l,s=parseInt(t,10)}if(s>0){if(o||(o=document.createElement("span"),o.className=`c-notification-bubble ${r?"":"c-notification-bubble--top"} fx-bouncein`,tl(o,i,"counter"),r&&n.appendChild(document.createTextNode(" ")),n.appendChild(o)),a&&(Gu=Gu||o.textContent,t!==Gu)){let l=C(i,"icon",n);l.classList.remove("fx-delay","fx-swing"),setTimeout(()=>{l.classList.add("fx-swing")},1)}o.textContent=t}else if(o){o.classList.add("fx-fadeout");let l=setTimeout(()=>{o.remove()},900);Pw.set(o,l)}i===$w&&(n.href=e||"/my/messages/")},L1=i=>{let{m:t,l:e,n,f:s}=i.detail;document.body.dispatchEvent(new CustomEvent("update-unread-title",{detail:t})),t!==void 0&&Ju($w,t,e),n!==void 0&&Ju(Fw,n),s!==void 0&&Ju(_1,s)},Bw=()=>{if(!d2Env.userId)return;let i,t=new Fc(d2Env.userId),e=un(()=>{R(y1,b1,{method:"POST",body:{_:"update"},silent:!0,throwError:!0}).then(o=>t.postMessage(o)).catch(()=>{clearInterval(i),document.body.removeEventListener("force-update",n),t.removeEventListener("master",s),t.close()})},30),n=()=>{t.isMaster&&e()},s=()=>{t.isMaster?i=setInterval(e,T1):clearInterval(i)};document.body.addEventListener("force-update",n),document.body.addEventListener("update-unread",o=>t.postMessage({m:o.detail||"0"})),document.body.addEventListener("reset-notifications",()=>t.postMessage({n:"0"})),t.addEventListener("master",s),t.addEventListener("message",L1)};B();G();W();pe();ss();var oa=class extends H{init(){this.element.setAttribute("autocomplete","off");let t=this.closestSlot(this.element,"container"),e=new Re("/search/history",this.element,!1,!1,t);e.setAutoHilite(!1),e.setRowBuilder(this.rowRender.bind(this)),e.getRenderer().className="ac-renderer ac-renderer--search ctx-reset",e.getRenderer().setWidthProvider(this.element),this.element.addEventListener("focus",()=>{this.element.value===""&&e.update(!0)}),e.addEventListener("update",n=>{n.detail.row&&(bt("search_history_click"),this.element.form.submit())})}rowRender(t,e){return rt(O({},e),{render:n=>{let s=P("div","ac-close m-icon u-icon-hover i-close");s.addEventListener("click",o=>_(this,null,function*(){o.stopPropagation(),yield Dt(e.delete,this.role,{method:"DELETE",anchorEl:s}),n.remove()})),n.append(P("div",void 0,e.caption),s)},select(n){n.value=e.caption}})}};var Uw="{Count, plural, one {пользователю} other {пользователям}}<br> нравится",Bc="Нравится",jw="Не нравится";B();X();be();W();pe();Fi();Wi();B();Z();var x1=350,zw=i=>{let t=Di(i),e=P("div",{className:"m-icon c-icon i-like-filled fx-like-zoomout",style:`top:${t.top}px;left:${t.left}px;width:${i.offsetWidth}px;height:${i.offsetHeight}px`});document.body.appendChild(e),setTimeout(()=>{e.remove()},x1)};var Uc="like-button",C1="/_api/likes",A1={cjr:"logbook",ubr:"blog",gbr:"blog_community",cbr:"blog_company",c:"car",cmnt:"comment",ea:"editorial",o:"company"},Yu=class extends HTMLButtonElement{constructor(){super(),this.setAttribute("is",Uc),requestAnimationFrame(()=>this.syncState(this.getAttribute("no-sync")===""))}static get observedAttributes(){return["active","count","disabled"]}get active(){return this.hasAttribute("active")}set active(t){t?this.setAttribute("active",""):this.removeAttribute("active")}get count(){return this.getAttribute("count")||""}set count(t){this.setAttribute("count",String(t||""))}get uid(){return this.getAttribute("uid")||""}get kind(){return this.getAttribute("kind")}get key(){return this.getAttribute("key")||""}get legacy(){return this.hasAttribute("legacy")}get company(){return this.hasAttribute("company")}connectedCallback(){this.addEventListener("click",this),this.updateCounter(),this.update()}disconnectedCallback(){this.removeEventListener("click",this)}attributeChangedCallback(t){t==="count"?this.updateCounter():(t==="active"||t==="disabled")&&this.update()}handleEvent(t){t.type==="mouseenter"?this.hover():t.type==="mouseleave"?this.restore():t.type==="click"&&!Se(this)&&this.like()}like(){return _(this,null,function*(){let t=yield R(C1,Uc,{method:this.active?"DELETE":"POST",anchorEl:this,body:{token:this.key}});if(Ll(),this.disabled=!this.active&&!t.undoMs,!t.success)return;if(!this.active){let n=this.company&&this.kind==="ubr"?"cbr":this.kind;bt(`like_${A1[n]||n||""}`);let s=j("js-unsubscribed-blog");s&&(s.classList.remove("js-unsubscribed-blog"),s.classList.add("fx-shake")),this.legacy?Qs(this):zw(this)}let e=C("like","ext-count");if(e){let n=tt(Uw,{Count:t.counter});e.innerHTML=`<strong>${t.counter}</strong>${n}`}d2Env.isDesktop&&this.legacy&&(this.active?(this.classList.remove("is-hover"),this.textContent=Bc,this.removeEventListener("mouseenter",this),this.removeEventListener("mouseleave",this)):(this.addEventListener("mouseenter",this),this.addEventListener("mouseleave",this))),this.count=t.counterHtml,this.active=!this.active,this.syncState()})}updateCounter(){if(this.legacy)return;let t=this.nextElementSibling;this.count===""||this.count==="0"?t&&t.remove():(t||(t=document.createElement("div"),this.after(t)),t.textContent=this.count)}update(){this.parentElement.classList.toggle("is-disabled",this.disabled),!this.active&&!this.disabled&&!this.legacy?this.dataset.tt=Bc:this.dataset.tt&&(delete this.dataset.tt,Ae())}hover(){this.classList.add("is-hover"),this.textContent=jw}restore(){this.classList.remove("is-hover"),this.textContent=Bc}syncState(t){Ps(this,`[is="${Uc}"][uid="${this.uid}"][kind="${this.kind}"]`,["count","active","disabled"],t)}},Ww=()=>{customElements.define(Uc,Yu,{extends:"button"})};W();var S1="like",M1="/_api/likes",R1=200,I1=i=>_(void 0,null,function*(){let t=i.previousElementSibling;return{kind:"Html",html:t?yield Dt(M1,`${S1}-list`,{silent:!0,body:{token:t.key}}):void 0}}),qw=()=>{new ms("[data-like-list]",I1,{classNames:["c-bubble--like-list"],placement:"top",showDelay:R1,cursorTracking:!0})};F();W();Wi();var Vw=(i,t)=>{i.classList.toggle("is-off",t),i.style.cssText=`opacity:${t?.4:1}!important`},O1=(i,t)=>{i.classList.contains("is-off")||(Vw(i,!0),R(t,{method:"POST",anchorEl:i,throwError:!0}).then(e=>{e.location&&(window.location.href=e.location)}).catch(()=>{}).finally(()=>{Vw(i,!1)}))},H1=i=>{let t=i.node(),e=t.dataset.newtab==="",n=t.dataset.indirect==="",s=t.href;Se(t)||(e&&!d2Env.isApp?window.open(s):n?O1(t,s):window.location.href=s)},Gw=()=>{w.registerHandlers("msgr",{show:H1})};F();Zt();pt();var k1=i=>{let t=i.node(),{dataset:e}=t,n=e.alert;if(n){let s=e.bubblePlacement,o=e.bubbleNoAnchor==="";jt(n,o?void 0:t,{placement:s})}},D1=i=>_(void 0,null,function*(){let t=i.node(),{dataset:e}=t,{confirmIf:n}=e;if(t.form&&n&&(!t.form[n]||t.form[n].value))return;At(i);let{confirm:s,message:o}=e;if(s){let{confirmButton:r,confirmCancel:a}=e;if(e.confirmOnce===""&&zi(t),yield ot(s,o,t,r,a))if(t.form&&t.type==="submit"){let c=e.action;zi(t),t.click(),c&&setTimeout(()=>{e.action=c},200)}else t.href&&(window.location.href=t.href)}}),Jw=()=>{w.registerHandlers("dialog",{close:Rt}),w.registerHandlers("bubble",{alert:k1,confirm:D1})};pt();F();W();var Yw="people",N1="/ajax/people.cshtml",P1=i=>_(void 0,null,function*(){let t=i.node(),{html:e}=yield R(N1,Yw,{method:"POST",anchorEl:t,body:{_:"more",type:t.dataset.type,key:t.dataset.key}});e&&(t.insertAdjacentHTML("beforebegin",e),t.remove())}),Kw=()=>{w.registerHandlers(Yw,{more:P1})};var $1="https://api.instagram.com/oembed/",Zw=i=>{let t=i.src;if(!t)return;let e=i.parentElement;e.style.opacity="0";let n=t.replace(/\/?embed\/?$/,"");try{let s=new XMLHttpRequest;s.open("GET",`${$1}?url=${encodeURIComponent(n)}`,!0),s.withCredentials=!0,s.onload=()=>{let o=JSON.parse(s.responseText),{html:r}=o;e.insertAdjacentHTML("beforebegin",r),e.remove();let a=document.createElement("script");a.async=!0,a.src="https://platform.instagram.com/en_US/embeds.js",document.body.appendChild(a)},s.onerror=()=>{e.style.opacity="1"},s.send(null)}catch(s){e.style.opacity="1"}};dt();F();Kt();var Xw="Предложить исправление",Qw="Скрыть упоминание",tx="Скрыть упоминание запчасти",ex="Уберём ссылки в тексте, под фотографиями и упоминание в таблице",ix="Показать все {count}",nx="Настройки сохранены",sx="Вы обратились со страницы: ";X();be();W();Zt();Mc();Fi();Gi();pt();B();W();ge();Li();var B1="/ajax/posts.cshtml",U1="js-entity-body",jc=[],ox=i=>j(U1,i),j1=()=>{let i=jc.length;for(;i--;){let{id:t,content:e}=jc[i],n=document.querySelector(`[data-unfold-id="${t}"]`);if(n){jc.splice(i,1),delete n.dataset.unfoldId;let s=ox(n);s.innerHTML=e}}},rx=i=>_(void 0,null,function*(){let t=i.closest(".js-entity"),e=yield R(B1,"post-unfold",{method:"POST",anchorEl:i,body:{_:"getpost",id:t.dataset.id,type:t.dataset.type,newtab:t.dataset.newtab==="",stealth:t.dataset.stealth===""}});j1();let n=re();t.dataset.unfoldId=n;let s=ox(t);jc.push({id:n,content:s.innerHTML}),s.innerHTML=e.html,Lt(t,{block:"start"})});var ra="post",z1=i=>L`
  <div class="x-form__item" data-slot="post.part">
    <div class="x-form__body">
      <a class="c-post-part" href=${i.link} data-ym-target="parts_from_undertext">
        <div class="c-post-part__name"><span class="c-link c-link--text">${i.caption}</span></div>
        <div class="c-post-part__code"><span class="c-link c-link--text">${i.code}</span></div>
        <div class="c-post-part__manufacturer">${i.manufacturers}</div>
      </a>
      <a class="x-side-icon m-icon i-dots"
        href="${i.helpLink}?topic=carparts&amp;message=${encodeURIComponent(sx+window.location.href)}"
        data-code=${i.code} data-action="post.partsMenu"></a>
    </div>
  </div>
`,W1=i=>_(void 0,null,function*(){let t=i.node();yield rx(t),Ae()}),q1=i=>_(void 0,null,function*(){let t=i.node(),e=JSON.parse(t.previousElementSibling.textContent),n=document.createDocumentFragment();q(e.map(z1),n),t.replaceWith(n)}),V1=i=>_(void 0,null,function*(){At(i);let t=i.node();yield Dt(t.action,{method:"POST",body:new FormData(t)}),Xs(nx,{type:"savePosts"})}),G1=i=>_(void 0,null,function*(){let t=i.node(),e=vt(t,ra,"parts"),n=e&&e.dataset.disableUrl,s=[{action:"suggest",text:Xw}];n&&s.push({action:"disable",text:Qw,confirmTitle:tx,confirmMessage:ex,confirm:Us}),new ae(t,s).addEventListener("select",r=>{Ut();let a=r.detail;a==="suggest"?window.location.href=t.href:a==="disable"&&Dt(n,`${ra}.disable`,{method:"POST",anchorEl:t,body:{code:t.dataset.code}}).then(()=>{vt(t,ra,"part").remove();let l=C(ra,"parts-all");if(l){let c=Number(e.dataset.count)-1;l.textContent=tt(ix,{count:c}),e.dataset.count=String(c)}})})}),ax=()=>{w.registerHandlers(ra,{show:W1,parts:q1,saveParts:V1,partsMenu:G1})};F();X();Z();var lx="post-form",J1=i=>{let t=C(lx,"skip-notifying");t&&A(t,i.node().checked)},cx=()=>{w.registerHandlers(lx,{update:J1})};G();var zc=i=>Number(i.value)||0,aa=class extends H{parsedInit(){let t=this.slot("start"),e=this.slot("end");t.addEventListener("change",()=>{let n=zc(t),s=zc(e);n>0&&s>0&&n>s&&(e.value=String(n))}),e.addEventListener("change",()=>{let n=zc(t),s=zc(e);s>0&&n>0&&s<n&&(t.value=String(s))})}};F();var Y1=i=>{let t=i.node(),e=t.options[t.selectedIndex].dataset.url,n=!!e;document.body.classList.toggle("g-branded",n),document.body.style.background=n?`url(${e}) 50% 0 repeat`:"none"},dx=()=>{w.registerHandlers("premium",{theme:Y1})};F();Kt();var mx="Продвижение машины",hx="Завершить Продвижение?",ux="Если вы завершите его раньше времени, мы не сможем вернуть потраченные кредиты",px="Завершить",fx="Выберите подходящую продолжительность продвижения.",gx="Подпись к машине слишком короткая. Минимально допустимая длина — 10 символов.",vx="{Count, plural, one {кредит} many {кредитов} other {кредита}}";B();be();W();Wc();le();Z();mn();Ku();pt();ni();var pi="pc",us="js-promocars-cards",ps="js-promocars-item",la="js-caption",Vc="is-bold",ca="c-pc-card-subscribe",Mi="/ajax/promocars.cshtml";B();F();B();W();le();xi();var Z1="pc",X1="is-editable",Zu="is-editactive",Q1="js-edit",t$=600,e$=`${pi}.edit`,da,Xu=i=>It(i,ps),i$=(i,t)=>{let e=i.value,n=t.querySelector(`.${la}`);n.innerHTML=Pt(e),R(Mi,e$,{method:"POST",anchorEl:n,body:{_:"editcaption",key:t.dataset.key,caption:e},throwError:!0}).then(s=>{da=e===""?s.caption||"":e}).catch(()=>{}).finally(()=>{da&&(i.value=da,n.innerHTML=Pt(da))})},n$=he(i$,t$),bx=i=>{i.keyCode===13&&(i.preventDefault(),i.target.blur())},s$=i=>{let t=i.node(),e=Xu(t);da=t.value,e.classList.add(Zu),t.addEventListener("keydown",bx)},o$=i=>{let t=i.node(),e=Xu(t);n$(t,e);let n=t.value,s=e.querySelector(`.${la}`);s.innerHTML=Pt(n),t.removeEventListener("keydown",bx),e.classList.remove(Zu)},yx=()=>{Q(`.${ps} .${Q1}`).forEach(t=>{let e=Xu(t);e.classList.remove(X1),e.classList.remove(Zu),e.dataset.tt!==void 0&&delete e.dataset.tt,t.remove()})},_x=()=>{w.registerHandlers(Z1,{"edit-on":s$,"edit-off":o$})};var r$="js-link",a$="is-disabled",l$="has-nolink",ma=(i,t)=>{Ft(us).forEach(n=>{Ft(ps,n).forEach((o,r)=>{if(r===0){if(o.classList.toggle(l$,i),t){let l=o.querySelector(`.${r$}`);l&&(l.href=t)}i&&(yx(),o.classList.remove(Vc));let a=o.querySelector(`.${ca}`);a&&a.remove()}else o.classList.toggle(a$,i)})})};var c$="pc",d$="js-promocars-dialog",Lx="js-pic",m$="js-price",h$="js-price-old",u$="js-stats",p$="js-input-container",f$="js-promocars-controls",wx=`${pi}.form`,g$=`${pi}.fetch`,Gc=!1,Jc=i=>{let t=document.querySelector(`.${f$}`);t&&(t.innerHTML=i||"")},v$=(i,t)=>{let e=j(Lx,i);e&&(e.src=t)},xx=(i,t)=>_(void 0,null,function*(){return(yield ot(hx,ux,i,px))?R(Mi,wx,{method:"POST",anchorEl:i,body:{_:"stop",key:t},throwError:!0}).then(e=>e.html):Promise.reject()}),Tx=i=>i.checked?Number(i.dataset.multiplier||0):0,Qu=(i,t)=>{let e=1+Tx(t.bold)+Tx(t.subscribe);return Math.floor((Number(i)||0)*e/10)*10},E$=(i,t)=>{let e=i.querySelector(`.${Lx}`),n=e.parentElement.querySelector(`.${ca}`);if(n&&!t)n.remove();else if(!n&&t){let s=document.createElement("button");s.classList.add("r-button-unstyled","m-icon-before"),s.classList.add(ca),s.innerHTML=`<span class="c-pc-card-subscribe__btn"><span>${wn}</span></span>`,e.after(s)}},Cx=(i,t)=>{Gc=!0,t=t||i.dataset.key||"";let e,n,s,o,r=()=>{Q("[name=duration]",e).forEach((f,v)=>{let E=f.parentNode.querySelector(`.${m$}`),T=Ln(Qu(f.dataset.price,e));E&&(E.textContent=v===0?tt(mE,{Amount:T}):T);let M=f.parentNode.querySelector(`.${h$}`);M&&(M.textContent=Ln(Qu(f.dataset.fullprice,e)))}),c()},a=(g={})=>{let{value:f,carChanged:v,initialUpdate:E}=g,T=s.options[s.selectedIndex],{dataset:M}=T,x=M.promoted==="1",y=f||_e((E||v?M.saved:void 0)||M.caption||""),S=j(ps,d2Env.isMobile?e:void 0);if(S){S.dataset.key=T.value;let k=j(la,S);k&&(k.innerHTML=Pt(y)),v&&v$(S,M.pic),S.classList.toggle(Vc,e.bold.checked),E$(S,e.subscribe.checked)}v&&(n.value=y,A(j(u$),x),A(j(p$),!x),o.textContent=o.dataset.values.split(";")[x?0:1],o.dataset.promoted=x?"1":"0",o.classList.toggle("c-button--primary",!x),o.classList.toggle("c-button--green",!x))},l=()=>{a({carChanged:!0}),n.disabled=s.options[s.selectedIndex].dataset.fixedCaption===""},c=()=>{let{value:g}=n;a({value:g})},d=g=>{if(d2Env.isMobile){let f=li({anchor:i,title:mx,html:g});f.addEventListener("beforehide",()=>{ma(!1)},{once:!0}),f.addEventListener("hide",()=>{h()},{once:!0}),f.render(),f.show()}else j(us)!==i&&document.scrollingElement.scrollTo({top:0,behavior:"instant"}),Jc(g);e=j(d$),s=e.key,s.addEventListener("change",l),o=e.start,o.addEventListener("click",m),n=e.caption,n.addEventListener("input",c),e.bold.addEventListener("click",r),e.subscribe.addEventListener("click",r),ma(!0),d2Env.isMobile||(a({initialUpdate:!0,carChanged:!0}),wt(e).toggle())},h=()=>{try{n.removeEventListener("input",c),e.bold.removeEventListener("click",r),e.subscribe.removeEventListener("click",r),s.removeEventListener("change",l),o.removeEventListener("click",m)}catch(g){}Gc=!1},p=g=>{R(Mi,g$,{method:"POST",anchorEl:i,body:{_:"top",key:g},throwError:!0}).then(f=>{d(f.html)}).catch(()=>{Gc=!1})},m=g=>{g.preventDefault();let f=o.dataset.promoted==="1",v=o.dataset.key||s.value||"";if(f)xx(o,v).then(E=>{ma(!1),h(),Jc(E)}).catch(()=>{});else{let E=e.querySelector("[name=duration]:checked");if(!E){jt(fx,o);return}let T=E.value,M=Qu(E.dataset.price,e),x=n.value;if(x.length>0&&x.length<Number(n.getAttribute("minlength"))){jt(gx,o);return}let y={_:"promote",key:v,duration:T,caption:x,bold:e.bold.checked,subscribe:e.subscribe.checked};u(y,M)}},u=(g,f)=>_(void 0,null,function*(){let[v,E]=yield Fe(()=>R(Mi,wx,{method:"POST",anchorEl:o,body:g,throwError:!0}));if(E){no([{name:"Продвижение",category:`Машина/${g.duration}`,price:f}]);let M=s.options[s.selectedIndex].dataset.url||"";if(ma(!1,M),d2Env.isMobile){let x=j(us,e).cloneNode(!0),y=j(us);y!==x&&y.replaceWith(x.firstElementChild)}h(),d2Env.isMobile&&Rt(),Jc(E.html)}else v&&v.json&&qc(v.json,T=>{u(rt(O({},g),{requisite:T}),f)})});p(t)},Ax=i=>{if(window.location.hash==="#carpromo"){let t=j(us);t&&Cx(t,i)}},b$=i=>{let t=i.node();Gc||(Cx(t),Rt())},y$=i=>{let t=i.node(),e=t.dataset.key||"";xx(t,e).then(n=>{Jc(n)}).catch(()=>{})},Sx=()=>{w.registerHandlers(c$,{add:b$,stop:y$})};Ro();G();W();Z();var _$=`${pi}.stats`,T$=3e3,L$=2e4,ha=class extends H{parsedInit(){let t=this.element.parentElement,e=this.slot("more"),n,s,o=c=>{s.disconnect(),clearTimeout(n),c!==void 0&&(t.innerHTML=c)},r=()=>{this.slot("item")&&(s=new MutationObserver(()=>{t!==this.element.parentElement&&o()}),s.observe(t,{childList:!0}),n=setTimeout(a,vi.isIdle?L$:T$))},a=()=>{R(Mi,_$,{method:"POST",silent:!0,body:{_:"progress"}}).then(c=>{c.html?o(c.html):c.length?(c.forEach(d=>{let{id:h}=d,m=this.slots("item").find(u=>u.dataset.id===h);if(m){let u=this.slot("progress",m);u.style.width=`${d.progress}%`;let g=this.slot("info",m);g.innerHTML=d.clicks>0?d.info:""}}),r()):o("")}).catch(()=>{o("")})},l=()=>{this.slots("item").forEach(d=>{A(d,!0)}),e.remove()};r(),e&&e.addEventListener("click",l,{once:!0})}};dt();ii();Wt();G();be();W();var w$=`${pi}.lottery`,ua=class extends H{parsedInit(){let t=Number(this.element.dataset.count),e=Array.from({length:t},(r,a)=>({index:a,isScratched:!1,isActive:!1,isSelected:!1})),n=r=>{let a={"c-pc-wheel":!0,"is-active":r.isActive},l=tt(vx,{Count:r.prize});return L`<div class="c-pc-lottery__item">
      <div class=${Nt(a)} @click=${r.isScratched?void 0:c=>{o(c.target,r.index)}}>
        <div class="c-pc-wheel__front m-icon"></div>
        <div class="c-pc-wheel__back ${Nt({"is-active":r.isSelected})}">
          <div class="c-pc-wheel__back-i">${r.prize?L`<b>${r.prize}</b> ${l}`:""}</div>
        </div>
      </div>
    </div>`},s=()=>{q(ct(e,r=>r.index,n),this.slot("body"))},o=(r,a)=>_(this,null,function*(){let l=yield R(Mi,w$,{method:"POST",anchorEl:r,body:{_:"lottery",key:this.element.dataset.key,index:a}}),c=this.slot("title");c.innerHTML=l.title,e.forEach(d=>{d.prize=l.itemValues[d.index],d.isScratched=!0,d.isActive=a===d.index,d.isSelected=a===d.index}),s(),setTimeout(()=>{e.forEach(d=>{d.isActive=!0}),s()},1e3)});s()}};F();W();var x$="pc",C$=`${pi}.subscribe`,A$="/ajax/subscription",S$=i=>_(void 0,null,function*(){let t=i.node();yield R(A$,C$,{method:"POST",anchorEl:t,body:{_:"subscribe",type:"car",id:t.dataset.id}}),Qs(t,"_"),t.remove()}),Mx=()=>{w.registerHandlers(x$,{subscribe:S$})};var Rx=i=>{i.remove()};Wi();dt();Wt();F();var Ix="Самое интересное",Ox="Сохранить",Hx="Выберите темы материалов, которые могут быть вам интересны";pa();W();me();var tp="contentsettings",R$=3,I$=(i,t,e,n)=>L`
<form action="${i}" data-role="form" data-keysubmit>
  <div class="o-b">${Hx}</div>
  <div class="o-grid o-grid--${e.length} o-grid--no-margin">
    ${e.map(s=>L`<div>${ct(s,o=>o.id,o=>L`
      <label class="y-choice o-f">
        <input type="checkbox" name=${t} .value=${o.id} ?checked=${o.selected} data-action="${tp}.check">
        ${o.caption}
      </label>
    `)}</div>`)}
  </div>
  <div class="x-form__submit x-form__submit--dialog u-extend">
    <button class="c-button c-button--primary c-button--alt-l c-button--wide u-mobile-100"
      type="submit" ?disabled=${!n}>${Ox}</button>
  </div>
</form>
`,O$=(i,t,e,n)=>{let s=e.some(a=>a.selected),o=new _t({anchor:n,title:Ix,className:"c-modal__content--topics"}),r=Yi(e,d2Env.isMobile?1:R$);q(I$(i,t,r,s),o.element),o.show(),o.initCloseConfirm()},H$=i=>_(void 0,null,function*(){let t=i.node(),{url:e}=t.dataset;if(!e)return;let n=yield R(e,tp,{anchorEl:t});O$(e,n.name,n.items,t)}),kx=()=>{w.registerHandlers(tp,{select:H$})};F();X();Z();var so="settings-editorial",k$=i=>{let t=i.node().form,e=C(so,"field",t),n=C(so,"show",t),s=C(so,"filtered",t),o=C(so,"container",t),r=C(so,"notes",t);e.value=s.checked?"Filtered":"All",e.disabled=!n.checked,A(o,n.checked),r&&A(r,n.checked)},Dx=()=>{w.registerHandlers(so,{update:k$})};dt();Wt();F();var Nx="Подписка на новые машины",Px="Сохранить",$x="Отметьте машины, появление которых вы хотите отслеживать в Ленте. Каждая модель включает в себя все поколения и годы выпуска.",Fx="Подписаться на всё",Bx="Если появятся новые модели, подпишем на них тоже";pa();W();me();var Ux="settings-new-cars",fs,jx="",zx,N$=i=>{i.open=!i.open,queueMicrotask(Yc)},P$=i=>{i.selected=!i.selected,i.models.forEach(t=>{t.selected=i.selected}),Yc()},$$=(i,t)=>{t.selected=!t.selected,i.selected=i.models.every(e=>e.selected),Yc()},F$=({url:i,brands:t})=>L`
  <form action="${i}" novalidate data-keysubmit>
    <div class="o-b">${$x}</div>
      ${ct(t,e=>e.id,e=>L`
        <details class="x-box" .ooen=${e.open} @toggle=${()=>N$(e)}>
          <summary>
            <h2 class="x-header">${e.caption} ${e.count!==0?L`<span class="c-counter">${e.count}</span>`:$}</h2>
          </summary>
          ${e.open?L`<div class="o-t-s">
              <label class="y-choice">
                <input type="checkbox" name="brands" value=${e.id} .checked=${e.selected} @click=${()=>P$(e)}>
                ${Fx}
              </label>
              ${e.models.length!==0?L`<div class="x-secondary x-secondary-color o-b">${Bx}</div>`:$}
              ${e.models.length!==0?L`<div class="o-grid o-grid--3 o-grid--no-margin">
                  ${Yi(e.models,3).map(n=>L`<div>${ct(n,s=>s.id,s=>L`
                    <label class="y-choice o-f">
                      <input type="checkbox" name="models" value=${s.id} .checked=${s.selected} @click=${()=>$$(e,s)}>
                      ${s.caption}
                    </label>
                  `)}</div>`)}
                  </div>
                </div>`:$}`:$}
        </details>
      `)}
      <div class="x-form__submit x-form__submit--dialog u-extend">
        <button class="c-button c-button--primary c-button--alt-l c-button--wide u-mobile-100"
          type="submit" name="submitbtn">${Px}</button>
      </div>
    </div>
  </form>`,Wx=()=>JSON.stringify(fs.brands.map(i=>({models:i.models.map(t=>({selected:t.selected}))}))),qx=()=>{fs.brands.forEach(i=>{i.count=i.models.length===0&&i.selected?1:i.models.reduce((t,e)=>t+(e.selected?1:0),0)})},B$=i=>{fs.brands=i.map(t=>({id:t.name,caption:t.caption,selected:t.selected,open:!1,count:0,models:t.models.map(e=>({id:e.id,caption:e.caption,selected:t.selected||e.selected}))})),qx(),jx=Wx()},Yc=()=>{fs.brands&&(qx(),q(F$(fs),zx))},U$=i=>{let t=new _t({anchor:i,className:"c-modal__content--newcars",title:Nx});zx=t.element,Yc(),t.setFormDataTransformer(()=>fs.brands.reduce((e,n)=>(n.selected?e.push(`brands=${n.id}`):n.models.filter(s=>s.selected).forEach(s=>{e.push(`models=${s.id}`)}),e),[]).join("&")),t.show(),t.initCloseConfirm(()=>jx!==Wx())},j$=i=>_(void 0,null,function*(){let t=i.node(),{url:e}=t.dataset;if(!e)return;fs={url:e,brands:[]};let n=yield R(e,Ux,{anchorEl:t});B$(n),U$(t)}),Vx=()=>{w.registerHandlers(Ux,{select:j$})};F();Gt();pe();var z$="sitesearch",W$={All:"sitesearch-categories_all_items",CarJournals:"sitesearch-categories_item_bj",Cars:"sitesearch-categories_item_cars",Users:"sitesearch-categories_item_people",UserBlogs:"sitesearch-categories_item_blogs",Communities:"sitesearch-categories_item_communities",Companies:"sitesearch-categories_item_ba",Offers:"sitesearch-categories_item_market"},q$=i=>{let t=new URL(window.location.href),{searchParams:e}=t;Ze(i.node().form).forEach((o,r)=>{e.delete(r),o&&e.set(r,o)}),e.delete("page");let s=e.get("category");bt(W$[s||"All"]),e.get("text")&&(window.location.search=t.search)},Gx=()=>{w.registerHandlers(z$,{update:q$})};Po();F();var Jx="Применить",Yx="{ContentKind, select, UserPost {Блог{Container, select, none {} other { пользователя {Container}}}} BusinessPost {Блог компании{Container, select, none {} other { {Container}}}} CarPost {Бортжурнал{Container, select, none {} other { {Container}}}} CommunityPost {Блог сообщества{Container, select, none {} other { {Container}}}} Community {Сообщество} Car {Машина{Container, select, none {} other { пользователя {Container}}}} UserProfile {Пользователь} BusinessProfile {Компания} EditorialArticle {Новости и тест-драйвы} MarketOffer {Объявление в Барахолке} Brand {Каталог} Model {Каталог} Generation {Каталог} CarPart {Запчасти} Comment {Комментарий} Snap {Фотография} SnapAlbum {Альбом} other {{DisplayLink}}}",Kx="{Count} фото";Im();B();X();Gt();Z();ge();X();be();W();le();ts();Be();var Xx=i=>`
<article class="x-box c-search-item c-darkening-hover-container">
  ${i.image?`<div class="c-search-item__pic">${Yn({images:[i.image]},2,{size:{width:1,height:1},className:"is-rounded u-vignette has-darkening-hover"})}${i.imageCount?`<div class="c-corner-counter c-corner-counter--alt">${tt(Kx,{Count:i.imageCount})}</div>`:""}</div>`:""}
  <header>
    <a class="u-card-link" href="${i.link}" target="_blank" data-track="${i.clickMetricToken}">
      ${i.title?`<h3>${i.title}</h3>`:""}
      <div class="x-secondary-color">
        ${tt(Yx,{ContentKind:i.contentKind,DisplayLink:i.displayLink,Container:i.container?i.container.title:""})}
      </div>
    </a>
  </header>
  ${i.textSnippets&&i.textSnippets.length!==0?`<div class="c-search-item__body">${i.textSnippets.join("")}</div>`:""}
  <footer>
    ${i.likeCount?`<div class="c-icon-counter"><span class="m-icon c-icon c-icon--s i-like-s"></span> ${i.likeCount}</div>`:""}
    ${i.commentCount?`<div class="c-icon-counter"><span class="m-icon c-icon c-icon--s i-comments-s"></span> ${i.commentCount}</div>`:""}
    ${i.createdAt?`<div>${uc(i.createdAt)}</div>`:""}
    ${i.debugInformation?`<div>${i.debugInformation}</div>`:""}
  </footer>
</article>
`,Qx=(i,t)=>{let e=[],n=new FormData(i);i.dataset.forwardToken&&n.set("offset",i.dataset.forwardToken);let s,o,r=()=>{let c=C(t,"results"),d=c.innerHTML,h=document.createElement("div");for(h.className="o-f",c.appendChild(h);c.firstChild!==h;)h.appendChild(c.firstChild);e.push({content:d,wrapper:h,height:h.getBoundingClientRect().height}),o=new IntersectionObserver(p=>{p.forEach(m=>{let u=m.target,g=e.find(f=>f.wrapper===u);m.isIntersecting?(u.innerHTML=typeof g.content=="string"?g.content:g.content.map(f=>Xx(f)).join(""),u.removeAttribute("style")):(g.height=u.getBoundingClientRect().height,u.style.height=`${g.height}px`,u.innerHTML="")})},{rootMargin:"800px 0px"}),o.observe(h)},a=c=>{let d=C(t,"results"),h=document.createElement("div");h.className="o-f",d.appendChild(h),h.innerHTML=c.map(p=>Xx(p)).join(""),e.push({content:c,wrapper:h,height:h.getBoundingClientRect().height}),o.observe(h)},l=()=>{R(i.dataset.url,t,{silent:!0,body:n}).then(c=>{c.results.length!==0&&c.forwardToken?(s||(r(),s=!0),n.set("offset",c.forwardToken),a(c.results)):ye().removeEventListener("scroll",l)})};i.dataset.forwardToken&&ye().addEventListener("scroll",l)};var Zc="site-search",t0='[data-slot^="carselect"]',Kc,gs,V$=i=>{Kc&&(Kc(),Kc=void 0),gs||(gs=P("button","c-button c-button--primary c-button--alt-l u-block-above",Jx),gs.style.position="absolute",i.form.appendChild(gs)),Kc=ln(i.parentElement,gs,()=>{cn(i.parentElement,gs,{placement:d2Env.isMobile?"top":"left",middleware:[$n(10)]}).then(({x:t,y:e})=>{Object.assign(gs.style,{left:`${t}px`,top:`${e}px`})})})},ep=i=>{let[t,e,n]=Array.from(i.querySelectorAll(t0)).map(o=>({id:o.value,name:o.dataset.name,text:o.options[o.selectedIndex].text})),s=n.id?n:e.id?e:t.id?t:void 0;return(s===e||s===n)&&(s.text=`${t.text} ${s.text}`),s},G$=i=>{i.add.disabled=!ep(i),setTimeout(()=>{i.add.disabled=!ep(i)},100)},J$=i=>{let t=i.node(),e=ep(t.form);if(!e)return;let n=C(Zc,"presets-legend",t.form),s=C(Zc,"presets",t.form);if(!n||!s)return;A(n,!0);let o=s.querySelector(`[name="${e.name}"][value="${e.id}"]`);if(!o){let r=P("label","y-choice o-f",o=P("input",{type:"checkbox",name:e.name,value:e.id,"data-popup":""}),e.text);s.appendChild(r)}o.checked=!0,Ct(o),Lt(o,{behavior:"smooth",block:"nearest"})},e0=i=>{i.addEventListener("change",t=>{let e=t.target;e.dataset.popup===""?V$(e):e.matches(t0)&&G$(e.form)}),w.registerHandlers(Zc,{add:J$}),Qx(i,Zc)};nn();var Y$="/_api/actionmetrics/process",ip=i=>{if(navigator.sendBeacon){let t=new Blob([`token=${encodeURIComponent(i)}`],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(Y$,t)}},K$=i=>{let e=i.target.closest("[data-track]");e&&ip(e.dataset.track)},i0=()=>{document.documentElement.addEventListener("click",K$)};pe();var Z$=i=>{let{target:t,trackTarget:e}=i.dataset;t&&bt(t),e&&ip(e)},n0=i=>{ke(i,{onEnter:Z$})};Gl();B();G();nn();Dc();le();Z();Be();ss();var X$="/communities/suggest",Q$="c-token-input",tF="c-token-input__tokens",s0="c-token-input__token",eF="c-token-input__cursor",iF="c-token-input__pic",nF="c-token-input__caption",sF="r-button-unstyled c-token-input__remove m-icon c-icon u-icon-hover i-close",oF="c-input c-token-input__input",o0=i=>P("div",s0,Vi({images:[{url:i.pic,width:60,height:60}]},0,{className:`u-vignette ${iF}`}),P("span",nF,document.createTextNode(i.caption)),P("button",{type:"button",className:sF,"data-target":i.id}),P("input",{type:"hidden",value:i.id,"data-caption":i.caption})),rF=i=>{let t=o0({id:"1",caption:"1",pic:Jn});i.appendChild(t);let e=t.offsetHeight;return t.remove(),e},fa=class extends H{init(){this.form=this.element.closest("form"),this.cursorEl=P("div",eF),this.tokensEl=P("div",tF,this.cursorEl),this.inputEl=P("input",{type:"text",className:oF}),this.rootEl=P("div",Q$,this.tokensEl,this.inputEl),this.name=this.element.dataset.name||"",this.placeholder=this.element.dataset.placeholder||"",this.emptyPlaceholder=this.element.dataset.emptyPlaceholder||"",this.updatePlaceholder(),this.element.appendChild(this.rootEl),this.updateSizeMetrics(),ke(this.form,{onEnter:()=>{this.updateSizeMetrics(),this.updateInputLayout()}}),this.tokens=new yn(Number(this.element.dataset.max)),this.initTokens(),this.ac=new Re(X$,this.inputEl),this.ac.setRowBuilder(this.row.bind(this)),this.ac.getRenderer().setWidthProvider(this.rootEl),this.vsm=to(),this.tokensEl.addEventListener("click",t=>this.onClick(t)),this.inputEl.addEventListener("input",()=>this.onInput()),this.inputEl.addEventListener("keydown",t=>this.onKey(t)),this.vsm.addEventListener("resize",()=>this.onResize()),this.update()}updateSizeMetrics(){this.tokenHeight=rF(this.tokensEl),this.paddingTop=parseInt(ki(this.tokensEl,"padding-top"),10)}updateInputLayout(){let t=this.cursorEl.getBoundingClientRect(),e=this.rootEl.getBoundingClientRect(),n=t.left-e.left,s=t.top-e.top;this.inputEl.style.height=`${this.tokenHeight+this.paddingTop+s}px`,this.inputEl.style.paddingTop=`${s}px`,this.inputEl.style.paddingLeft=`${n}px`,this.updatePlaceholder()}initTokens(){Q(`input[name="${this.name}"]`,this.form).forEach(t=>{this.tokens.add({id:t.value,caption:t.dataset.caption,pic:t.dataset.avatar}),t.remove()})}update(){this.cursorEl.innerHTML="",this.tokensEl.querySelectorAll(`.${s0}`).forEach(e=>{e.remove()}),this.tokens.get().forEach(e=>{this.tokensEl.appendChild(o0(e))}),this.tokensEl.appendChild(this.cursorEl),this.updateInputLayout()}onToken(t,e,n,s){this.tokens.add({id:t,caption:e,pic:n,num:s}),this.update()}onClick(t){t.target&&t.target.dataset.target?(this.ac.dismiss(),this.tokens.removeById(t.target.dataset.target),this.update()):this.inputEl.focus()}onInput(){this.cursorEl.innerHTML=Pt(this.inputEl.value),this.updateInputLayout()}onKey(t){t.keyCode===8&&this.inputEl.value===""&&(this.ac.isOpen()?this.ac.dismiss():(this.tokens.removeLast(),this.update()))}onResize(){this.ac.dismiss(),this.updateInputLayout()}reinit(){this.tokens.clear(),this.initTokens(),this.update()}row(t,e){let n=this;return rt(O({},e),{render(s){s.append(Vi({images:[{url:e.avatar,width:60,height:60}]},0,{className:"u-vignette ac-pic is-round"}),P("span",{innerHTML:e.caption}),P("span",{className:"c-counter ac-counter",innerHTML:Ln(e.members)})),e.extra&&s.appendChild(P("span",{className:"ac-desc-token",innerHTML:e.extra}))},select(s){s.value="",n.onToken(e.id,e.caption,e.avatar,e.members)}})}updatePlaceholder(){if(this.placeholder){let t=this.tokens?this.tokens.get().length:0;this.inputEl.setAttribute("placeholder",t===0&&this.emptyPlaceholder?this.emptyPlaceholder:this.placeholder)}}};dt();Wt();Kt();var r0="Сообщества",a0="Выберите, участникам каких сообществ показывать запись.",l0="Название сообщества",c0="Закрыть окно?",d0="Выбранные сообщества не сохранятся";B();G();Gt();le();ss();pt();var m0="token-input-mobile",lF="/communities/suggest",cF=3,dF=(i,t,e,n)=>L`
<div class="o-b">${a0}</div>
<div class="x-box o-f">
  <div class="c-search m-icon-before">
    <input type="search" name="query" placeholder=${l0} autocomplete="off" data-slot="${m0}.input">
  </div>
</div>
<div class="o-f" data-slot="${m0}.ac-rows"></div>
  ${i&&i.length>0?L`
      <div class="x-box u-break-word">
        ${ct(i,s=>s.id,s=>L`
          <div class="y-form-badge y-form-badge--block o-f">
            <div class="o-group o-group--top o-group--justify">
              <div class="is-auto">${s.caption} <span class="c-counter u-nobr">${Ln(s.num)}</span></div>
              <button class="r-button-unstyled m-icon c-icon u-icon-hover i-close" @click=${()=>e(s.id)}></button>
            </div>
          </div>
        `)}
      </div>`:$}
</div>
<div class="x-form__submit x-form__submit--dialog u-extend">
  <button class="c-button c-button--primary c-button--alt-l c-button--wide u-mobile-100" type="button"
    ?disabled=${t} @click=${n}>${ve}</button>
</div>
`,ga=class extends H{parsedInit(){this.fieldsEl=this.slot("fields"),this.listEl=this.slot("list"),this.name=this.element.dataset.name,this.placeholder=this.element.dataset.placeholder,this.tokens=new yn(Number(this.element.dataset.max)),this.initTokens(),this.element.addEventListener("click",()=>this.showModal()),this.updateList()}initTokens(){this.tokens.clear(),Q(`input[name="${this.name}"]`,this.fieldsEl).forEach(t=>{this.tokens.add({id:t.value,caption:t.dataset.caption,pic:t.dataset.avatar,num:Number(t.dataset.members)})})}updateForm(){this.fieldsEl.innerHTML="";let t=this.tokens.get();t.sort((e,n)=>{let s=e.caption,o=n.caption;return s>o?1:s<o?-1:0}),t.forEach(e=>{let n=document.createElement("input");n.name=this.name,n.type="hidden",n.value=e.id,n.dataset.caption=e.caption||"",n.dataset.avatar=e.pic,e.num&&(n.dataset.members=String(e.num)),this.fieldsEl.appendChild(n)}),this.updateList(),Ct(this.element)}updateList(){let t=this.tokens.get();this.listEl.innerHTML="",(t.length>0?t.map(n=>n.caption):this.placeholder?[this.placeholder]:[]).forEach(n=>{this.listEl.appendChild(P("div",{className:"u-text-overflow",textContent:n}))})}updateModal(){q(dF(this.tokens.get(),!this.contentChanged,this.removeHandler.bind(this),this.updateFormAndClose.bind(this)),this.dialog.contentElement)}close(){this.closeWithoutConfirm=!0,Rt()}updateFormAndClose(){this.updateForm(),this.close()}showModal(){this.initTokens(),this.contentChanged=!1,this.closeWithoutConfirm=!1,this.dialog=li({anchor:this.element,title:r0}),this.dialog.addEventListener("beforehide",s=>_(this,null,function*(){!this.closeWithoutConfirm&&this.contentChanged&&(s.preventDefault(),(yield ot(c0,d0,void 0,js))&&this.close())})),this.dialog.addEventListener("hide",()=>this.hideModal(),{once:!0}),this.dialog.render(),this.dialog.show(),this.updateModal();let t=this.slot("input",this.dialog.element);t.focus();let e=this.slot("ac-rows",this.dialog.element);this.ac&&this.ac.dispose(),this.ac=new Re(lF,t,!1,!1,e),this.ac.setMaxMatches(cF),this.ac.setRowBuilder(this.row.bind(this));let n=this.ac.getRenderer();n.className="x-box",n.rowClassName="o-f",n.activeClassName="is-active"}hideModal(){this.ac&&this.ac.dispose()}removeHandler(t){this.tokens.removeById(t),this.contentChanged=!0,this.updateModal()}reinit(){this.initTokens(),this.updateList()}row(t,e){let n=this;return rt(O({},e),{render(s){s.appendChild(P("div","y-form-badge y-form-badge--block",P("span",void 0,`${e.caption} `),P("span",{className:"c-counter u-nobr",innerHTML:Ln(e.members)})))},select(s){s.value="",n.tokens.add({id:e.id,caption:e.caption,pic:e.avatar,num:e.members},!0),n.contentChanged=!0,n.updateModal()}})}};Ne();G();Li();var h0="seekid",va=class extends H{parsedInit(){let t=this.element.dataset.target,{seek:e,noanim:n,duration:s,show:o,hide:r,collapse:a,hideHandle:l,ontogglestart:c,ontoggle:d,once:h}=this.element.dataset;if(!t)return;if(e==="next"){let u=re();this.element.dataset[h0]=u,t=`[data-${h0}=${u}]~${t}`}let p=e==="ancestor"?this.element.closest(t):e==="ancestor-next"?(this.element.closest(t)||this.element).nextElementSibling:document.querySelector(t);if(!p)return;let m=new Ks(p,this.element);m.noAnimation=n==="",s&&(m.duration=Number(s)),r===""&&(m.hide=!0),o===""&&(m.show=!0),a===""&&(m.collapse=!0),l===""&&(m.hideHandle=!0),c&&m.addEventListener("start",()=>{try{window.eval(c)}catch(u){}}),d&&m.addEventListener("end",()=>{try{window.eval(d)}catch(u){}}),h===""&&m.addEventListener("end",()=>m.dispose(),{once:!0})}};G();pe();np();pe();var sp="mrg_",p0=(i,t)=>{oo()&&(bt(`${i}_try`,t),sessionStorage.setItem(`${sp}${i}`,JSON.stringify(t)||""))},f0=(...i)=>{oo()&&i.forEach(t=>{let e=window.sessionStorage.getItem(`${sp}${t}`);window.sessionStorage.removeItem(`${sp}${t}`),(e||e==="")&&bt(t,e?JSON.parse(e):void 0)})};Z();var g0="__run",hF="q",v0=(i,t)=>{let e=i.split("."),n=e.pop(),s=window;for(let o=0;o<e.length;o++)s=s[e[o]];s[n]&&s[n].apply(s,t)},uF=i=>typeof i=="function"?i():(...t)=>v0(i,t),E0=()=>{let i=window[g0][hF]||[];window[g0]=uF,i.forEach(t=>{typeof t=="function"?t():v0(...t)})};var Ki=(i,t)=>{let e=i.split("."),n=window;for(;e.length;){let s=e.shift();!e.length&&t!==void 0?n[s]=t:n[s]&&n[s]!==Object.prototype[s]?n=n[s]:n=n[s]={}}};d2Env.isDesktop&&window.Stickyfill&&(U("sticky",i=>Stickyfill.addOne(i)),document.body.style.position="");rL();mL();var zf=[];"scrollBehavior"in document.documentElement.style||zf.push(Promise.resolve().then(()=>(I0(),R0)).then(i=>{i.polyfill()}));"animate"in document.body&&"timeline"in document||zf.push(Promise.resolve().then(()=>kn(O0(),1)));Promise.all(zf).then(()=>{xL(),i0(),JT(),KT(),tL(),uL(),bw(),GT(),Ww(),Gw(),Jw(),Uv(),HL(),zL(),WL(),qL(),U("collapsible",va),U("cpoverlay",e_),U("details",Kr),U("emojizoom",lc),U("messages-status",Bw),U("nav",ea),U("search-tips",ta),jL(),d2Env.isDesktop?U("top-menu",ia):d2Env.isMobile&&!d2Env.isApp&&U("top-menu",na),(d2Env.extvideo||d2Env.extYoutube)&&U("extvideo",VL),d2Env.isDesktop?(mg(),vw(),qw(),Hw(),d2Env.userId&&U("topsearch",oa),U("carmultiselect",mr),U("fancyscroll",hL),U("pagebg",EL),U("post",Mo)):d2Env.isMobile&&U("carmultiselect-mobile",hr),d2Env.isApp||U("scrolltracking",n0),U("circular-progress",Gr),U("copy-to-clipboard",eL),vL(),gL(),ZT(),E_(),w_(),D_(),U("auto-width",tT),U("select.x-select,select.y-select",eT,!0),U("select-expand",Zr),U("form",Ir),U("rich-select",Fr),U("geo-filter",Hr),U("taflexible",iT),X_(),U("token-input",fa),U("token-input-mobile",ga),U("chk",Sr),U("regionselect",$r),U("toolbar",Ur),d2Env.isMobile&&U("form-birthdate",v_),U("nickname",j_),U("vin",gT),U("lang-select",kr),U("years",aa),kt("x-crop",()=>Promise.resolve().then(()=>(D0(),k0))),se("charcounter",()=>Promise.resolve().then(()=>(P0(),N0))),se("cityselect",()=>Promise.resolve().then(()=>(W0(),z0))),se("imagelist",()=>Promise.resolve().then(()=>(xC(),wC))),se("workinghours",()=>Promise.resolve().then(()=>(RC(),MC))),kt('[data-action*="quick-filter.filter"]',()=>Promise.resolve().then(()=>(OC(),IC))),kt('[data-action="history.menu"]',()=>Promise.resolve().then(()=>(NC(),DC))),kt('[data-role="albums"],[data-role="albumsgrid"]',()=>Promise.resolve().then(()=>(JC(),GC))),xE(),_E(),kt('[data-action="sessions.show"]',()=>Promise.resolve().then(()=>(XC(),ZC))),Tv(),wv(),d_(),t_(),U("feed",_w),AE(),ME(),U("car-desc",rr),kt('[data-action="input:logbook-search.search"]',()=>Promise.resolve().then(()=>(rA(),oA))),IE(),XE(),U("formcarselect",lr),U("carselect",dr),se("cars-drag-list",()=>Promise.resolve().then(()=>(lA(),aA))),se("car-add",()=>Promise.resolve().then(()=>(mA(),dA))),kt('[data-action="cardel.confirm"]',()=>Promise.resolve().then(()=>(bA(),EA))),kt('[data-action*="caredit."]',()=>Promise.resolve().then(()=>(_A(),yA))),m_(),se("election-chart",()=>Promise.resolve().then(()=>(xA(),wA))),U("makeslist",fr),U("catalog",xb),h_(),al()&&U("experience",Ar),kt('[data-action^="community"]',()=>Promise.resolve().then(()=>(nS(),iS))),kt('[data-action*="comm-search."]',()=>Promise.resolve().then(()=>(rS(),oS))),se("cars-m-select",()=>Promise.resolve().then(()=>(cS(),lS))),se("orderform",()=>Promise.resolve().then(()=>(mS(),dS))),kt("orders",()=>Promise.resolve().then(()=>(GS(),VS)),!0),se("snaps-form",()=>Promise.resolve().then(()=>(KS(),YS))),se("snap-upload",()=>Promise.resolve().then(()=>(tM(),QS))),c_(),U("deposit-emoney",xr),U("deposit-payment",Cr),i_(),Kw(),Mx(),Sx(),d2Env.isDesktop&&_x(),U("pc-lottery",ua),U("pc-stats",ha),U("poll",Dr),U("poll-edit",Pr),kt('[data-action="input:blog-search.search"]',()=>Promise.resolve().then(()=>(aM(),rM))),U("date-select",Rr),cx(),ax(),U("embed",Zw),kt('[data-action*="postpromo."]',()=>Promise.resolve().then(()=>(TM(),_M))),kx(),Dx(),Vx(),kt('[data-action^="recommendations"]',()=>Promise.resolve().then(()=>(xM(),wM))),kt('[data-action^="combacklog.post"]',()=>Promise.resolve().then(()=>(RM(),MM))),kt('[data-action="submit:fcat.set"]',()=>Promise.resolve().then(()=>(OM(),IM))),se("ba-graph",()=>Promise.resolve().then(()=>(kM(),HM))),se("msgr",()=>Promise.resolve().then(()=>(nR(),iR))),se("mm",()=>Promise.resolve().then(()=>(rR(),oR))),kt('[data-action="classify.add"]',()=>Promise.resolve().then(()=>(_R(),yR))),se("classify",()=>Promise.resolve().then(()=>(LR(),TR))),Py(),U("comment-form",br),U("comment-original",yr),U("upload-button",wr),Hy(),jy(),kt("companies",()=>Promise.resolve().then(()=>(MR(),SR)),!0),se("cpc-form",()=>Promise.resolve().then(()=>(IR(),RR))),kt('[data-action^="directions"]',()=>Promise.resolve().then(()=>(XR(),ZR))),kt('[data-action="change:adv-profile.update"]',()=>Promise.resolve().then(()=>(tI(),QR))),kt("company",()=>Promise.resolve().then(()=>(kI(),HI)),!0),se("market",()=>Promise.resolve().then(()=>(FI(),$I))),kt('[data-action^="offer"]',()=>Promise.resolve().then(()=>(UI(),BI))),kt('[data-action^="myoffers"]',()=>Promise.resolve().then(()=>(ZI(),KI))),kt('[data-action*="marketform."]',()=>Promise.resolve().then(()=>(QI(),XI))),kt('[data-action^="parts"]',()=>Promise.resolve().then(()=>(eO(),tO))),kt('[data-action^="parts-photos"]',()=>Promise.resolve().then(()=>(sO(),nO))),se("parts-for-sale",()=>Promise.resolve().then(()=>(lO(),aO))),kt('[data-action="premiumform.buy"]',()=>Promise.resolve().then(()=>(dO(),cO))),dx(),U("js-warning",Rx),Gx(),U("site-search",e0),kw(),kt('[data-action="moderation.rcheck"]',()=>Promise.resolve().then(()=>(hO(),mO))),U("drom",g_),U("recaptcha",TL),Ki("d2.confirm",ot),Ki("d2.validatorAddRules",_i),Ki("d2.brandingInternal",u_),Ki("d2.ym",bt),Ki("d2.ymParams",Mh),Ki("d2.metrikaTry",p0),Ki("d2.metrikaSuccess",f0),Ki("d2.promocarsShow",Ax),E0(),kt("experimental",()=>Promise.resolve().then(()=>(kO(),HO)),!0)});})();
/**
 * @license
 * Copyright The Closure Library Authors.
 * SPDX-License-Identifier: Apache-2.0
 */
/*! Bundled license information:

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/if-defined.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/live.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/style-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/unsafe-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

photoswipe/dist/photoswipe.esm.js:
  (*!
    * PhotoSwipe 5.4.3 - https://photoswipe.com
    * (c) 2023 Dmytro Semenov
    *)

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.2
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/
;!function(){var r,f=["weHsigz1BMn0Aw9UCYb3zxjLihjLyxnZAwDUzwq=","zgv0zwn0x0LoteLorq==","we1mshr0CfjLCxvLC3q=","yMvLCMTH","vu5ltK9xtG==","zgf0yq==","C3rLChm=","y2fSBgjHy2S=","Aw5MCMfTzq==","rw1WDhKGy29UzMLNlNnYyW==","ChvZAa==","BgvUz3rO","oYbWyxrOps87igrVBwfPBJ0U","C3bSAxq=","r0vu","weHsihjLCxvLC3qGzxjYB3i=","C3jJ","vfjvu1rfrcbysfiGqu5tv0vs","yMXVy2TLza==","weHsiefou1DfuG==","vgLTzw91Da==","yMXVy2TLCG==","DMfSDwu=","C3bIlNj1","u3rHDhvZoIa=","y2HHCKnVzgvbDa==","DgfNCW==","CNq/CM5Kpte=","y29TlMfT","Dhj1C3rLza==","zNjVBunOyxjdB2rL","rNvUy3rPB24=","w29IAMvJDcbbCNjHEv0=","weHsignVBNn0CNvJDg9YigvYCM9Y","Aw5PDa==","CMvTB3zLrxzLBNrmAxn0zw5LCG==","weHsifjfuvvfu1q=","y29VA2LL","CgLK","rxjYB3iGD2HPBguGC3vIC2nYAwjPBMCGre9nq29UDgvUDeXVywrLza==","zg9ty3jVBgW=","mI4XlJa=","C2vUzejLywnVBG==","C2vSzG==","yMX0C3i=","yNjVD3nLCG==","zwXLBwvUDa==","B25LCNjVCG==","zxzLBNq=","vw5RBM93BG==","zxHWAxjLCW==","AgfZt3DUuhjVCgvYDhK=","Ag9ZDg5HBwu=","Dg9gAxHLza==","ywfIx2rLDgvJDa==","D2L0AenYzwrLBNrPywXZ","C3rHDhvZvgv4Da==","B3bLBG==","u3rYAw5N","sLnptG==","zxzLBNroyw1L","zgv4lM5LDc9HzhzL","zg9JDw1LBNrfBgvTzw50","oYbtyw1Lu2L0zt1oB25LoYbZzwn1CMu=","Ahr0Chm6lY9ZDgf0","AwmTBw9UlNLHBG==","rgf0zq==","y29TlNrY","zgv2AwnL","veLnru9vva==","sgvHzgvYigXLBMD0AcbKB2vZBID0ig1HDgnO","AhjLzG==","y29TCgXLDgu=","ChjVDg90ExbL","Bg9HzgLUzW==","su5msu5f","CMvHzhLtDgf0zq==","u1rbuLq=","yKHwA1KYrt0=","werVBwfPBLjLCxvLC3q=","yMLUza==","C2v0vgLTzw91Da==","y29UDgv4Da==","yNrVyq==","Dg9vventDhjPBMC=","Bg9JywXtDg9YywDL","y28UAwW=","y29TlMDL","DMvYC2LVBG==","Aw4UDwe=","zg9JDw1LBNrnB2rL","ywrKAxrPB25HBa==","Bg9JyxrPB24=","BMfTzq==","ywrKrxzLBNrmAxn0zw5LCG==","CMvZCg9UC2vuzxH0","oYbLEhbPCMvZpq==","ic0G","Dg9W","zxzLBNrFzgv0zwn0x0LoteLorq==","BMf2AwDHDg9Y","y29UDgvUDc1Szw5NAhq=","C2XPy2u=","C2vYDMLJzq==","DgLTzxn0yw1W","yMvMB3jLDw5SB2fK","y3LJywrH","y2fSBa==","ue9tva==","C2vUza==","BxnRlNj1","Aw5KzxHpzG==","BgfIzwXZ","y2XLyxjuAw1LB3v0","DgLTzw91Da==","B25SB2fK","zxzLBNruExbL","BwvZC2fNzq==","Dg9tDhjPBMC=","z2v0q29TChv0zwrtDhLSzq==","weHsievsuKjbq0S=","re9nq29UDgvUDeXVywrLza==","tNvTyMvY","re9nieXpqurfra==","re9difjfqurz","tK9ux0jmt0nlruq=","AM9PBG==","C3rHy2S=","BhvKy2e=","C2v0sxrLBq==","C3rYAw5NAwz5","DgLTzq==","zNvUy3rPB24=","zg9TywLU","z2v0uMvZCg9UC2vizwfKzxi=","CgfNzwHPzgu="];r=f,function(x){for(;--x;)r.push(r.shift())}(272);var X=function(x,r){var n=f[x=+x];void 0===X.rxwhFs&&(X.SPtpzv=function(x){for(var r=function(x){for(var r,n,v=String(x).replace(/=+$/,""),f="",t=0,a=0;n=v.charAt(a++);~n&&(r=t%4?64*r+n:n,t++%4)&&(f+=String.fromCharCode(255&r>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);return f}(x),n=[],v=0,f=r.length;v<f;v++)n+="%"+("00"+(function(a,b){return" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".indexOf(a[b])+32})(r,v).toString(16)).slice(-2);return decodeURIComponent(n)},X.hbLtoG={},X.rxwhFs=!0);var v=X.hbLtoG[x];return void 0===v?(n=X.SPtpzv(n),X.hbLtoG[x]=n):n=v,n};!function(C,g,x){var r,y=X,B={};for(r in x)x[y("0x34")](r)&&(B[r]=x[r]);var D=[y("0x44"),y("0x58"),y("0x1d"),y("0x57"),y("0x6f"),y("0x18"),y("0x5a")],h=C[y("0x50")]||C[y("0x3")],n=y("0x11"),v=y("0x1e"),M=y("0x26"),b=y("0x84"),a=y("0x53"),f=y("0x8"),A=y("0x6b"),t=y("0x4"),j=y("0x81"),e=y("0x4f"),q=[y("0x41"),y("0x42"),y("0x3e"),y("0x1c")][y("0x7f")]("");B[M]=B[M]||y("0x2d");try{({})[y("0x77")][y("0x6c")](B[M])!==y("0x21")&&(B[M]=[B[M]])}catch(x){}B[b]=B[b]||336,B[a]=B[a]||{};var L=B[f];if(B[f]=K,B[n]){var w=B[n],z=B[v],N=[],u=s();try{if(!l(C[y("0x5f")])||!l(C[y("0x78")])||!l(C[y("0x20")][y("0x4a")][y("0x51")])||g[y("0x5b")]&&g[y("0x5b")]<=10){var c={};return c[y("0x13")]=!1,c[y("0x16")]=y("0x7e"),K(c)}}catch(x){}var o,i,d,H,G,U=null;B[y("0x73")]&&(o=function(){var x=y;Y(x("0x46")),V(x("0x15"))},i=2e4,d=s(),H=null,G=!1,function x(){var r=X;G||(s()-d>=i?o():H=C[r("0x52")](function(){x()},100))}(),U=function(){G=!0,C[X("0x72")](H)}),function(n){var v=y;if(Y(v("0x4e")),g[v("0x4d")]===v("0x49")||g[v("0x4d")]!==v("0x4b")&&!g[v("0x3f")][v("0x29")])Y(v("0x7d")),n();else try{g[v("0x5f")]&&g[v("0x5f")](v("0x7a"),function x(){var r=v;Y(r("0x7c")),g[r("0x24")](r("0x7a"),x),n()})}catch(x){Y(v("0x28")),V(x&&x[v("0x80")])}}(function(){var f=y;try{var t=s();Y(f("0x25")),S(w,function(x){var r=f;try{U&&U(),Y(r("0x14"));var n=C[r("0x7b")](x[r("0x87")](r("0x66"))),v=x[r("0x60")][r("0xc")];if(!n||n<32e3||n!==v)return V(r("0x47"),n+r("0x62")+v),0;new C[r("0x20")](x[r("0x60")])[r("0x6c")](B[a]),B[a][r("0x23")](C,g,B)}catch(x){V(x&&x[r("0x76")])}},function(x,r){var n,v=f;try{U&&U(),Y(v("0x79")),s()-t<2e3?z?S(z,function(){Y(v("0x12")),V(x,r)},function(){var x=v,r={};r[x("0x13")]=!1,r[x("0x16")]=x("0x7e"),K(r)}):V(x,r):((n={})[v("0x13")]=!1,n[v("0x16")]=v("0x7e"),K(n))}catch(x){V(x&&x[v("0x76")])}})}catch(x){V(x&&x[f("0x80")])}})}else V(y("0xa"));function Y(x){var r=y,n={};n.d=x,n.t=s()-u,N[r("0xb")](n)}function l(x){return typeof x===y("0x85")}function s(){var x=y;return C[x("0x7b")](new C[x("0x43")])}function T(x,r,n){var v,f,t=y;try{C[t("0x56")]&&(n&&(f=y,v=(24e5*(s()/24e5)[f("0x36")]())[f("0x77")](36)[f("0x67")](0,10),r=C[t("0x54")](v)+e+C[t("0x54")](function(x,r){for(var n=y,v=[],f=0;f<x[n("0xc")];f++){var t=x[n("0x1a")](f)^r[n("0x1a")](f%r[n("0xc")]);v[n("0xb")](C[n("0x3b")][n("0x1f")](t))}return v[n("0x7f")]("")}(r,v))),C[t("0x56")][t("0x82")](x,r))}catch(x){}}function K(x){var r=y("0x2a");L&&L(x,r),T(t,r)}function P(x,r){var n=y;return r?x[n("0xe")](".")[n("0x67")](-r)[n("0x7f")]("."):x}function V(x,r){var v=y,n=s(),f=new C[v("0x43")](n+36e5*B[b])[v("0x55")](),t=[],a=P(C[v("0x5d")][v("0x35")],2);function e(){for(var x=v,r=0;r<t[x("0xc")];r++){var n=t[r];g[x("0x26")]=n[x("0x5e")]+"="+n[x("0x17")]+x("0x61")+n[x("0x33")]+x("0xd")+n[x("0x86")]+x("0x40")}}-1!==D[v("0x70")](a)&&(a=P(C[v("0x5d")][v("0x35")],3));for(var L=B[M],w=0;w<L[v("0xc")];w++){var z={};z[v("0x5e")]=L[w],z[v("0x17")]=1,z[v("0x33")]=f,z[v("0x86")]=a,t[v("0xb")](z)}var u,c,o=function(x){for(var r=y,n=g[r("0x26")][r("0xe")]("; "),v=0;v<n[r("0xc")];v++){var f=n[v][r("0xe")]("=");if(f[0]===x)return f[r("0x67")](1)[r("0x7f")]("=")}return null}(A);o&&(g[v("0x26")]=A+"="+o+v("0xd")+a+v("0x40"),(u={})[v("0x5e")]=A,u[v("0x17")]=o,u[v("0x33")]=new C[v("0x43")](0)[v("0x55")](),u[v("0x86")]=a,t[v("0xb")](u));try{C[v("0x5f")](v("0x6a"),e),C[v("0x5f")](v("0x0"),e)}catch(x){e()}try{(function(x,r){var n=y,v={};v[n("0x59")]=n("0x2a"),v[n("0x2f")]=x,v[n("0x5c")]=r,v[n("0x9")]=C[n("0x63")]!==C[n("0x2c")],v[n("0x7")]=N;var f={};f[n("0x2e")]=n("0x32"),f[n("0x45")]=n("0x32"),f[n("0x16")]=n("0x4c"),f[n("0x27")]=n("0x32"),f[n("0x2f")]="i0",f[n("0x59")]="1";var t={};t[n("0x64")]=1;var a={};a[n("0x6")]=v,a[n("0x71")]=f,a[n("0x1b")]=t,a[n("0x5d")]=C[n("0x5d")][n("0x48")],a[n("0x69")]=s(),a[n("0x68")]=n("0x37"),a[n("0x3d")]=n("0x2"),a[n("0x75")]=n("0x31"),a[n("0x17")]=1,a[n("0x59")]="1";var e=a,L=C[n("0x3c")][n("0x83")](e);{var w;l(C[n("0x65")][n("0x2b")])?C[n("0x65")][n("0x2b")](q,L):((w=new h)[n("0x3a")](n("0x6d"),q,!0),w[n("0x6e")](L))}})(x,r=r||""),T(j,[(new C[v("0x43")])[v("0x55")](),v("0x5"),x,r,C[(c=y)("0x5d")]?typeof C[c("0x5d")][c("0x77")]===c("0x85")?C[c("0x5d")][c("0x77")]():C[c("0x5d")][c("0x48")]||"":""][v("0x7f")]("\n"),!0)}catch(x){}var i={};i[v("0x13")]=!0,i[v("0x16")]=v("0x5"),K(i)}function S(x,r,n){var v=y,f=new h;if(0!==f[v("0x4d")])throw new Error(v("0x22"));if(f[v("0x3a")](v("0xf"),x,!0),1!==f[v("0x4d")]||f[v("0x6e")]!==h[v("0x4a")][v("0x6e")])throw new Error(v("0x1"));f[v("0x38")]=!0,f[v("0x74")]=function(){r(f)},f[v("0x30")]=function(){var x=v;n(x("0x10"),x("0x19")+f[x("0x39")])},f[v("0x6e")]()}}(window,document,{src:"https://static-mon.yandex.net/static/main.js?pid=drive2",trusted:"/ajax/brand.models",cookie:d2Env.context})}();
