/*! For licenses information, see /assets/js/LICENSES.txt */
"use strict";(()=>{var E={};try{E.EventTarget=new EventTarget().constructor}catch{(function(e,s){var i=e.create,n=e.defineProperty,o=d.prototype;u(o,"addEventListener",function(r,a,m){for(var h=s.get(this),c=h[r]||(h[r]=[]),g=0,A=c.length;g<A;g++)if(c[g].listener===a)return;c.push({target:this,listener:a,options:m})}),u(o,"dispatchEvent",function(r){var a=s.get(this),m=a[r.type];return m&&(u(r,"target",this),u(r,"currentTarget",this),m.slice(0).some(l,r),delete r.currentTarget,delete r.target),!0}),u(o,"removeEventListener",function(r,a){for(var m=s.get(this),h=m[r]||(m[r]=[]),c=0,g=h.length;c<g;c++)if(h[c].listener===a){h.splice(c,1);return}}),E.EventTarget=d;function d(){"use strict";s.set(this,i(null))}function u(r,a,m){n(r,a,{configurable:!0,writable:!0,value:m})}function l(r){var a=r.options;return a&&a.once&&r.target.removeEventListener(this.type,r.listener),typeof r.listener=="function"?r.listener.call(r.target,this):r.listener.handleEvent(this),this._stopImmediatePropagationFlag}})(Object,new WeakMap)}var M=E.EventTarget;window.EventTarget=M;window.globalThis=window.globalThis||window;var T=(t,e)=>{let s=t.length,i,n=1;for(;!i;)if(s%n===1)n++;else{i=!0;for(let o=0,d=0;o*n<s;o++)if(d+=Math.max(...t.slice(o*n,(o+1)*n)),d>e){i=!1,n++;break}}return n};var f=class extends HTMLElement{constructor(){super(),this.wrapper=document.createElement("div"),this.wrapper.append(document.createElement("slot")),this.attachShadow({mode:"open"}),this.shadowRoot.append(this.wrapper),this.observer=new MutationObserver(()=>this.throttledFit())}connectedCallback(){this.observer.observe(this,{subtree:!0,characterData:!0}),this.throttledFit()}static get observedAttributes(){return["behavior"]}get behavior(){return this.getAttribute("behavior")||""}set behavior(e){this.setAttribute("behavior",e||"")}attributeChangedCallback(){this.throttledFit()}throttledFit(){requestAnimationFrame(()=>this.fit())}fit(){let e=Number.parseFloat(getComputedStyle(this).getPropertyValue("font-size"));if(Number.isNaN(e))return;let{clientWidth:s}=this,i=this.behavior==="grow"?e:9,n=this.behavior==="shrink"?e:100;for(n++;n-i>1;){let o=Math.floor((i+n)/2);this.wrapper.style.fontSize=`${o}px`,this.scrollWidth>s?n=o:i=o}this.wrapper.style.fontSize=`${i}px`}};var y=t=>{if(!d2Env.isApp)return t;let e=t.indexOf("base64");return e===-1?t:t.slice(e+7)};window.xImgLoaded=window.xImgLoaded||new Set;var S="loading"in HTMLImageElement.prototype,b,_=t=>{b||(b=new IntersectionObserver(e=>{for(let s of e)if(s.isIntersecting){let i=s.target;b.unobserve(i),i.load()}},{rootMargin:"200px 0px"})),b.observe(t)},v=class extends HTMLElement{connectedCallback(){if(this.img=this.querySelector("img"),this.img)this.init();else{let e=new MutationObserver(()=>{this.img=this.querySelector("img"),this.img&&(e.disconnect(),this.init())});e.observe(this,{childList:!0})}}static get observedAttributes(){return["src"]}get color(){return this.style.getPropertyValue("--color").trim()}get preview(){return this.getAttribute("preview")||this.src||""}get data(){let e=this.preview;return{element:this.img,url:y(this.src||this.img.src),width:Number(this.getAttribute("width")),height:Number(this.getAttribute("height")),...e&&(!d2Env.isApp||e.startsWith("data:image/png"))&&{inline:y(e)},color:this.color}}get src(){return this.getAttribute("src")||""}set src(e){this.setAttribute("src",e)}attributeChangedCallback(e,s,i){this.hasAttribute("defined")&&e==="src"&&i&&this.img&&(this.img.src=i)}load(){this.img.offsetWidth,this.img.style.transition="opacity 0.3s ease-in",this.img.addEventListener("load",this,{once:!0,passive:!0}),this.img.addEventListener("error",this,{once:!0,passive:!0}),this.img.addEventListener("abort",this,{once:!0,passive:!0}),this.img.src=this.src}handleEvent(e){e.type==="transitionend"?this.cleanup():(xImgLoaded.add(this.img.src),e.type!=="error"&&e.type!=="abort"&&(this.img.addEventListener("transitionend",this,{once:!0}),this.img.style.opacity="1",setTimeout(()=>this.cleanup(),340)))}init(){if(this.hasAttribute("defined")&&this.cleanup(),!this.src)this.src=this.img.src;else if(this.src!==this.img.src){this.setAttribute("preview",this.img.src);let e=this.querySelector("div");e||(e=document.createElement("div"),this.prepend(e)),e.style.backgroundImage=`url(${this.img.src})`,this.img.style.opacity="0",S?this.load():_(this)}this.setAttribute("defined","")}cleanup(){var e;this.img.removeAttribute("style"),(e=this.querySelector("div"))==null||e.remove()}};var k=/android/i.test(navigator.userAgent);var L=t=>document.documentElement.classList.add(t),x=()=>{let t=/OS (\d+)_(\d+)_?(\d+)?/.exec(navigator.appVersion),e=t?Number.parseInt(t[1],10):0;e&&e<=12&&L("ios12-"),d2Env.isApp&&(window.screen.width/window.screen.height).toPrecision(3)==="0.462"&&L("bottom-inset"),k&&L("android")};var p=[],I=t=>{let e=t;do if(e.nextSibling)return!0;while(e=e.parentNode);return!1},H=new MutationObserver(t=>{for(let{addedNodes:e}of t)for(let s of e)if(s.nodeType===1){for(let i of p)if(s.matches(i[0]))if(!i[2]||I(s))i[1](s);else{let n=new MutationObserver(()=>{I(s)&&(n.disconnect(),i[1](s))});n.observe(s.parentNode,{childList:!0,subtree:!0})}s.tagName==="FOOTER"&&H.disconnect()}});H.observe(document.documentElement,{childList:!0,subtree:!0});window.__run=t=>typeof t=="function"?__run.q.push(t):(...e)=>{__run.q.push([t,e])};window.__run.q=[];window.d2=window.d2||{};window.d2.brandingRender=t=>__run("d2.brandingInternal")(t);if(d2Env.isDesktop){let t=localStorage.getItem("mainNavPreferences");if(t){let e=t.split(",");p.push(['.c-nav-list[data-id^="section-"]',s=>{let i=s.closest('[data-slot~="nav.section"]');if(i){let n=e.includes(s.dataset.id.replace("section-",""));i.classList.toggle("is-active",n),s.style.display=n?"":"none"}},!1])}}p.push(['[data-role~="makeslist"]',t=>{if(t.classList.contains("is-parked")){let e=[...t.children],s=t.classList.contains("is-open");t.classList.add("is-open");let i=t.offsetWidth,n=e[0].offsetHeight,o=e.map(r=>r.offsetWidth),d=e.map(r=>s||r.classList.contains("is-important")),u=o.filter((r,a)=>d[a]),l=T(u,i);t.style.maxHeight=`${l*n}px`,t.classList.toggle("is-open",s),t.classList.remove("is-parked")}},!0]);customElements.define("x-img",v);customElements.define("fit-text",f);x();p.push(['[data-role~="dv"]',t=>{let e=()=>{t.getBoundingClientRect().height>0&&(s.disconnect(),t.classList.remove("is-off"))},s=window.ResizeObserver?new ResizeObserver(e):new MutationObserver(e);s.observe(t,window.ResizeObserver?{}:{childList:!0,subtree:!0,attributes:!0}),e()},!1]);if(d2Env.themes){let t="theme",e=window.matchMedia("(prefers-color-scheme:dark)"),s,i,n=()=>{d2Env.isApp||(i==="system"?localStorage.removeItem(t):localStorage.setItem(t,i))},o=()=>{s&&(s.classList.toggle("dark",i==="dark"),s.classList.toggle("light",i==="light"),s.classList.toggle("system",i==="system"));let l=i==="system"?e.matches?"dark":"light":i;document.documentElement.classList.toggle("dark",l==="dark"),document.documentElement.classList.toggle("light",l==="light")},d=()=>{var l;i=d2Env.isApp?"system":(l=localStorage.getItem(t))!=null?l:"system",n(),o()},u=l=>{var m;if(s)return;let r=((m=document.documentElement.getAttribute("lang"))!=null?m:"ru").startsWith("ru"),a=[["light","Светлая тема","Light theme"],["dark","Тёмная тема","Dark theme"],["system","Как в системе","System theme"]];s=document.createElement("details"),d2Env.userId||(s.open=!0),s.className="c-theme-switch",s.innerHTML=`<summary class="${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"}">${l.textContent}</summary>`;for(let h of a){let c=document.createElement("button");Object.assign(c,{type:"button",className:`r-button-unstyled ${d2Env.isMobile?"c-nav-block__item":"c-top-dropdown__link"} c-theme-switch__item`,value:h[0],textContent:r?h[1]:h[2]}),s.append(c)}l.replaceWith(s),s.addEventListener("click",h=>{let c=h.target;if(c.value){i=c.value,n(),o();let g=document.querySelector('[data-slot~="top-menu.button"]')||document.querySelector('[data-role~="top-menu"]');g&&g.click(),d2Env.userId&&(s.open=!1)}}),o()};d(),e.addEventListener?e.addEventListener("change",d):e.addListener(d),d2Env.isApp||(window.addEventListener("storage",l=>{l.key===t&&d()}),p.push(['a[href="drive://themes/"]',u,!1]))}if(d2Env.isMobile){let t=window.location.hash;t.startsWith("#a")&&p.push([t,()=>{setTimeout(()=>{var e;(e=document.querySelector(t))==null||e.scrollIntoView({behavior:"smooth",block:"start"})},50)},!1])}var w,O=()=>(w||(w=new IntersectionObserver(t=>{for(let e of t)if(e.isIntersecting&&(w.unobserve(e.target),delete e.target.dataset.role,"YaHeaderBiddingSettings"in window)){let s=e.target.nextElementSibling;s.removeAttribute("type"),s.replaceWith(s)}},{rootMargin:"800px 0px"})),w);p.push(['[data-role="dv-extra"]',t=>{O().observe(t)},!1]);})();
